import{getAuth as S0,GoogleAuthProvider as E0,signInWithPopup as T0,signOut as w0,onAuthStateChanged as N0}from"https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";import{initializeApp as A0}from"https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";import{getFirestore as _0,query as Lc,collection as Io,orderBy as Em,onSnapshot as Tm,addDoc as jc,serverTimestamp as Uc,doc as Fs,updateDoc as ef,where as M0,getDocs as R0,deleteDoc as wm}from"https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";import{getStorage as I0,getDownloadURL as Sa,ref as Gn,uploadBytes as Ea,deleteObject as zc}from"https://www.gstatic.com/firebasejs/9.23.0/firebase-storage.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerPolicy&&(s.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?s.credentials="include":l.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(l){if(l.ep)return;l.ep=!0;const s=n(l);fetch(l.href,s)}})();const k0="modulepreload",D0=function(e){return"/"+e},tf={},L0=function(t,n,o){if(!n||n.length===0)return t();const l=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=D0(s),s in tf)return;tf[s]=!0;const i=s.endsWith(".css"),r=i?'[rel="stylesheet"]':"";if(!!o)for(let h=l.length-1;h>=0;h--){const p=l[h];if(p.href===s&&(!i||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${r}`))return;const f=document.createElement("link");if(f.rel=i?"stylesheet":k0,i||(f.as="script",f.crossOrigin=""),f.href=s,document.head.appendChild(f),i)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t()).catch(s=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=s,window.dispatchEvent(i),!i.defaultPrevented)throw s})};function Nm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Am={exports:{}},nr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j0=Symbol.for("react.transitional.element"),U0=Symbol.for("react.fragment");function _m(e,t,n){var o=null;if(n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),"key"in t){n={};for(var l in t)l!=="key"&&(n[l]=t[l])}else n=t;return t=n.ref,{$$typeof:j0,type:e,key:o,ref:t!==void 0?t:null,props:n}}nr.Fragment=U0;nr.jsx=_m;nr.jsxs=_m;Am.exports=nr;var a=Am.exports,Mm={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fu=Symbol.for("react.transitional.element"),z0=Symbol.for("react.portal"),P0=Symbol.for("react.fragment"),B0=Symbol.for("react.strict_mode"),q0=Symbol.for("react.profiler"),G0=Symbol.for("react.consumer"),V0=Symbol.for("react.context"),H0=Symbol.for("react.forward_ref"),O0=Symbol.for("react.suspense"),F0=Symbol.for("react.memo"),Rm=Symbol.for("react.lazy"),Y0=Symbol.for("react.activity"),nf=Symbol.iterator;function J0(e){return e===null||typeof e!="object"?null:(e=nf&&e[nf]||e["@@iterator"],typeof e=="function"?e:null)}var Im={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},km=Object.assign,Dm={};function vs(e,t,n){this.props=e,this.context=t,this.refs=Dm,this.updater=n||Im}vs.prototype.isReactComponent={};vs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};vs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Lm(){}Lm.prototype=vs.prototype;function Yu(e,t,n){this.props=e,this.context=t,this.refs=Dm,this.updater=n||Im}var Ju=Yu.prototype=new Lm;Ju.constructor=Yu;km(Ju,vs.prototype);Ju.isPureReactComponent=!0;var of=Array.isArray;function Pc(){}var gt={H:null,A:null,T:null,S:null},jm=Object.prototype.hasOwnProperty;function Xu(e,t,n){var o=n.ref;return{$$typeof:Fu,type:e,key:t,ref:o!==void 0?o:null,props:n}}function X0(e,t){return Xu(e.type,t,e.props)}function $u(e){return typeof e=="object"&&e!==null&&e.$$typeof===Fu}function $0(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var lf=/\/+/g;function Jr(e,t){return typeof e=="object"&&e!==null&&e.key!=null?$0(""+e.key):t.toString(36)}function K0(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(Pc,Pc):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Ll(e,t,n,o,l){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(s){case"bigint":case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Fu:case z0:i=!0;break;case Rm:return i=e._init,Ll(i(e._payload),t,n,o,l)}}if(i)return l=l(e),i=o===""?"."+Jr(e,0):o,of(l)?(n="",i!=null&&(n=i.replace(lf,"$&/")+"/"),Ll(l,t,n,"",function(f){return f})):l!=null&&($u(l)&&(l=X0(l,n+(l.key==null||e&&e.key===l.key?"":(""+l.key).replace(lf,"$&/")+"/")+i)),t.push(l)),1;i=0;var r=o===""?".":o+":";if(of(e))for(var u=0;u<e.length;u++)o=e[u],s=r+Jr(o,u),i+=Ll(o,t,n,s,l);else if(u=J0(e),typeof u=="function")for(e=u.call(e),u=0;!(o=e.next()).done;)o=o.value,s=r+Jr(o,u++),i+=Ll(o,t,n,s,l);else if(s==="object"){if(typeof e.then=="function")return Ll(K0(e),t,n,o,l);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return i}function qi(e,t,n){if(e==null)return e;var o=[],l=0;return Ll(e,o,"","",function(s){return t.call(n,s,l++)}),o}function Z0(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var sf=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Q0={map:qi,forEach:function(e,t,n){qi(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return qi(e,function(){t++}),t},toArray:function(e){return qi(e,function(t){return t})||[]},only:function(e){if(!$u(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ie.Activity=Y0;Ie.Children=Q0;Ie.Component=vs;Ie.Fragment=P0;Ie.Profiler=q0;Ie.PureComponent=Yu;Ie.StrictMode=B0;Ie.Suspense=O0;Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=gt;Ie.__COMPILER_RUNTIME={__proto__:null,c:function(e){return gt.H.useMemoCache(e)}};Ie.cache=function(e){return function(){return e.apply(null,arguments)}};Ie.cacheSignal=function(){return null};Ie.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var o=km({},e.props),l=e.key;if(t!=null)for(s in t.key!==void 0&&(l=""+t.key),t)!jm.call(t,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&t.ref===void 0||(o[s]=t[s]);var s=arguments.length-2;if(s===1)o.children=n;else if(1<s){for(var i=Array(s),r=0;r<s;r++)i[r]=arguments[r+2];o.children=i}return Xu(e.type,l,o)};Ie.createContext=function(e){return e={$$typeof:V0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:G0,_context:e},e};Ie.createElement=function(e,t,n){var o,l={},s=null;if(t!=null)for(o in t.key!==void 0&&(s=""+t.key),t)jm.call(t,o)&&o!=="key"&&o!=="__self"&&o!=="__source"&&(l[o]=t[o]);var i=arguments.length-2;if(i===1)l.children=n;else if(1<i){for(var r=Array(i),u=0;u<i;u++)r[u]=arguments[u+2];l.children=r}if(e&&e.defaultProps)for(o in i=e.defaultProps,i)l[o]===void 0&&(l[o]=i[o]);return Xu(e,s,l)};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(e){return{$$typeof:H0,render:e}};Ie.isValidElement=$u;Ie.lazy=function(e){return{$$typeof:Rm,_payload:{_status:-1,_result:e},_init:Z0}};Ie.memo=function(e,t){return{$$typeof:F0,type:e,compare:t===void 0?null:t}};Ie.startTransition=function(e){var t=gt.T,n={};gt.T=n;try{var o=e(),l=gt.S;l!==null&&l(n,o),typeof o=="object"&&o!==null&&typeof o.then=="function"&&o.then(Pc,sf)}catch(s){sf(s)}finally{t!==null&&n.types!==null&&(t.types=n.types),gt.T=t}};Ie.unstable_useCacheRefresh=function(){return gt.H.useCacheRefresh()};Ie.use=function(e){return gt.H.use(e)};Ie.useActionState=function(e,t,n){return gt.H.useActionState(e,t,n)};Ie.useCallback=function(e,t){return gt.H.useCallback(e,t)};Ie.useContext=function(e){return gt.H.useContext(e)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(e,t){return gt.H.useDeferredValue(e,t)};Ie.useEffect=function(e,t){return gt.H.useEffect(e,t)};Ie.useEffectEvent=function(e){return gt.H.useEffectEvent(e)};Ie.useId=function(){return gt.H.useId()};Ie.useImperativeHandle=function(e,t,n){return gt.H.useImperativeHandle(e,t,n)};Ie.useInsertionEffect=function(e,t){return gt.H.useInsertionEffect(e,t)};Ie.useLayoutEffect=function(e,t){return gt.H.useLayoutEffect(e,t)};Ie.useMemo=function(e,t){return gt.H.useMemo(e,t)};Ie.useOptimistic=function(e,t){return gt.H.useOptimistic(e,t)};Ie.useReducer=function(e,t,n){return gt.H.useReducer(e,t,n)};Ie.useRef=function(e){return gt.H.useRef(e)};Ie.useState=function(e){return gt.H.useState(e)};Ie.useSyncExternalStore=function(e,t,n){return gt.H.useSyncExternalStore(e,t,n)};Ie.useTransition=function(){return gt.H.useTransition()};Ie.version="19.2.0";Mm.exports=Ie;var C=Mm.exports;const Um=Nm(C);var zm={exports:{}},or={},Pm={exports:{}},Bm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,U){var G=z.length;z.push(U);e:for(;0<G;){var J=G-1>>>1,P=z[J];if(0<l(P,U))z[J]=U,z[G]=P,G=J;else break e}}function n(z){return z.length===0?null:z[0]}function o(z){if(z.length===0)return null;var U=z[0],G=z.pop();if(G!==U){z[0]=G;e:for(var J=0,P=z.length,q=P>>>1;J<q;){var Q=2*(J+1)-1,X=z[Q],he=Q+1,pe=z[he];if(0>l(X,G))he<P&&0>l(pe,X)?(z[J]=pe,z[he]=G,J=he):(z[J]=X,z[Q]=G,J=Q);else if(he<P&&0>l(pe,G))z[J]=pe,z[he]=G,J=he;else break e}}return U}function l(z,U){var G=z.sortIndex-U.sortIndex;return G!==0?G:z.id-U.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var i=Date,r=i.now();e.unstable_now=function(){return i.now()-r}}var u=[],f=[],h=1,p=null,m=3,g=!1,E=!1,T=!1,M=!1,y=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;function S(z){for(var U=n(f);U!==null;){if(U.callback===null)o(f);else if(U.startTime<=z)o(f),U.sortIndex=U.expirationTime,t(u,U);else break;U=n(f)}}function N(z){if(T=!1,S(z),!E)if(n(u)!==null)E=!0,L||(L=!0,_());else{var U=n(f);U!==null&&ee(N,U.startTime-z)}}var L=!1,A=-1,b=5,I=-1;function w(){return M?!0:!(e.unstable_now()-I<b)}function j(){if(M=!1,L){var z=e.unstable_now();I=z;var U=!0;try{e:{E=!1,T&&(T=!1,x(A),A=-1),g=!0;var G=m;try{t:{for(S(z),p=n(u);p!==null&&!(p.expirationTime>z&&w());){var J=p.callback;if(typeof J=="function"){p.callback=null,m=p.priorityLevel;var P=J(p.expirationTime<=z);if(z=e.unstable_now(),typeof P=="function"){p.callback=P,S(z),U=!0;break t}p===n(u)&&o(u),S(z)}else o(u);p=n(u)}if(p!==null)U=!0;else{var q=n(f);q!==null&&ee(N,q.startTime-z),U=!1}}break e}finally{p=null,m=G,g=!1}U=void 0}}finally{U?_():L=!1}}}var _;if(typeof v=="function")_=function(){v(j)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,H=R.port2;R.port1.onmessage=j,_=function(){H.postMessage(null)}}else _=function(){y(j,0)};function ee(z,U){A=y(function(){z(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(z){switch(m){case 1:case 2:case 3:var U=3;break;default:U=m}var G=m;m=U;try{return z()}finally{m=G}},e.unstable_requestPaint=function(){M=!0},e.unstable_runWithPriority=function(z,U){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var G=m;m=z;try{return U()}finally{m=G}},e.unstable_scheduleCallback=function(z,U,G){var J=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?J+G:J):G=J,z){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=G+P,z={id:h++,callback:U,priorityLevel:z,startTime:G,expirationTime:P,sortIndex:-1},G>J?(z.sortIndex=G,t(f,z),n(u)===null&&z===n(f)&&(T?(x(A),A=-1):T=!0,ee(N,G-J))):(z.sortIndex=P,t(u,z),E||g||(E=!0,L||(L=!0,_()))),z},e.unstable_shouldYield=w,e.unstable_wrapCallback=function(z){var U=m;return function(){var G=m;m=U;try{return z.apply(this,arguments)}finally{m=G}}}})(Bm);Pm.exports=Bm;var W0=Pm.exports,qm={exports:{}},Xt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ev=C;function Gm(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function _o(){}var Jt={d:{f:_o,r:function(){throw Error(Gm(522))},D:_o,C:_o,L:_o,m:_o,X:_o,S:_o,M:_o},p:0,findDOMNode:null},tv=Symbol.for("react.portal");function nv(e,t,n){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:tv,key:o==null?null:""+o,children:e,containerInfo:t,implementation:n}}var Ys=ev.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function lr(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Xt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Jt;Xt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(Gm(299));return nv(e,t,null,n)};Xt.flushSync=function(e){var t=Ys.T,n=Jt.p;try{if(Ys.T=null,Jt.p=2,e)return e()}finally{Ys.T=t,Jt.p=n,Jt.d.f()}};Xt.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Jt.d.C(e,t))};Xt.prefetchDNS=function(e){typeof e=="string"&&Jt.d.D(e)};Xt.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,o=lr(n,t.crossOrigin),l=typeof t.integrity=="string"?t.integrity:void 0,s=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Jt.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:o,integrity:l,fetchPriority:s}):n==="script"&&Jt.d.X(e,{crossOrigin:o,integrity:l,fetchPriority:s,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Xt.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=lr(t.as,t.crossOrigin);Jt.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Jt.d.M(e)};Xt.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,o=lr(n,t.crossOrigin);Jt.d.L(e,n,{crossOrigin:o,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Xt.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=lr(t.as,t.crossOrigin);Jt.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Jt.d.m(e)};Xt.requestFormReset=function(e){Jt.d.r(e)};Xt.unstable_batchedUpdates=function(e,t){return e(t)};Xt.useFormState=function(e,t,n){return Ys.H.useFormState(e,t,n)};Xt.useFormStatus=function(){return Ys.H.useHostTransitionStatus()};Xt.version="19.2.0";function Vm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Vm)}catch(e){console.error(e)}}Vm(),qm.exports=Xt;var ov=qm.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dt=W0,Hm=C,lv=ov;function Y(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Om(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Si(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Fm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ym(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function af(e){if(Si(e)!==e)throw Error(Y(188))}function sv(e){var t=e.alternate;if(!t){if(t=Si(e),t===null)throw Error(Y(188));return t!==e?null:e}for(var n=e,o=t;;){var l=n.return;if(l===null)break;var s=l.alternate;if(s===null){if(o=l.return,o!==null){n=o;continue}break}if(l.child===s.child){for(s=l.child;s;){if(s===n)return af(l),e;if(s===o)return af(l),t;s=s.sibling}throw Error(Y(188))}if(n.return!==o.return)n=l,o=s;else{for(var i=!1,r=l.child;r;){if(r===n){i=!0,n=l,o=s;break}if(r===o){i=!0,o=l,n=s;break}r=r.sibling}if(!i){for(r=s.child;r;){if(r===n){i=!0,n=s,o=l;break}if(r===o){i=!0,o=s,n=l;break}r=r.sibling}if(!i)throw Error(Y(189))}}if(n.alternate!==o)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?e:t}function Jm(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=Jm(e),t!==null)return t;e=e.sibling}return null}var yt=Object.assign,iv=Symbol.for("react.element"),Gi=Symbol.for("react.transitional.element"),qs=Symbol.for("react.portal"),zl=Symbol.for("react.fragment"),Xm=Symbol.for("react.strict_mode"),Bc=Symbol.for("react.profiler"),$m=Symbol.for("react.consumer"),co=Symbol.for("react.context"),Ku=Symbol.for("react.forward_ref"),qc=Symbol.for("react.suspense"),Gc=Symbol.for("react.suspense_list"),Zu=Symbol.for("react.memo"),Mo=Symbol.for("react.lazy"),Vc=Symbol.for("react.activity"),av=Symbol.for("react.memo_cache_sentinel"),rf=Symbol.iterator;function ks(e){return e===null||typeof e!="object"?null:(e=rf&&e[rf]||e["@@iterator"],typeof e=="function"?e:null)}var rv=Symbol.for("react.client.reference");function Hc(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===rv?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case zl:return"Fragment";case Bc:return"Profiler";case Xm:return"StrictMode";case qc:return"Suspense";case Gc:return"SuspenseList";case Vc:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case qs:return"Portal";case co:return e.displayName||"Context";case $m:return(e._context.displayName||"Context")+".Consumer";case Ku:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Zu:return t=e.displayName||null,t!==null?t:Hc(e.type)||"Memo";case Mo:t=e._payload,e=e._init;try{return Hc(e(t))}catch{}}return null}var Gs=Array.isArray,Ne=Hm.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ze=lv.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,dl={pending:!1,data:null,method:null,action:null},Oc=[],Pl=-1;function $n(e){return{current:e}}function Ut(e){0>Pl||(e.current=Oc[Pl],Oc[Pl]=null,Pl--)}function ct(e,t){Pl++,Oc[Pl]=e.current,e.current=t}var Jn=$n(null),ri=$n(null),Vo=$n(null),Ta=$n(null);function wa(e,t){switch(ct(Vo,t),ct(ri,e),ct(Jn,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?ph(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=ph(t),e=mx(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Ut(Jn),ct(Jn,e)}function is(){Ut(Jn),Ut(ri),Ut(Vo)}function Fc(e){e.memoizedState!==null&&ct(Ta,e);var t=Jn.current,n=mx(t,e.type);t!==n&&(ct(ri,e),ct(Jn,n))}function Na(e){ri.current===e&&(Ut(Jn),Ut(ri)),Ta.current===e&&(Ut(Ta),vi._currentValue=dl)}var Xr,cf;function al(e){if(Xr===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Xr=t&&t[1]||"",cf=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xr+e+cf}var $r=!1;function Kr(e,t){if(!e||$r)return"";$r=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(t){var p=function(){throw Error()};if(Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(g){var m=g}Reflect.construct(e,[],p)}else{try{p.call()}catch(g){m=g}e.call(p.prototype)}}else{try{throw Error()}catch(g){m=g}(p=e())&&typeof p.catch=="function"&&p.catch(function(){})}}catch(g){if(g&&m&&typeof g.stack=="string")return[g.stack,m.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var l=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");l&&l.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=o.DetermineComponentFrameRoot(),i=s[0],r=s[1];if(i&&r){var u=i.split(`
`),f=r.split(`
`);for(l=o=0;o<u.length&&!u[o].includes("DetermineComponentFrameRoot");)o++;for(;l<f.length&&!f[l].includes("DetermineComponentFrameRoot");)l++;if(o===u.length||l===f.length)for(o=u.length-1,l=f.length-1;1<=o&&0<=l&&u[o]!==f[l];)l--;for(;1<=o&&0<=l;o--,l--)if(u[o]!==f[l]){if(o!==1||l!==1)do if(o--,l--,0>l||u[o]!==f[l]){var h=`
`+u[o].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}while(1<=o&&0<=l);break}}}finally{$r=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?al(n):""}function cv(e,t){switch(e.tag){case 26:case 27:case 5:return al(e.type);case 16:return al("Lazy");case 13:return e.child!==t&&t!==null?al("Suspense Fallback"):al("Suspense");case 19:return al("SuspenseList");case 0:case 15:return Kr(e.type,!1);case 11:return Kr(e.type.render,!1);case 1:return Kr(e.type,!0);case 31:return al("Activity");default:return""}}function uf(e){try{var t="",n=null;do t+=cv(e,n),n=e,e=e.return;while(e);return t}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Yc=Object.prototype.hasOwnProperty,Qu=Dt.unstable_scheduleCallback,Zr=Dt.unstable_cancelCallback,uv=Dt.unstable_shouldYield,dv=Dt.unstable_requestPaint,pn=Dt.unstable_now,fv=Dt.unstable_getCurrentPriorityLevel,Km=Dt.unstable_ImmediatePriority,Zm=Dt.unstable_UserBlockingPriority,Aa=Dt.unstable_NormalPriority,hv=Dt.unstable_LowPriority,Qm=Dt.unstable_IdlePriority,pv=Dt.log,mv=Dt.unstable_setDisableYieldValue,Ei=null,mn=null;function Uo(e){if(typeof pv=="function"&&mv(e),mn&&typeof mn.setStrictMode=="function")try{mn.setStrictMode(Ei,e)}catch{}}var gn=Math.clz32?Math.clz32:xv,gv=Math.log,yv=Math.LN2;function xv(e){return e>>>=0,e===0?32:31-(gv(e)/yv|0)|0}var Vi=256,Hi=262144,Oi=4194304;function rl(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function sr(e,t,n){var o=e.pendingLanes;if(o===0)return 0;var l=0,s=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var r=o&134217727;return r!==0?(o=r&~s,o!==0?l=rl(o):(i&=r,i!==0?l=rl(i):n||(n=r&~e,n!==0&&(l=rl(n))))):(r=o&~s,r!==0?l=rl(r):i!==0?l=rl(i):n||(n=o&~e,n!==0&&(l=rl(n)))),l===0?0:t!==0&&t!==l&&!(t&s)&&(s=l&-l,n=t&-t,s>=n||s===32&&(n&4194048)!==0)?t:l}function Ti(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function vv(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wm(){var e=Oi;return Oi<<=1,!(Oi&62914560)&&(Oi=4194304),e}function Qr(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function wi(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function bv(e,t,n,o,l,s){var i=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var r=e.entanglements,u=e.expirationTimes,f=e.hiddenUpdates;for(n=i&~n;0<n;){var h=31-gn(n),p=1<<h;r[h]=0,u[h]=-1;var m=f[h];if(m!==null)for(f[h]=null,h=0;h<m.length;h++){var g=m[h];g!==null&&(g.lane&=-536870913)}n&=~p}o!==0&&eg(e,o,0),s!==0&&l===0&&e.tag!==0&&(e.suspendedLanes|=s&~(i&~t))}function eg(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var o=31-gn(t);e.entangledLanes|=t,e.entanglements[o]=e.entanglements[o]|1073741824|n&261930}function tg(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var o=31-gn(n),l=1<<o;l&t|e[o]&t&&(e[o]|=t),n&=~l}}function ng(e,t){var n=t&-t;return n=n&42?1:Wu(n),n&(e.suspendedLanes|t)?0:n}function Wu(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ed(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function og(){var e=Ze.p;return e!==0?e:(e=window.event,e===void 0?32:Nx(e.type))}function df(e,t){var n=Ze.p;try{return Ze.p=e,t()}finally{Ze.p=n}}var tl=Math.random().toString(36).slice(2),qt="__reactFiber$"+tl,nn="__reactProps$"+tl,bs="__reactContainer$"+tl,Jc="__reactEvents$"+tl,Cv="__reactListeners$"+tl,Sv="__reactHandles$"+tl,ff="__reactResources$"+tl,Ni="__reactMarker$"+tl;function td(e){delete e[qt],delete e[nn],delete e[Jc],delete e[Cv],delete e[Sv]}function Bl(e){var t=e[qt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[bs]||n[qt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=vh(e);e!==null;){if(n=e[qt])return n;e=vh(e)}return t}e=n,n=e.parentNode}return null}function Cs(e){if(e=e[qt]||e[bs]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Vs(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(Y(33))}function Kl(e){var t=e[ff];return t||(t=e[ff]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function jt(e){e[Ni]=!0}var lg=new Set,sg={};function El(e,t){as(e,t),as(e+"Capture",t)}function as(e,t){for(sg[e]=t,e=0;e<t.length;e++)lg.add(t[e])}var Ev=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),hf={},pf={};function Tv(e){return Yc.call(pf,e)?!0:Yc.call(hf,e)?!1:Ev.test(e)?pf[e]=!0:(hf[e]=!0,!1)}function la(e,t,n){if(Tv(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var o=t.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Fi(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function eo(e,t,n,o){if(o===null)e.removeAttribute(n);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+o)}}function En(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ig(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function wv(e,t,n){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var l=o.get,s=o.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(i){n=""+i,s.call(this,i)}}),Object.defineProperty(e,t,{enumerable:o.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Xc(e){if(!e._valueTracker){var t=ig(e)?"checked":"value";e._valueTracker=wv(e,t,""+e[t])}}function ag(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),o="";return e&&(o=ig(e)?e.checked?"true":"false":e.value),e=o,e!==n?(t.setValue(e),!0):!1}function _a(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Nv=/[\n"\\]/g;function Nn(e){return e.replace(Nv,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function $c(e,t,n,o,l,s,i,r){e.name="",i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"?e.type=i:e.removeAttribute("type"),t!=null?i==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+En(t)):e.value!==""+En(t)&&(e.value=""+En(t)):i!=="submit"&&i!=="reset"||e.removeAttribute("value"),t!=null?Kc(e,i,En(t)):n!=null?Kc(e,i,En(n)):o!=null&&e.removeAttribute("value"),l==null&&s!=null&&(e.defaultChecked=!!s),l!=null&&(e.checked=l&&typeof l!="function"&&typeof l!="symbol"),r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?e.name=""+En(r):e.removeAttribute("name")}function rg(e,t,n,o,l,s,i,r){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null)){Xc(e);return}n=n!=null?""+En(n):"",t=t!=null?""+En(t):n,r||t===e.value||(e.value=t),e.defaultValue=t}o=o??l,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=r?e.checked:!!o,e.defaultChecked=!!o,i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.name=i),Xc(e)}function Kc(e,t,n){t==="number"&&_a(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Zl(e,t,n,o){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&o&&(e[n].defaultSelected=!0)}else{for(n=""+En(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,o&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function cg(e,t,n){if(t!=null&&(t=""+En(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+En(n):""}function ug(e,t,n,o){if(t==null){if(o!=null){if(n!=null)throw Error(Y(92));if(Gs(o)){if(1<o.length)throw Error(Y(93));o=o[0]}n=o}n==null&&(n=""),t=n}n=En(t),e.defaultValue=n,o=e.textContent,o===n&&o!==""&&o!==null&&(e.value=o),Xc(e)}function rs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Av=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function mf(e,t,n){var o=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?o?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":o?e.setProperty(t,n):typeof n!="number"||n===0||Av.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function dg(e,t,n){if(t!=null&&typeof t!="object")throw Error(Y(62));if(e=e.style,n!=null){for(var o in n)!n.hasOwnProperty(o)||t!=null&&t.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var l in t)o=t[l],t.hasOwnProperty(l)&&n[l]!==o&&mf(e,l,o)}else for(var s in t)t.hasOwnProperty(s)&&mf(e,s,t[s])}function nd(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _v=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Mv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function sa(e){return Mv.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function uo(){}var Zc=null;function od(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ql=null,Ql=null;function gf(e){var t=Cs(e);if(t&&(e=t.stateNode)){var n=e[nn]||null;e:switch(e=t.stateNode,t.type){case"input":if($c(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Nn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var o=n[t];if(o!==e&&o.form===e.form){var l=o[nn]||null;if(!l)throw Error(Y(90));$c(o,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name)}}for(t=0;t<n.length;t++)o=n[t],o.form===e.form&&ag(o)}break e;case"textarea":cg(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Zl(e,!!n.multiple,t,!1)}}}var Wr=!1;function fg(e,t,n){if(Wr)return e(t,n);Wr=!0;try{var o=e(t);return o}finally{if(Wr=!1,(ql!==null||Ql!==null)&&(yr(),ql&&(t=ql,e=Ql,Ql=ql=null,gf(t),e)))for(t=0;t<e.length;t++)gf(e[t])}}function ci(e,t){var n=e.stateNode;if(n===null)return null;var o=n[nn]||null;if(o===null)return null;n=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Y(231,t,typeof n));return n}var go=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qc=!1;if(go)try{var Ds={};Object.defineProperty(Ds,"passive",{get:function(){Qc=!0}}),window.addEventListener("test",Ds,Ds),window.removeEventListener("test",Ds,Ds)}catch{Qc=!1}var zo=null,ld=null,ia=null;function hg(){if(ia)return ia;var e,t=ld,n=t.length,o,l="value"in zo?zo.value:zo.textContent,s=l.length;for(e=0;e<n&&t[e]===l[e];e++);var i=n-e;for(o=1;o<=i&&t[n-o]===l[s-o];o++);return ia=l.slice(e,1<o?1-o:void 0)}function aa(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Yi(){return!0}function yf(){return!1}function on(e){function t(n,o,l,s,i){this._reactName=n,this._targetInst=l,this.type=o,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var r in e)e.hasOwnProperty(r)&&(n=e[r],this[r]=n?n(s):s[r]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Yi:yf,this.isPropagationStopped=yf,this}return yt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Yi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Yi)},persist:function(){},isPersistent:Yi}),t}var Tl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ir=on(Tl),Ai=yt({},Tl,{view:0,detail:0}),Rv=on(Ai),ec,tc,Ls,ar=yt({},Ai,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ls&&(Ls&&e.type==="mousemove"?(ec=e.screenX-Ls.screenX,tc=e.screenY-Ls.screenY):tc=ec=0,Ls=e),ec)},movementY:function(e){return"movementY"in e?e.movementY:tc}}),xf=on(ar),Iv=yt({},ar,{dataTransfer:0}),kv=on(Iv),Dv=yt({},Ai,{relatedTarget:0}),nc=on(Dv),Lv=yt({},Tl,{animationName:0,elapsedTime:0,pseudoElement:0}),jv=on(Lv),Uv=yt({},Tl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),zv=on(Uv),Pv=yt({},Tl,{data:0}),vf=on(Pv),Bv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Gv[e])?!!t[e]:!1}function sd(){return Vv}var Hv=yt({},Ai,{key:function(e){if(e.key){var t=Bv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=aa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?qv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sd,charCode:function(e){return e.type==="keypress"?aa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?aa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ov=on(Hv),Fv=yt({},ar,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bf=on(Fv),Yv=yt({},Ai,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sd}),Jv=on(Yv),Xv=yt({},Tl,{propertyName:0,elapsedTime:0,pseudoElement:0}),$v=on(Xv),Kv=yt({},ar,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zv=on(Kv),Qv=yt({},Tl,{newState:0,oldState:0}),Wv=on(Qv),eb=[9,13,27,32],id=go&&"CompositionEvent"in window,Js=null;go&&"documentMode"in document&&(Js=document.documentMode);var tb=go&&"TextEvent"in window&&!Js,pg=go&&(!id||Js&&8<Js&&11>=Js),Cf=String.fromCharCode(32),Sf=!1;function mg(e,t){switch(e){case"keyup":return eb.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gg(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Gl=!1;function nb(e,t){switch(e){case"compositionend":return gg(t);case"keypress":return t.which!==32?null:(Sf=!0,Cf);case"textInput":return e=t.data,e===Cf&&Sf?null:e;default:return null}}function ob(e,t){if(Gl)return e==="compositionend"||!id&&mg(e,t)?(e=hg(),ia=ld=zo=null,Gl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return pg&&t.locale!=="ko"?null:t.data;default:return null}}var lb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ef(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!lb[e.type]:t==="textarea"}function yg(e,t,n,o){ql?Ql?Ql.push(o):Ql=[o]:ql=o,t=Ya(t,"onChange"),0<t.length&&(n=new ir("onChange","change",null,n,o),e.push({event:n,listeners:t}))}var Xs=null,ui=null;function sb(e){fx(e,0)}function rr(e){var t=Vs(e);if(ag(t))return e}function Tf(e,t){if(e==="change")return t}var xg=!1;if(go){var oc;if(go){var lc="oninput"in document;if(!lc){var wf=document.createElement("div");wf.setAttribute("oninput","return;"),lc=typeof wf.oninput=="function"}oc=lc}else oc=!1;xg=oc&&(!document.documentMode||9<document.documentMode)}function Nf(){Xs&&(Xs.detachEvent("onpropertychange",vg),ui=Xs=null)}function vg(e){if(e.propertyName==="value"&&rr(ui)){var t=[];yg(t,ui,e,od(e)),fg(sb,t)}}function ib(e,t,n){e==="focusin"?(Nf(),Xs=t,ui=n,Xs.attachEvent("onpropertychange",vg)):e==="focusout"&&Nf()}function ab(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return rr(ui)}function rb(e,t){if(e==="click")return rr(t)}function cb(e,t){if(e==="input"||e==="change")return rr(t)}function ub(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xn=typeof Object.is=="function"?Object.is:ub;function di(e,t){if(xn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(o=0;o<n.length;o++){var l=n[o];if(!Yc.call(t,l)||!xn(e[l],t[l]))return!1}return!0}function Af(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _f(e,t){var n=Af(e);e=0;for(var o;n;){if(n.nodeType===3){if(o=e+n.textContent.length,e<=t&&o>=t)return{node:n,offset:t-e};e=o}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Af(n)}}function bg(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?bg(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Cg(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=_a(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=_a(e.document)}return t}function ad(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var db=go&&"documentMode"in document&&11>=document.documentMode,Vl=null,Wc=null,$s=null,eu=!1;function Mf(e,t,n){var o=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;eu||Vl==null||Vl!==_a(o)||(o=Vl,"selectionStart"in o&&ad(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),$s&&di($s,o)||($s=o,o=Ya(Wc,"onSelect"),0<o.length&&(t=new ir("onSelect","select",null,t,n),e.push({event:t,listeners:o}),t.target=Vl)))}function il(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Hl={animationend:il("Animation","AnimationEnd"),animationiteration:il("Animation","AnimationIteration"),animationstart:il("Animation","AnimationStart"),transitionrun:il("Transition","TransitionRun"),transitionstart:il("Transition","TransitionStart"),transitioncancel:il("Transition","TransitionCancel"),transitionend:il("Transition","TransitionEnd")},sc={},Sg={};go&&(Sg=document.createElement("div").style,"AnimationEvent"in window||(delete Hl.animationend.animation,delete Hl.animationiteration.animation,delete Hl.animationstart.animation),"TransitionEvent"in window||delete Hl.transitionend.transition);function wl(e){if(sc[e])return sc[e];if(!Hl[e])return e;var t=Hl[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Sg)return sc[e]=t[n];return e}var Eg=wl("animationend"),Tg=wl("animationiteration"),wg=wl("animationstart"),fb=wl("transitionrun"),hb=wl("transitionstart"),pb=wl("transitioncancel"),Ng=wl("transitionend"),Ag=new Map,tu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");tu.push("scrollEnd");function zn(e,t){Ag.set(e,t),El(t,[e])}var Ma=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Sn=[],Ol=0,rd=0;function cr(){for(var e=Ol,t=rd=Ol=0;t<e;){var n=Sn[t];Sn[t++]=null;var o=Sn[t];Sn[t++]=null;var l=Sn[t];Sn[t++]=null;var s=Sn[t];if(Sn[t++]=null,o!==null&&l!==null){var i=o.pending;i===null?l.next=l:(l.next=i.next,i.next=l),o.pending=l}s!==0&&_g(n,l,s)}}function ur(e,t,n,o){Sn[Ol++]=e,Sn[Ol++]=t,Sn[Ol++]=n,Sn[Ol++]=o,rd|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function cd(e,t,n,o){return ur(e,t,n,o),Ra(e)}function Nl(e,t){return ur(e,null,null,t),Ra(e)}function _g(e,t,n){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n);for(var l=!1,s=e.return;s!==null;)s.childLanes|=n,o=s.alternate,o!==null&&(o.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(l=!0)),e=s,s=s.return;return e.tag===3?(s=e.stateNode,l&&t!==null&&(l=31-gn(n),e=s.hiddenUpdates,o=e[l],o===null?e[l]=[t]:o.push(t),t.lane=n|536870912),s):null}function Ra(e){if(50<li)throw li=0,Su=null,Error(Y(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Fl={};function mb(e,t,n,o){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(e,t,n,o){return new mb(e,t,n,o)}function ud(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ho(e,t){var n=e.alternate;return n===null?(n=fn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Mg(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ra(e,t,n,o,l,s){var i=0;if(o=e,typeof e=="function")ud(e)&&(i=1);else if(typeof e=="string")i=b1(e,n,Jn.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Vc:return e=fn(31,n,t,l),e.elementType=Vc,e.lanes=s,e;case zl:return fl(n.children,l,s,t);case Xm:i=8,l|=24;break;case Bc:return e=fn(12,n,t,l|2),e.elementType=Bc,e.lanes=s,e;case qc:return e=fn(13,n,t,l),e.elementType=qc,e.lanes=s,e;case Gc:return e=fn(19,n,t,l),e.elementType=Gc,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case co:i=10;break e;case $m:i=9;break e;case Ku:i=11;break e;case Zu:i=14;break e;case Mo:i=16,o=null;break e}i=29,n=Error(Y(130,e===null?"null":typeof e,"")),o=null}return t=fn(i,n,t,l),t.elementType=e,t.type=o,t.lanes=s,t}function fl(e,t,n,o){return e=fn(7,e,o,t),e.lanes=n,e}function ic(e,t,n){return e=fn(6,e,null,t),e.lanes=n,e}function Rg(e){var t=fn(18,null,null,0);return t.stateNode=e,t}function ac(e,t,n){return t=fn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Rf=new WeakMap;function An(e,t){if(typeof e=="object"&&e!==null){var n=Rf.get(e);return n!==void 0?n:(t={value:e,source:t,stack:uf(t)},Rf.set(e,t),t)}return{value:e,source:t,stack:uf(t)}}var Yl=[],Jl=0,Ia=null,fi=0,Tn=[],wn=0,Zo=null,On=1,Fn="";function io(e,t){Yl[Jl++]=fi,Yl[Jl++]=Ia,Ia=e,fi=t}function Ig(e,t,n){Tn[wn++]=On,Tn[wn++]=Fn,Tn[wn++]=Zo,Zo=e;var o=On;e=Fn;var l=32-gn(o)-1;o&=~(1<<l),n+=1;var s=32-gn(t)+l;if(30<s){var i=l-l%5;s=(o&(1<<i)-1).toString(32),o>>=i,l-=i,On=1<<32-gn(t)+l|n<<l|o,Fn=s+e}else On=1<<s|n<<l|o,Fn=e}function dd(e){e.return!==null&&(io(e,1),Ig(e,1,0))}function fd(e){for(;e===Ia;)Ia=Yl[--Jl],Yl[Jl]=null,fi=Yl[--Jl],Yl[Jl]=null;for(;e===Zo;)Zo=Tn[--wn],Tn[wn]=null,Fn=Tn[--wn],Tn[wn]=null,On=Tn[--wn],Tn[wn]=null}function kg(e,t){Tn[wn++]=On,Tn[wn++]=Fn,Tn[wn++]=Zo,On=t.id,Fn=t.overflow,Zo=e}var Gt=null,mt=null,Fe=!1,Ho=null,_n=!1,nu=Error(Y(519));function Qo(e){var t=Error(Y(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw hi(An(t,e)),nu}function If(e){var t=e.stateNode,n=e.type,o=e.memoizedProps;switch(t[qt]=e,t[nn]=o,n){case"dialog":Be("cancel",t),Be("close",t);break;case"iframe":case"object":case"embed":Be("load",t);break;case"video":case"audio":for(n=0;n<yi.length;n++)Be(yi[n],t);break;case"source":Be("error",t);break;case"img":case"image":case"link":Be("error",t),Be("load",t);break;case"details":Be("toggle",t);break;case"input":Be("invalid",t),rg(t,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Be("invalid",t);break;case"textarea":Be("invalid",t),ug(t,o.value,o.defaultValue,o.children)}n=o.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||o.suppressHydrationWarning===!0||px(t.textContent,n)?(o.popover!=null&&(Be("beforetoggle",t),Be("toggle",t)),o.onScroll!=null&&Be("scroll",t),o.onScrollEnd!=null&&Be("scrollend",t),o.onClick!=null&&(t.onclick=uo),t=!0):t=!1,t||Qo(e,!0)}function kf(e){for(Gt=e.return;Gt;)switch(Gt.tag){case 5:case 31:case 13:_n=!1;return;case 27:case 3:_n=!0;return;default:Gt=Gt.return}}function Il(e){if(e!==Gt)return!1;if(!Fe)return kf(e),Fe=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Au(e.type,e.memoizedProps)),n=!n),n&&mt&&Qo(e),kf(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Y(317));mt=xh(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Y(317));mt=xh(e)}else t===27?(t=mt,nl(e.type)?(e=Iu,Iu=null,mt=e):mt=t):mt=Gt?Rn(e.stateNode.nextSibling):null;return!0}function gl(){mt=Gt=null,Fe=!1}function rc(){var e=Ho;return e!==null&&(en===null?en=e:en.push.apply(en,e),Ho=null),e}function hi(e){Ho===null?Ho=[e]:Ho.push(e)}var ou=$n(null),Al=null,fo=null;function ko(e,t,n){ct(ou,t._currentValue),t._currentValue=n}function po(e){e._currentValue=ou.current,Ut(ou)}function lu(e,t,n){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===n)break;e=e.return}}function su(e,t,n,o){var l=e.child;for(l!==null&&(l.return=e);l!==null;){var s=l.dependencies;if(s!==null){var i=l.child;s=s.firstContext;e:for(;s!==null;){var r=s;s=l;for(var u=0;u<t.length;u++)if(r.context===t[u]){s.lanes|=n,r=s.alternate,r!==null&&(r.lanes|=n),lu(s.return,n,e),o||(i=null);break e}s=r.next}}else if(l.tag===18){if(i=l.return,i===null)throw Error(Y(341));i.lanes|=n,s=i.alternate,s!==null&&(s.lanes|=n),lu(i,n,e),i=null}else i=l.child;if(i!==null)i.return=l;else for(i=l;i!==null;){if(i===e){i=null;break}if(l=i.sibling,l!==null){l.return=i.return,i=l;break}i=i.return}l=i}}function Ss(e,t,n,o){e=null;for(var l=t,s=!1;l!==null;){if(!s){if(l.flags&524288)s=!0;else if(l.flags&262144)break}if(l.tag===10){var i=l.alternate;if(i===null)throw Error(Y(387));if(i=i.memoizedProps,i!==null){var r=l.type;xn(l.pendingProps.value,i.value)||(e!==null?e.push(r):e=[r])}}else if(l===Ta.current){if(i=l.alternate,i===null)throw Error(Y(387));i.memoizedState.memoizedState!==l.memoizedState.memoizedState&&(e!==null?e.push(vi):e=[vi])}l=l.return}e!==null&&su(t,e,n,o),t.flags|=262144}function ka(e){for(e=e.firstContext;e!==null;){if(!xn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function yl(e){Al=e,fo=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Vt(e){return Dg(Al,e)}function Ji(e,t){return Al===null&&yl(e),Dg(e,t)}function Dg(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},fo===null){if(e===null)throw Error(Y(308));fo=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else fo=fo.next=t;return n}var gb=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,o){e.push(o)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},yb=Dt.unstable_scheduleCallback,xb=Dt.unstable_NormalPriority,Mt={$$typeof:co,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hd(){return{controller:new gb,data:new Map,refCount:0}}function _i(e){e.refCount--,e.refCount===0&&yb(xb,function(){e.controller.abort()})}var Ks=null,iu=0,cs=0,Wl=null;function vb(e,t){if(Ks===null){var n=Ks=[];iu=0,cs=Pd(),Wl={status:"pending",value:void 0,then:function(o){n.push(o)}}}return iu++,t.then(Df,Df),t}function Df(){if(--iu===0&&Ks!==null){Wl!==null&&(Wl.status="fulfilled");var e=Ks;Ks=null,cs=0,Wl=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function bb(e,t){var n=[],o={status:"pending",value:null,reason:null,then:function(l){n.push(l)}};return e.then(function(){o.status="fulfilled",o.value=t;for(var l=0;l<n.length;l++)(0,n[l])(t)},function(l){for(o.status="rejected",o.reason=l,l=0;l<n.length;l++)(0,n[l])(void 0)}),o}var Lf=Ne.S;Ne.S=function(e,t){Jy=pn(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&vb(e,t),Lf!==null&&Lf(e,t)};var hl=$n(null);function pd(){var e=hl.current;return e!==null?e:rt.pooledCache}function ca(e,t){t===null?ct(hl,hl.current):ct(hl,t.pool)}function Lg(){var e=pd();return e===null?null:{parent:Mt._currentValue,pool:e}}var Es=Error(Y(460)),md=Error(Y(474)),dr=Error(Y(542)),Da={then:function(){}};function jf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function jg(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(uo,uo),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,zf(e),e;default:if(typeof t.status=="string")t.then(uo,uo);else{if(e=rt,e!==null&&100<e.shellSuspendCounter)throw Error(Y(482));e=t,e.status="pending",e.then(function(o){if(t.status==="pending"){var l=t;l.status="fulfilled",l.value=o}},function(o){if(t.status==="pending"){var l=t;l.status="rejected",l.reason=o}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,zf(e),e}throw pl=t,Es}}function cl(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(pl=n,Es):n}}var pl=null;function Uf(){if(pl===null)throw Error(Y(459));var e=pl;return pl=null,e}function zf(e){if(e===Es||e===dr)throw Error(Y(483))}var es=null,pi=0;function Xi(e){var t=pi;return pi+=1,es===null&&(es=[]),jg(es,e,t)}function js(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function $i(e,t){throw t.$$typeof===iv?Error(Y(525)):(e=Object.prototype.toString.call(t),Error(Y(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Ug(e){function t(y,x){if(e){var v=y.deletions;v===null?(y.deletions=[x],y.flags|=16):v.push(x)}}function n(y,x){if(!e)return null;for(;x!==null;)t(y,x),x=x.sibling;return null}function o(y){for(var x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function l(y,x){return y=ho(y,x),y.index=0,y.sibling=null,y}function s(y,x,v){return y.index=v,e?(v=y.alternate,v!==null?(v=v.index,v<x?(y.flags|=67108866,x):v):(y.flags|=67108866,x)):(y.flags|=1048576,x)}function i(y){return e&&y.alternate===null&&(y.flags|=67108866),y}function r(y,x,v,S){return x===null||x.tag!==6?(x=ic(v,y.mode,S),x.return=y,x):(x=l(x,v),x.return=y,x)}function u(y,x,v,S){var N=v.type;return N===zl?h(y,x,v.props.children,S,v.key):x!==null&&(x.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Mo&&cl(N)===x.type)?(x=l(x,v.props),js(x,v),x.return=y,x):(x=ra(v.type,v.key,v.props,null,y.mode,S),js(x,v),x.return=y,x)}function f(y,x,v,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==v.containerInfo||x.stateNode.implementation!==v.implementation?(x=ac(v,y.mode,S),x.return=y,x):(x=l(x,v.children||[]),x.return=y,x)}function h(y,x,v,S,N){return x===null||x.tag!==7?(x=fl(v,y.mode,S,N),x.return=y,x):(x=l(x,v),x.return=y,x)}function p(y,x,v){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=ic(""+x,y.mode,v),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Gi:return v=ra(x.type,x.key,x.props,null,y.mode,v),js(v,x),v.return=y,v;case qs:return x=ac(x,y.mode,v),x.return=y,x;case Mo:return x=cl(x),p(y,x,v)}if(Gs(x)||ks(x))return x=fl(x,y.mode,v,null),x.return=y,x;if(typeof x.then=="function")return p(y,Xi(x),v);if(x.$$typeof===co)return p(y,Ji(y,x),v);$i(y,x)}return null}function m(y,x,v,S){var N=x!==null?x.key:null;if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return N!==null?null:r(y,x,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Gi:return v.key===N?u(y,x,v,S):null;case qs:return v.key===N?f(y,x,v,S):null;case Mo:return v=cl(v),m(y,x,v,S)}if(Gs(v)||ks(v))return N!==null?null:h(y,x,v,S,null);if(typeof v.then=="function")return m(y,x,Xi(v),S);if(v.$$typeof===co)return m(y,x,Ji(y,v),S);$i(y,v)}return null}function g(y,x,v,S,N){if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return y=y.get(v)||null,r(x,y,""+S,N);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Gi:return y=y.get(S.key===null?v:S.key)||null,u(x,y,S,N);case qs:return y=y.get(S.key===null?v:S.key)||null,f(x,y,S,N);case Mo:return S=cl(S),g(y,x,v,S,N)}if(Gs(S)||ks(S))return y=y.get(v)||null,h(x,y,S,N,null);if(typeof S.then=="function")return g(y,x,v,Xi(S),N);if(S.$$typeof===co)return g(y,x,v,Ji(x,S),N);$i(x,S)}return null}function E(y,x,v,S){for(var N=null,L=null,A=x,b=x=0,I=null;A!==null&&b<v.length;b++){A.index>b?(I=A,A=null):I=A.sibling;var w=m(y,A,v[b],S);if(w===null){A===null&&(A=I);break}e&&A&&w.alternate===null&&t(y,A),x=s(w,x,b),L===null?N=w:L.sibling=w,L=w,A=I}if(b===v.length)return n(y,A),Fe&&io(y,b),N;if(A===null){for(;b<v.length;b++)A=p(y,v[b],S),A!==null&&(x=s(A,x,b),L===null?N=A:L.sibling=A,L=A);return Fe&&io(y,b),N}for(A=o(A);b<v.length;b++)I=g(A,y,b,v[b],S),I!==null&&(e&&I.alternate!==null&&A.delete(I.key===null?b:I.key),x=s(I,x,b),L===null?N=I:L.sibling=I,L=I);return e&&A.forEach(function(j){return t(y,j)}),Fe&&io(y,b),N}function T(y,x,v,S){if(v==null)throw Error(Y(151));for(var N=null,L=null,A=x,b=x=0,I=null,w=v.next();A!==null&&!w.done;b++,w=v.next()){A.index>b?(I=A,A=null):I=A.sibling;var j=m(y,A,w.value,S);if(j===null){A===null&&(A=I);break}e&&A&&j.alternate===null&&t(y,A),x=s(j,x,b),L===null?N=j:L.sibling=j,L=j,A=I}if(w.done)return n(y,A),Fe&&io(y,b),N;if(A===null){for(;!w.done;b++,w=v.next())w=p(y,w.value,S),w!==null&&(x=s(w,x,b),L===null?N=w:L.sibling=w,L=w);return Fe&&io(y,b),N}for(A=o(A);!w.done;b++,w=v.next())w=g(A,y,b,w.value,S),w!==null&&(e&&w.alternate!==null&&A.delete(w.key===null?b:w.key),x=s(w,x,b),L===null?N=w:L.sibling=w,L=w);return e&&A.forEach(function(_){return t(y,_)}),Fe&&io(y,b),N}function M(y,x,v,S){if(typeof v=="object"&&v!==null&&v.type===zl&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Gi:e:{for(var N=v.key;x!==null;){if(x.key===N){if(N=v.type,N===zl){if(x.tag===7){n(y,x.sibling),S=l(x,v.props.children),S.return=y,y=S;break e}}else if(x.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Mo&&cl(N)===x.type){n(y,x.sibling),S=l(x,v.props),js(S,v),S.return=y,y=S;break e}n(y,x);break}else t(y,x);x=x.sibling}v.type===zl?(S=fl(v.props.children,y.mode,S,v.key),S.return=y,y=S):(S=ra(v.type,v.key,v.props,null,y.mode,S),js(S,v),S.return=y,y=S)}return i(y);case qs:e:{for(N=v.key;x!==null;){if(x.key===N)if(x.tag===4&&x.stateNode.containerInfo===v.containerInfo&&x.stateNode.implementation===v.implementation){n(y,x.sibling),S=l(x,v.children||[]),S.return=y,y=S;break e}else{n(y,x);break}else t(y,x);x=x.sibling}S=ac(v,y.mode,S),S.return=y,y=S}return i(y);case Mo:return v=cl(v),M(y,x,v,S)}if(Gs(v))return E(y,x,v,S);if(ks(v)){if(N=ks(v),typeof N!="function")throw Error(Y(150));return v=N.call(v),T(y,x,v,S)}if(typeof v.then=="function")return M(y,x,Xi(v),S);if(v.$$typeof===co)return M(y,x,Ji(y,v),S);$i(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint"?(v=""+v,x!==null&&x.tag===6?(n(y,x.sibling),S=l(x,v),S.return=y,y=S):(n(y,x),S=ic(v,y.mode,S),S.return=y,y=S),i(y)):n(y,x)}return function(y,x,v,S){try{pi=0;var N=M(y,x,v,S);return es=null,N}catch(A){if(A===Es||A===dr)throw A;var L=fn(29,A,null,y.mode);return L.lanes=S,L.return=y,L}finally{}}}var xl=Ug(!0),zg=Ug(!1),Ro=!1;function gd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function au(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Oo(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Fo(e,t,n){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,Ke&2){var l=o.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),o.pending=t,t=Ra(e),_g(e,null,n),t}return ur(e,o,t,n),Ra(e)}function Zs(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,tg(e,n)}}function cc(e,t){var n=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,n===o)){var l=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?l=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?l=s=t:s=s.next=t}else l=s=t;n={baseState:o.baseState,firstBaseUpdate:l,lastBaseUpdate:s,shared:o.shared,callbacks:o.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ru=!1;function Qs(){if(ru){var e=Wl;if(e!==null)throw e}}function Ws(e,t,n,o){ru=!1;var l=e.updateQueue;Ro=!1;var s=l.firstBaseUpdate,i=l.lastBaseUpdate,r=l.shared.pending;if(r!==null){l.shared.pending=null;var u=r,f=u.next;u.next=null,i===null?s=f:i.next=f,i=u;var h=e.alternate;h!==null&&(h=h.updateQueue,r=h.lastBaseUpdate,r!==i&&(r===null?h.firstBaseUpdate=f:r.next=f,h.lastBaseUpdate=u))}if(s!==null){var p=l.baseState;i=0,h=f=u=null,r=s;do{var m=r.lane&-536870913,g=m!==r.lane;if(g?(Ve&m)===m:(o&m)===m){m!==0&&m===cs&&(ru=!0),h!==null&&(h=h.next={lane:0,tag:r.tag,payload:r.payload,callback:null,next:null});e:{var E=e,T=r;m=t;var M=n;switch(T.tag){case 1:if(E=T.payload,typeof E=="function"){p=E.call(M,p,m);break e}p=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=T.payload,m=typeof E=="function"?E.call(M,p,m):E,m==null)break e;p=yt({},p,m);break e;case 2:Ro=!0}}m=r.callback,m!==null&&(e.flags|=64,g&&(e.flags|=8192),g=l.callbacks,g===null?l.callbacks=[m]:g.push(m))}else g={lane:m,tag:r.tag,payload:r.payload,callback:r.callback,next:null},h===null?(f=h=g,u=p):h=h.next=g,i|=m;if(r=r.next,r===null){if(r=l.shared.pending,r===null)break;g=r,r=g.next,g.next=null,l.lastBaseUpdate=g,l.shared.pending=null}}while(1);h===null&&(u=p),l.baseState=u,l.firstBaseUpdate=f,l.lastBaseUpdate=h,s===null&&(l.shared.lanes=0),el|=i,e.lanes=i,e.memoizedState=p}}function Pg(e,t){if(typeof e!="function")throw Error(Y(191,e));e.call(t)}function Bg(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Pg(n[e],t)}var us=$n(null),La=$n(0);function Pf(e,t){e=bo,ct(La,e),ct(us,t),bo=e|t.baseLanes}function cu(){ct(La,bo),ct(us,us.current)}function yd(){bo=La.current,Ut(us),Ut(La)}var vn=$n(null),Mn=null;function Do(e){var t=e.alternate;ct(Et,Et.current&1),ct(vn,e),Mn===null&&(t===null||us.current!==null||t.memoizedState!==null)&&(Mn=e)}function uu(e){ct(Et,Et.current),ct(vn,e),Mn===null&&(Mn=e)}function qg(e){e.tag===22?(ct(Et,Et.current),ct(vn,e),Mn===null&&(Mn=e)):Lo()}function Lo(){ct(Et,Et.current),ct(vn,vn.current)}function dn(e){Ut(vn),Mn===e&&(Mn=null),Ut(Et)}var Et=$n(0);function ja(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Mu(n)||Ru(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yo=0,ke=null,it=null,At=null,Ua=!1,ts=!1,vl=!1,za=0,mi=0,ns=null,Cb=0;function Ct(){throw Error(Y(321))}function xd(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!xn(e[n],t[n]))return!1;return!0}function vd(e,t,n,o,l,s){return yo=s,ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ne.H=e===null||e.memoizedState===null?yy:Rd,vl=!1,s=n(o,l),vl=!1,ts&&(s=Vg(t,n,o,l)),Gg(e),s}function Gg(e){Ne.H=gi;var t=it!==null&&it.next!==null;if(yo=0,At=it=ke=null,Ua=!1,mi=0,ns=null,t)throw Error(Y(300));e===null||Rt||(e=e.dependencies,e!==null&&ka(e)&&(Rt=!0))}function Vg(e,t,n,o){ke=e;var l=0;do{if(ts&&(ns=null),mi=0,ts=!1,25<=l)throw Error(Y(301));if(l+=1,At=it=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}Ne.H=xy,s=t(n,o)}while(ts);return s}function Sb(){var e=Ne.H,t=e.useState()[0];return t=typeof t.then=="function"?Mi(t):t,e=e.useState()[0],(it!==null?it.memoizedState:null)!==e&&(ke.flags|=1024),t}function bd(){var e=za!==0;return za=0,e}function Cd(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Sd(e){if(Ua){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Ua=!1}yo=0,At=it=ke=null,ts=!1,mi=za=0,ns=null}function Yt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?ke.memoizedState=At=e:At=At.next=e,At}function Tt(){if(it===null){var e=ke.alternate;e=e!==null?e.memoizedState:null}else e=it.next;var t=At===null?ke.memoizedState:At.next;if(t!==null)At=t,it=e;else{if(e===null)throw ke.alternate===null?Error(Y(467)):Error(Y(310));it=e,e={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},At===null?ke.memoizedState=At=e:At=At.next=e}return At}function fr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Mi(e){var t=mi;return mi+=1,ns===null&&(ns=[]),e=jg(ns,e,t),t=ke,(At===null?t.memoizedState:At.next)===null&&(t=t.alternate,Ne.H=t===null||t.memoizedState===null?yy:Rd),e}function hr(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Mi(e);if(e.$$typeof===co)return Vt(e)}throw Error(Y(438,String(e)))}function Ed(e){var t=null,n=ke.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var o=ke.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(t={data:o.data.map(function(l){return l.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=fr(),ke.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),o=0;o<e;o++)n[o]=av;return t.index++,n}function xo(e,t){return typeof t=="function"?t(e):t}function ua(e){var t=Tt();return Td(t,it,e)}function Td(e,t,n){var o=e.queue;if(o===null)throw Error(Y(311));o.lastRenderedReducer=n;var l=e.baseQueue,s=o.pending;if(s!==null){if(l!==null){var i=l.next;l.next=s.next,s.next=i}t.baseQueue=l=s,o.pending=null}if(s=e.baseState,l===null)e.memoizedState=s;else{t=l.next;var r=i=null,u=null,f=t,h=!1;do{var p=f.lane&-536870913;if(p!==f.lane?(Ve&p)===p:(yo&p)===p){var m=f.revertLane;if(m===0)u!==null&&(u=u.next={lane:0,revertLane:0,gesture:null,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),p===cs&&(h=!0);else if((yo&m)===m){f=f.next,m===cs&&(h=!0);continue}else p={lane:0,revertLane:f.revertLane,gesture:null,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null},u===null?(r=u=p,i=s):u=u.next=p,ke.lanes|=m,el|=m;p=f.action,vl&&n(s,p),s=f.hasEagerState?f.eagerState:n(s,p)}else m={lane:p,revertLane:f.revertLane,gesture:f.gesture,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null},u===null?(r=u=m,i=s):u=u.next=m,ke.lanes|=p,el|=p;f=f.next}while(f!==null&&f!==t);if(u===null?i=s:u.next=r,!xn(s,e.memoizedState)&&(Rt=!0,h&&(n=Wl,n!==null)))throw n;e.memoizedState=s,e.baseState=i,e.baseQueue=u,o.lastRenderedState=s}return l===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function uc(e){var t=Tt(),n=t.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=e;var o=n.dispatch,l=n.pending,s=t.memoizedState;if(l!==null){n.pending=null;var i=l=l.next;do s=e(s,i.action),i=i.next;while(i!==l);xn(s,t.memoizedState)||(Rt=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,o]}function Hg(e,t,n){var o=ke,l=Tt(),s=Fe;if(s){if(n===void 0)throw Error(Y(407));n=n()}else n=t();var i=!xn((it||l).memoizedState,n);if(i&&(l.memoizedState=n,Rt=!0),l=l.queue,wd(Yg.bind(null,o,l,e),[e]),l.getSnapshot!==t||i||At!==null&&At.memoizedState.tag&1){if(o.flags|=2048,ds(9,{destroy:void 0},Fg.bind(null,o,l,n,t),null),rt===null)throw Error(Y(349));s||yo&127||Og(o,t,n)}return n}function Og(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ke.updateQueue,t===null?(t=fr(),ke.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Fg(e,t,n,o){t.value=n,t.getSnapshot=o,Jg(t)&&Xg(e)}function Yg(e,t,n){return n(function(){Jg(t)&&Xg(e)})}function Jg(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!xn(e,n)}catch{return!0}}function Xg(e){var t=Nl(e,2);t!==null&&tn(t,e,2)}function du(e){var t=Yt();if(typeof e=="function"){var n=e;if(e=n(),vl){Uo(!0);try{n()}finally{Uo(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:e},t}function $g(e,t,n,o){return e.baseState=n,Td(e,it,typeof o=="function"?o:xo)}function Eb(e,t,n,o,l){if(mr(e))throw Error(Y(485));if(e=t.action,e!==null){var s={payload:l,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(i){s.listeners.push(i)}};Ne.T!==null?n(!0):s.isTransition=!1,o(s),n=t.pending,n===null?(s.next=t.pending=s,Kg(t,s)):(s.next=n.next,t.pending=n.next=s)}}function Kg(e,t){var n=t.action,o=t.payload,l=e.state;if(t.isTransition){var s=Ne.T,i={};Ne.T=i;try{var r=n(l,o),u=Ne.S;u!==null&&u(i,r),Bf(e,t,r)}catch(f){fu(e,t,f)}finally{s!==null&&i.types!==null&&(s.types=i.types),Ne.T=s}}else try{s=n(l,o),Bf(e,t,s)}catch(f){fu(e,t,f)}}function Bf(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(o){qf(e,t,o)},function(o){return fu(e,t,o)}):qf(e,t,n)}function qf(e,t,n){t.status="fulfilled",t.value=n,Zg(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Kg(e,n)))}function fu(e,t,n){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do t.status="rejected",t.reason=n,Zg(t),t=t.next;while(t!==o)}e.action=null}function Zg(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Qg(e,t){return t}function Gf(e,t){if(Fe){var n=rt.formState;if(n!==null){e:{var o=ke;if(Fe){if(mt){t:{for(var l=mt,s=_n;l.nodeType!==8;){if(!s){l=null;break t}if(l=Rn(l.nextSibling),l===null){l=null;break t}}s=l.data,l=s==="F!"||s==="F"?l:null}if(l){mt=Rn(l.nextSibling),o=l.data==="F!";break e}}Qo(o)}o=!1}o&&(t=n[0])}}return n=Yt(),n.memoizedState=n.baseState=t,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qg,lastRenderedState:t},n.queue=o,n=py.bind(null,ke,o),o.dispatch=n,o=du(!1),s=Md.bind(null,ke,!1,o.queue),o=Yt(),l={state:t,dispatch:null,action:e,pending:null},o.queue=l,n=Eb.bind(null,ke,l,s,n),l.dispatch=n,o.memoizedState=e,[t,n,!1]}function Vf(e){var t=Tt();return Wg(t,it,e)}function Wg(e,t,n){if(t=Td(e,t,Qg)[0],e=ua(xo)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var o=Mi(t)}catch(i){throw i===Es?dr:i}else o=t;t=Tt();var l=t.queue,s=l.dispatch;return n!==t.memoizedState&&(ke.flags|=2048,ds(9,{destroy:void 0},Tb.bind(null,l,n),null)),[o,s,e]}function Tb(e,t){e.action=t}function Hf(e){var t=Tt(),n=it;if(n!==null)return Wg(t,n,e);Tt(),t=t.memoizedState,n=Tt();var o=n.queue.dispatch;return n.memoizedState=e,[t,o,!1]}function ds(e,t,n,o){return e={tag:e,create:n,deps:o,inst:t,next:null},t=ke.updateQueue,t===null&&(t=fr(),ke.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(o=n.next,n.next=e,e.next=o,t.lastEffect=e),e}function ey(){return Tt().memoizedState}function da(e,t,n,o){var l=Yt();ke.flags|=e,l.memoizedState=ds(1|t,{destroy:void 0},n,o===void 0?null:o)}function pr(e,t,n,o){var l=Tt();o=o===void 0?null:o;var s=l.memoizedState.inst;it!==null&&o!==null&&xd(o,it.memoizedState.deps)?l.memoizedState=ds(t,s,n,o):(ke.flags|=e,l.memoizedState=ds(1|t,s,n,o))}function Of(e,t){da(8390656,8,e,t)}function wd(e,t){pr(2048,8,e,t)}function wb(e){ke.flags|=4;var t=ke.updateQueue;if(t===null)t=fr(),ke.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function ty(e){var t=Tt().memoizedState;return wb({ref:t,nextImpl:e}),function(){if(Ke&2)throw Error(Y(440));return t.impl.apply(void 0,arguments)}}function ny(e,t){return pr(4,2,e,t)}function oy(e,t){return pr(4,4,e,t)}function ly(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function sy(e,t,n){n=n!=null?n.concat([e]):null,pr(4,4,ly.bind(null,t,e),n)}function Nd(){}function iy(e,t){var n=Tt();t=t===void 0?null:t;var o=n.memoizedState;return t!==null&&xd(t,o[1])?o[0]:(n.memoizedState=[e,t],e)}function ay(e,t){var n=Tt();t=t===void 0?null:t;var o=n.memoizedState;if(t!==null&&xd(t,o[1]))return o[0];if(o=e(),vl){Uo(!0);try{e()}finally{Uo(!1)}}return n.memoizedState=[o,t],o}function Ad(e,t,n){return n===void 0||yo&1073741824&&!(Ve&261930)?e.memoizedState=t:(e.memoizedState=n,e=$y(),ke.lanes|=e,el|=e,n)}function ry(e,t,n,o){return xn(n,t)?n:us.current!==null?(e=Ad(e,n,o),xn(e,t)||(Rt=!0),e):!(yo&42)||yo&1073741824&&!(Ve&261930)?(Rt=!0,e.memoizedState=n):(e=$y(),ke.lanes|=e,el|=e,t)}function cy(e,t,n,o,l){var s=Ze.p;Ze.p=s!==0&&8>s?s:8;var i=Ne.T,r={};Ne.T=r,Md(e,!1,t,n);try{var u=l(),f=Ne.S;if(f!==null&&f(r,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=bb(u,o);ei(e,t,h,yn(e))}else ei(e,t,o,yn(e))}catch(p){ei(e,t,{then:function(){},status:"rejected",reason:p},yn())}finally{Ze.p=s,i!==null&&r.types!==null&&(i.types=r.types),Ne.T=i}}function Nb(){}function hu(e,t,n,o){if(e.tag!==5)throw Error(Y(476));var l=uy(e).queue;cy(e,l,t,dl,n===null?Nb:function(){return dy(e),n(o)})}function uy(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:dl,baseState:dl,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:dl},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function dy(e){var t=uy(e);t.next===null&&(t=e.alternate.memoizedState),ei(e,t.next.queue,{},yn())}function _d(){return Vt(vi)}function fy(){return Tt().memoizedState}function hy(){return Tt().memoizedState}function Ab(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=yn();e=Oo(n);var o=Fo(t,e,n);o!==null&&(tn(o,t,n),Zs(o,t,n)),t={cache:hd()},e.payload=t;return}t=t.return}}function _b(e,t,n){var o=yn();n={lane:o,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},mr(e)?my(t,n):(n=cd(e,t,n,o),n!==null&&(tn(n,e,o),gy(n,t,o)))}function py(e,t,n){var o=yn();ei(e,t,n,o)}function ei(e,t,n,o){var l={lane:o,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(mr(e))my(t,l);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var i=t.lastRenderedState,r=s(i,n);if(l.hasEagerState=!0,l.eagerState=r,xn(r,i))return ur(e,t,l,0),rt===null&&cr(),!1}catch{}finally{}if(n=cd(e,t,l,o),n!==null)return tn(n,e,o),gy(n,t,o),!0}return!1}function Md(e,t,n,o){if(o={lane:2,revertLane:Pd(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},mr(e)){if(t)throw Error(Y(479))}else t=cd(e,n,o,2),t!==null&&tn(t,e,2)}function mr(e){var t=e.alternate;return e===ke||t!==null&&t===ke}function my(e,t){ts=Ua=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function gy(e,t,n){if(n&4194048){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,tg(e,n)}}var gi={readContext:Vt,use:hr,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useLayoutEffect:Ct,useInsertionEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useSyncExternalStore:Ct,useId:Ct,useHostTransitionStatus:Ct,useFormState:Ct,useActionState:Ct,useOptimistic:Ct,useMemoCache:Ct,useCacheRefresh:Ct};gi.useEffectEvent=Ct;var yy={readContext:Vt,use:hr,useCallback:function(e,t){return Yt().memoizedState=[e,t===void 0?null:t],e},useContext:Vt,useEffect:Of,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,da(4194308,4,ly.bind(null,t,e),n)},useLayoutEffect:function(e,t){return da(4194308,4,e,t)},useInsertionEffect:function(e,t){da(4,2,e,t)},useMemo:function(e,t){var n=Yt();t=t===void 0?null:t;var o=e();if(vl){Uo(!0);try{e()}finally{Uo(!1)}}return n.memoizedState=[o,t],o},useReducer:function(e,t,n){var o=Yt();if(n!==void 0){var l=n(t);if(vl){Uo(!0);try{n(t)}finally{Uo(!1)}}}else l=t;return o.memoizedState=o.baseState=l,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:l},o.queue=e,e=e.dispatch=_b.bind(null,ke,e),[o.memoizedState,e]},useRef:function(e){var t=Yt();return e={current:e},t.memoizedState=e},useState:function(e){e=du(e);var t=e.queue,n=py.bind(null,ke,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Nd,useDeferredValue:function(e,t){var n=Yt();return Ad(n,e,t)},useTransition:function(){var e=du(!1);return e=cy.bind(null,ke,e.queue,!0,!1),Yt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var o=ke,l=Yt();if(Fe){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=t(),rt===null)throw Error(Y(349));Ve&127||Og(o,t,n)}l.memoizedState=n;var s={value:n,getSnapshot:t};return l.queue=s,Of(Yg.bind(null,o,s,e),[e]),o.flags|=2048,ds(9,{destroy:void 0},Fg.bind(null,o,s,n,t),null),n},useId:function(){var e=Yt(),t=rt.identifierPrefix;if(Fe){var n=Fn,o=On;n=(o&~(1<<32-gn(o)-1)).toString(32)+n,t="_"+t+"R_"+n,n=za++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=Cb++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:_d,useFormState:Gf,useActionState:Gf,useOptimistic:function(e){var t=Yt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Md.bind(null,ke,!0,n),n.dispatch=t,[e,t]},useMemoCache:Ed,useCacheRefresh:function(){return Yt().memoizedState=Ab.bind(null,ke)},useEffectEvent:function(e){var t=Yt(),n={impl:e};return t.memoizedState=n,function(){if(Ke&2)throw Error(Y(440));return n.impl.apply(void 0,arguments)}}},Rd={readContext:Vt,use:hr,useCallback:iy,useContext:Vt,useEffect:wd,useImperativeHandle:sy,useInsertionEffect:ny,useLayoutEffect:oy,useMemo:ay,useReducer:ua,useRef:ey,useState:function(){return ua(xo)},useDebugValue:Nd,useDeferredValue:function(e,t){var n=Tt();return ry(n,it.memoizedState,e,t)},useTransition:function(){var e=ua(xo)[0],t=Tt().memoizedState;return[typeof e=="boolean"?e:Mi(e),t]},useSyncExternalStore:Hg,useId:fy,useHostTransitionStatus:_d,useFormState:Vf,useActionState:Vf,useOptimistic:function(e,t){var n=Tt();return $g(n,it,e,t)},useMemoCache:Ed,useCacheRefresh:hy};Rd.useEffectEvent=ty;var xy={readContext:Vt,use:hr,useCallback:iy,useContext:Vt,useEffect:wd,useImperativeHandle:sy,useInsertionEffect:ny,useLayoutEffect:oy,useMemo:ay,useReducer:uc,useRef:ey,useState:function(){return uc(xo)},useDebugValue:Nd,useDeferredValue:function(e,t){var n=Tt();return it===null?Ad(n,e,t):ry(n,it.memoizedState,e,t)},useTransition:function(){var e=uc(xo)[0],t=Tt().memoizedState;return[typeof e=="boolean"?e:Mi(e),t]},useSyncExternalStore:Hg,useId:fy,useHostTransitionStatus:_d,useFormState:Hf,useActionState:Hf,useOptimistic:function(e,t){var n=Tt();return it!==null?$g(n,it,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Ed,useCacheRefresh:hy};xy.useEffectEvent=ty;function dc(e,t,n,o){t=e.memoizedState,n=n(o,t),n=n==null?t:yt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var pu={enqueueSetState:function(e,t,n){e=e._reactInternals;var o=yn(),l=Oo(o);l.payload=t,n!=null&&(l.callback=n),t=Fo(e,l,o),t!==null&&(tn(t,e,o),Zs(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var o=yn(),l=Oo(o);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=Fo(e,l,o),t!==null&&(tn(t,e,o),Zs(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=yn(),o=Oo(n);o.tag=2,t!=null&&(o.callback=t),t=Fo(e,o,n),t!==null&&(tn(t,e,n),Zs(t,e,n))}};function Ff(e,t,n,o,l,s,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,s,i):t.prototype&&t.prototype.isPureReactComponent?!di(n,o)||!di(l,s):!0}function Yf(e,t,n,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,o),t.state!==e&&pu.enqueueReplaceState(t,t.state,null)}function bl(e,t){var n=t;if("ref"in t){n={};for(var o in t)o!=="ref"&&(n[o]=t[o])}if(e=e.defaultProps){n===t&&(n=yt({},n));for(var l in e)n[l]===void 0&&(n[l]=e[l])}return n}function vy(e){Ma(e)}function by(e){console.error(e)}function Cy(e){Ma(e)}function Pa(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(o){setTimeout(function(){throw o})}}function Jf(e,t,n){try{var o=e.onCaughtError;o(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(l){setTimeout(function(){throw l})}}function mu(e,t,n){return n=Oo(n),n.tag=3,n.payload={element:null},n.callback=function(){Pa(e,t)},n}function Sy(e){return e=Oo(e),e.tag=3,e}function Ey(e,t,n,o){var l=n.type.getDerivedStateFromError;if(typeof l=="function"){var s=o.value;e.payload=function(){return l(s)},e.callback=function(){Jf(t,n,o)}}var i=n.stateNode;i!==null&&typeof i.componentDidCatch=="function"&&(e.callback=function(){Jf(t,n,o),typeof l!="function"&&(Yo===null?Yo=new Set([this]):Yo.add(this));var r=o.stack;this.componentDidCatch(o.value,{componentStack:r!==null?r:""})})}function Mb(e,t,n,o,l){if(n.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(t=n.alternate,t!==null&&Ss(t,n,l,!0),n=vn.current,n!==null){switch(n.tag){case 31:case 13:return Mn===null?Ha():n.alternate===null&&St===0&&(St=3),n.flags&=-257,n.flags|=65536,n.lanes=l,o===Da?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([o]):t.add(o),Sc(e,o,l)),!1;case 22:return n.flags|=65536,o===Da?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([o])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([o]):n.add(o)),Sc(e,o,l)),!1}throw Error(Y(435,n.tag))}return Sc(e,o,l),Ha(),!1}if(Fe)return t=vn.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=l,o!==nu&&(e=Error(Y(422),{cause:o}),hi(An(e,n)))):(o!==nu&&(t=Error(Y(423),{cause:o}),hi(An(t,n))),e=e.current.alternate,e.flags|=65536,l&=-l,e.lanes|=l,o=An(o,n),l=mu(e.stateNode,o,l),cc(e,l),St!==4&&(St=2)),!1;var s=Error(Y(520),{cause:o});if(s=An(s,n),oi===null?oi=[s]:oi.push(s),St!==4&&(St=2),t===null)return!0;o=An(o,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=l&-l,n.lanes|=e,e=mu(n.stateNode,o,e),cc(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Yo===null||!Yo.has(s))))return n.flags|=65536,l&=-l,n.lanes|=l,l=Sy(l),Ey(l,e,n,o),cc(n,l),!1}n=n.return}while(n!==null);return!1}var Id=Error(Y(461)),Rt=!1;function Bt(e,t,n,o){t.child=e===null?zg(t,null,n,o):xl(t,e.child,n,o)}function Xf(e,t,n,o,l){n=n.render;var s=t.ref;if("ref"in o){var i={};for(var r in o)r!=="ref"&&(i[r]=o[r])}else i=o;return yl(t),o=vd(e,t,n,i,s,l),r=bd(),e!==null&&!Rt?(Cd(e,t,l),vo(e,t,l)):(Fe&&r&&dd(t),t.flags|=1,Bt(e,t,o,l),t.child)}function $f(e,t,n,o,l){if(e===null){var s=n.type;return typeof s=="function"&&!ud(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,Ty(e,t,s,o,l)):(e=ra(n.type,null,o,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!kd(e,l)){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:di,n(i,o)&&e.ref===t.ref)return vo(e,t,l)}return t.flags|=1,e=ho(s,o),e.ref=t.ref,e.return=t,t.child=e}function Ty(e,t,n,o,l){if(e!==null){var s=e.memoizedProps;if(di(s,o)&&e.ref===t.ref)if(Rt=!1,t.pendingProps=o=s,kd(e,l))e.flags&131072&&(Rt=!0);else return t.lanes=e.lanes,vo(e,t,l)}return gu(e,t,n,o,l)}function wy(e,t,n,o){var l=o.children,s=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if(t.flags&128){if(s=s!==null?s.baseLanes|n:n,e!==null){for(o=t.child=e.child,l=0;o!==null;)l=l|o.lanes|o.childLanes,o=o.sibling;o=l&~s}else o=0,t.child=null;return Kf(e,t,s,n,o)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ca(t,s!==null?s.cachePool:null),s!==null?Pf(t,s):cu(),qg(t);else return o=t.lanes=536870912,Kf(e,t,s!==null?s.baseLanes|n:n,n,o)}else s!==null?(ca(t,s.cachePool),Pf(t,s),Lo(),t.memoizedState=null):(e!==null&&ca(t,null),cu(),Lo());return Bt(e,t,l,n),t.child}function Hs(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Kf(e,t,n,o,l){var s=pd();return s=s===null?null:{parent:Mt._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},e!==null&&ca(t,null),cu(),qg(t),e!==null&&Ss(e,t,o,!0),t.childLanes=l,null}function fa(e,t){return t=Ba({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Zf(e,t,n){return xl(t,e.child,null,n),e=fa(t,t.pendingProps),e.flags|=2,dn(t),t.memoizedState=null,e}function Rb(e,t,n){var o=t.pendingProps,l=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Fe){if(o.mode==="hidden")return e=fa(t,o),t.lanes=536870912,Hs(null,e);if(uu(t),(e=mt)?(e=yx(e,_n),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Zo!==null?{id:On,overflow:Fn}:null,retryLane:536870912,hydrationErrors:null},n=Rg(e),n.return=t,t.child=n,Gt=t,mt=null)):e=null,e===null)throw Qo(t);return t.lanes=536870912,null}return fa(t,o)}var s=e.memoizedState;if(s!==null){var i=s.dehydrated;if(uu(t),l)if(t.flags&256)t.flags&=-257,t=Zf(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(Y(558));else if(Rt||Ss(e,t,n,!1),l=(n&e.childLanes)!==0,Rt||l){if(o=rt,o!==null&&(i=ng(o,n),i!==0&&i!==s.retryLane))throw s.retryLane=i,Nl(e,i),tn(o,e,i),Id;Ha(),t=Zf(e,t,n)}else e=s.treeContext,mt=Rn(i.nextSibling),Gt=t,Fe=!0,Ho=null,_n=!1,e!==null&&kg(t,e),t=fa(t,o),t.flags|=4096;return t}return e=ho(e.child,{mode:o.mode,children:o.children}),e.ref=t.ref,t.child=e,e.return=t,e}function ha(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(Y(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function gu(e,t,n,o,l){return yl(t),n=vd(e,t,n,o,void 0,l),o=bd(),e!==null&&!Rt?(Cd(e,t,l),vo(e,t,l)):(Fe&&o&&dd(t),t.flags|=1,Bt(e,t,n,l),t.child)}function Qf(e,t,n,o,l,s){return yl(t),t.updateQueue=null,n=Vg(t,o,n,l),Gg(e),o=bd(),e!==null&&!Rt?(Cd(e,t,s),vo(e,t,s)):(Fe&&o&&dd(t),t.flags|=1,Bt(e,t,n,s),t.child)}function Wf(e,t,n,o,l){if(yl(t),t.stateNode===null){var s=Fl,i=n.contextType;typeof i=="object"&&i!==null&&(s=Vt(i)),s=new n(o,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=pu,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=o,s.state=t.memoizedState,s.refs={},gd(t),i=n.contextType,s.context=typeof i=="object"&&i!==null?Vt(i):Fl,s.state=t.memoizedState,i=n.getDerivedStateFromProps,typeof i=="function"&&(dc(t,n,i,o),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(i=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),i!==s.state&&pu.enqueueReplaceState(s,s.state,null),Ws(t,o,s,l),Qs(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),o=!0}else if(e===null){s=t.stateNode;var r=t.memoizedProps,u=bl(n,r);s.props=u;var f=s.context,h=n.contextType;i=Fl,typeof h=="object"&&h!==null&&(i=Vt(h));var p=n.getDerivedStateFromProps;h=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function",r=t.pendingProps!==r,h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(r||f!==i)&&Yf(t,s,o,i),Ro=!1;var m=t.memoizedState;s.state=m,Ws(t,o,s,l),Qs(),f=t.memoizedState,r||m!==f||Ro?(typeof p=="function"&&(dc(t,n,p,o),f=t.memoizedState),(u=Ro||Ff(t,n,u,o,m,f,i))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=f),s.props=o,s.state=f,s.context=i,o=u):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{s=t.stateNode,au(e,t),i=t.memoizedProps,h=bl(n,i),s.props=h,p=t.pendingProps,m=s.context,f=n.contextType,u=Fl,typeof f=="object"&&f!==null&&(u=Vt(f)),r=n.getDerivedStateFromProps,(f=typeof r=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(i!==p||m!==u)&&Yf(t,s,o,u),Ro=!1,m=t.memoizedState,s.state=m,Ws(t,o,s,l),Qs();var g=t.memoizedState;i!==p||m!==g||Ro||e!==null&&e.dependencies!==null&&ka(e.dependencies)?(typeof r=="function"&&(dc(t,n,r,o),g=t.memoizedState),(h=Ro||Ff(t,n,h,o,m,g,u)||e!==null&&e.dependencies!==null&&ka(e.dependencies))?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(o,g,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(o,g,u)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=g),s.props=o,s.state=g,s.context=u,o=h):(typeof s.componentDidUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),o=!1)}return s=o,ha(e,t),o=(t.flags&128)!==0,s||o?(s=t.stateNode,n=o&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&o?(t.child=xl(t,e.child,null,l),t.child=xl(t,null,n,l)):Bt(e,t,n,l),t.memoizedState=s.state,e=t.child):e=vo(e,t,l),e}function eh(e,t,n,o){return gl(),t.flags|=256,Bt(e,t,n,o),t.child}var fc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hc(e){return{baseLanes:e,cachePool:Lg()}}function pc(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=hn),e}function Ny(e,t,n){var o=t.pendingProps,l=!1,s=(t.flags&128)!==0,i;if((i=s)||(i=e!==null&&e.memoizedState===null?!1:(Et.current&2)!==0),i&&(l=!0,t.flags&=-129),i=(t.flags&32)!==0,t.flags&=-33,e===null){if(Fe){if(l?Do(t):Lo(),(e=mt)?(e=yx(e,_n),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Zo!==null?{id:On,overflow:Fn}:null,retryLane:536870912,hydrationErrors:null},n=Rg(e),n.return=t,t.child=n,Gt=t,mt=null)):e=null,e===null)throw Qo(t);return Ru(e)?t.lanes=32:t.lanes=536870912,null}var r=o.children;return o=o.fallback,l?(Lo(),l=t.mode,r=Ba({mode:"hidden",children:r},l),o=fl(o,l,n,null),r.return=t,o.return=t,r.sibling=o,t.child=r,o=t.child,o.memoizedState=hc(n),o.childLanes=pc(e,i,n),t.memoizedState=fc,Hs(null,o)):(Do(t),yu(t,r))}var u=e.memoizedState;if(u!==null&&(r=u.dehydrated,r!==null)){if(s)t.flags&256?(Do(t),t.flags&=-257,t=mc(e,t,n)):t.memoizedState!==null?(Lo(),t.child=e.child,t.flags|=128,t=null):(Lo(),r=o.fallback,l=t.mode,o=Ba({mode:"visible",children:o.children},l),r=fl(r,l,n,null),r.flags|=2,o.return=t,r.return=t,o.sibling=r,t.child=o,xl(t,e.child,null,n),o=t.child,o.memoizedState=hc(n),o.childLanes=pc(e,i,n),t.memoizedState=fc,t=Hs(null,o));else if(Do(t),Ru(r)){if(i=r.nextSibling&&r.nextSibling.dataset,i)var f=i.dgst;i=f,o=Error(Y(419)),o.stack="",o.digest=i,hi({value:o,source:null,stack:null}),t=mc(e,t,n)}else if(Rt||Ss(e,t,n,!1),i=(n&e.childLanes)!==0,Rt||i){if(i=rt,i!==null&&(o=ng(i,n),o!==0&&o!==u.retryLane))throw u.retryLane=o,Nl(e,o),tn(i,e,o),Id;Mu(r)||Ha(),t=mc(e,t,n)}else Mu(r)?(t.flags|=192,t.child=e.child,t=null):(e=u.treeContext,mt=Rn(r.nextSibling),Gt=t,Fe=!0,Ho=null,_n=!1,e!==null&&kg(t,e),t=yu(t,o.children),t.flags|=4096);return t}return l?(Lo(),r=o.fallback,l=t.mode,u=e.child,f=u.sibling,o=ho(u,{mode:"hidden",children:o.children}),o.subtreeFlags=u.subtreeFlags&65011712,f!==null?r=ho(f,r):(r=fl(r,l,n,null),r.flags|=2),r.return=t,o.return=t,o.sibling=r,t.child=o,Hs(null,o),o=t.child,r=e.child.memoizedState,r===null?r=hc(n):(l=r.cachePool,l!==null?(u=Mt._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Lg(),r={baseLanes:r.baseLanes|n,cachePool:l}),o.memoizedState=r,o.childLanes=pc(e,i,n),t.memoizedState=fc,Hs(e.child,o)):(Do(t),n=e.child,e=n.sibling,n=ho(n,{mode:"visible",children:o.children}),n.return=t,n.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n,t.memoizedState=null,n)}function yu(e,t){return t=Ba({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Ba(e,t){return e=fn(22,e,null,t),e.lanes=0,e}function mc(e,t,n){return xl(t,e.child,null,n),e=yu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function th(e,t,n){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),lu(e.return,t,n)}function gc(e,t,n,o,l,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:n,tailMode:l,treeForkCount:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=o,i.tail=n,i.tailMode=l,i.treeForkCount=s)}function Ay(e,t,n){var o=t.pendingProps,l=o.revealOrder,s=o.tail;o=o.children;var i=Et.current,r=(i&2)!==0;if(r?(i=i&1|2,t.flags|=128):i&=1,ct(Et,i),Bt(e,t,o,n),o=Fe?fi:0,!r&&e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&th(e,n,t);else if(e.tag===19)th(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&ja(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),gc(t,!1,l,n,s,o);break;case"backwards":case"unstable_legacy-backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&ja(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}gc(t,!0,n,null,s,o);break;case"together":gc(t,!1,null,null,void 0,o);break;default:t.memoizedState=null}return t.child}function vo(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),el|=t.lanes,!(n&t.childLanes))if(e!==null){if(Ss(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(Y(153));if(t.child!==null){for(e=t.child,n=ho(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ho(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function kd(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&ka(e)))}function Ib(e,t,n){switch(t.tag){case 3:wa(t,t.stateNode.containerInfo),ko(t,Mt,e.memoizedState.cache),gl();break;case 27:case 5:Fc(t);break;case 4:wa(t,t.stateNode.containerInfo);break;case 10:ko(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,uu(t),null;break;case 13:var o=t.memoizedState;if(o!==null)return o.dehydrated!==null?(Do(t),t.flags|=128,null):n&t.child.childLanes?Ny(e,t,n):(Do(t),e=vo(e,t,n),e!==null?e.sibling:null);Do(t);break;case 19:var l=(e.flags&128)!==0;if(o=(n&t.childLanes)!==0,o||(Ss(e,t,n,!1),o=(n&t.childLanes)!==0),l){if(o)return Ay(e,t,n);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),ct(Et,Et.current),o)break;return null;case 22:return t.lanes=0,wy(e,t,n,t.pendingProps);case 24:ko(t,Mt,e.memoizedState.cache)}return vo(e,t,n)}function _y(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Rt=!0;else{if(!kd(e,n)&&!(t.flags&128))return Rt=!1,Ib(e,t,n);Rt=!!(e.flags&131072)}else Rt=!1,Fe&&t.flags&1048576&&Ig(t,fi,t.index);switch(t.lanes=0,t.tag){case 16:e:{var o=t.pendingProps;if(e=cl(t.elementType),t.type=e,typeof e=="function")ud(e)?(o=bl(e,o),t.tag=1,t=Wf(null,t,e,o,n)):(t.tag=0,t=gu(null,t,e,o,n));else{if(e!=null){var l=e.$$typeof;if(l===Ku){t.tag=11,t=Xf(null,t,e,o,n);break e}else if(l===Zu){t.tag=14,t=$f(null,t,e,o,n);break e}}throw t=Hc(e)||e,Error(Y(306,t,""))}}return t;case 0:return gu(e,t,t.type,t.pendingProps,n);case 1:return o=t.type,l=bl(o,t.pendingProps),Wf(e,t,o,l,n);case 3:e:{if(wa(t,t.stateNode.containerInfo),e===null)throw Error(Y(387));o=t.pendingProps;var s=t.memoizedState;l=s.element,au(e,t),Ws(t,o,null,n);var i=t.memoizedState;if(o=i.cache,ko(t,Mt,o),o!==s.cache&&su(t,[Mt],n,!0),Qs(),o=i.element,s.isDehydrated)if(s={element:o,isDehydrated:!1,cache:i.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=eh(e,t,o,n);break e}else if(o!==l){l=An(Error(Y(424)),t),hi(l),t=eh(e,t,o,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(mt=Rn(e.firstChild),Gt=t,Fe=!0,Ho=null,_n=!0,n=zg(t,null,o,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(gl(),o===l){t=vo(e,t,n);break e}Bt(e,t,o,n)}t=t.child}return t;case 26:return ha(e,t),e===null?(n=Ch(t.type,null,t.pendingProps,null))?t.memoizedState=n:Fe||(n=t.type,e=t.pendingProps,o=Ja(Vo.current).createElement(n),o[qt]=t,o[nn]=e,Ht(o,n,e),jt(o),t.stateNode=o):t.memoizedState=Ch(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Fc(t),e===null&&Fe&&(o=t.stateNode=xx(t.type,t.pendingProps,Vo.current),Gt=t,_n=!0,l=mt,nl(t.type)?(Iu=l,mt=Rn(o.firstChild)):mt=l),Bt(e,t,t.pendingProps.children,n),ha(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Fe&&((l=o=mt)&&(o=a1(o,t.type,t.pendingProps,_n),o!==null?(t.stateNode=o,Gt=t,mt=Rn(o.firstChild),_n=!1,l=!0):l=!1),l||Qo(t)),Fc(t),l=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Au(l,s)?o=null:i!==null&&Au(l,i)&&(t.flags|=32),t.memoizedState!==null&&(l=vd(e,t,Sb,null,null,n),vi._currentValue=l),ha(e,t),Bt(e,t,o,n),t.child;case 6:return e===null&&Fe&&((e=n=mt)&&(n=r1(n,t.pendingProps,_n),n!==null?(t.stateNode=n,Gt=t,mt=null,e=!0):e=!1),e||Qo(t)),null;case 13:return Ny(e,t,n);case 4:return wa(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=xl(t,null,o,n):Bt(e,t,o,n),t.child;case 11:return Xf(e,t,t.type,t.pendingProps,n);case 7:return Bt(e,t,t.pendingProps,n),t.child;case 8:return Bt(e,t,t.pendingProps.children,n),t.child;case 12:return Bt(e,t,t.pendingProps.children,n),t.child;case 10:return o=t.pendingProps,ko(t,t.type,o.value),Bt(e,t,o.children,n),t.child;case 9:return l=t.type._context,o=t.pendingProps.children,yl(t),l=Vt(l),o=o(l),t.flags|=1,Bt(e,t,o,n),t.child;case 14:return $f(e,t,t.type,t.pendingProps,n);case 15:return Ty(e,t,t.type,t.pendingProps,n);case 19:return Ay(e,t,n);case 31:return Rb(e,t,n);case 22:return wy(e,t,n,t.pendingProps);case 24:return yl(t),o=Vt(Mt),e===null?(l=pd(),l===null&&(l=rt,s=hd(),l.pooledCache=s,s.refCount++,s!==null&&(l.pooledCacheLanes|=n),l=s),t.memoizedState={parent:o,cache:l},gd(t),ko(t,Mt,l)):(e.lanes&n&&(au(e,t),Ws(t,null,null,n),Qs()),l=e.memoizedState,s=t.memoizedState,l.parent!==o?(l={parent:o,cache:o},t.memoizedState=l,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=l),ko(t,Mt,o)):(o=s.cache,ko(t,Mt,o),o!==l.cache&&su(t,[Mt],n,!0))),Bt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(Y(156,t.tag))}function to(e){e.flags|=4}function yc(e,t,n,o,l){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(l&335544128)===l)if(e.stateNode.complete)e.flags|=8192;else if(Qy())e.flags|=8192;else throw pl=Da,md}else e.flags&=-16777217}function nh(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!Cx(t))if(Qy())e.flags|=8192;else throw pl=Da,md}function Ki(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Wm():536870912,e.lanes|=t,fs|=t)}function Us(e,t){if(!Fe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function ht(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,o=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,o|=l.subtreeFlags&65011712,o|=l.flags&65011712,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,o|=l.subtreeFlags,o|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=o,e.childLanes=n,t}function kb(e,t,n){var o=t.pendingProps;switch(fd(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(t),null;case 1:return ht(t),null;case 3:return n=t.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),t.memoizedState.cache!==o&&(t.flags|=2048),po(Mt),is(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Il(t)?to(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,rc())),ht(t),null;case 26:var l=t.type,s=t.memoizedState;return e===null?(to(t),s!==null?(ht(t),nh(t,s)):(ht(t),yc(t,l,null,o,n))):s?s!==e.memoizedState?(to(t),ht(t),nh(t,s)):(ht(t),t.flags&=-16777217):(e=e.memoizedProps,e!==o&&to(t),ht(t),yc(t,l,e,o,n)),null;case 27:if(Na(t),n=Vo.current,l=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&to(t);else{if(!o){if(t.stateNode===null)throw Error(Y(166));return ht(t),null}e=Jn.current,Il(t)?If(t):(e=xx(l,o,n),t.stateNode=e,to(t))}return ht(t),null;case 5:if(Na(t),l=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&to(t);else{if(!o){if(t.stateNode===null)throw Error(Y(166));return ht(t),null}if(s=Jn.current,Il(t))If(t);else{var i=Ja(Vo.current);switch(s){case 1:s=i.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:s=i.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":s=i.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":s=i.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":s=i.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof o.is=="string"?i.createElement("select",{is:o.is}):i.createElement("select"),o.multiple?s.multiple=!0:o.size&&(s.size=o.size);break;default:s=typeof o.is=="string"?i.createElement(l,{is:o.is}):i.createElement(l)}}s[qt]=t,s[nn]=o;e:for(i=t.child;i!==null;){if(i.tag===5||i.tag===6)s.appendChild(i.stateNode);else if(i.tag!==4&&i.tag!==27&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=s;e:switch(Ht(s,l,o),l){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&to(t)}}return ht(t),yc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==o&&to(t);else{if(typeof o!="string"&&t.stateNode===null)throw Error(Y(166));if(e=Vo.current,Il(t)){if(e=t.stateNode,n=t.memoizedProps,o=null,l=Gt,l!==null)switch(l.tag){case 27:case 5:o=l.memoizedProps}e[qt]=t,e=!!(e.nodeValue===n||o!==null&&o.suppressHydrationWarning===!0||px(e.nodeValue,n)),e||Qo(t,!0)}else e=Ja(e).createTextNode(o),e[qt]=t,t.stateNode=e}return ht(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(o=Il(t),n!==null){if(e===null){if(!o)throw Error(Y(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Y(557));e[qt]=t}else gl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ht(t),e=!1}else n=rc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(dn(t),t):(dn(t),null);if(t.flags&128)throw Error(Y(558))}return ht(t),null;case 13:if(o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(l=Il(t),o!==null&&o.dehydrated!==null){if(e===null){if(!l)throw Error(Y(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(Y(317));l[qt]=t}else gl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ht(t),l=!1}else l=rc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),l=!0;if(!l)return t.flags&256?(dn(t),t):(dn(t),null)}return dn(t),t.flags&128?(t.lanes=n,t):(n=o!==null,e=e!==null&&e.memoizedState!==null,n&&(o=t.child,l=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(l=o.alternate.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==l&&(o.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Ki(t,t.updateQueue),ht(t),null);case 4:return is(),e===null&&Bd(t.stateNode.containerInfo),ht(t),null;case 10:return po(t.type),ht(t),null;case 19:if(Ut(Et),o=t.memoizedState,o===null)return ht(t),null;if(l=(t.flags&128)!==0,s=o.rendering,s===null)if(l)Us(o,!1);else{if(St!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=ja(e),s!==null){for(t.flags|=128,Us(o,!1),e=s.updateQueue,t.updateQueue=e,Ki(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Mg(n,e),n=n.sibling;return ct(Et,Et.current&1|2),Fe&&io(t,o.treeForkCount),t.child}e=e.sibling}o.tail!==null&&pn()>Ga&&(t.flags|=128,l=!0,Us(o,!1),t.lanes=4194304)}else{if(!l)if(e=ja(s),e!==null){if(t.flags|=128,l=!0,e=e.updateQueue,t.updateQueue=e,Ki(t,e),Us(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Fe)return ht(t),null}else 2*pn()-o.renderingStartTime>Ga&&n!==536870912&&(t.flags|=128,l=!0,Us(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(e=o.last,e!==null?e.sibling=s:t.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=pn(),e.sibling=null,n=Et.current,ct(Et,l?n&1|2:n&1),Fe&&io(t,o.treeForkCount),e):(ht(t),null);case 22:case 23:return dn(t),yd(),o=t.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(t.flags|=8192):o&&(t.flags|=8192),o?n&536870912&&!(t.flags&128)&&(ht(t),t.subtreeFlags&6&&(t.flags|=8192)):ht(t),n=t.updateQueue,n!==null&&Ki(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),o=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),o!==n&&(t.flags|=2048),e!==null&&Ut(hl),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),po(Mt),ht(t),null;case 25:return null;case 30:return null}throw Error(Y(156,t.tag))}function Db(e,t){switch(fd(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return po(Mt),is(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Na(t),null;case 31:if(t.memoizedState!==null){if(dn(t),t.alternate===null)throw Error(Y(340));gl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(dn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Y(340));gl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ut(Et),null;case 4:return is(),null;case 10:return po(t.type),null;case 22:case 23:return dn(t),yd(),e!==null&&Ut(hl),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return po(Mt),null;case 25:return null;default:return null}}function My(e,t){switch(fd(t),t.tag){case 3:po(Mt),is();break;case 26:case 27:case 5:Na(t);break;case 4:is();break;case 31:t.memoizedState!==null&&dn(t);break;case 13:dn(t);break;case 19:Ut(Et);break;case 10:po(t.type);break;case 22:case 23:dn(t),yd(),e!==null&&Ut(hl);break;case 24:po(Mt)}}function Ri(e,t){try{var n=t.updateQueue,o=n!==null?n.lastEffect:null;if(o!==null){var l=o.next;n=l;do{if((n.tag&e)===e){o=void 0;var s=n.create,i=n.inst;o=s(),i.destroy=o}n=n.next}while(n!==l)}}catch(r){et(t,t.return,r)}}function Wo(e,t,n){try{var o=t.updateQueue,l=o!==null?o.lastEffect:null;if(l!==null){var s=l.next;o=s;do{if((o.tag&e)===e){var i=o.inst,r=i.destroy;if(r!==void 0){i.destroy=void 0,l=t;var u=n,f=r;try{f()}catch(h){et(l,u,h)}}}o=o.next}while(o!==s)}}catch(h){et(t,t.return,h)}}function Ry(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Bg(t,n)}catch(o){et(e,e.return,o)}}}function Iy(e,t,n){n.props=bl(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(o){et(e,t,o)}}function ti(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof n=="function"?e.refCleanup=n(o):n.current=o}}catch(l){et(e,t,l)}}function Yn(e,t){var n=e.ref,o=e.refCleanup;if(n!==null)if(typeof o=="function")try{o()}catch(l){et(e,t,l)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(l){et(e,t,l)}else n.current=null}function ky(e){var t=e.type,n=e.memoizedProps,o=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&o.focus();break e;case"img":n.src?o.src=n.src:n.srcSet&&(o.srcset=n.srcSet)}}catch(l){et(e,e.return,l)}}function xc(e,t,n){try{var o=e.stateNode;t1(o,e.type,n,t),o[nn]=t}catch(l){et(e,e.return,l)}}function Dy(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&nl(e.type)||e.tag===4}function vc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Dy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&nl(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function xu(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=uo));else if(o!==4&&(o===27&&nl(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(xu(e,t,n),e=e.sibling;e!==null;)xu(e,t,n),e=e.sibling}function qa(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(o!==4&&(o===27&&nl(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(qa(e,t,n),e=e.sibling;e!==null;)qa(e,t,n),e=e.sibling}function Ly(e){var t=e.stateNode,n=e.memoizedProps;try{for(var o=e.type,l=t.attributes;l.length;)t.removeAttributeNode(l[0]);Ht(t,o,n),t[qt]=e,t[nn]=n}catch(s){et(e,e.return,s)}}var ao=!1,_t=!1,bc=!1,oh=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function Lb(e,t){if(e=e.containerInfo,wu=Za,e=Cg(e),ad(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var o=n.getSelection&&n.getSelection();if(o&&o.rangeCount!==0){n=o.anchorNode;var l=o.anchorOffset,s=o.focusNode;o=o.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,r=-1,u=-1,f=0,h=0,p=e,m=null;t:for(;;){for(var g;p!==n||l!==0&&p.nodeType!==3||(r=i+l),p!==s||o!==0&&p.nodeType!==3||(u=i+o),p.nodeType===3&&(i+=p.nodeValue.length),(g=p.firstChild)!==null;)m=p,p=g;for(;;){if(p===e)break t;if(m===n&&++f===l&&(r=i),m===s&&++h===o&&(u=i),(g=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=g}n=r===-1||u===-1?null:{start:r,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Nu={focusedElem:e,selectionRange:n},Za=!1,Lt=t;Lt!==null;)if(t=Lt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Lt=e;else for(;Lt!==null;){switch(t=Lt,s=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)l=e[n],l.ref.impl=l.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&s!==null){e=void 0,n=t,l=s.memoizedProps,s=s.memoizedState,o=n.stateNode;try{var E=bl(n.type,l);e=o.getSnapshotBeforeUpdate(E,s),o.__reactInternalSnapshotBeforeUpdate=e}catch(T){et(n,n.return,T)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)_u(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":_u(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(Y(163))}if(e=t.sibling,e!==null){e.return=t.return,Lt=e;break}Lt=t.return}}function jy(e,t,n){var o=n.flags;switch(n.tag){case 0:case 11:case 15:oo(e,n),o&4&&Ri(5,n);break;case 1:if(oo(e,n),o&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(i){et(n,n.return,i)}else{var l=bl(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(l,t,e.__reactInternalSnapshotBeforeUpdate)}catch(i){et(n,n.return,i)}}o&64&&Ry(n),o&512&&ti(n,n.return);break;case 3:if(oo(e,n),o&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Bg(e,t)}catch(i){et(n,n.return,i)}}break;case 27:t===null&&o&4&&Ly(n);case 26:case 5:oo(e,n),t===null&&o&4&&ky(n),o&512&&ti(n,n.return);break;case 12:oo(e,n);break;case 31:oo(e,n),o&4&&Py(e,n);break;case 13:oo(e,n),o&4&&By(e,n),o&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Hb.bind(null,n),c1(e,n))));break;case 22:if(o=n.memoizedState!==null||ao,!o){t=t!==null&&t.memoizedState!==null||_t,l=ao;var s=_t;ao=o,(_t=t)&&!s?lo(e,n,(n.subtreeFlags&8772)!==0):oo(e,n),ao=l,_t=s}break;case 30:break;default:oo(e,n)}}function Uy(e){var t=e.alternate;t!==null&&(e.alternate=null,Uy(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&td(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var vt=null,Wt=!1;function no(e,t,n){for(n=n.child;n!==null;)zy(e,t,n),n=n.sibling}function zy(e,t,n){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(Ei,n)}catch{}switch(n.tag){case 26:_t||Yn(n,t),no(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:_t||Yn(n,t);var o=vt,l=Wt;nl(n.type)&&(vt=n.stateNode,Wt=!1),no(e,t,n),si(n.stateNode),vt=o,Wt=l;break;case 5:_t||Yn(n,t);case 6:if(o=vt,l=Wt,vt=null,no(e,t,n),vt=o,Wt=l,vt!==null)if(Wt)try{(vt.nodeType===9?vt.body:vt.nodeName==="HTML"?vt.ownerDocument.body:vt).removeChild(n.stateNode)}catch(s){et(n,t,s)}else try{vt.removeChild(n.stateNode)}catch(s){et(n,t,s)}break;case 18:vt!==null&&(Wt?(e=vt,gh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),gs(e)):gh(vt,n.stateNode));break;case 4:o=vt,l=Wt,vt=n.stateNode.containerInfo,Wt=!0,no(e,t,n),vt=o,Wt=l;break;case 0:case 11:case 14:case 15:Wo(2,n,t),_t||Wo(4,n,t),no(e,t,n);break;case 1:_t||(Yn(n,t),o=n.stateNode,typeof o.componentWillUnmount=="function"&&Iy(n,t,o)),no(e,t,n);break;case 21:no(e,t,n);break;case 22:_t=(o=_t)||n.memoizedState!==null,no(e,t,n),_t=o;break;default:no(e,t,n)}}function Py(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{gs(e)}catch(n){et(t,t.return,n)}}}function By(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{gs(e)}catch(n){et(t,t.return,n)}}function jb(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new oh),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new oh),t;default:throw Error(Y(435,e.tag))}}function Zi(e,t){var n=jb(e);t.forEach(function(o){if(!n.has(o)){n.add(o);var l=Ob.bind(null,e,o);o.then(l,l)}})}function Zt(e,t){var n=t.deletions;if(n!==null)for(var o=0;o<n.length;o++){var l=n[o],s=e,i=t,r=i;e:for(;r!==null;){switch(r.tag){case 27:if(nl(r.type)){vt=r.stateNode,Wt=!1;break e}break;case 5:vt=r.stateNode,Wt=!1;break e;case 3:case 4:vt=r.stateNode.containerInfo,Wt=!0;break e}r=r.return}if(vt===null)throw Error(Y(160));zy(s,i,l),vt=null,Wt=!1,s=l.alternate,s!==null&&(s.return=null),l.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)qy(t,e),t=t.sibling}var Un=null;function qy(e,t){var n=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Zt(t,e),Qt(e),o&4&&(Wo(3,e,e.return),Ri(3,e),Wo(5,e,e.return));break;case 1:Zt(t,e),Qt(e),o&512&&(_t||n===null||Yn(n,n.return)),o&64&&ao&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?o:n.concat(o))));break;case 26:var l=Un;if(Zt(t,e),Qt(e),o&512&&(_t||n===null||Yn(n,n.return)),o&4){var s=n!==null?n.memoizedState:null;if(o=e.memoizedState,n===null)if(o===null)if(e.stateNode===null){e:{o=e.type,n=e.memoizedProps,l=l.ownerDocument||l;t:switch(o){case"title":s=l.getElementsByTagName("title")[0],(!s||s[Ni]||s[qt]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=l.createElement(o),l.head.insertBefore(s,l.querySelector("head > title"))),Ht(s,o,n),s[qt]=e,jt(s),o=s;break e;case"link":var i=Eh("link","href",l).get(o+(n.href||""));if(i){for(var r=0;r<i.length;r++)if(s=i[r],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){i.splice(r,1);break t}}s=l.createElement(o),Ht(s,o,n),l.head.appendChild(s);break;case"meta":if(i=Eh("meta","content",l).get(o+(n.content||""))){for(r=0;r<i.length;r++)if(s=i[r],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){i.splice(r,1);break t}}s=l.createElement(o),Ht(s,o,n),l.head.appendChild(s);break;default:throw Error(Y(468,o))}s[qt]=e,jt(s),o=s}e.stateNode=o}else Th(l,e.type,e.stateNode);else e.stateNode=Sh(l,o,e.memoizedProps);else s!==o?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,o===null?Th(l,e.type,e.stateNode):Sh(l,o,e.memoizedProps)):o===null&&e.stateNode!==null&&xc(e,e.memoizedProps,n.memoizedProps)}break;case 27:Zt(t,e),Qt(e),o&512&&(_t||n===null||Yn(n,n.return)),n!==null&&o&4&&xc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Zt(t,e),Qt(e),o&512&&(_t||n===null||Yn(n,n.return)),e.flags&32){l=e.stateNode;try{rs(l,"")}catch(E){et(e,e.return,E)}}o&4&&e.stateNode!=null&&(l=e.memoizedProps,xc(e,l,n!==null?n.memoizedProps:l)),o&1024&&(bc=!0);break;case 6:if(Zt(t,e),Qt(e),o&4){if(e.stateNode===null)throw Error(Y(162));o=e.memoizedProps,n=e.stateNode;try{n.nodeValue=o}catch(E){et(e,e.return,E)}}break;case 3:if(ga=null,l=Un,Un=Xa(t.containerInfo),Zt(t,e),Un=l,Qt(e),o&4&&n!==null&&n.memoizedState.isDehydrated)try{gs(t.containerInfo)}catch(E){et(e,e.return,E)}bc&&(bc=!1,Gy(e));break;case 4:o=Un,Un=Xa(e.stateNode.containerInfo),Zt(t,e),Qt(e),Un=o;break;case 12:Zt(t,e),Qt(e);break;case 31:Zt(t,e),Qt(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Zi(e,o)));break;case 13:Zt(t,e),Qt(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(gr=pn()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Zi(e,o)));break;case 22:l=e.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,f=ao,h=_t;if(ao=f||l,_t=h||u,Zt(t,e),_t=h,ao=f,Qt(e),o&8192)e:for(t=e.stateNode,t._visibility=l?t._visibility&-2:t._visibility|1,l&&(n===null||u||ao||_t||ul(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){u=n=t;try{if(s=u.stateNode,l)i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none";else{r=u.stateNode;var p=u.memoizedProps.style,m=p!=null&&p.hasOwnProperty("display")?p.display:null;r.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(E){et(u,u.return,E)}}}else if(t.tag===6){if(n===null){u=t;try{u.stateNode.nodeValue=l?"":u.memoizedProps}catch(E){et(u,u.return,E)}}}else if(t.tag===18){if(n===null){u=t;try{var g=u.stateNode;l?yh(g,!0):yh(u.stateNode,!1)}catch(E){et(u,u.return,E)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}o&4&&(o=e.updateQueue,o!==null&&(n=o.retryQueue,n!==null&&(o.retryQueue=null,Zi(e,n))));break;case 19:Zt(t,e),Qt(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Zi(e,o)));break;case 30:break;case 21:break;default:Zt(t,e),Qt(e)}}function Qt(e){var t=e.flags;if(t&2){try{for(var n,o=e.return;o!==null;){if(Dy(o)){n=o;break}o=o.return}if(n==null)throw Error(Y(160));switch(n.tag){case 27:var l=n.stateNode,s=vc(e);qa(e,s,l);break;case 5:var i=n.stateNode;n.flags&32&&(rs(i,""),n.flags&=-33);var r=vc(e);qa(e,r,i);break;case 3:case 4:var u=n.stateNode.containerInfo,f=vc(e);xu(e,f,u);break;default:throw Error(Y(161))}}catch(h){et(e,e.return,h)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Gy(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Gy(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function oo(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)jy(e,t.alternate,t),t=t.sibling}function ul(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Wo(4,t,t.return),ul(t);break;case 1:Yn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Iy(t,t.return,n),ul(t);break;case 27:si(t.stateNode);case 26:case 5:Yn(t,t.return),ul(t);break;case 22:t.memoizedState===null&&ul(t);break;case 30:ul(t);break;default:ul(t)}e=e.sibling}}function lo(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var o=t.alternate,l=e,s=t,i=s.flags;switch(s.tag){case 0:case 11:case 15:lo(l,s,n),Ri(4,s);break;case 1:if(lo(l,s,n),o=s,l=o.stateNode,typeof l.componentDidMount=="function")try{l.componentDidMount()}catch(f){et(o,o.return,f)}if(o=s,l=o.updateQueue,l!==null){var r=o.stateNode;try{var u=l.shared.hiddenCallbacks;if(u!==null)for(l.shared.hiddenCallbacks=null,l=0;l<u.length;l++)Pg(u[l],r)}catch(f){et(o,o.return,f)}}n&&i&64&&Ry(s),ti(s,s.return);break;case 27:Ly(s);case 26:case 5:lo(l,s,n),n&&o===null&&i&4&&ky(s),ti(s,s.return);break;case 12:lo(l,s,n);break;case 31:lo(l,s,n),n&&i&4&&Py(l,s);break;case 13:lo(l,s,n),n&&i&4&&By(l,s);break;case 22:s.memoizedState===null&&lo(l,s,n),ti(s,s.return);break;case 30:break;default:lo(l,s,n)}t=t.sibling}}function Dd(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&_i(n))}function Ld(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&_i(e))}function Ln(e,t,n,o){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Vy(e,t,n,o),t=t.sibling}function Vy(e,t,n,o){var l=t.flags;switch(t.tag){case 0:case 11:case 15:Ln(e,t,n,o),l&2048&&Ri(9,t);break;case 1:Ln(e,t,n,o);break;case 3:Ln(e,t,n,o),l&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&_i(e)));break;case 12:if(l&2048){Ln(e,t,n,o),e=t.stateNode;try{var s=t.memoizedProps,i=s.id,r=s.onPostCommit;typeof r=="function"&&r(i,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(u){et(t,t.return,u)}}else Ln(e,t,n,o);break;case 31:Ln(e,t,n,o);break;case 13:Ln(e,t,n,o);break;case 23:break;case 22:s=t.stateNode,i=t.alternate,t.memoizedState!==null?s._visibility&2?Ln(e,t,n,o):ni(e,t):s._visibility&2?Ln(e,t,n,o):(s._visibility|=2,jl(e,t,n,o,(t.subtreeFlags&10256)!==0||!1)),l&2048&&Dd(i,t);break;case 24:Ln(e,t,n,o),l&2048&&Ld(t.alternate,t);break;default:Ln(e,t,n,o)}}function jl(e,t,n,o,l){for(l=l&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var s=e,i=t,r=n,u=o,f=i.flags;switch(i.tag){case 0:case 11:case 15:jl(s,i,r,u,l),Ri(8,i);break;case 23:break;case 22:var h=i.stateNode;i.memoizedState!==null?h._visibility&2?jl(s,i,r,u,l):ni(s,i):(h._visibility|=2,jl(s,i,r,u,l)),l&&f&2048&&Dd(i.alternate,i);break;case 24:jl(s,i,r,u,l),l&&f&2048&&Ld(i.alternate,i);break;default:jl(s,i,r,u,l)}t=t.sibling}}function ni(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,o=t,l=o.flags;switch(o.tag){case 22:ni(n,o),l&2048&&Dd(o.alternate,o);break;case 24:ni(n,o),l&2048&&Ld(o.alternate,o);break;default:ni(n,o)}t=t.sibling}}var Os=8192;function kl(e,t,n){if(e.subtreeFlags&Os)for(e=e.child;e!==null;)Hy(e,t,n),e=e.sibling}function Hy(e,t,n){switch(e.tag){case 26:kl(e,t,n),e.flags&Os&&e.memoizedState!==null&&C1(n,Un,e.memoizedState,e.memoizedProps);break;case 5:kl(e,t,n);break;case 3:case 4:var o=Un;Un=Xa(e.stateNode.containerInfo),kl(e,t,n),Un=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=Os,Os=16777216,kl(e,t,n),Os=o):kl(e,t,n));break;default:kl(e,t,n)}}function Oy(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function zs(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var o=t[n];Lt=o,Yy(o,e)}Oy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Fy(e),e=e.sibling}function Fy(e){switch(e.tag){case 0:case 11:case 15:zs(e),e.flags&2048&&Wo(9,e,e.return);break;case 3:zs(e);break;case 12:zs(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,pa(e)):zs(e);break;default:zs(e)}}function pa(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var o=t[n];Lt=o,Yy(o,e)}Oy(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Wo(8,t,t.return),pa(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,pa(t));break;default:pa(t)}e=e.sibling}}function Yy(e,t){for(;Lt!==null;){var n=Lt;switch(n.tag){case 0:case 11:case 15:Wo(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var o=n.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:_i(n.memoizedState.cache)}if(o=n.child,o!==null)o.return=n,Lt=o;else e:for(n=e;Lt!==null;){o=Lt;var l=o.sibling,s=o.return;if(Uy(o),o===n){Lt=null;break e}if(l!==null){l.return=s,Lt=l;break e}Lt=s}}}var Ub={getCacheForType:function(e){var t=Vt(Mt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Vt(Mt).controller.signal}},zb=typeof WeakMap=="function"?WeakMap:Map,Ke=0,rt=null,qe=null,Ve=0,We=0,un=null,Po=!1,Ts=!1,jd=!1,bo=0,St=0,el=0,ml=0,Ud=0,hn=0,fs=0,oi=null,en=null,vu=!1,gr=0,Jy=0,Ga=1/0,Va=null,Yo=null,kt=0,Jo=null,hs=null,mo=0,bu=0,Cu=null,Xy=null,li=0,Su=null;function yn(){return Ke&2&&Ve!==0?Ve&-Ve:Ne.T!==null?Pd():og()}function $y(){if(hn===0)if(!(Ve&536870912)||Fe){var e=Hi;Hi<<=1,!(Hi&3932160)&&(Hi=262144),hn=e}else hn=536870912;return e=vn.current,e!==null&&(e.flags|=32),hn}function tn(e,t,n){(e===rt&&(We===2||We===9)||e.cancelPendingCommit!==null)&&(ps(e,0),Bo(e,Ve,hn,!1)),wi(e,n),(!(Ke&2)||e!==rt)&&(e===rt&&(!(Ke&2)&&(ml|=n),St===4&&Bo(e,Ve,hn,!1)),Kn(e))}function Ky(e,t,n){if(Ke&6)throw Error(Y(327));var o=!n&&(t&127)===0&&(t&e.expiredLanes)===0||Ti(e,t),l=o?qb(e,t):Cc(e,t,!0),s=o;do{if(l===0){Ts&&!o&&Bo(e,t,0,!1);break}else{if(n=e.current.alternate,s&&!Pb(n)){l=Cc(e,t,!1),s=!1;continue}if(l===2){if(s=t,e.errorRecoveryDisabledLanes&s)var i=0;else i=e.pendingLanes&-536870913,i=i!==0?i:i&536870912?536870912:0;if(i!==0){t=i;e:{var r=e;l=oi;var u=r.current.memoizedState.isDehydrated;if(u&&(ps(r,i).flags|=256),i=Cc(r,i,!1),i!==2){if(jd&&!u){r.errorRecoveryDisabledLanes|=s,ml|=s,l=4;break e}s=en,en=l,s!==null&&(en===null?en=s:en.push.apply(en,s))}l=i}if(s=!1,l!==2)continue}}if(l===1){ps(e,0),Bo(e,t,0,!0);break}e:{switch(o=e,s=l,s){case 0:case 1:throw Error(Y(345));case 4:if((t&4194048)!==t)break;case 6:Bo(o,t,hn,!Po);break e;case 2:en=null;break;case 3:case 5:break;default:throw Error(Y(329))}if((t&62914560)===t&&(l=gr+300-pn(),10<l)){if(Bo(o,t,hn,!Po),sr(o,0,!0)!==0)break e;mo=t,o.timeoutHandle=gx(lh.bind(null,o,n,en,Va,vu,t,hn,ml,fs,Po,s,"Throttled",-0,0),l);break e}lh(o,n,en,Va,vu,t,hn,ml,fs,Po,s,null,-0,0)}}break}while(1);Kn(e)}function lh(e,t,n,o,l,s,i,r,u,f,h,p,m,g){if(e.timeoutHandle=-1,p=t.subtreeFlags,p&8192||(p&16785408)===16785408){p={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:uo},Hy(t,s,p);var E=(s&62914560)===s?gr-pn():(s&4194048)===s?Jy-pn():0;if(E=S1(p,E),E!==null){mo=s,e.cancelPendingCommit=E(ih.bind(null,e,t,s,n,o,l,i,r,u,h,p,null,m,g)),Bo(e,s,i,!f);return}}ih(e,t,s,n,o,l,i,r,u)}function Pb(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var o=0;o<n.length;o++){var l=n[o],s=l.getSnapshot;l=l.value;try{if(!xn(s(),l))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bo(e,t,n,o){t&=~Ud,t&=~ml,e.suspendedLanes|=t,e.pingedLanes&=~t,o&&(e.warmLanes|=t),o=e.expirationTimes;for(var l=t;0<l;){var s=31-gn(l),i=1<<s;o[s]=-1,l&=~i}n!==0&&eg(e,n,t)}function yr(){return Ke&6?!0:(Ii(0,!1),!1)}function zd(){if(qe!==null){if(We===0)var e=qe.return;else e=qe,fo=Al=null,Sd(e),es=null,pi=0,e=qe;for(;e!==null;)My(e.alternate,e),e=e.return;qe=null}}function ps(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,l1(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),mo=0,zd(),rt=e,qe=n=ho(e.current,null),Ve=t,We=0,un=null,Po=!1,Ts=Ti(e,t),jd=!1,fs=hn=Ud=ml=el=St=0,en=oi=null,vu=!1,t&8&&(t|=t&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=t;0<o;){var l=31-gn(o),s=1<<l;t|=e[l],o&=~s}return bo=t,cr(),n}function Zy(e,t){ke=null,Ne.H=gi,t===Es||t===dr?(t=Uf(),We=3):t===md?(t=Uf(),We=4):We=t===Id?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,un=t,qe===null&&(St=1,Pa(e,An(t,e.current)))}function Qy(){var e=vn.current;return e===null?!0:(Ve&4194048)===Ve?Mn===null:(Ve&62914560)===Ve||Ve&536870912?e===Mn:!1}function Wy(){var e=Ne.H;return Ne.H=gi,e===null?gi:e}function ex(){var e=Ne.A;return Ne.A=Ub,e}function Ha(){St=4,Po||(Ve&4194048)!==Ve&&vn.current!==null||(Ts=!0),!(el&134217727)&&!(ml&134217727)||rt===null||Bo(rt,Ve,hn,!1)}function Cc(e,t,n){var o=Ke;Ke|=2;var l=Wy(),s=ex();(rt!==e||Ve!==t)&&(Va=null,ps(e,t)),t=!1;var i=St;e:do try{if(We!==0&&qe!==null){var r=qe,u=un;switch(We){case 8:zd(),i=6;break e;case 3:case 2:case 9:case 6:vn.current===null&&(t=!0);var f=We;if(We=0,un=null,Xl(e,r,u,f),n&&Ts){i=0;break e}break;default:f=We,We=0,un=null,Xl(e,r,u,f)}}Bb(),i=St;break}catch(h){Zy(e,h)}while(1);return t&&e.shellSuspendCounter++,fo=Al=null,Ke=o,Ne.H=l,Ne.A=s,qe===null&&(rt=null,Ve=0,cr()),i}function Bb(){for(;qe!==null;)tx(qe)}function qb(e,t){var n=Ke;Ke|=2;var o=Wy(),l=ex();rt!==e||Ve!==t?(Va=null,Ga=pn()+500,ps(e,t)):Ts=Ti(e,t);e:do try{if(We!==0&&qe!==null){t=qe;var s=un;t:switch(We){case 1:We=0,un=null,Xl(e,t,s,1);break;case 2:case 9:if(jf(s)){We=0,un=null,sh(t);break}t=function(){We!==2&&We!==9||rt!==e||(We=7),Kn(e)},s.then(t,t);break e;case 3:We=7;break e;case 4:We=5;break e;case 7:jf(s)?(We=0,un=null,sh(t)):(We=0,un=null,Xl(e,t,s,7));break;case 5:var i=null;switch(qe.tag){case 26:i=qe.memoizedState;case 5:case 27:var r=qe;if(i?Cx(i):r.stateNode.complete){We=0,un=null;var u=r.sibling;if(u!==null)qe=u;else{var f=r.return;f!==null?(qe=f,xr(f)):qe=null}break t}}We=0,un=null,Xl(e,t,s,5);break;case 6:We=0,un=null,Xl(e,t,s,6);break;case 8:zd(),St=6;break e;default:throw Error(Y(462))}}Gb();break}catch(h){Zy(e,h)}while(1);return fo=Al=null,Ne.H=o,Ne.A=l,Ke=n,qe!==null?0:(rt=null,Ve=0,cr(),St)}function Gb(){for(;qe!==null&&!uv();)tx(qe)}function tx(e){var t=_y(e.alternate,e,bo);e.memoizedProps=e.pendingProps,t===null?xr(e):qe=t}function sh(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Qf(n,t,t.pendingProps,t.type,void 0,Ve);break;case 11:t=Qf(n,t,t.pendingProps,t.type.render,t.ref,Ve);break;case 5:Sd(t);default:My(n,t),t=qe=Mg(t,bo),t=_y(n,t,bo)}e.memoizedProps=e.pendingProps,t===null?xr(e):qe=t}function Xl(e,t,n,o){fo=Al=null,Sd(t),es=null,pi=0;var l=t.return;try{if(Mb(e,l,t,n,Ve)){St=1,Pa(e,An(n,e.current)),qe=null;return}}catch(s){if(l!==null)throw qe=l,s;St=1,Pa(e,An(n,e.current)),qe=null;return}t.flags&32768?(Fe||o===1?e=!0:Ts||Ve&536870912?e=!1:(Po=e=!0,(o===2||o===9||o===3||o===6)&&(o=vn.current,o!==null&&o.tag===13&&(o.flags|=16384))),nx(t,e)):xr(t)}function xr(e){var t=e;do{if(t.flags&32768){nx(t,Po);return}e=t.return;var n=kb(t.alternate,t,bo);if(n!==null){qe=n;return}if(t=t.sibling,t!==null){qe=t;return}qe=t=e}while(t!==null);St===0&&(St=5)}function nx(e,t){do{var n=Db(e.alternate,e);if(n!==null){n.flags&=32767,qe=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){qe=e;return}qe=e=n}while(e!==null);St=6,qe=null}function ih(e,t,n,o,l,s,i,r,u){e.cancelPendingCommit=null;do vr();while(kt!==0);if(Ke&6)throw Error(Y(327));if(t!==null){if(t===e.current)throw Error(Y(177));if(s=t.lanes|t.childLanes,s|=rd,bv(e,n,s,i,r,u),e===rt&&(qe=rt=null,Ve=0),hs=t,Jo=e,mo=n,bu=s,Cu=l,Xy=o,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,Fb(Aa,function(){return ax(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(t.flags&13878)!==0,t.subtreeFlags&13878||o){o=Ne.T,Ne.T=null,l=Ze.p,Ze.p=2,i=Ke,Ke|=4;try{Lb(e,t,n)}finally{Ke=i,Ze.p=l,Ne.T=o}}kt=1,ox(),lx(),sx()}}function ox(){if(kt===1){kt=0;var e=Jo,t=hs,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=Ne.T,Ne.T=null;var o=Ze.p;Ze.p=2;var l=Ke;Ke|=4;try{qy(t,e);var s=Nu,i=Cg(e.containerInfo),r=s.focusedElem,u=s.selectionRange;if(i!==r&&r&&r.ownerDocument&&bg(r.ownerDocument.documentElement,r)){if(u!==null&&ad(r)){var f=u.start,h=u.end;if(h===void 0&&(h=f),"selectionStart"in r)r.selectionStart=f,r.selectionEnd=Math.min(h,r.value.length);else{var p=r.ownerDocument||document,m=p&&p.defaultView||window;if(m.getSelection){var g=m.getSelection(),E=r.textContent.length,T=Math.min(u.start,E),M=u.end===void 0?T:Math.min(u.end,E);!g.extend&&T>M&&(i=M,M=T,T=i);var y=_f(r,T),x=_f(r,M);if(y&&x&&(g.rangeCount!==1||g.anchorNode!==y.node||g.anchorOffset!==y.offset||g.focusNode!==x.node||g.focusOffset!==x.offset)){var v=p.createRange();v.setStart(y.node,y.offset),g.removeAllRanges(),T>M?(g.addRange(v),g.extend(x.node,x.offset)):(v.setEnd(x.node,x.offset),g.addRange(v))}}}}for(p=[],g=r;g=g.parentNode;)g.nodeType===1&&p.push({element:g,left:g.scrollLeft,top:g.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<p.length;r++){var S=p[r];S.element.scrollLeft=S.left,S.element.scrollTop=S.top}}Za=!!wu,Nu=wu=null}finally{Ke=l,Ze.p=o,Ne.T=n}}e.current=t,kt=2}}function lx(){if(kt===2){kt=0;var e=Jo,t=hs,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=Ne.T,Ne.T=null;var o=Ze.p;Ze.p=2;var l=Ke;Ke|=4;try{jy(e,t.alternate,t)}finally{Ke=l,Ze.p=o,Ne.T=n}}kt=3}}function sx(){if(kt===4||kt===3){kt=0,dv();var e=Jo,t=hs,n=mo,o=Xy;t.subtreeFlags&10256||t.flags&10256?kt=5:(kt=0,hs=Jo=null,ix(e,e.pendingLanes));var l=e.pendingLanes;if(l===0&&(Yo=null),ed(n),t=t.stateNode,mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(Ei,t,void 0,(t.current.flags&128)===128)}catch{}if(o!==null){t=Ne.T,l=Ze.p,Ze.p=2,Ne.T=null;try{for(var s=e.onRecoverableError,i=0;i<o.length;i++){var r=o[i];s(r.value,{componentStack:r.stack})}}finally{Ne.T=t,Ze.p=l}}mo&3&&vr(),Kn(e),l=e.pendingLanes,n&261930&&l&42?e===Su?li++:(li=0,Su=e):li=0,Ii(0,!1)}}function ix(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,_i(t)))}function vr(){return ox(),lx(),sx(),ax()}function ax(){if(kt!==5)return!1;var e=Jo,t=bu;bu=0;var n=ed(mo),o=Ne.T,l=Ze.p;try{Ze.p=32>n?32:n,Ne.T=null,n=Cu,Cu=null;var s=Jo,i=mo;if(kt=0,hs=Jo=null,mo=0,Ke&6)throw Error(Y(331));var r=Ke;if(Ke|=4,Fy(s.current),Vy(s,s.current,i,n),Ke=r,Ii(0,!1),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(Ei,s)}catch{}return!0}finally{Ze.p=l,Ne.T=o,ix(e,t)}}function ah(e,t,n){t=An(n,t),t=mu(e.stateNode,t,2),e=Fo(e,t,2),e!==null&&(wi(e,2),Kn(e))}function et(e,t,n){if(e.tag===3)ah(e,e,n);else for(;t!==null;){if(t.tag===3){ah(t,e,n);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Yo===null||!Yo.has(o))){e=An(n,e),n=Sy(2),o=Fo(t,n,2),o!==null&&(Ey(n,o,t,e),wi(o,2),Kn(o));break}}t=t.return}}function Sc(e,t,n){var o=e.pingCache;if(o===null){o=e.pingCache=new zb;var l=new Set;o.set(t,l)}else l=o.get(t),l===void 0&&(l=new Set,o.set(t,l));l.has(n)||(jd=!0,l.add(n),e=Vb.bind(null,e,t,n),t.then(e,e))}function Vb(e,t,n){var o=e.pingCache;o!==null&&o.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,rt===e&&(Ve&n)===n&&(St===4||St===3&&(Ve&62914560)===Ve&&300>pn()-gr?!(Ke&2)&&ps(e,0):Ud|=n,fs===Ve&&(fs=0)),Kn(e)}function rx(e,t){t===0&&(t=Wm()),e=Nl(e,t),e!==null&&(wi(e,t),Kn(e))}function Hb(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),rx(e,n)}function Ob(e,t){var n=0;switch(e.tag){case 31:case 13:var o=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(Y(314))}o!==null&&o.delete(t),rx(e,n)}function Fb(e,t){return Qu(e,t)}var Oa=null,Ul=null,Eu=!1,Fa=!1,Ec=!1,qo=0;function Kn(e){e!==Ul&&e.next===null&&(Ul===null?Oa=Ul=e:Ul=Ul.next=e),Fa=!0,Eu||(Eu=!0,Jb())}function Ii(e,t){if(!Ec&&Fa){Ec=!0;do for(var n=!1,o=Oa;o!==null;){if(!t)if(e!==0){var l=o.pendingLanes;if(l===0)var s=0;else{var i=o.suspendedLanes,r=o.pingedLanes;s=(1<<31-gn(42|e)+1)-1,s&=l&~(i&~r),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,rh(o,s))}else s=Ve,s=sr(o,o===rt?s:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),!(s&3)||Ti(o,s)||(n=!0,rh(o,s));o=o.next}while(n);Ec=!1}}function Yb(){cx()}function cx(){Fa=Eu=!1;var e=0;qo!==0&&o1()&&(e=qo);for(var t=pn(),n=null,o=Oa;o!==null;){var l=o.next,s=ux(o,t);s===0?(o.next=null,n===null?Oa=l:n.next=l,l===null&&(Ul=n)):(n=o,(e!==0||s&3)&&(Fa=!0)),o=l}kt!==0&&kt!==5||Ii(e,!1),qo!==0&&(qo=0)}function ux(e,t){for(var n=e.suspendedLanes,o=e.pingedLanes,l=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var i=31-gn(s),r=1<<i,u=l[i];u===-1?(!(r&n)||r&o)&&(l[i]=vv(r,t)):u<=t&&(e.expiredLanes|=r),s&=~r}if(t=rt,n=Ve,n=sr(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,n===0||e===t&&(We===2||We===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Zr(o),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Ti(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(o!==null&&Zr(o),ed(n)){case 2:case 8:n=Zm;break;case 32:n=Aa;break;case 268435456:n=Qm;break;default:n=Aa}return o=dx.bind(null,e),n=Qu(n,o),e.callbackPriority=t,e.callbackNode=n,t}return o!==null&&o!==null&&Zr(o),e.callbackPriority=2,e.callbackNode=null,2}function dx(e,t){if(kt!==0&&kt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(vr()&&e.callbackNode!==n)return null;var o=Ve;return o=sr(e,e===rt?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Ky(e,o,t),ux(e,pn()),e.callbackNode!=null&&e.callbackNode===n?dx.bind(null,e):null)}function rh(e,t){if(vr())return null;Ky(e,t,!0)}function Jb(){s1(function(){Ke&6?Qu(Km,Yb):cx()})}function Pd(){if(qo===0){var e=cs;e===0&&(e=Vi,Vi<<=1,!(Vi&261888)&&(Vi=256)),qo=e}return qo}function ch(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:sa(""+e)}function uh(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Xb(e,t,n,o,l){if(t==="submit"&&n&&n.stateNode===l){var s=ch((l[nn]||null).action),i=o.submitter;i&&(t=(t=i[nn]||null)?ch(t.formAction):i.getAttribute("formAction"),t!==null&&(s=t,i=null));var r=new ir("action","action",null,o,l);e.push({event:r,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(qo!==0){var u=i?uh(l,i):new FormData(l);hu(n,{pending:!0,data:u,method:l.method,action:s},null,u)}}else typeof s=="function"&&(r.preventDefault(),u=i?uh(l,i):new FormData(l),hu(n,{pending:!0,data:u,method:l.method,action:s},s,u))},currentTarget:l}]})}}for(var Tc=0;Tc<tu.length;Tc++){var wc=tu[Tc],$b=wc.toLowerCase(),Kb=wc[0].toUpperCase()+wc.slice(1);zn($b,"on"+Kb)}zn(Eg,"onAnimationEnd");zn(Tg,"onAnimationIteration");zn(wg,"onAnimationStart");zn("dblclick","onDoubleClick");zn("focusin","onFocus");zn("focusout","onBlur");zn(fb,"onTransitionRun");zn(hb,"onTransitionStart");zn(pb,"onTransitionCancel");zn(Ng,"onTransitionEnd");as("onMouseEnter",["mouseout","mouseover"]);as("onMouseLeave",["mouseout","mouseover"]);as("onPointerEnter",["pointerout","pointerover"]);as("onPointerLeave",["pointerout","pointerover"]);El("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));El("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));El("onBeforeInput",["compositionend","keypress","textInput","paste"]);El("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));El("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));El("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yi));function fx(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var o=e[n],l=o.event;o=o.listeners;e:{var s=void 0;if(t)for(var i=o.length-1;0<=i;i--){var r=o[i],u=r.instance,f=r.currentTarget;if(r=r.listener,u!==s&&l.isPropagationStopped())break e;s=r,l.currentTarget=f;try{s(l)}catch(h){Ma(h)}l.currentTarget=null,s=u}else for(i=0;i<o.length;i++){if(r=o[i],u=r.instance,f=r.currentTarget,r=r.listener,u!==s&&l.isPropagationStopped())break e;s=r,l.currentTarget=f;try{s(l)}catch(h){Ma(h)}l.currentTarget=null,s=u}}}}function Be(e,t){var n=t[Jc];n===void 0&&(n=t[Jc]=new Set);var o=e+"__bubble";n.has(o)||(hx(t,e,2,!1),n.add(o))}function Nc(e,t,n){var o=0;t&&(o|=4),hx(n,e,o,t)}var Qi="_reactListening"+Math.random().toString(36).slice(2);function Bd(e){if(!e[Qi]){e[Qi]=!0,lg.forEach(function(n){n!=="selectionchange"&&(Zb.has(n)||Nc(n,!1,e),Nc(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Qi]||(t[Qi]=!0,Nc("selectionchange",!1,t))}}function hx(e,t,n,o){switch(Nx(t)){case 2:var l=w1;break;case 8:l=N1;break;default:l=Hd}n=l.bind(null,t,n,e),l=void 0,!Qc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),o?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function Ac(e,t,n,o,l){var s=o;if(!(t&1)&&!(t&2)&&o!==null)e:for(;;){if(o===null)return;var i=o.tag;if(i===3||i===4){var r=o.stateNode.containerInfo;if(r===l)break;if(i===4)for(i=o.return;i!==null;){var u=i.tag;if((u===3||u===4)&&i.stateNode.containerInfo===l)return;i=i.return}for(;r!==null;){if(i=Bl(r),i===null)return;if(u=i.tag,u===5||u===6||u===26||u===27){o=s=i;continue e}r=r.parentNode}}o=o.return}fg(function(){var f=s,h=od(n),p=[];e:{var m=Ag.get(e);if(m!==void 0){var g=ir,E=e;switch(e){case"keypress":if(aa(n)===0)break e;case"keydown":case"keyup":g=Ov;break;case"focusin":E="focus",g=nc;break;case"focusout":E="blur",g=nc;break;case"beforeblur":case"afterblur":g=nc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=xf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=kv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Jv;break;case Eg:case Tg:case wg:g=jv;break;case Ng:g=$v;break;case"scroll":case"scrollend":g=Rv;break;case"wheel":g=Zv;break;case"copy":case"cut":case"paste":g=zv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=bf;break;case"toggle":case"beforetoggle":g=Wv}var T=(t&4)!==0,M=!T&&(e==="scroll"||e==="scrollend"),y=T?m!==null?m+"Capture":null:m;T=[];for(var x=f,v;x!==null;){var S=x;if(v=S.stateNode,S=S.tag,S!==5&&S!==26&&S!==27||v===null||y===null||(S=ci(x,y),S!=null&&T.push(xi(x,S,v))),M)break;x=x.return}0<T.length&&(m=new g(m,E,null,n,h),p.push({event:m,listeners:T}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",m&&n!==Zc&&(E=n.relatedTarget||n.fromElement)&&(Bl(E)||E[bs]))break e;if((g||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,g?(E=n.relatedTarget||n.toElement,g=f,E=E?Bl(E):null,E!==null&&(M=Si(E),T=E.tag,E!==M||T!==5&&T!==27&&T!==6)&&(E=null)):(g=null,E=f),g!==E)){if(T=xf,S="onMouseLeave",y="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(T=bf,S="onPointerLeave",y="onPointerEnter",x="pointer"),M=g==null?m:Vs(g),v=E==null?m:Vs(E),m=new T(S,x+"leave",g,n,h),m.target=M,m.relatedTarget=v,S=null,Bl(h)===f&&(T=new T(y,x+"enter",E,n,h),T.target=v,T.relatedTarget=M,S=T),M=S,g&&E)t:{for(T=Qb,y=g,x=E,v=0,S=y;S;S=T(S))v++;S=0;for(var N=x;N;N=T(N))S++;for(;0<v-S;)y=T(y),v--;for(;0<S-v;)x=T(x),S--;for(;v--;){if(y===x||x!==null&&y===x.alternate){T=y;break t}y=T(y),x=T(x)}T=null}else T=null;g!==null&&dh(p,m,g,T,!1),E!==null&&M!==null&&dh(p,M,E,T,!0)}}e:{if(m=f?Vs(f):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var L=Tf;else if(Ef(m))if(xg)L=cb;else{L=ab;var A=ib}else g=m.nodeName,!g||g.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?f&&nd(f.elementType)&&(L=Tf):L=rb;if(L&&(L=L(e,f))){yg(p,L,n,h);break e}A&&A(e,m,f),e==="focusout"&&f&&m.type==="number"&&f.memoizedProps.value!=null&&Kc(m,"number",m.value)}switch(A=f?Vs(f):window,e){case"focusin":(Ef(A)||A.contentEditable==="true")&&(Vl=A,Wc=f,$s=null);break;case"focusout":$s=Wc=Vl=null;break;case"mousedown":eu=!0;break;case"contextmenu":case"mouseup":case"dragend":eu=!1,Mf(p,n,h);break;case"selectionchange":if(db)break;case"keydown":case"keyup":Mf(p,n,h)}var b;if(id)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Gl?mg(e,n)&&(I="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(pg&&n.locale!=="ko"&&(Gl||I!=="onCompositionStart"?I==="onCompositionEnd"&&Gl&&(b=hg()):(zo=h,ld="value"in zo?zo.value:zo.textContent,Gl=!0)),A=Ya(f,I),0<A.length&&(I=new vf(I,e,null,n,h),p.push({event:I,listeners:A}),b?I.data=b:(b=gg(n),b!==null&&(I.data=b)))),(b=tb?nb(e,n):ob(e,n))&&(I=Ya(f,"onBeforeInput"),0<I.length&&(A=new vf("onBeforeInput","beforeinput",null,n,h),p.push({event:A,listeners:I}),A.data=b)),Xb(p,e,f,n,h)}fx(p,t)})}function xi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ya(e,t){for(var n=t+"Capture",o=[];e!==null;){var l=e,s=l.stateNode;if(l=l.tag,l!==5&&l!==26&&l!==27||s===null||(l=ci(e,n),l!=null&&o.unshift(xi(e,l,s)),l=ci(e,t),l!=null&&o.push(xi(e,l,s))),e.tag===3)return o;e=e.return}return[]}function Qb(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function dh(e,t,n,o,l){for(var s=t._reactName,i=[];n!==null&&n!==o;){var r=n,u=r.alternate,f=r.stateNode;if(r=r.tag,u!==null&&u===o)break;r!==5&&r!==26&&r!==27||f===null||(u=f,l?(f=ci(n,s),f!=null&&i.unshift(xi(n,f,u))):l||(f=ci(n,s),f!=null&&i.push(xi(n,f,u)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var Wb=/\r\n?/g,e1=/\u0000|\uFFFD/g;function fh(e){return(typeof e=="string"?e:""+e).replace(Wb,`
`).replace(e1,"")}function px(e,t){return t=fh(t),fh(e)===t}function st(e,t,n,o,l,s){switch(n){case"children":typeof o=="string"?t==="body"||t==="textarea"&&o===""||rs(e,o):(typeof o=="number"||typeof o=="bigint")&&t!=="body"&&rs(e,""+o);break;case"className":Fi(e,"class",o);break;case"tabIndex":Fi(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Fi(e,n,o);break;case"style":dg(e,o,s);break;case"data":if(t!=="object"){Fi(e,"data",o);break}case"src":case"href":if(o===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(n);break}o=sa(""+o),e.setAttribute(n,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&st(e,t,"name",l.name,l,null),st(e,t,"formEncType",l.formEncType,l,null),st(e,t,"formMethod",l.formMethod,l,null),st(e,t,"formTarget",l.formTarget,l,null)):(st(e,t,"encType",l.encType,l,null),st(e,t,"method",l.method,l,null),st(e,t,"target",l.target,l,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(n);break}o=sa(""+o),e.setAttribute(n,o);break;case"onClick":o!=null&&(e.onclick=uo);break;case"onScroll":o!=null&&Be("scroll",e);break;case"onScrollEnd":o!=null&&Be("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(Y(61));if(n=o.__html,n!=null){if(l.children!=null)throw Error(Y(60));e.innerHTML=n}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}n=sa(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(n,""+o):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":o===!0?e.setAttribute(n,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(n,o):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(n,o):e.removeAttribute(n);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(n):e.setAttribute(n,o);break;case"popover":Be("beforetoggle",e),Be("toggle",e),la(e,"popover",o);break;case"xlinkActuate":eo(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":eo(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":eo(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":eo(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":eo(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":eo(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":eo(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":eo(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":eo(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":la(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=_v.get(n)||n,la(e,n,o))}}function Tu(e,t,n,o,l,s){switch(n){case"style":dg(e,o,s);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(Y(61));if(n=o.__html,n!=null){if(l.children!=null)throw Error(Y(60));e.innerHTML=n}}break;case"children":typeof o=="string"?rs(e,o):(typeof o=="number"||typeof o=="bigint")&&rs(e,""+o);break;case"onScroll":o!=null&&Be("scroll",e);break;case"onScrollEnd":o!=null&&Be("scrollend",e);break;case"onClick":o!=null&&(e.onclick=uo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sg.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(l=n.endsWith("Capture"),t=n.slice(2,l?n.length-7:void 0),s=e[nn]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,l),typeof o=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,o,l);break e}n in e?e[n]=o:o===!0?e.setAttribute(n,""):la(e,n,o)}}}function Ht(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",e),Be("load",e);var o=!1,l=!1,s;for(s in n)if(n.hasOwnProperty(s)){var i=n[s];if(i!=null)switch(s){case"src":o=!0;break;case"srcSet":l=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(Y(137,t));default:st(e,t,s,i,n,null)}}l&&st(e,t,"srcSet",n.srcSet,n,null),o&&st(e,t,"src",n.src,n,null);return;case"input":Be("invalid",e);var r=s=i=l=null,u=null,f=null;for(o in n)if(n.hasOwnProperty(o)){var h=n[o];if(h!=null)switch(o){case"name":l=h;break;case"type":i=h;break;case"checked":u=h;break;case"defaultChecked":f=h;break;case"value":s=h;break;case"defaultValue":r=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(Y(137,t));break;default:st(e,t,o,h,n,null)}}rg(e,s,r,u,f,i,l,!1);return;case"select":Be("invalid",e),o=i=s=null;for(l in n)if(n.hasOwnProperty(l)&&(r=n[l],r!=null))switch(l){case"value":s=r;break;case"defaultValue":i=r;break;case"multiple":o=r;default:st(e,t,l,r,n,null)}t=s,n=i,e.multiple=!!o,t!=null?Zl(e,!!o,t,!1):n!=null&&Zl(e,!!o,n,!0);return;case"textarea":Be("invalid",e),s=l=o=null;for(i in n)if(n.hasOwnProperty(i)&&(r=n[i],r!=null))switch(i){case"value":o=r;break;case"defaultValue":l=r;break;case"children":s=r;break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(Y(91));break;default:st(e,t,i,r,n,null)}ug(e,o,l,s);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(o=n[u],o!=null))switch(u){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:st(e,t,u,o,n,null)}return;case"dialog":Be("beforetoggle",e),Be("toggle",e),Be("cancel",e),Be("close",e);break;case"iframe":case"object":Be("load",e);break;case"video":case"audio":for(o=0;o<yi.length;o++)Be(yi[o],e);break;case"image":Be("error",e),Be("load",e);break;case"details":Be("toggle",e);break;case"embed":case"source":case"link":Be("error",e),Be("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(f in n)if(n.hasOwnProperty(f)&&(o=n[f],o!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(Y(137,t));default:st(e,t,f,o,n,null)}return;default:if(nd(t)){for(h in n)n.hasOwnProperty(h)&&(o=n[h],o!==void 0&&Tu(e,t,h,o,n,void 0));return}}for(r in n)n.hasOwnProperty(r)&&(o=n[r],o!=null&&st(e,t,r,o,n,null))}function t1(e,t,n,o){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var l=null,s=null,i=null,r=null,u=null,f=null,h=null;for(g in n){var p=n[g];if(n.hasOwnProperty(g)&&p!=null)switch(g){case"checked":break;case"value":break;case"defaultValue":u=p;default:o.hasOwnProperty(g)||st(e,t,g,null,o,p)}}for(var m in o){var g=o[m];if(p=n[m],o.hasOwnProperty(m)&&(g!=null||p!=null))switch(m){case"type":s=g;break;case"name":l=g;break;case"checked":f=g;break;case"defaultChecked":h=g;break;case"value":i=g;break;case"defaultValue":r=g;break;case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(Y(137,t));break;default:g!==p&&st(e,t,m,g,o,p)}}$c(e,i,r,u,f,h,s,l);return;case"select":g=i=r=m=null;for(s in n)if(u=n[s],n.hasOwnProperty(s)&&u!=null)switch(s){case"value":break;case"multiple":g=u;default:o.hasOwnProperty(s)||st(e,t,s,null,o,u)}for(l in o)if(s=o[l],u=n[l],o.hasOwnProperty(l)&&(s!=null||u!=null))switch(l){case"value":m=s;break;case"defaultValue":r=s;break;case"multiple":i=s;default:s!==u&&st(e,t,l,s,o,u)}t=r,n=i,o=g,m!=null?Zl(e,!!n,m,!1):!!o!=!!n&&(t!=null?Zl(e,!!n,t,!0):Zl(e,!!n,n?[]:"",!1));return;case"textarea":g=m=null;for(r in n)if(l=n[r],n.hasOwnProperty(r)&&l!=null&&!o.hasOwnProperty(r))switch(r){case"value":break;case"children":break;default:st(e,t,r,null,o,l)}for(i in o)if(l=o[i],s=n[i],o.hasOwnProperty(i)&&(l!=null||s!=null))switch(i){case"value":m=l;break;case"defaultValue":g=l;break;case"children":break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(Y(91));break;default:l!==s&&st(e,t,i,l,o,s)}cg(e,m,g);return;case"option":for(var E in n)if(m=n[E],n.hasOwnProperty(E)&&m!=null&&!o.hasOwnProperty(E))switch(E){case"selected":e.selected=!1;break;default:st(e,t,E,null,o,m)}for(u in o)if(m=o[u],g=n[u],o.hasOwnProperty(u)&&m!==g&&(m!=null||g!=null))switch(u){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:st(e,t,u,m,o,g)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var T in n)m=n[T],n.hasOwnProperty(T)&&m!=null&&!o.hasOwnProperty(T)&&st(e,t,T,null,o,m);for(f in o)if(m=o[f],g=n[f],o.hasOwnProperty(f)&&m!==g&&(m!=null||g!=null))switch(f){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(Y(137,t));break;default:st(e,t,f,m,o,g)}return;default:if(nd(t)){for(var M in n)m=n[M],n.hasOwnProperty(M)&&m!==void 0&&!o.hasOwnProperty(M)&&Tu(e,t,M,void 0,o,m);for(h in o)m=o[h],g=n[h],!o.hasOwnProperty(h)||m===g||m===void 0&&g===void 0||Tu(e,t,h,m,o,g);return}}for(var y in n)m=n[y],n.hasOwnProperty(y)&&m!=null&&!o.hasOwnProperty(y)&&st(e,t,y,null,o,m);for(p in o)m=o[p],g=n[p],!o.hasOwnProperty(p)||m===g||m==null&&g==null||st(e,t,p,m,o,g)}function hh(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function n1(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),o=0;o<n.length;o++){var l=n[o],s=l.transferSize,i=l.initiatorType,r=l.duration;if(s&&r&&hh(i)){for(i=0,r=l.responseEnd,o+=1;o<n.length;o++){var u=n[o],f=u.startTime;if(f>r)break;var h=u.transferSize,p=u.initiatorType;h&&hh(p)&&(u=u.responseEnd,i+=h*(u<r?1:(r-f)/(u-f)))}if(--o,t+=8*(s+i)/(l.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var wu=null,Nu=null;function Ja(e){return e.nodeType===9?e:e.ownerDocument}function ph(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function mx(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Au(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var _c=null;function o1(){var e=window.event;return e&&e.type==="popstate"?e===_c?!1:(_c=e,!0):(_c=null,!1)}var gx=typeof setTimeout=="function"?setTimeout:void 0,l1=typeof clearTimeout=="function"?clearTimeout:void 0,mh=typeof Promise=="function"?Promise:void 0,s1=typeof queueMicrotask=="function"?queueMicrotask:typeof mh<"u"?function(e){return mh.resolve(null).then(e).catch(i1)}:gx;function i1(e){setTimeout(function(){throw e})}function nl(e){return e==="head"}function gh(e,t){var n=t,o=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"||n==="/&"){if(o===0){e.removeChild(l),gs(t);return}o--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")o++;else if(n==="html")si(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,si(n);for(var s=n.firstChild;s;){var i=s.nextSibling,r=s.nodeName;s[Ni]||r==="SCRIPT"||r==="STYLE"||r==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=i}}else n==="body"&&si(e.ownerDocument.body);n=l}while(n);gs(t)}function yh(e,t){var n=e;e=0;do{var o=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=o}while(n)}function _u(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":_u(n),td(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function a1(e,t,n,o){for(;e.nodeType===1;){var l=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[Ni])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==l.rel||e.getAttribute("href")!==(l.href==null||l.href===""?null:l.href)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin)||e.getAttribute("title")!==(l.title==null?null:l.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(l.src==null?null:l.src)||e.getAttribute("type")!==(l.type==null?null:l.type)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=l.name==null?null:""+l.name;if(l.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=Rn(e.nextSibling),e===null)break}return null}function r1(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Rn(e.nextSibling),e===null))return null;return e}function yx(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Rn(e.nextSibling),e===null))return null;return e}function Mu(e){return e.data==="$?"||e.data==="$~"}function Ru(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function c1(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var o=function(){t(),n.removeEventListener("DOMContentLoaded",o)};n.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function Rn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Iu=null;function xh(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return Rn(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function vh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function xx(e,t,n){switch(t=Ja(n),e){case"html":if(e=t.documentElement,!e)throw Error(Y(452));return e;case"head":if(e=t.head,!e)throw Error(Y(453));return e;case"body":if(e=t.body,!e)throw Error(Y(454));return e;default:throw Error(Y(451))}}function si(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);td(e)}var kn=new Map,bh=new Set;function Xa(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Co=Ze.d;Ze.d={f:u1,r:d1,D:f1,C:h1,L:p1,m:m1,X:y1,S:g1,M:x1};function u1(){var e=Co.f(),t=yr();return e||t}function d1(e){var t=Cs(e);t!==null&&t.tag===5&&t.type==="form"?dy(t):Co.r(e)}var ws=typeof document>"u"?null:document;function vx(e,t,n){var o=ws;if(o&&typeof t=="string"&&t){var l=Nn(t);l='link[rel="'+e+'"][href="'+l+'"]',typeof n=="string"&&(l+='[crossorigin="'+n+'"]'),bh.has(l)||(bh.add(l),e={rel:e,crossOrigin:n,href:t},o.querySelector(l)===null&&(t=o.createElement("link"),Ht(t,"link",e),jt(t),o.head.appendChild(t)))}}function f1(e){Co.D(e),vx("dns-prefetch",e,null)}function h1(e,t){Co.C(e,t),vx("preconnect",e,t)}function p1(e,t,n){Co.L(e,t,n);var o=ws;if(o&&e&&t){var l='link[rel="preload"][as="'+Nn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(l+='[imagesrcset="'+Nn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(l+='[imagesizes="'+Nn(n.imageSizes)+'"]')):l+='[href="'+Nn(e)+'"]';var s=l;switch(t){case"style":s=ms(e);break;case"script":s=Ns(e)}kn.has(s)||(e=yt({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),kn.set(s,e),o.querySelector(l)!==null||t==="style"&&o.querySelector(ki(s))||t==="script"&&o.querySelector(Di(s))||(t=o.createElement("link"),Ht(t,"link",e),jt(t),o.head.appendChild(t)))}}function m1(e,t){Co.m(e,t);var n=ws;if(n&&e){var o=t&&typeof t.as=="string"?t.as:"script",l='link[rel="modulepreload"][as="'+Nn(o)+'"][href="'+Nn(e)+'"]',s=l;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Ns(e)}if(!kn.has(s)&&(e=yt({rel:"modulepreload",href:e},t),kn.set(s,e),n.querySelector(l)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Di(s)))return}o=n.createElement("link"),Ht(o,"link",e),jt(o),n.head.appendChild(o)}}}function g1(e,t,n){Co.S(e,t,n);var o=ws;if(o&&e){var l=Kl(o).hoistableStyles,s=ms(e);t=t||"default";var i=l.get(s);if(!i){var r={loading:0,preload:null};if(i=o.querySelector(ki(s)))r.loading=5;else{e=yt({rel:"stylesheet",href:e,"data-precedence":t},n),(n=kn.get(s))&&qd(e,n);var u=i=o.createElement("link");jt(u),Ht(u,"link",e),u._p=new Promise(function(f,h){u.onload=f,u.onerror=h}),u.addEventListener("load",function(){r.loading|=1}),u.addEventListener("error",function(){r.loading|=2}),r.loading|=4,ma(i,t,o)}i={type:"stylesheet",instance:i,count:1,state:r},l.set(s,i)}}}function y1(e,t){Co.X(e,t);var n=ws;if(n&&e){var o=Kl(n).hoistableScripts,l=Ns(e),s=o.get(l);s||(s=n.querySelector(Di(l)),s||(e=yt({src:e,async:!0},t),(t=kn.get(l))&&Gd(e,t),s=n.createElement("script"),jt(s),Ht(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},o.set(l,s))}}function x1(e,t){Co.M(e,t);var n=ws;if(n&&e){var o=Kl(n).hoistableScripts,l=Ns(e),s=o.get(l);s||(s=n.querySelector(Di(l)),s||(e=yt({src:e,async:!0,type:"module"},t),(t=kn.get(l))&&Gd(e,t),s=n.createElement("script"),jt(s),Ht(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},o.set(l,s))}}function Ch(e,t,n,o){var l=(l=Vo.current)?Xa(l):null;if(!l)throw Error(Y(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=ms(n.href),n=Kl(l).hoistableStyles,o=n.get(t),o||(o={type:"style",instance:null,count:0,state:null},n.set(t,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=ms(n.href);var s=Kl(l).hoistableStyles,i=s.get(e);if(i||(l=l.ownerDocument||l,i={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,i),(s=l.querySelector(ki(e)))&&!s._p&&(i.instance=s,i.state.loading=5),kn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},kn.set(e,n),s||v1(l,e,n,i.state))),t&&o===null)throw Error(Y(528,""));return i}if(t&&o!==null)throw Error(Y(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ns(n),n=Kl(l).hoistableScripts,o=n.get(t),o||(o={type:"script",instance:null,count:0,state:null},n.set(t,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(Y(444,e))}}function ms(e){return'href="'+Nn(e)+'"'}function ki(e){return'link[rel="stylesheet"]['+e+"]"}function bx(e){return yt({},e,{"data-precedence":e.precedence,precedence:null})}function v1(e,t,n,o){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?o.loading=1:(t=e.createElement("link"),o.preload=t,t.addEventListener("load",function(){return o.loading|=1}),t.addEventListener("error",function(){return o.loading|=2}),Ht(t,"link",n),jt(t),e.head.appendChild(t))}function Ns(e){return'[src="'+Nn(e)+'"]'}function Di(e){return"script[async]"+e}function Sh(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var o=e.querySelector('style[data-href~="'+Nn(n.href)+'"]');if(o)return t.instance=o,jt(o),o;var l=yt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),jt(o),Ht(o,"style",l),ma(o,n.precedence,e),t.instance=o;case"stylesheet":l=ms(n.href);var s=e.querySelector(ki(l));if(s)return t.state.loading|=4,t.instance=s,jt(s),s;o=bx(n),(l=kn.get(l))&&qd(o,l),s=(e.ownerDocument||e).createElement("link"),jt(s);var i=s;return i._p=new Promise(function(r,u){i.onload=r,i.onerror=u}),Ht(s,"link",o),t.state.loading|=4,ma(s,n.precedence,e),t.instance=s;case"script":return s=Ns(n.src),(l=e.querySelector(Di(s)))?(t.instance=l,jt(l),l):(o=n,(l=kn.get(s))&&(o=yt({},n),Gd(o,l)),e=e.ownerDocument||e,l=e.createElement("script"),jt(l),Ht(l,"link",o),e.head.appendChild(l),t.instance=l);case"void":return null;default:throw Error(Y(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(o=t.instance,t.state.loading|=4,ma(o,n.precedence,e));return t.instance}function ma(e,t,n){for(var o=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),l=o.length?o[o.length-1]:null,s=l,i=0;i<o.length;i++){var r=o[i];if(r.dataset.precedence===t)s=r;else if(s!==l)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function qd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Gd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var ga=null;function Eh(e,t,n){if(ga===null){var o=new Map,l=ga=new Map;l.set(n,o)}else l=ga,o=l.get(n),o||(o=new Map,l.set(n,o));if(o.has(e))return o;for(o.set(e,null),n=n.getElementsByTagName(e),l=0;l<n.length;l++){var s=n[l];if(!(s[Ni]||s[qt]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var i=s.getAttribute(t)||"";i=e+i;var r=o.get(i);r?r.push(s):o.set(i,[s])}}return o}function Th(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function b1(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Cx(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}function C1(e,t,n,o){if(n.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var l=ms(o.href),s=t.querySelector(ki(l));if(s){t=s._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=$a.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=s,jt(s);return}s=t.ownerDocument||t,o=bx(o),(l=kn.get(l))&&qd(o,l),s=s.createElement("link"),jt(s);var i=s;i._p=new Promise(function(r,u){i.onload=r,i.onerror=u}),Ht(s,"link",o),n.instance=s}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(e.count++,n=$a.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var Mc=0;function S1(e,t){return e.stylesheets&&e.count===0&&ya(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var o=setTimeout(function(){if(e.stylesheets&&ya(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4+t);0<e.imgBytes&&Mc===0&&(Mc=62500*n1());var l=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&ya(e,e.stylesheets),e.unsuspend)){var s=e.unsuspend;e.unsuspend=null,s()}},(e.imgBytes>Mc?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(l)}}:null}function $a(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ya(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ka=null;function ya(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ka=new Map,t.forEach(E1,e),Ka=null,$a.call(e))}function E1(e,t){if(!(t.state.loading&4)){var n=Ka.get(e);if(n)var o=n.get(null);else{n=new Map,Ka.set(e,n);for(var l=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<l.length;s++){var i=l[s];(i.nodeName==="LINK"||i.getAttribute("media")!=="not all")&&(n.set(i.dataset.precedence,i),o=i)}o&&n.set(null,o)}l=t.instance,i=l.getAttribute("data-precedence"),s=n.get(i)||o,s===o&&n.set(null,l),n.set(i,l),this.count++,o=$a.bind(this),l.addEventListener("load",o),l.addEventListener("error",o),s?s.parentNode.insertBefore(l,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(l,e.firstChild)),t.state.loading|=4}}var vi={$$typeof:co,Provider:null,Consumer:null,_currentValue:dl,_currentValue2:dl,_threadCount:0};function T1(e,t,n,o,l,s,i,r,u){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qr(0),this.hiddenUpdates=Qr(null),this.identifierPrefix=o,this.onUncaughtError=l,this.onCaughtError=s,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=u,this.incompleteTransitions=new Map}function Sx(e,t,n,o,l,s,i,r,u,f,h,p){return e=new T1(e,t,n,i,u,f,h,p,r),t=1,s===!0&&(t|=24),s=fn(3,null,null,t),e.current=s,s.stateNode=e,t=hd(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:o,isDehydrated:n,cache:t},gd(s),e}function Ex(e){return e?(e=Fl,e):Fl}function Tx(e,t,n,o,l,s){l=Ex(l),o.context===null?o.context=l:o.pendingContext=l,o=Oo(t),o.payload={element:n},s=s===void 0?null:s,s!==null&&(o.callback=s),n=Fo(e,o,t),n!==null&&(tn(n,e,t),Zs(n,e,t))}function wh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Vd(e,t){wh(e,t),(e=e.alternate)&&wh(e,t)}function wx(e){if(e.tag===13||e.tag===31){var t=Nl(e,67108864);t!==null&&tn(t,e,67108864),Vd(e,67108864)}}function Nh(e){if(e.tag===13||e.tag===31){var t=yn();t=Wu(t);var n=Nl(e,t);n!==null&&tn(n,e,t),Vd(e,t)}}var Za=!0;function w1(e,t,n,o){var l=Ne.T;Ne.T=null;var s=Ze.p;try{Ze.p=2,Hd(e,t,n,o)}finally{Ze.p=s,Ne.T=l}}function N1(e,t,n,o){var l=Ne.T;Ne.T=null;var s=Ze.p;try{Ze.p=8,Hd(e,t,n,o)}finally{Ze.p=s,Ne.T=l}}function Hd(e,t,n,o){if(Za){var l=ku(o);if(l===null)Ac(e,t,o,Qa,n),Ah(e,o);else if(_1(l,e,t,n,o))o.stopPropagation();else if(Ah(e,o),t&4&&-1<A1.indexOf(e)){for(;l!==null;){var s=Cs(l);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var i=rl(s.pendingLanes);if(i!==0){var r=s;for(r.pendingLanes|=2,r.entangledLanes|=2;i;){var u=1<<31-gn(i);r.entanglements[1]|=u,i&=~u}Kn(s),!(Ke&6)&&(Ga=pn()+500,Ii(0,!1))}}break;case 31:case 13:r=Nl(s,2),r!==null&&tn(r,s,2),yr(),Vd(s,2)}if(s=ku(o),s===null&&Ac(e,t,o,Qa,n),s===l)break;l=s}l!==null&&o.stopPropagation()}else Ac(e,t,o,null,n)}}function ku(e){return e=od(e),Od(e)}var Qa=null;function Od(e){if(Qa=null,e=Bl(e),e!==null){var t=Si(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=Fm(t),e!==null)return e;e=null}else if(n===31){if(e=Ym(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Qa=e,null}function Nx(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fv()){case Km:return 2;case Zm:return 8;case Aa:case hv:return 32;case Qm:return 268435456;default:return 32}default:return 32}}var Du=!1,Xo=null,$o=null,Ko=null,bi=new Map,Ci=new Map,jo=[],A1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ah(e,t){switch(e){case"focusin":case"focusout":Xo=null;break;case"dragenter":case"dragleave":$o=null;break;case"mouseover":case"mouseout":Ko=null;break;case"pointerover":case"pointerout":bi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ci.delete(t.pointerId)}}function Ps(e,t,n,o,l,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:o,nativeEvent:s,targetContainers:[l]},t!==null&&(t=Cs(t),t!==null&&wx(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function _1(e,t,n,o,l){switch(t){case"focusin":return Xo=Ps(Xo,e,t,n,o,l),!0;case"dragenter":return $o=Ps($o,e,t,n,o,l),!0;case"mouseover":return Ko=Ps(Ko,e,t,n,o,l),!0;case"pointerover":var s=l.pointerId;return bi.set(s,Ps(bi.get(s)||null,e,t,n,o,l)),!0;case"gotpointercapture":return s=l.pointerId,Ci.set(s,Ps(Ci.get(s)||null,e,t,n,o,l)),!0}return!1}function Ax(e){var t=Bl(e.target);if(t!==null){var n=Si(t);if(n!==null){if(t=n.tag,t===13){if(t=Fm(n),t!==null){e.blockedOn=t,df(e.priority,function(){Nh(n)});return}}else if(t===31){if(t=Ym(n),t!==null){e.blockedOn=t,df(e.priority,function(){Nh(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function xa(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ku(e.nativeEvent);if(n===null){n=e.nativeEvent;var o=new n.constructor(n.type,n);Zc=o,n.target.dispatchEvent(o),Zc=null}else return t=Cs(n),t!==null&&wx(t),e.blockedOn=n,!1;t.shift()}return!0}function _h(e,t,n){xa(e)&&n.delete(t)}function M1(){Du=!1,Xo!==null&&xa(Xo)&&(Xo=null),$o!==null&&xa($o)&&($o=null),Ko!==null&&xa(Ko)&&(Ko=null),bi.forEach(_h),Ci.forEach(_h)}function Wi(e,t){e.blockedOn===t&&(e.blockedOn=null,Du||(Du=!0,Dt.unstable_scheduleCallback(Dt.unstable_NormalPriority,M1)))}var ea=null;function Mh(e){ea!==e&&(ea=e,Dt.unstable_scheduleCallback(Dt.unstable_NormalPriority,function(){ea===e&&(ea=null);for(var t=0;t<e.length;t+=3){var n=e[t],o=e[t+1],l=e[t+2];if(typeof o!="function"){if(Od(o||n)===null)continue;break}var s=Cs(n);s!==null&&(e.splice(t,3),t-=3,hu(s,{pending:!0,data:l,method:n.method,action:o},o,l))}}))}function gs(e){function t(u){return Wi(u,e)}Xo!==null&&Wi(Xo,e),$o!==null&&Wi($o,e),Ko!==null&&Wi(Ko,e),bi.forEach(t),Ci.forEach(t);for(var n=0;n<jo.length;n++){var o=jo[n];o.blockedOn===e&&(o.blockedOn=null)}for(;0<jo.length&&(n=jo[0],n.blockedOn===null);)Ax(n),n.blockedOn===null&&jo.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(o=0;o<n.length;o+=3){var l=n[o],s=n[o+1],i=l[nn]||null;if(typeof s=="function")i||Mh(n);else if(i){var r=null;if(s&&s.hasAttribute("formAction")){if(l=s,i=s[nn]||null)r=i.formAction;else if(Od(l)!==null)continue}else r=i.action;typeof r=="function"?n[o+1]=r:(n.splice(o,3),o-=3),Mh(n)}}}function _x(){function e(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(i){return l=i})},focusReset:"manual",scroll:"manual"})}function t(){l!==null&&(l(),l=null),o||setTimeout(n,20)}function n(){if(!o&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,l=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),l!==null&&(l(),l=null)}}}function Fd(e){this._internalRoot=e}br.prototype.render=Fd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Y(409));var n=t.current,o=yn();Tx(n,o,e,t,null,null)};br.prototype.unmount=Fd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Tx(e.current,2,null,e,null,null),yr(),t[bs]=null}};function br(e){this._internalRoot=e}br.prototype.unstable_scheduleHydration=function(e){if(e){var t=og();e={blockedOn:null,target:e,priority:t};for(var n=0;n<jo.length&&t!==0&&t<jo[n].priority;n++);jo.splice(n,0,e),n===0&&Ax(e)}};var Rh=Hm.version;if(Rh!=="19.2.0")throw Error(Y(527,Rh,"19.2.0"));Ze.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Y(188)):(e=Object.keys(e).join(","),Error(Y(268,e)));return e=sv(t),e=e!==null?Jm(e):null,e=e===null?null:e.stateNode,e};var R1={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Ne,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ta=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ta.isDisabled&&ta.supportsFiber)try{Ei=ta.inject(R1),mn=ta}catch{}}or.createRoot=function(e,t){if(!Om(e))throw Error(Y(299));var n=!1,o="",l=vy,s=by,i=Cy;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onUncaughtError!==void 0&&(l=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Sx(e,1,!1,null,null,n,o,null,l,s,i,_x),e[bs]=t.current,Bd(e),new Fd(t)};or.hydrateRoot=function(e,t,n){if(!Om(e))throw Error(Y(299));var o=!1,l="",s=vy,i=by,r=Cy,u=null;return n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(i=n.onCaughtError),n.onRecoverableError!==void 0&&(r=n.onRecoverableError),n.formState!==void 0&&(u=n.formState)),t=Sx(e,1,!0,t,n??null,o,l,u,s,i,r,_x),t.context=Ex(null),n=t.current,o=yn(),o=Wu(o),l=Oo(o),l.callback=null,Fo(n,l,o),n=o,t.current.lanes=n,wi(t,n),Kn(t),e[bs]=t.current,Bd(e),new br(t)};or.version="19.2.0";function Mx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Mx)}catch(e){console.error(e)}}Mx(),zm.exports=or;var I1=zm.exports;const k1=Nm(I1);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let D1,L1;function j1(){return{geminiUrl:D1,vertexUrl:L1}}function U1(e,t,n,o){var l,s;if(!(e!=null&&e.baseUrl)){const i=j1();return t?(l=i.vertexUrl)!==null&&l!==void 0?l:n:(s=i.geminiUrl)!==null&&s!==void 0?s:o}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _l{}function ce(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(o,l)=>{if(Object.prototype.hasOwnProperty.call(t,l)){const s=t[l];return s!=null?String(s):""}else throw new Error(`Key '${l}' not found in valueMap.`)})}function d(e,t,n){for(let s=0;s<t.length-1;s++){const i=t[s];if(i.endsWith("[]")){const r=i.slice(0,-2);if(!(r in e))if(Array.isArray(n))e[r]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${i}`);if(Array.isArray(e[r])){const u=e[r];if(Array.isArray(n))for(let f=0;f<u.length;f++){const h=u[f];d(h,t.slice(s+1),n[f])}else for(const f of u)d(f,t.slice(s+1),n)}return}else if(i.endsWith("[0]")){const r=i.slice(0,-3);r in e||(e[r]=[{}]);const u=e[r];d(u[0],t.slice(s+1),n);return}(!e[i]||typeof e[i]!="object")&&(e[i]={}),e=e[i]}const o=t[t.length-1],l=e[o];if(l!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===l)return;if(typeof l=="object"&&typeof n=="object"&&l!==null&&n!==null)Object.assign(l,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[o]=n}function c(e,t,n=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let o=0;o<t.length;o++){if(typeof e!="object"||e===null)return n;const l=t[o];if(l.endsWith("[]")){const s=l.slice(0,-2);if(s in e){const i=e[s];return Array.isArray(i)?i.map(r=>c(r,t.slice(o+1),n)):n}else return n}else e=e[l]}return e}catch(o){if(o instanceof TypeError)return n;throw o}}function z1(e,t){for(const[n,o]of Object.entries(t)){const l=n.split("."),s=o.split("."),i=new Set;let r=-1;for(let u=0;u<l.length;u++)if(l[u]==="*"){r=u;break}if(r!==-1&&s.length>r)for(let u=r;u<s.length;u++){const f=s[u];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&i.add(f)}Lu(e,l,s,0,i)}}function Lu(e,t,n,o,l){if(o>=t.length||typeof e!="object"||e===null)return;const s=t[o];if(s.endsWith("[]")){const i=s.slice(0,-2),r=e;if(i in r&&Array.isArray(r[i]))for(const u of r[i])Lu(u,t,n,o+1,l)}else if(s==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const i=e,r=Object.keys(i).filter(f=>!f.startsWith("_")&&!l.has(f)),u={};for(const f of r)u[f]=i[f];for(const[f,h]of Object.entries(u)){const p=[];for(const m of n.slice(o))m==="*"?p.push(f):p.push(m);d(i,p,h)}for(const f of r)delete i[f]}}else{const i=e;s in i&&Lu(i[s],t,n,o+1,l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yd(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function P1(e){const t={},n=c(e,["operationName"]);n!=null&&d(t,["operationName"],n);const o=c(e,["resourceName"]);return o!=null&&d(t,["_url","resourceName"],o),t}function B1(e){const t={},n=c(e,["name"]);n!=null&&d(t,["name"],n);const o=c(e,["metadata"]);o!=null&&d(t,["metadata"],o);const l=c(e,["done"]);l!=null&&d(t,["done"],l);const s=c(e,["error"]);s!=null&&d(t,["error"],s);const i=c(e,["response","generateVideoResponse"]);return i!=null&&d(t,["response"],G1(i)),t}function q1(e){const t={},n=c(e,["name"]);n!=null&&d(t,["name"],n);const o=c(e,["metadata"]);o!=null&&d(t,["metadata"],o);const l=c(e,["done"]);l!=null&&d(t,["done"],l);const s=c(e,["error"]);s!=null&&d(t,["error"],s);const i=c(e,["response"]);return i!=null&&d(t,["response"],V1(i)),t}function G1(e){const t={},n=c(e,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>H1(i))),d(t,["generatedVideos"],s)}const o=c(e,["raiMediaFilteredCount"]);o!=null&&d(t,["raiMediaFilteredCount"],o);const l=c(e,["raiMediaFilteredReasons"]);return l!=null&&d(t,["raiMediaFilteredReasons"],l),t}function V1(e){const t={},n=c(e,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>O1(i))),d(t,["generatedVideos"],s)}const o=c(e,["raiMediaFilteredCount"]);o!=null&&d(t,["raiMediaFilteredCount"],o);const l=c(e,["raiMediaFilteredReasons"]);return l!=null&&d(t,["raiMediaFilteredReasons"],l),t}function H1(e){const t={},n=c(e,["video"]);return n!=null&&d(t,["video"],J1(n)),t}function O1(e){const t={},n=c(e,["_self"]);return n!=null&&d(t,["video"],X1(n)),t}function F1(e){const t={},n=c(e,["operationName"]);return n!=null&&d(t,["_url","operationName"],n),t}function Y1(e){const t={},n=c(e,["operationName"]);return n!=null&&d(t,["_url","operationName"],n),t}function J1(e){const t={},n=c(e,["uri"]);n!=null&&d(t,["uri"],n);const o=c(e,["encodedVideo"]);o!=null&&d(t,["videoBytes"],Yd(o));const l=c(e,["encoding"]);return l!=null&&d(t,["mimeType"],l),t}function X1(e){const t={},n=c(e,["gcsUri"]);n!=null&&d(t,["uri"],n);const o=c(e,["bytesBase64Encoded"]);o!=null&&d(t,["videoBytes"],Yd(o));const l=c(e,["mimeType"]);return l!=null&&d(t,["mimeType"],l),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ih;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Ih||(Ih={}));var kh;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(kh||(kh={}));var Dh;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(Dh||(Dh={}));var Go;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(Go||(Go={}));var Lh;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Lh||(Lh={}));var jh;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(jh||(jh={}));var Uh;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(Uh||(Uh={}));var zh;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(zh||(zh={}));var Ph;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(Ph||(Ph={}));var Bh;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Bh||(Bh={}));var qh;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(qh||(qh={}));var Gh;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE"})(Gh||(Gh={}));var Vh;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(Vh||(Vh={}));var Hh;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Hh||(Hh={}));var Oh;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(Oh||(Oh={}));var Fh;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Fh||(Fh={}));var ys;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(ys||(ys={}));var Yh;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Yh||(Yh={}));var ju;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(ju||(ju={}));var Jh;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Jh||(Jh={}));var Xh;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Xh||(Xh={}));var $h;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V"})($h||($h={}));var Kh;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(Kh||(Kh={}));var Zh;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(Zh||(Zh={}));var Qh;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(Qh||(Qh={}));var Wh;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Wh||(Wh={}));var ep;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(ep||(ep={}));var tp;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(tp||(tp={}));var np;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(np||(np={}));var op;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(op||(op={}));var lp;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(lp||(lp={}));var sp;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(sp||(sp={}));var ip;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(ip||(ip={}));var ap;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(ap||(ap={}));var rp;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(rp||(rp={}));var cp;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(cp||(cp={}));var up;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(up||(up={}));var dp;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(dp||(dp={}));var fp;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(fp||(fp={}));var hp;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(hp||(hp={}));var pp;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(pp||(pp={}));var mp;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(mp||(mp={}));var gp;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(gp||(gp={}));var yp;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(yp||(yp={}));var xp;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(xp||(xp={}));var vp;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(vp||(vp={}));var bp;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(bp||(bp={}));var Cp;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(Cp||(Cp={}));var $l;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})($l||($l={}));class Uu{constructor(t){const n={};for(const o of t.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class Bs{get text(){var t,n,o,l,s,i,r,u;if(((l=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",h=!1;const p=[];for(const m of(u=(r=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||r===void 0?void 0:r.parts)!==null&&u!==void 0?u:[]){for(const[g,E]of Object.entries(m))g!=="text"&&g!=="thought"&&(E!==null||E!==void 0)&&p.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;h=!0,f+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?f:void 0}get data(){var t,n,o,l,s,i,r,u;if(((l=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const h=[];for(const p of(u=(r=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||r===void 0?void 0:r.parts)!==null&&u!==void 0?u:[]){for(const[m,g]of Object.entries(p))m!=="inlineData"&&(g!==null||g!==void 0)&&h.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(f+=atob(p.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var t,n,o,l,s,i,r,u;if(((l=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(u=(r=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||r===void 0?void 0:r.parts)===null||u===void 0?void 0:u.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var t,n,o,l,s,i,r,u,f;if(((l=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(u=(r=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||r===void 0?void 0:r.parts)===null||u===void 0?void 0:u.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(f=h==null?void 0:h[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var t,n,o,l,s,i,r,u,f;if(((l=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(u=(r=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||r===void 0?void 0:r.parts)===null||u===void 0?void 0:u.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(f=h==null?void 0:h[0])===null||f===void 0?void 0:f.output}}class Sp{}class Ep{}class $1{}class K1{}class Z1{}class Q1{}class Tp{}class wp{}class Np{}class W1{}class Wa{_fromAPIResponse({apiResponse:t,isVertexAI:n}){const o=new Wa;let l;const s=t;return n?l=q1(s):l=B1(s),Object.assign(o,l),o}}class Ap{}class _p{}class Mp{}class eC{}class tC{}class nC{}class Rp{}class oC{get text(){var t,n,o;let l="",s=!1;const i=[];for(const r of(o=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[u,f]of Object.entries(r))u!=="text"&&u!=="thought"&&f!==null&&i.push(u);if(typeof r.text=="string"){if(typeof r.thought=="boolean"&&r.thought)continue;s=!0,l+=r.text}}return i.length>0&&console.warn(`there are non-text parts ${i} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?l:void 0}get data(){var t,n,o;let l="";const s=[];for(const i of(o=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[r,u]of Object.entries(i))r!=="inlineData"&&u!==null&&s.push(r);i.inlineData&&typeof i.inlineData.data=="string"&&(l+=atob(i.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),l.length>0?btoa(l):void 0}}class lC{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $e(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function Rx(e,t){const n=$e(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function Ix(e){return Array.isArray(e)?e.map(t=>er(t)):[er(e)]}function er(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function kx(e){const t=er(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Dx(e){const t=er(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Ip(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function Lx(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>Ip(t)):[Ip(e)]}function zu(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function kp(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function Dp(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function Ft(e){if(e==null)throw new Error("ContentUnion is required");return zu(e)?e:{role:"user",parts:Lx(e)}}function Jd(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const o=Ft(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(e.isVertexAI()){const n=Ft(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>Ft(n)):[Ft(t)]}function In(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(kp(e)||Dp(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ft(e)]}const t=[],n=[],o=zu(e[0]);for(const l of e){const s=zu(l);if(s!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)t.push(l);else{if(kp(l)||Dp(l))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(l)}}return o||t.push({role:"user",parts:Lx(n)}),t}function sC(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(o=>o!=="null");if(n.length===1)t.type=Object.values(Go).includes(n[0].toUpperCase())?n[0].toUpperCase():Go.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const o of n)t.anyOf.push({type:Object.values(Go).includes(o.toUpperCase())?o.toUpperCase():Go.TYPE_UNSPECIFIED})}}function os(e){const t={},n=["items"],o=["anyOf"],l=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=e.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(t.nullable=!0,e=s[1]):s[1].type==="null"&&(t.nullable=!0,e=s[0])),e.type instanceof Array&&sC(e.type,t);for(const[i,r]of Object.entries(e))if(r!=null)if(i=="type"){if(r==="null")throw new Error("type: null can not be the only possible type for the field.");if(r instanceof Array)continue;t.type=Object.values(Go).includes(r.toUpperCase())?r.toUpperCase():Go.TYPE_UNSPECIFIED}else if(n.includes(i))t[i]=os(r);else if(o.includes(i)){const u=[];for(const f of r){if(f.type=="null"){t.nullable=!0;continue}u.push(os(f))}t[i]=u}else if(l.includes(i)){const u={};for(const[f,h]of Object.entries(r))u[f]=os(h);t[i]=u}else{if(i==="additionalProperties")continue;t[i]=r}return t}function Xd(e){return os(e)}function $d(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function Kd(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function As(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=os(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=os(t.response));return e}function _s(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function iC(e,t,n,o=1){const l=!t.startsWith(`${n}/`)&&t.split("/").length===o;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:l?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:l?`${n}/${t}`:t}function So(e,t){if(typeof t!="string")throw new Error("name must be a string");return iC(e,t,"cachedContents")}function jx(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function ol(e){return Yd(e)}function aC(e){return e!=null&&typeof e=="object"&&"name"in e}function rC(e){return e!=null&&typeof e=="object"&&"video"in e}function cC(e){return e!=null&&typeof e=="object"&&"uri"in e}function Ux(e){var t;let n;if(aC(e)&&(n=e.name),!(cC(e)&&(n=e.uri,n===void 0))&&!(rC(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const l=n.split("files/")[1].match(/[a-z0-9]+/);if(l===null)throw new Error(`Could not extract file name from URI ${n}`);n=l[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function zx(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function Px(e){for(const t of["models","tunedModels","publisherModels"])if(uC(e,t))return e[t];return[]}function uC(e,t){return e!==null&&typeof e=="object"&&t in e}function dC(e,t={}){const n=e,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),t.behavior&&(o.behavior=t.behavior),{functionDeclarations:[o]}}function fC(e,t={}){const n=[],o=new Set;for(const l of e){const s=l.name;if(o.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);o.add(s);const i=dC(l,t);i.functionDeclarations&&n.push(...i.functionDeclarations)}return{functionDeclarations:n}}function Bx(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,l=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(l>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||l!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function hC(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function qx(e){if(typeof e!="object"||e===null)return{};const t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;const l=n.inlinedResponses;if(!Array.isArray(l)||l.length===0)return e;let s=!1;for(const i of l){if(typeof i!="object"||i===null)continue;const u=i.response;if(typeof u!="object"||u===null)continue;if(u.embedding!==void 0){s=!0;break}}return s&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function Ms(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Gx(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pC(e){const t={},n=c(e,["responsesFile"]);n!=null&&d(t,["fileName"],n);const o=c(e,["inlinedResponses","inlinedResponses"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>FC(i))),d(t,["inlinedResponses"],s)}const l=c(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(i=>i)),d(t,["inlinedEmbedContentResponses"],s)}return t}function mC(e){const t={},n=c(e,["predictionsFormat"]);n!=null&&d(t,["format"],n);const o=c(e,["gcsDestination","outputUriPrefix"]);o!=null&&d(t,["gcsUri"],o);const l=c(e,["bigqueryDestination","outputUri"]);return l!=null&&d(t,["bigqueryUri"],l),t}function gC(e){const t={},n=c(e,["format"]);n!=null&&d(t,["predictionsFormat"],n);const o=c(e,["gcsUri"]);o!=null&&d(t,["gcsDestination","outputUriPrefix"],o);const l=c(e,["bigqueryUri"]);if(l!=null&&d(t,["bigqueryDestination","outputUri"],l),c(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function va(e){const t={},n=c(e,["name"]);n!=null&&d(t,["name"],n);const o=c(e,["metadata","displayName"]);o!=null&&d(t,["displayName"],o);const l=c(e,["metadata","state"]);l!=null&&d(t,["state"],Gx(l));const s=c(e,["metadata","createTime"]);s!=null&&d(t,["createTime"],s);const i=c(e,["metadata","endTime"]);i!=null&&d(t,["endTime"],i);const r=c(e,["metadata","updateTime"]);r!=null&&d(t,["updateTime"],r);const u=c(e,["metadata","model"]);u!=null&&d(t,["model"],u);const f=c(e,["metadata","output"]);return f!=null&&d(t,["dest"],pC(qx(f))),t}function Pu(e){const t={},n=c(e,["name"]);n!=null&&d(t,["name"],n);const o=c(e,["displayName"]);o!=null&&d(t,["displayName"],o);const l=c(e,["state"]);l!=null&&d(t,["state"],Gx(l));const s=c(e,["error"]);s!=null&&d(t,["error"],s);const i=c(e,["createTime"]);i!=null&&d(t,["createTime"],i);const r=c(e,["startTime"]);r!=null&&d(t,["startTime"],r);const u=c(e,["endTime"]);u!=null&&d(t,["endTime"],u);const f=c(e,["updateTime"]);f!=null&&d(t,["updateTime"],f);const h=c(e,["model"]);h!=null&&d(t,["model"],h);const p=c(e,["inputConfig"]);p!=null&&d(t,["src"],yC(p));const m=c(e,["outputConfig"]);return m!=null&&d(t,["dest"],mC(qx(m))),t}function yC(e){const t={},n=c(e,["instancesFormat"]);n!=null&&d(t,["format"],n);const o=c(e,["gcsSource","uris"]);o!=null&&d(t,["gcsUri"],o);const l=c(e,["bigquerySource","inputUri"]);return l!=null&&d(t,["bigqueryUri"],l),t}function xC(e,t){const n={};if(c(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=c(t,["fileName"]);o!=null&&d(n,["fileName"],o);const l=c(t,["inlinedRequests"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(i=>OC(e,i))),d(n,["requests","requests"],s)}return n}function vC(e){const t={},n=c(e,["format"]);n!=null&&d(t,["instancesFormat"],n);const o=c(e,["gcsUri"]);o!=null&&d(t,["gcsSource","uris"],o);const l=c(e,["bigqueryUri"]);if(l!=null&&d(t,["bigquerySource","inputUri"],l),c(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function bC(e){const t={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(e,["data"]);n!=null&&d(t,["data"],n);const o=c(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function CC(e,t){const n={},o=c(t,["name"]);return o!=null&&d(n,["_url","name"],Ms(e,o)),n}function SC(e,t){const n={},o=c(t,["name"]);return o!=null&&d(n,["_url","name"],Ms(e,o)),n}function EC(e){const t={},n=c(e,["content"]);n!=null&&d(t,["content"],n);const o=c(e,["citationMetadata"]);o!=null&&d(t,["citationMetadata"],TC(o));const l=c(e,["tokenCount"]);l!=null&&d(t,["tokenCount"],l);const s=c(e,["finishReason"]);s!=null&&d(t,["finishReason"],s);const i=c(e,["urlContextMetadata"]);i!=null&&d(t,["urlContextMetadata"],i);const r=c(e,["avgLogprobs"]);r!=null&&d(t,["avgLogprobs"],r);const u=c(e,["groundingMetadata"]);u!=null&&d(t,["groundingMetadata"],u);const f=c(e,["index"]);f!=null&&d(t,["index"],f);const h=c(e,["logprobsResult"]);h!=null&&d(t,["logprobsResult"],h);const p=c(e,["safetyRatings"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(g=>g)),d(t,["safetyRatings"],m)}return t}function TC(e){const t={},n=c(e,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>l)),d(t,["citations"],o)}return t}function Vx(e){const t={},n=c(e,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(s=>QC(s))),d(t,["parts"],l)}const o=c(e,["role"]);return o!=null&&d(t,["role"],o),t}function wC(e,t){const n={},o=c(e,["displayName"]);if(t!==void 0&&o!=null&&d(t,["batch","displayName"],o),c(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function NC(e,t){const n={},o=c(e,["displayName"]);t!==void 0&&o!=null&&d(t,["displayName"],o);const l=c(e,["dest"]);return t!==void 0&&l!=null&&d(t,["outputConfig"],gC(hC(l))),n}function Lp(e,t){const n={},o=c(t,["model"]);o!=null&&d(n,["_url","model"],$e(e,o));const l=c(t,["src"]);l!=null&&d(n,["batch","inputConfig"],xC(e,Bx(e,l)));const s=c(t,["config"]);return s!=null&&wC(s,n),n}function AC(e,t){const n={},o=c(t,["model"]);o!=null&&d(n,["model"],$e(e,o));const l=c(t,["src"]);l!=null&&d(n,["inputConfig"],vC(Bx(e,l)));const s=c(t,["config"]);return s!=null&&NC(s,n),n}function _C(e,t){const n={},o=c(e,["displayName"]);return t!==void 0&&o!=null&&d(t,["batch","displayName"],o),n}function MC(e,t){const n={},o=c(t,["model"]);o!=null&&d(n,["_url","model"],$e(e,o));const l=c(t,["src"]);l!=null&&d(n,["batch","inputConfig"],UC(e,l));const s=c(t,["config"]);return s!=null&&_C(s,n),n}function RC(e,t){const n={},o=c(t,["name"]);return o!=null&&d(n,["_url","name"],Ms(e,o)),n}function IC(e,t){const n={},o=c(t,["name"]);return o!=null&&d(n,["_url","name"],Ms(e,o)),n}function kC(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=c(e,["name"]);o!=null&&d(t,["name"],o);const l=c(e,["done"]);l!=null&&d(t,["done"],l);const s=c(e,["error"]);return s!=null&&d(t,["error"],s),t}function DC(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=c(e,["name"]);o!=null&&d(t,["name"],o);const l=c(e,["done"]);l!=null&&d(t,["done"],l);const s=c(e,["error"]);return s!=null&&d(t,["error"],s),t}function LC(e,t){const n={},o=c(t,["contents"]);if(o!=null){let s=Jd(e,o);Array.isArray(s)&&(s=s.map(i=>i)),d(n,["requests[]","request","content"],s)}const l=c(t,["config"]);return l!=null&&(d(n,["_self"],jC(l,n)),z1(n,{"requests[].*":"requests[].request.*"})),n}function jC(e,t){const n={},o=c(e,["taskType"]);t!==void 0&&o!=null&&d(t,["requests[]","taskType"],o);const l=c(e,["title"]);t!==void 0&&l!=null&&d(t,["requests[]","title"],l);const s=c(e,["outputDimensionality"]);if(t!==void 0&&s!=null&&d(t,["requests[]","outputDimensionality"],s),c(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function UC(e,t){const n={},o=c(t,["fileName"]);o!=null&&d(n,["file_name"],o);const l=c(t,["inlinedRequests"]);return l!=null&&d(n,["requests"],LC(e,l)),n}function zC(e){const t={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const o=c(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function PC(e,t,n){const o={},l=c(t,["systemInstruction"]);n!==void 0&&l!=null&&d(n,["systemInstruction"],Vx(Ft(l)));const s=c(t,["temperature"]);s!=null&&d(o,["temperature"],s);const i=c(t,["topP"]);i!=null&&d(o,["topP"],i);const r=c(t,["topK"]);r!=null&&d(o,["topK"],r);const u=c(t,["candidateCount"]);u!=null&&d(o,["candidateCount"],u);const f=c(t,["maxOutputTokens"]);f!=null&&d(o,["maxOutputTokens"],f);const h=c(t,["stopSequences"]);h!=null&&d(o,["stopSequences"],h);const p=c(t,["responseLogprobs"]);p!=null&&d(o,["responseLogprobs"],p);const m=c(t,["logprobs"]);m!=null&&d(o,["logprobs"],m);const g=c(t,["presencePenalty"]);g!=null&&d(o,["presencePenalty"],g);const E=c(t,["frequencyPenalty"]);E!=null&&d(o,["frequencyPenalty"],E);const T=c(t,["seed"]);T!=null&&d(o,["seed"],T);const M=c(t,["responseMimeType"]);M!=null&&d(o,["responseMimeType"],M);const y=c(t,["responseSchema"]);y!=null&&d(o,["responseSchema"],Xd(y));const x=c(t,["responseJsonSchema"]);if(x!=null&&d(o,["responseJsonSchema"],x),c(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const v=c(t,["safetySettings"]);if(n!==void 0&&v!=null){let _=v;Array.isArray(_)&&(_=_.map(R=>WC(R))),d(n,["safetySettings"],_)}const S=c(t,["tools"]);if(n!==void 0&&S!=null){let _=_s(S);Array.isArray(_)&&(_=_.map(R=>e2(As(R)))),d(n,["tools"],_)}const N=c(t,["toolConfig"]);if(n!==void 0&&N!=null&&d(n,["toolConfig"],N),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const L=c(t,["cachedContent"]);n!==void 0&&L!=null&&d(n,["cachedContent"],So(e,L));const A=c(t,["responseModalities"]);A!=null&&d(o,["responseModalities"],A);const b=c(t,["mediaResolution"]);b!=null&&d(o,["mediaResolution"],b);const I=c(t,["speechConfig"]);if(I!=null&&d(o,["speechConfig"],$d(I)),c(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const w=c(t,["thinkingConfig"]);w!=null&&d(o,["thinkingConfig"],w);const j=c(t,["imageConfig"]);return j!=null&&d(o,["imageConfig"],j),o}function BC(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=c(e,["candidates"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>EC(f))),d(t,["candidates"],u)}const l=c(e,["modelVersion"]);l!=null&&d(t,["modelVersion"],l);const s=c(e,["promptFeedback"]);s!=null&&d(t,["promptFeedback"],s);const i=c(e,["responseId"]);i!=null&&d(t,["responseId"],i);const r=c(e,["usageMetadata"]);return r!=null&&d(t,["usageMetadata"],r),t}function qC(e,t){const n={},o=c(t,["name"]);return o!=null&&d(n,["_url","name"],Ms(e,o)),n}function GC(e,t){const n={},o=c(t,["name"]);return o!=null&&d(n,["_url","name"],Ms(e,o)),n}function VC(e){const t={};if(c(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function HC(e){const t={},n=c(e,["timeRangeFilter"]);if(n!=null&&d(t,["timeRangeFilter"],n),c(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function OC(e,t){const n={},o=c(t,["model"]);o!=null&&d(n,["request","model"],$e(e,o));const l=c(t,["contents"]);if(l!=null){let r=In(l);Array.isArray(r)&&(r=r.map(u=>Vx(u))),d(n,["request","contents"],r)}const s=c(t,["metadata"]);s!=null&&d(n,["metadata"],s);const i=c(t,["config"]);return i!=null&&d(n,["request","generationConfig"],PC(e,i,c(n,["request"],{}))),n}function FC(e){const t={},n=c(e,["response"]);n!=null&&d(t,["response"],BC(n));const o=c(e,["error"]);return o!=null&&d(t,["error"],o),t}function YC(e,t){const n={},o=c(e,["pageSize"]);t!==void 0&&o!=null&&d(t,["_query","pageSize"],o);const l=c(e,["pageToken"]);if(t!==void 0&&l!=null&&d(t,["_query","pageToken"],l),c(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function JC(e,t){const n={},o=c(e,["pageSize"]);t!==void 0&&o!=null&&d(t,["_query","pageSize"],o);const l=c(e,["pageToken"]);t!==void 0&&l!=null&&d(t,["_query","pageToken"],l);const s=c(e,["filter"]);return t!==void 0&&s!=null&&d(t,["_query","filter"],s),n}function XC(e){const t={},n=c(e,["config"]);return n!=null&&YC(n,t),t}function $C(e){const t={},n=c(e,["config"]);return n!=null&&JC(n,t),t}function KC(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=c(e,["nextPageToken"]);o!=null&&d(t,["nextPageToken"],o);const l=c(e,["operations"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(i=>va(i))),d(t,["batchJobs"],s)}return t}function ZC(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=c(e,["nextPageToken"]);o!=null&&d(t,["nextPageToken"],o);const l=c(e,["batchPredictionJobs"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(i=>Pu(i))),d(t,["batchJobs"],s)}return t}function QC(e){const t={},n=c(e,["videoMetadata"]);n!=null&&d(t,["videoMetadata"],n);const o=c(e,["thought"]);o!=null&&d(t,["thought"],o);const l=c(e,["inlineData"]);l!=null&&d(t,["inlineData"],bC(l));const s=c(e,["fileData"]);s!=null&&d(t,["fileData"],zC(s));const i=c(e,["thoughtSignature"]);i!=null&&d(t,["thoughtSignature"],i);const r=c(e,["functionCall"]);r!=null&&d(t,["functionCall"],r);const u=c(e,["codeExecutionResult"]);u!=null&&d(t,["codeExecutionResult"],u);const f=c(e,["executableCode"]);f!=null&&d(t,["executableCode"],f);const h=c(e,["functionResponse"]);h!=null&&d(t,["functionResponse"],h);const p=c(e,["text"]);return p!=null&&d(t,["text"],p),t}function WC(e){const t={};if(c(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=c(e,["category"]);n!=null&&d(t,["category"],n);const o=c(e,["threshold"]);return o!=null&&d(t,["threshold"],o),t}function e2(e){const t={},n=c(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>h)),d(t,["functionDeclarations"],f)}if(c(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=c(e,["googleSearch"]);o!=null&&d(t,["googleSearch"],HC(o));const l=c(e,["googleSearchRetrieval"]);if(l!=null&&d(t,["googleSearchRetrieval"],l),c(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=c(e,["googleMaps"]);s!=null&&d(t,["googleMaps"],VC(s));const i=c(e,["urlContext"]);i!=null&&d(t,["urlContext"],i);const r=c(e,["computerUse"]);r!=null&&d(t,["computerUse"],r);const u=c(e,["codeExecution"]);return u!=null&&d(t,["codeExecution"],u),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Cl;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Cl||(Cl={}));class Li{constructor(t,n,o,l){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,o,l)}init(t,n,o){var l,s;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let i={config:{}};!o||Object.keys(o).length===0?i={config:{}}:typeof o=="object"?i=Object.assign({},o):i=o,i.config&&(i.config.pageToken=n.nextPageToken),this.paramsInternal=i,this.pageInternalSize=(s=(l=i.config)===null||l===void 0?void 0:l.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class t2 extends _l{constructor(t){super(),this.apiClient=t,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new Li(Cl.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n)}createInlinedGenerateContentRequest(t){const n=Lp(this.apiClient,t),o=n._url,l=ce("{model}:batchGenerateContent",o),r=n.batch.inputConfig.requests,u=r.requests,f=[];for(const h of u){const p=Object.assign({},h);if(p.systemInstruction){const m=p.systemInstruction;delete p.systemInstruction;const g=p.request;g.systemInstruction=m,p.request=g}f.push(p)}return r.requests=f,delete n.config,delete n._url,delete n._query,{path:l,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){const o=n?Object.assign({},n):{},l=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${l}`),o.dest===void 0){const s=this.getGcsUri(t),i=this.getBigqueryUri(t);if(s)s.endsWith(".jsonl")?o.dest=`${s.slice(0,-6)}/dest`:o.dest=`${s}_dest_${l}`;else if(i)o.dest=`${i}_dest_${l}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(t){var n,o,l,s;let i,r="",u={};if(this.apiClient.isVertexAI()){const f=AC(this.apiClient,t);return r=ce("batchPredictionJobs",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),i.then(h=>Pu(h))}else{const f=Lp(this.apiClient,t);return r=ce("{model}:batchGenerateContent",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),i.then(h=>va(h))}}async createEmbeddingsInternal(t){var n,o;let l,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=MC(this.apiClient,t);return s=ce("{model}:asyncBatchEmbedContent",r._url),i=r._query,delete r._url,delete r._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(r),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),l.then(u=>va(u))}}async get(t){var n,o,l,s;let i,r="",u={};if(this.apiClient.isVertexAI()){const f=GC(this.apiClient,t);return r=ce("batchPredictionJobs/{name}",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),i.then(h=>Pu(h))}else{const f=qC(this.apiClient,t);return r=ce("batches/{name}",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),i.then(h=>va(h))}}async cancel(t){var n,o,l,s;let i="",r={};if(this.apiClient.isVertexAI()){const u=SC(this.apiClient,t);i=ce("batchPredictionJobs/{name}:cancel",u._url),r=u._query,delete u._url,delete u._query,await this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}else{const u=CC(this.apiClient,t);i=ce("batches/{name}:cancel",u._url),r=u._query,delete u._url,delete u._query,await this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(t){var n,o,l,s;let i,r="",u={};if(this.apiClient.isVertexAI()){const f=$C(t);return r=ce("batchPredictionJobs",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),i.then(h=>{const p=ZC(h),m=new Rp;return Object.assign(m,p),m})}else{const f=XC(t);return r=ce("batches",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),i.then(h=>{const p=KC(h),m=new Rp;return Object.assign(m,p),m})}}async delete(t){var n,o,l,s;let i,r="",u={};if(this.apiClient.isVertexAI()){const f=IC(this.apiClient,t);return r=ce("batchPredictionJobs/{name}",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),i.then(h=>DC(h))}else{const f=RC(this.apiClient,t);return r=ce("batches/{name}",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),i.then(h=>kC(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function n2(e){const t={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(e,["data"]);n!=null&&d(t,["data"],n);const o=c(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function jp(e){const t={},n=c(e,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(s=>E2(s))),d(t,["parts"],l)}const o=c(e,["role"]);return o!=null&&d(t,["role"],o),t}function o2(e,t){const n={},o=c(e,["ttl"]);t!==void 0&&o!=null&&d(t,["ttl"],o);const l=c(e,["expireTime"]);t!==void 0&&l!=null&&d(t,["expireTime"],l);const s=c(e,["displayName"]);t!==void 0&&s!=null&&d(t,["displayName"],s);const i=c(e,["contents"]);if(t!==void 0&&i!=null){let h=In(i);Array.isArray(h)&&(h=h.map(p=>jp(p))),d(t,["contents"],h)}const r=c(e,["systemInstruction"]);t!==void 0&&r!=null&&d(t,["systemInstruction"],jp(Ft(r)));const u=c(e,["tools"]);if(t!==void 0&&u!=null){let h=u;Array.isArray(h)&&(h=h.map(p=>T2(p))),d(t,["tools"],h)}const f=c(e,["toolConfig"]);if(t!==void 0&&f!=null&&d(t,["toolConfig"],f),c(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function l2(e,t){const n={},o=c(e,["ttl"]);t!==void 0&&o!=null&&d(t,["ttl"],o);const l=c(e,["expireTime"]);t!==void 0&&l!=null&&d(t,["expireTime"],l);const s=c(e,["displayName"]);t!==void 0&&s!=null&&d(t,["displayName"],s);const i=c(e,["contents"]);if(t!==void 0&&i!=null){let p=In(i);Array.isArray(p)&&(p=p.map(m=>m)),d(t,["contents"],p)}const r=c(e,["systemInstruction"]);t!==void 0&&r!=null&&d(t,["systemInstruction"],Ft(r));const u=c(e,["tools"]);if(t!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(m=>w2(m))),d(t,["tools"],p)}const f=c(e,["toolConfig"]);t!==void 0&&f!=null&&d(t,["toolConfig"],f);const h=c(e,["kmsKeyName"]);return t!==void 0&&h!=null&&d(t,["encryption_spec","kmsKeyName"],h),n}function s2(e,t){const n={},o=c(t,["model"]);o!=null&&d(n,["model"],Rx(e,o));const l=c(t,["config"]);return l!=null&&o2(l,n),n}function i2(e,t){const n={},o=c(t,["model"]);o!=null&&d(n,["model"],Rx(e,o));const l=c(t,["config"]);return l!=null&&l2(l,n),n}function a2(e,t){const n={},o=c(t,["name"]);return o!=null&&d(n,["_url","name"],So(e,o)),n}function r2(e,t){const n={},o=c(t,["name"]);return o!=null&&d(n,["_url","name"],So(e,o)),n}function c2(e){const t={},n=c(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function u2(e){const t={},n=c(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function d2(e){const t={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const o=c(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function f2(e){const t={};if(c(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(e,["description"]);n!=null&&d(t,["description"],n);const o=c(e,["name"]);o!=null&&d(t,["name"],o);const l=c(e,["parameters"]);l!=null&&d(t,["parameters"],l);const s=c(e,["parametersJsonSchema"]);s!=null&&d(t,["parametersJsonSchema"],s);const i=c(e,["response"]);i!=null&&d(t,["response"],i);const r=c(e,["responseJsonSchema"]);return r!=null&&d(t,["responseJsonSchema"],r),t}function h2(e,t){const n={},o=c(t,["name"]);return o!=null&&d(n,["_url","name"],So(e,o)),n}function p2(e,t){const n={},o=c(t,["name"]);return o!=null&&d(n,["_url","name"],So(e,o)),n}function m2(e){const t={};if(c(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function g2(e){const t={},n=c(e,["timeRangeFilter"]);if(n!=null&&d(t,["timeRangeFilter"],n),c(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function y2(e,t){const n={},o=c(e,["pageSize"]);t!==void 0&&o!=null&&d(t,["_query","pageSize"],o);const l=c(e,["pageToken"]);return t!==void 0&&l!=null&&d(t,["_query","pageToken"],l),n}function x2(e,t){const n={},o=c(e,["pageSize"]);t!==void 0&&o!=null&&d(t,["_query","pageSize"],o);const l=c(e,["pageToken"]);return t!==void 0&&l!=null&&d(t,["_query","pageToken"],l),n}function v2(e){const t={},n=c(e,["config"]);return n!=null&&y2(n,t),t}function b2(e){const t={},n=c(e,["config"]);return n!=null&&x2(n,t),t}function C2(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=c(e,["nextPageToken"]);o!=null&&d(t,["nextPageToken"],o);const l=c(e,["cachedContents"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(i=>i)),d(t,["cachedContents"],s)}return t}function S2(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=c(e,["nextPageToken"]);o!=null&&d(t,["nextPageToken"],o);const l=c(e,["cachedContents"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(i=>i)),d(t,["cachedContents"],s)}return t}function E2(e){const t={},n=c(e,["videoMetadata"]);n!=null&&d(t,["videoMetadata"],n);const o=c(e,["thought"]);o!=null&&d(t,["thought"],o);const l=c(e,["inlineData"]);l!=null&&d(t,["inlineData"],n2(l));const s=c(e,["fileData"]);s!=null&&d(t,["fileData"],d2(s));const i=c(e,["thoughtSignature"]);i!=null&&d(t,["thoughtSignature"],i);const r=c(e,["functionCall"]);r!=null&&d(t,["functionCall"],r);const u=c(e,["codeExecutionResult"]);u!=null&&d(t,["codeExecutionResult"],u);const f=c(e,["executableCode"]);f!=null&&d(t,["executableCode"],f);const h=c(e,["functionResponse"]);h!=null&&d(t,["functionResponse"],h);const p=c(e,["text"]);return p!=null&&d(t,["text"],p),t}function T2(e){const t={},n=c(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>h)),d(t,["functionDeclarations"],f)}if(c(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=c(e,["googleSearch"]);o!=null&&d(t,["googleSearch"],g2(o));const l=c(e,["googleSearchRetrieval"]);if(l!=null&&d(t,["googleSearchRetrieval"],l),c(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=c(e,["googleMaps"]);s!=null&&d(t,["googleMaps"],m2(s));const i=c(e,["urlContext"]);i!=null&&d(t,["urlContext"],i);const r=c(e,["computerUse"]);r!=null&&d(t,["computerUse"],r);const u=c(e,["codeExecution"]);return u!=null&&d(t,["codeExecution"],u),t}function w2(e){const t={},n=c(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>f2(m))),d(t,["functionDeclarations"],p)}const o=c(e,["retrieval"]);o!=null&&d(t,["retrieval"],o);const l=c(e,["googleSearch"]);l!=null&&d(t,["googleSearch"],l);const s=c(e,["googleSearchRetrieval"]);s!=null&&d(t,["googleSearchRetrieval"],s);const i=c(e,["enterpriseWebSearch"]);i!=null&&d(t,["enterpriseWebSearch"],i);const r=c(e,["googleMaps"]);r!=null&&d(t,["googleMaps"],r);const u=c(e,["urlContext"]);u!=null&&d(t,["urlContext"],u);const f=c(e,["computerUse"]);f!=null&&d(t,["computerUse"],f);const h=c(e,["codeExecution"]);return h!=null&&d(t,["codeExecution"],h),t}function N2(e,t){const n={},o=c(e,["ttl"]);t!==void 0&&o!=null&&d(t,["ttl"],o);const l=c(e,["expireTime"]);return t!==void 0&&l!=null&&d(t,["expireTime"],l),n}function A2(e,t){const n={},o=c(e,["ttl"]);t!==void 0&&o!=null&&d(t,["ttl"],o);const l=c(e,["expireTime"]);return t!==void 0&&l!=null&&d(t,["expireTime"],l),n}function _2(e,t){const n={},o=c(t,["name"]);o!=null&&d(n,["_url","name"],So(e,o));const l=c(t,["config"]);return l!=null&&N2(l,n),n}function M2(e,t){const n={},o=c(t,["name"]);o!=null&&d(n,["_url","name"],So(e,o));const l=c(t,["config"]);return l!=null&&A2(l,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class R2 extends _l{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Li(Cl.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(t){var n,o,l,s;let i,r="",u={};if(this.apiClient.isVertexAI()){const f=i2(this.apiClient,t);return r=ce("cachedContents",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),i.then(h=>h)}else{const f=s2(this.apiClient,t);return r=ce("cachedContents",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),i.then(h=>h)}}async get(t){var n,o,l,s;let i,r="",u={};if(this.apiClient.isVertexAI()){const f=p2(this.apiClient,t);return r=ce("{name}",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),i.then(h=>h)}else{const f=h2(this.apiClient,t);return r=ce("{name}",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),i.then(h=>h)}}async delete(t){var n,o,l,s;let i,r="",u={};if(this.apiClient.isVertexAI()){const f=r2(this.apiClient,t);return r=ce("{name}",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),i.then(h=>{const p=u2(h),m=new _p;return Object.assign(m,p),m})}else{const f=a2(this.apiClient,t);return r=ce("{name}",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),i.then(h=>{const p=c2(h),m=new _p;return Object.assign(m,p),m})}}async update(t){var n,o,l,s;let i,r="",u={};if(this.apiClient.isVertexAI()){const f=M2(this.apiClient,t);return r=ce("{name}",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),i.then(h=>h)}else{const f=_2(this.apiClient,t);return r=ce("{name}",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),i.then(h=>h)}}async listInternal(t){var n,o,l,s;let i,r="",u={};if(this.apiClient.isVertexAI()){const f=b2(t);return r=ce("cachedContents",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),i.then(h=>{const p=S2(h),m=new Mp;return Object.assign(m,p),m})}else{const f=v2(t);return r=ce("cachedContents",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),i.then(h=>{const p=C2(h),m=new Mp;return Object.assign(m,p),m})}}}function Up(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function pt(e){return this instanceof pt?(this.v=e,this):new pt(e)}function ls(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(e,t||[]),l,s=[];return l=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),r("next"),r("throw"),r("return",i),l[Symbol.asyncIterator]=function(){return this},l;function i(g){return function(E){return Promise.resolve(E).then(g,p)}}function r(g,E){o[g]&&(l[g]=function(T){return new Promise(function(M,y){s.push([g,T,M,y])>1||u(g,T)})},E&&(l[g]=E(l[g])))}function u(g,E){try{f(o[g](E))}catch(T){m(s[0][3],T)}}function f(g){g.value instanceof pt?Promise.resolve(g.value.v).then(h,p):m(s[0][2],g)}function h(g){u("next",g)}function p(g){u("throw",g)}function m(g,E){g(E),s.shift(),s.length&&u(s[0][0],s[0][1])}}function ii(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Up=="function"?Up(e):e[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(s){n[s]=e[s]&&function(i){return new Promise(function(r,u){i=e[s](i),l(r,u,i.done,i.value)})}}function l(s,i,r,u){Promise.resolve(u).then(function(f){s({value:f,done:r})},i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function I2(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:Hx(n)}function Hx(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function k2(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function zp(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let o=0;for(;o<n;)if(e[o].role==="user")t.push(e[o]),o++;else{const l=[];let s=!0;for(;o<n&&e[o].role==="model";)l.push(e[o]),s&&!Hx(e[o])&&(s=!1),o++;s?t.push(...l):t.pop()}return t}class D2{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new L2(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class L2{constructor(t,n,o,l={},s=[]){this.apiClient=t,this.modelsModule=n,this.model=o,this.config=l,this.history=s,this.sendPromise=Promise.resolve(),k2(s)}async sendMessage(t){var n;await this.sendPromise;const o=Ft(t.message),l=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,i,r;const u=await l,f=(i=(s=u.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content,h=u.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];h!=null&&(m=(r=h.slice(p))!==null&&r!==void 0?r:[]);const g=f?[f]:[];this.recordHistory(o,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),l}async sendMessageStream(t){var n;await this.sendPromise;const o=Ft(t.message),l=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=l.then(()=>{}).catch(()=>{});const s=await l;return this.processStreamResponse(s,o)}getHistory(t=!1){const n=t?zp(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){var o,l;return ls(this,arguments,function*(){var i,r,u,f;const h=[];try{for(var p=!0,m=ii(t),g;g=yield pt(m.next()),i=g.done,!i;p=!0){f=g.value,p=!1;const E=f;if(I2(E)){const T=(l=(o=E.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content;T!==void 0&&h.push(T)}yield yield pt(E)}}catch(E){r={error:E}}finally{try{!p&&!i&&(u=m.return)&&(yield pt(u.call(m)))}finally{if(r)throw r.error}}this.recordHistory(n,h)})}recordHistory(t,n,o){let l=[];n.length>0&&n.every(s=>s.role!==void 0)?l=n:l.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...zp(o)):this.history.push(t),this.history.push(...l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cr extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,Cr.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function j2(e){const t={},n=c(e,["file"]);return n!=null&&d(t,["file"],n),t}function U2(e){const t={},n=c(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function z2(e){const t={},n=c(e,["name"]);return n!=null&&d(t,["_url","file"],Ux(n)),t}function P2(e){const t={},n=c(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function B2(e){const t={},n=c(e,["name"]);return n!=null&&d(t,["_url","file"],Ux(n)),t}function q2(e,t){const n={},o=c(e,["pageSize"]);t!==void 0&&o!=null&&d(t,["_query","pageSize"],o);const l=c(e,["pageToken"]);return t!==void 0&&l!=null&&d(t,["_query","pageToken"],l),n}function G2(e){const t={},n=c(e,["config"]);return n!=null&&q2(n,t),t}function V2(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=c(e,["nextPageToken"]);o!=null&&d(t,["nextPageToken"],o);const l=c(e,["files"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(i=>i)),d(t,["files"],s)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class H2 extends _l{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Li(Cl.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>n)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,o;let l,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=G2(t);return s=ce("files",r._url),i=r._query,delete r._url,delete r._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(r),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:u.headers},h})),l.then(u=>{const f=V2(u),h=new eC;return Object.assign(h,f),h})}}async createInternal(t){var n,o;let l,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=j2(t);return s=ce("upload/v1beta/files",r._url),i=r._query,delete r._url,delete r._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(r),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),l.then(u=>{const f=U2(u),h=new tC;return Object.assign(h,f),h})}}async get(t){var n,o;let l,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=B2(t);return s=ce("files/{file}",r._url),i=r._query,delete r._url,delete r._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(r),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),l.then(u=>u)}}async delete(t){var n,o;let l,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=z2(t);return s=ce("files/{file}",r._url),i=r._query,delete r._url,delete r._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:u.headers},h})),l.then(u=>{const f=P2(u),h=new nC;return Object.assign(h,f),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ba(e){const t={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(e,["data"]);n!=null&&d(t,["data"],n);const o=c(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function O2(e){const t={},n=c(e,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(s=>sS(s))),d(t,["parts"],l)}const o=c(e,["role"]);return o!=null&&d(t,["role"],o),t}function F2(e){const t={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const o=c(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function Y2(e){const t={};if(c(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(e,["description"]);n!=null&&d(t,["description"],n);const o=c(e,["name"]);o!=null&&d(t,["name"],o);const l=c(e,["parameters"]);l!=null&&d(t,["parameters"],l);const s=c(e,["parametersJsonSchema"]);s!=null&&d(t,["parametersJsonSchema"],s);const i=c(e,["response"]);i!=null&&d(t,["response"],i);const r=c(e,["responseJsonSchema"]);return r!=null&&d(t,["responseJsonSchema"],r),t}function J2(e){const t={},n=c(e,["modelSelectionConfig"]);n!=null&&d(t,["modelConfig"],n);const o=c(e,["audioTimestamp"]);o!=null&&d(t,["audioTimestamp"],o);const l=c(e,["candidateCount"]);l!=null&&d(t,["candidateCount"],l);const s=c(e,["enableAffectiveDialog"]);s!=null&&d(t,["enableAffectiveDialog"],s);const i=c(e,["frequencyPenalty"]);i!=null&&d(t,["frequencyPenalty"],i);const r=c(e,["logprobs"]);r!=null&&d(t,["logprobs"],r);const u=c(e,["maxOutputTokens"]);u!=null&&d(t,["maxOutputTokens"],u);const f=c(e,["mediaResolution"]);f!=null&&d(t,["mediaResolution"],f);const h=c(e,["presencePenalty"]);h!=null&&d(t,["presencePenalty"],h);const p=c(e,["responseJsonSchema"]);p!=null&&d(t,["responseJsonSchema"],p);const m=c(e,["responseLogprobs"]);m!=null&&d(t,["responseLogprobs"],m);const g=c(e,["responseMimeType"]);g!=null&&d(t,["responseMimeType"],g);const E=c(e,["responseModalities"]);E!=null&&d(t,["responseModalities"],E);const T=c(e,["responseSchema"]);T!=null&&d(t,["responseSchema"],T);const M=c(e,["routingConfig"]);M!=null&&d(t,["routingConfig"],M);const y=c(e,["seed"]);y!=null&&d(t,["seed"],y);const x=c(e,["speechConfig"]);x!=null&&d(t,["speechConfig"],Ox(x));const v=c(e,["stopSequences"]);v!=null&&d(t,["stopSequences"],v);const S=c(e,["temperature"]);S!=null&&d(t,["temperature"],S);const N=c(e,["thinkingConfig"]);N!=null&&d(t,["thinkingConfig"],N);const L=c(e,["topK"]);L!=null&&d(t,["topK"],L);const A=c(e,["topP"]);if(A!=null&&d(t,["topP"],A),c(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function X2(e){const t={};if(c(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function $2(e){const t={},n=c(e,["timeRangeFilter"]);if(n!=null&&d(t,["timeRangeFilter"],n),c(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function K2(e,t){const n={},o=c(e,["generationConfig"]);t!==void 0&&o!=null&&d(t,["setup","generationConfig"],o);const l=c(e,["responseModalities"]);t!==void 0&&l!=null&&d(t,["setup","generationConfig","responseModalities"],l);const s=c(e,["temperature"]);t!==void 0&&s!=null&&d(t,["setup","generationConfig","temperature"],s);const i=c(e,["topP"]);t!==void 0&&i!=null&&d(t,["setup","generationConfig","topP"],i);const r=c(e,["topK"]);t!==void 0&&r!=null&&d(t,["setup","generationConfig","topK"],r);const u=c(e,["maxOutputTokens"]);t!==void 0&&u!=null&&d(t,["setup","generationConfig","maxOutputTokens"],u);const f=c(e,["mediaResolution"]);t!==void 0&&f!=null&&d(t,["setup","generationConfig","mediaResolution"],f);const h=c(e,["seed"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","seed"],h);const p=c(e,["speechConfig"]);t!==void 0&&p!=null&&d(t,["setup","generationConfig","speechConfig"],Kd(p));const m=c(e,["thinkingConfig"]);t!==void 0&&m!=null&&d(t,["setup","generationConfig","thinkingConfig"],m);const g=c(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&d(t,["setup","generationConfig","enableAffectiveDialog"],g);const E=c(e,["systemInstruction"]);t!==void 0&&E!=null&&d(t,["setup","systemInstruction"],O2(Ft(E)));const T=c(e,["tools"]);if(t!==void 0&&T!=null){let L=_s(T);Array.isArray(L)&&(L=L.map(A=>aS(As(A)))),d(t,["setup","tools"],L)}const M=c(e,["sessionResumption"]);t!==void 0&&M!=null&&d(t,["setup","sessionResumption"],iS(M));const y=c(e,["inputAudioTranscription"]);t!==void 0&&y!=null&&d(t,["setup","inputAudioTranscription"],y);const x=c(e,["outputAudioTranscription"]);t!==void 0&&x!=null&&d(t,["setup","outputAudioTranscription"],x);const v=c(e,["realtimeInputConfig"]);t!==void 0&&v!=null&&d(t,["setup","realtimeInputConfig"],v);const S=c(e,["contextWindowCompression"]);t!==void 0&&S!=null&&d(t,["setup","contextWindowCompression"],S);const N=c(e,["proactivity"]);return t!==void 0&&N!=null&&d(t,["setup","proactivity"],N),n}function Z2(e,t){const n={},o=c(e,["generationConfig"]);t!==void 0&&o!=null&&d(t,["setup","generationConfig"],J2(o));const l=c(e,["responseModalities"]);t!==void 0&&l!=null&&d(t,["setup","generationConfig","responseModalities"],l);const s=c(e,["temperature"]);t!==void 0&&s!=null&&d(t,["setup","generationConfig","temperature"],s);const i=c(e,["topP"]);t!==void 0&&i!=null&&d(t,["setup","generationConfig","topP"],i);const r=c(e,["topK"]);t!==void 0&&r!=null&&d(t,["setup","generationConfig","topK"],r);const u=c(e,["maxOutputTokens"]);t!==void 0&&u!=null&&d(t,["setup","generationConfig","maxOutputTokens"],u);const f=c(e,["mediaResolution"]);t!==void 0&&f!=null&&d(t,["setup","generationConfig","mediaResolution"],f);const h=c(e,["seed"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","seed"],h);const p=c(e,["speechConfig"]);t!==void 0&&p!=null&&d(t,["setup","generationConfig","speechConfig"],Ox(Kd(p)));const m=c(e,["thinkingConfig"]);t!==void 0&&m!=null&&d(t,["setup","generationConfig","thinkingConfig"],m);const g=c(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&d(t,["setup","generationConfig","enableAffectiveDialog"],g);const E=c(e,["systemInstruction"]);t!==void 0&&E!=null&&d(t,["setup","systemInstruction"],Ft(E));const T=c(e,["tools"]);if(t!==void 0&&T!=null){let L=_s(T);Array.isArray(L)&&(L=L.map(A=>rS(As(A)))),d(t,["setup","tools"],L)}const M=c(e,["sessionResumption"]);t!==void 0&&M!=null&&d(t,["setup","sessionResumption"],M);const y=c(e,["inputAudioTranscription"]);t!==void 0&&y!=null&&d(t,["setup","inputAudioTranscription"],y);const x=c(e,["outputAudioTranscription"]);t!==void 0&&x!=null&&d(t,["setup","outputAudioTranscription"],x);const v=c(e,["realtimeInputConfig"]);t!==void 0&&v!=null&&d(t,["setup","realtimeInputConfig"],v);const S=c(e,["contextWindowCompression"]);t!==void 0&&S!=null&&d(t,["setup","contextWindowCompression"],S);const N=c(e,["proactivity"]);return t!==void 0&&N!=null&&d(t,["setup","proactivity"],N),n}function Q2(e,t){const n={},o=c(t,["model"]);o!=null&&d(n,["setup","model"],$e(e,o));const l=c(t,["config"]);return l!=null&&d(n,["config"],K2(l,n)),n}function W2(e,t){const n={},o=c(t,["model"]);o!=null&&d(n,["setup","model"],$e(e,o));const l=c(t,["config"]);return l!=null&&d(n,["config"],Z2(l,n)),n}function eS(e){const t={},n=c(e,["musicGenerationConfig"]);return n!=null&&d(t,["musicGenerationConfig"],n),t}function tS(e){const t={},n=c(e,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>l)),d(t,["weightedPrompts"],o)}return t}function nS(e){const t={},n=c(e,["media"]);if(n!=null){let f=Ix(n);Array.isArray(f)&&(f=f.map(h=>ba(h))),d(t,["mediaChunks"],f)}const o=c(e,["audio"]);o!=null&&d(t,["audio"],ba(Dx(o)));const l=c(e,["audioStreamEnd"]);l!=null&&d(t,["audioStreamEnd"],l);const s=c(e,["video"]);s!=null&&d(t,["video"],ba(kx(s)));const i=c(e,["text"]);i!=null&&d(t,["text"],i);const r=c(e,["activityStart"]);r!=null&&d(t,["activityStart"],r);const u=c(e,["activityEnd"]);return u!=null&&d(t,["activityEnd"],u),t}function oS(e){const t={},n=c(e,["media"]);if(n!=null){let f=Ix(n);Array.isArray(f)&&(f=f.map(h=>h)),d(t,["mediaChunks"],f)}const o=c(e,["audio"]);o!=null&&d(t,["audio"],Dx(o));const l=c(e,["audioStreamEnd"]);l!=null&&d(t,["audioStreamEnd"],l);const s=c(e,["video"]);s!=null&&d(t,["video"],kx(s));const i=c(e,["text"]);i!=null&&d(t,["text"],i);const r=c(e,["activityStart"]);r!=null&&d(t,["activityStart"],r);const u=c(e,["activityEnd"]);return u!=null&&d(t,["activityEnd"],u),t}function lS(e){const t={},n=c(e,["setupComplete"]);n!=null&&d(t,["setupComplete"],n);const o=c(e,["serverContent"]);o!=null&&d(t,["serverContent"],o);const l=c(e,["toolCall"]);l!=null&&d(t,["toolCall"],l);const s=c(e,["toolCallCancellation"]);s!=null&&d(t,["toolCallCancellation"],s);const i=c(e,["usageMetadata"]);i!=null&&d(t,["usageMetadata"],cS(i));const r=c(e,["goAway"]);r!=null&&d(t,["goAway"],r);const u=c(e,["sessionResumptionUpdate"]);return u!=null&&d(t,["sessionResumptionUpdate"],u),t}function sS(e){const t={},n=c(e,["videoMetadata"]);n!=null&&d(t,["videoMetadata"],n);const o=c(e,["thought"]);o!=null&&d(t,["thought"],o);const l=c(e,["inlineData"]);l!=null&&d(t,["inlineData"],ba(l));const s=c(e,["fileData"]);s!=null&&d(t,["fileData"],F2(s));const i=c(e,["thoughtSignature"]);i!=null&&d(t,["thoughtSignature"],i);const r=c(e,["functionCall"]);r!=null&&d(t,["functionCall"],r);const u=c(e,["codeExecutionResult"]);u!=null&&d(t,["codeExecutionResult"],u);const f=c(e,["executableCode"]);f!=null&&d(t,["executableCode"],f);const h=c(e,["functionResponse"]);h!=null&&d(t,["functionResponse"],h);const p=c(e,["text"]);return p!=null&&d(t,["text"],p),t}function iS(e){const t={},n=c(e,["handle"]);if(n!=null&&d(t,["handle"],n),c(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function Ox(e){const t={},n=c(e,["voiceConfig"]);if(n!=null&&d(t,["voiceConfig"],n),c(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=c(e,["languageCode"]);return o!=null&&d(t,["languageCode"],o),t}function aS(e){const t={},n=c(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>h)),d(t,["functionDeclarations"],f)}if(c(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=c(e,["googleSearch"]);o!=null&&d(t,["googleSearch"],$2(o));const l=c(e,["googleSearchRetrieval"]);if(l!=null&&d(t,["googleSearchRetrieval"],l),c(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=c(e,["googleMaps"]);s!=null&&d(t,["googleMaps"],X2(s));const i=c(e,["urlContext"]);i!=null&&d(t,["urlContext"],i);const r=c(e,["computerUse"]);r!=null&&d(t,["computerUse"],r);const u=c(e,["codeExecution"]);return u!=null&&d(t,["codeExecution"],u),t}function rS(e){const t={},n=c(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>Y2(m))),d(t,["functionDeclarations"],p)}const o=c(e,["retrieval"]);o!=null&&d(t,["retrieval"],o);const l=c(e,["googleSearch"]);l!=null&&d(t,["googleSearch"],l);const s=c(e,["googleSearchRetrieval"]);s!=null&&d(t,["googleSearchRetrieval"],s);const i=c(e,["enterpriseWebSearch"]);i!=null&&d(t,["enterpriseWebSearch"],i);const r=c(e,["googleMaps"]);r!=null&&d(t,["googleMaps"],r);const u=c(e,["urlContext"]);u!=null&&d(t,["urlContext"],u);const f=c(e,["computerUse"]);f!=null&&d(t,["computerUse"],f);const h=c(e,["codeExecution"]);return h!=null&&d(t,["codeExecution"],h),t}function cS(e){const t={},n=c(e,["promptTokenCount"]);n!=null&&d(t,["promptTokenCount"],n);const o=c(e,["cachedContentTokenCount"]);o!=null&&d(t,["cachedContentTokenCount"],o);const l=c(e,["candidatesTokenCount"]);l!=null&&d(t,["responseTokenCount"],l);const s=c(e,["toolUsePromptTokenCount"]);s!=null&&d(t,["toolUsePromptTokenCount"],s);const i=c(e,["thoughtsTokenCount"]);i!=null&&d(t,["thoughtsTokenCount"],i);const r=c(e,["totalTokenCount"]);r!=null&&d(t,["totalTokenCount"],r);const u=c(e,["promptTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(E=>E)),d(t,["promptTokensDetails"],g)}const f=c(e,["cacheTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(E=>E)),d(t,["cacheTokensDetails"],g)}const h=c(e,["candidatesTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(E=>E)),d(t,["responseTokensDetails"],g)}const p=c(e,["toolUsePromptTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(E=>E)),d(t,["toolUsePromptTokensDetails"],g)}const m=c(e,["trafficType"]);return m!=null&&d(t,["trafficType"],m),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uS(e){const t={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(e,["data"]);n!=null&&d(t,["data"],n);const o=c(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function dS(e){const t={},n=c(e,["content"]);n!=null&&d(t,["content"],n);const o=c(e,["citationMetadata"]);o!=null&&d(t,["citationMetadata"],fS(o));const l=c(e,["tokenCount"]);l!=null&&d(t,["tokenCount"],l);const s=c(e,["finishReason"]);s!=null&&d(t,["finishReason"],s);const i=c(e,["urlContextMetadata"]);i!=null&&d(t,["urlContextMetadata"],i);const r=c(e,["avgLogprobs"]);r!=null&&d(t,["avgLogprobs"],r);const u=c(e,["groundingMetadata"]);u!=null&&d(t,["groundingMetadata"],u);const f=c(e,["index"]);f!=null&&d(t,["index"],f);const h=c(e,["logprobsResult"]);h!=null&&d(t,["logprobsResult"],h);const p=c(e,["safetyRatings"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(g=>g)),d(t,["safetyRatings"],m)}return t}function fS(e){const t={},n=c(e,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>l)),d(t,["citations"],o)}return t}function hS(e,t){const n={},o=c(t,["model"]);o!=null&&d(n,["_url","model"],$e(e,o));const l=c(t,["contents"]);if(l!=null){let s=In(l);Array.isArray(s)&&(s=s.map(i=>i)),d(n,["contents"],s)}return n}function pS(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=c(e,["tokensInfo"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(s=>s)),d(t,["tokensInfo"],l)}return t}function mS(e){const t={},n=c(e,["values"]);n!=null&&d(t,["values"],n);const o=c(e,["statistics"]);return o!=null&&d(t,["statistics"],gS(o)),t}function gS(e){const t={},n=c(e,["truncated"]);n!=null&&d(t,["truncated"],n);const o=c(e,["token_count"]);return o!=null&&d(t,["tokenCount"],o),t}function Sr(e){const t={},n=c(e,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(s=>CE(s))),d(t,["parts"],l)}const o=c(e,["role"]);return o!=null&&d(t,["role"],o),t}function yS(e){const t={},n=c(e,["controlType"]);n!=null&&d(t,["controlType"],n);const o=c(e,["enableControlImageComputation"]);return o!=null&&d(t,["computeControl"],o),t}function xS(e){const t={};if(c(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function vS(e,t){const n={},o=c(e,["systemInstruction"]);t!==void 0&&o!=null&&d(t,["systemInstruction"],Ft(o));const l=c(e,["tools"]);if(t!==void 0&&l!=null){let i=l;Array.isArray(i)&&(i=i.map(r=>$x(r))),d(t,["tools"],i)}const s=c(e,["generationConfig"]);return t!==void 0&&s!=null&&d(t,["generationConfig"],rE(s)),n}function bS(e,t){const n={},o=c(t,["model"]);o!=null&&d(n,["_url","model"],$e(e,o));const l=c(t,["contents"]);if(l!=null){let i=In(l);Array.isArray(i)&&(i=i.map(r=>Sr(r))),d(n,["contents"],i)}const s=c(t,["config"]);return s!=null&&xS(s),n}function CS(e,t){const n={},o=c(t,["model"]);o!=null&&d(n,["_url","model"],$e(e,o));const l=c(t,["contents"]);if(l!=null){let i=In(l);Array.isArray(i)&&(i=i.map(r=>r)),d(n,["contents"],i)}const s=c(t,["config"]);return s!=null&&vS(s,n),n}function SS(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=c(e,["totalTokens"]);o!=null&&d(t,["totalTokens"],o);const l=c(e,["cachedContentTokenCount"]);return l!=null&&d(t,["cachedContentTokenCount"],l),t}function ES(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=c(e,["totalTokens"]);return o!=null&&d(t,["totalTokens"],o),t}function TS(e,t){const n={},o=c(t,["model"]);return o!=null&&d(n,["_url","name"],$e(e,o)),n}function wS(e,t){const n={},o=c(t,["model"]);return o!=null&&d(n,["_url","name"],$e(e,o)),n}function NS(e){const t={},n=c(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function AS(e){const t={},n=c(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function _S(e,t){const n={},o=c(e,["outputGcsUri"]);t!==void 0&&o!=null&&d(t,["parameters","storageUri"],o);const l=c(e,["negativePrompt"]);t!==void 0&&l!=null&&d(t,["parameters","negativePrompt"],l);const s=c(e,["numberOfImages"]);t!==void 0&&s!=null&&d(t,["parameters","sampleCount"],s);const i=c(e,["aspectRatio"]);t!==void 0&&i!=null&&d(t,["parameters","aspectRatio"],i);const r=c(e,["guidanceScale"]);t!==void 0&&r!=null&&d(t,["parameters","guidanceScale"],r);const u=c(e,["seed"]);t!==void 0&&u!=null&&d(t,["parameters","seed"],u);const f=c(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&d(t,["parameters","safetySetting"],f);const h=c(e,["personGeneration"]);t!==void 0&&h!=null&&d(t,["parameters","personGeneration"],h);const p=c(e,["includeSafetyAttributes"]);t!==void 0&&p!=null&&d(t,["parameters","includeSafetyAttributes"],p);const m=c(e,["includeRaiReason"]);t!==void 0&&m!=null&&d(t,["parameters","includeRaiReason"],m);const g=c(e,["language"]);t!==void 0&&g!=null&&d(t,["parameters","language"],g);const E=c(e,["outputMimeType"]);t!==void 0&&E!=null&&d(t,["parameters","outputOptions","mimeType"],E);const T=c(e,["outputCompressionQuality"]);t!==void 0&&T!=null&&d(t,["parameters","outputOptions","compressionQuality"],T);const M=c(e,["addWatermark"]);t!==void 0&&M!=null&&d(t,["parameters","addWatermark"],M);const y=c(e,["labels"]);t!==void 0&&y!=null&&d(t,["labels"],y);const x=c(e,["editMode"]);t!==void 0&&x!=null&&d(t,["parameters","editMode"],x);const v=c(e,["baseSteps"]);return t!==void 0&&v!=null&&d(t,["parameters","editConfig","baseSteps"],v),n}function MS(e,t){const n={},o=c(t,["model"]);o!=null&&d(n,["_url","model"],$e(e,o));const l=c(t,["prompt"]);l!=null&&d(n,["instances[0]","prompt"],l);const s=c(t,["referenceImages"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>AE(u))),d(n,["instances[0]","referenceImages"],r)}const i=c(t,["config"]);return i!=null&&_S(i,n),n}function RS(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=c(e,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(s=>Er(s))),d(t,["generatedImages"],l)}return t}function IS(e,t){const n={},o=c(e,["taskType"]);t!==void 0&&o!=null&&d(t,["requests[]","taskType"],o);const l=c(e,["title"]);t!==void 0&&l!=null&&d(t,["requests[]","title"],l);const s=c(e,["outputDimensionality"]);if(t!==void 0&&s!=null&&d(t,["requests[]","outputDimensionality"],s),c(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function kS(e,t){const n={},o=c(e,["taskType"]);t!==void 0&&o!=null&&d(t,["instances[]","task_type"],o);const l=c(e,["title"]);t!==void 0&&l!=null&&d(t,["instances[]","title"],l);const s=c(e,["outputDimensionality"]);t!==void 0&&s!=null&&d(t,["parameters","outputDimensionality"],s);const i=c(e,["mimeType"]);t!==void 0&&i!=null&&d(t,["instances[]","mimeType"],i);const r=c(e,["autoTruncate"]);return t!==void 0&&r!=null&&d(t,["parameters","autoTruncate"],r),n}function DS(e,t){const n={},o=c(t,["model"]);o!=null&&d(n,["_url","model"],$e(e,o));const l=c(t,["contents"]);if(l!=null){let r=Jd(e,l);Array.isArray(r)&&(r=r.map(u=>u)),d(n,["requests[]","content"],r)}const s=c(t,["config"]);s!=null&&IS(s,n);const i=c(t,["model"]);return i!==void 0&&d(n,["requests[]","model"],$e(e,i)),n}function LS(e,t){const n={},o=c(t,["model"]);o!=null&&d(n,["_url","model"],$e(e,o));const l=c(t,["contents"]);if(l!=null){let i=Jd(e,l);Array.isArray(i)&&(i=i.map(r=>r)),d(n,["instances[]","content"],i)}const s=c(t,["config"]);return s!=null&&kS(s,n),n}function jS(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=c(e,["embeddings"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>i)),d(t,["embeddings"],s)}const l=c(e,["metadata"]);return l!=null&&d(t,["metadata"],l),t}function US(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=c(e,["predictions[]","embeddings"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>mS(i))),d(t,["embeddings"],s)}const l=c(e,["metadata"]);return l!=null&&d(t,["metadata"],l),t}function zS(e){const t={},n=c(e,["endpoint"]);n!=null&&d(t,["name"],n);const o=c(e,["deployedModelId"]);return o!=null&&d(t,["deployedModelId"],o),t}function PS(e){const t={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const o=c(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function BS(e){const t={};if(c(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(e,["description"]);n!=null&&d(t,["description"],n);const o=c(e,["name"]);o!=null&&d(t,["name"],o);const l=c(e,["parameters"]);l!=null&&d(t,["parameters"],l);const s=c(e,["parametersJsonSchema"]);s!=null&&d(t,["parametersJsonSchema"],s);const i=c(e,["response"]);i!=null&&d(t,["response"],i);const r=c(e,["responseJsonSchema"]);return r!=null&&d(t,["responseJsonSchema"],r),t}function qS(e,t,n){const o={},l=c(t,["systemInstruction"]);n!==void 0&&l!=null&&d(n,["systemInstruction"],Sr(Ft(l)));const s=c(t,["temperature"]);s!=null&&d(o,["temperature"],s);const i=c(t,["topP"]);i!=null&&d(o,["topP"],i);const r=c(t,["topK"]);r!=null&&d(o,["topK"],r);const u=c(t,["candidateCount"]);u!=null&&d(o,["candidateCount"],u);const f=c(t,["maxOutputTokens"]);f!=null&&d(o,["maxOutputTokens"],f);const h=c(t,["stopSequences"]);h!=null&&d(o,["stopSequences"],h);const p=c(t,["responseLogprobs"]);p!=null&&d(o,["responseLogprobs"],p);const m=c(t,["logprobs"]);m!=null&&d(o,["logprobs"],m);const g=c(t,["presencePenalty"]);g!=null&&d(o,["presencePenalty"],g);const E=c(t,["frequencyPenalty"]);E!=null&&d(o,["frequencyPenalty"],E);const T=c(t,["seed"]);T!=null&&d(o,["seed"],T);const M=c(t,["responseMimeType"]);M!=null&&d(o,["responseMimeType"],M);const y=c(t,["responseSchema"]);y!=null&&d(o,["responseSchema"],Xd(y));const x=c(t,["responseJsonSchema"]);if(x!=null&&d(o,["responseJsonSchema"],x),c(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const v=c(t,["safetySettings"]);if(n!==void 0&&v!=null){let _=v;Array.isArray(_)&&(_=_.map(R=>_E(R))),d(n,["safetySettings"],_)}const S=c(t,["tools"]);if(n!==void 0&&S!=null){let _=_s(S);Array.isArray(_)&&(_=_.map(R=>LE(As(R)))),d(n,["tools"],_)}const N=c(t,["toolConfig"]);if(n!==void 0&&N!=null&&d(n,["toolConfig"],N),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const L=c(t,["cachedContent"]);n!==void 0&&L!=null&&d(n,["cachedContent"],So(e,L));const A=c(t,["responseModalities"]);A!=null&&d(o,["responseModalities"],A);const b=c(t,["mediaResolution"]);b!=null&&d(o,["mediaResolution"],b);const I=c(t,["speechConfig"]);if(I!=null&&d(o,["speechConfig"],$d(I)),c(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const w=c(t,["thinkingConfig"]);w!=null&&d(o,["thinkingConfig"],w);const j=c(t,["imageConfig"]);return j!=null&&d(o,["imageConfig"],j),o}function GS(e,t,n){const o={},l=c(t,["systemInstruction"]);n!==void 0&&l!=null&&d(n,["systemInstruction"],Ft(l));const s=c(t,["temperature"]);s!=null&&d(o,["temperature"],s);const i=c(t,["topP"]);i!=null&&d(o,["topP"],i);const r=c(t,["topK"]);r!=null&&d(o,["topK"],r);const u=c(t,["candidateCount"]);u!=null&&d(o,["candidateCount"],u);const f=c(t,["maxOutputTokens"]);f!=null&&d(o,["maxOutputTokens"],f);const h=c(t,["stopSequences"]);h!=null&&d(o,["stopSequences"],h);const p=c(t,["responseLogprobs"]);p!=null&&d(o,["responseLogprobs"],p);const m=c(t,["logprobs"]);m!=null&&d(o,["logprobs"],m);const g=c(t,["presencePenalty"]);g!=null&&d(o,["presencePenalty"],g);const E=c(t,["frequencyPenalty"]);E!=null&&d(o,["frequencyPenalty"],E);const T=c(t,["seed"]);T!=null&&d(o,["seed"],T);const M=c(t,["responseMimeType"]);M!=null&&d(o,["responseMimeType"],M);const y=c(t,["responseSchema"]);y!=null&&d(o,["responseSchema"],Xd(y));const x=c(t,["responseJsonSchema"]);x!=null&&d(o,["responseJsonSchema"],x);const v=c(t,["routingConfig"]);v!=null&&d(o,["routingConfig"],v);const S=c(t,["modelSelectionConfig"]);S!=null&&d(o,["modelConfig"],S);const N=c(t,["safetySettings"]);if(n!==void 0&&N!=null){let z=N;Array.isArray(z)&&(z=z.map(U=>U)),d(n,["safetySettings"],z)}const L=c(t,["tools"]);if(n!==void 0&&L!=null){let z=_s(L);Array.isArray(z)&&(z=z.map(U=>$x(As(U)))),d(n,["tools"],z)}const A=c(t,["toolConfig"]);n!==void 0&&A!=null&&d(n,["toolConfig"],A);const b=c(t,["labels"]);n!==void 0&&b!=null&&d(n,["labels"],b);const I=c(t,["cachedContent"]);n!==void 0&&I!=null&&d(n,["cachedContent"],So(e,I));const w=c(t,["responseModalities"]);w!=null&&d(o,["responseModalities"],w);const j=c(t,["mediaResolution"]);j!=null&&d(o,["mediaResolution"],j);const _=c(t,["speechConfig"]);_!=null&&d(o,["speechConfig"],Xx($d(_)));const R=c(t,["audioTimestamp"]);R!=null&&d(o,["audioTimestamp"],R);const H=c(t,["thinkingConfig"]);H!=null&&d(o,["thinkingConfig"],H);const ee=c(t,["imageConfig"]);return ee!=null&&d(o,["imageConfig"],ee),o}function Pp(e,t){const n={},o=c(t,["model"]);o!=null&&d(n,["_url","model"],$e(e,o));const l=c(t,["contents"]);if(l!=null){let i=In(l);Array.isArray(i)&&(i=i.map(r=>Sr(r))),d(n,["contents"],i)}const s=c(t,["config"]);return s!=null&&d(n,["generationConfig"],qS(e,s,n)),n}function Bp(e,t){const n={},o=c(t,["model"]);o!=null&&d(n,["_url","model"],$e(e,o));const l=c(t,["contents"]);if(l!=null){let i=In(l);Array.isArray(i)&&(i=i.map(r=>r)),d(n,["contents"],i)}const s=c(t,["config"]);return s!=null&&d(n,["generationConfig"],GS(e,s,n)),n}function qp(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=c(e,["candidates"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>dS(f))),d(t,["candidates"],u)}const l=c(e,["modelVersion"]);l!=null&&d(t,["modelVersion"],l);const s=c(e,["promptFeedback"]);s!=null&&d(t,["promptFeedback"],s);const i=c(e,["responseId"]);i!=null&&d(t,["responseId"],i);const r=c(e,["usageMetadata"]);return r!=null&&d(t,["usageMetadata"],r),t}function Gp(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=c(e,["candidates"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(h=>h)),d(t,["candidates"],f)}const l=c(e,["createTime"]);l!=null&&d(t,["createTime"],l);const s=c(e,["modelVersion"]);s!=null&&d(t,["modelVersion"],s);const i=c(e,["promptFeedback"]);i!=null&&d(t,["promptFeedback"],i);const r=c(e,["responseId"]);r!=null&&d(t,["responseId"],r);const u=c(e,["usageMetadata"]);return u!=null&&d(t,["usageMetadata"],u),t}function VS(e,t){const n={};if(c(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=c(e,["numberOfImages"]);t!==void 0&&o!=null&&d(t,["parameters","sampleCount"],o);const l=c(e,["aspectRatio"]);t!==void 0&&l!=null&&d(t,["parameters","aspectRatio"],l);const s=c(e,["guidanceScale"]);if(t!==void 0&&s!=null&&d(t,["parameters","guidanceScale"],s),c(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=c(e,["safetyFilterLevel"]);t!==void 0&&i!=null&&d(t,["parameters","safetySetting"],i);const r=c(e,["personGeneration"]);t!==void 0&&r!=null&&d(t,["parameters","personGeneration"],r);const u=c(e,["includeSafetyAttributes"]);t!==void 0&&u!=null&&d(t,["parameters","includeSafetyAttributes"],u);const f=c(e,["includeRaiReason"]);t!==void 0&&f!=null&&d(t,["parameters","includeRaiReason"],f);const h=c(e,["language"]);t!==void 0&&h!=null&&d(t,["parameters","language"],h);const p=c(e,["outputMimeType"]);t!==void 0&&p!=null&&d(t,["parameters","outputOptions","mimeType"],p);const m=c(e,["outputCompressionQuality"]);if(t!==void 0&&m!=null&&d(t,["parameters","outputOptions","compressionQuality"],m),c(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=c(e,["imageSize"]);if(t!==void 0&&g!=null&&d(t,["parameters","sampleImageSize"],g),c(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function HS(e,t){const n={},o=c(e,["outputGcsUri"]);t!==void 0&&o!=null&&d(t,["parameters","storageUri"],o);const l=c(e,["negativePrompt"]);t!==void 0&&l!=null&&d(t,["parameters","negativePrompt"],l);const s=c(e,["numberOfImages"]);t!==void 0&&s!=null&&d(t,["parameters","sampleCount"],s);const i=c(e,["aspectRatio"]);t!==void 0&&i!=null&&d(t,["parameters","aspectRatio"],i);const r=c(e,["guidanceScale"]);t!==void 0&&r!=null&&d(t,["parameters","guidanceScale"],r);const u=c(e,["seed"]);t!==void 0&&u!=null&&d(t,["parameters","seed"],u);const f=c(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&d(t,["parameters","safetySetting"],f);const h=c(e,["personGeneration"]);t!==void 0&&h!=null&&d(t,["parameters","personGeneration"],h);const p=c(e,["includeSafetyAttributes"]);t!==void 0&&p!=null&&d(t,["parameters","includeSafetyAttributes"],p);const m=c(e,["includeRaiReason"]);t!==void 0&&m!=null&&d(t,["parameters","includeRaiReason"],m);const g=c(e,["language"]);t!==void 0&&g!=null&&d(t,["parameters","language"],g);const E=c(e,["outputMimeType"]);t!==void 0&&E!=null&&d(t,["parameters","outputOptions","mimeType"],E);const T=c(e,["outputCompressionQuality"]);t!==void 0&&T!=null&&d(t,["parameters","outputOptions","compressionQuality"],T);const M=c(e,["addWatermark"]);t!==void 0&&M!=null&&d(t,["parameters","addWatermark"],M);const y=c(e,["labels"]);t!==void 0&&y!=null&&d(t,["labels"],y);const x=c(e,["imageSize"]);t!==void 0&&x!=null&&d(t,["parameters","sampleImageSize"],x);const v=c(e,["enhancePrompt"]);return t!==void 0&&v!=null&&d(t,["parameters","enhancePrompt"],v),n}function OS(e,t){const n={},o=c(t,["model"]);o!=null&&d(n,["_url","model"],$e(e,o));const l=c(t,["prompt"]);l!=null&&d(n,["instances[0]","prompt"],l);const s=c(t,["config"]);return s!=null&&VS(s,n),n}function FS(e,t){const n={},o=c(t,["model"]);o!=null&&d(n,["_url","model"],$e(e,o));const l=c(t,["prompt"]);l!=null&&d(n,["instances[0]","prompt"],l);const s=c(t,["config"]);return s!=null&&HS(s,n),n}function YS(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=c(e,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>lE(i))),d(t,["generatedImages"],s)}const l=c(e,["positivePromptSafetyAttributes"]);return l!=null&&d(t,["positivePromptSafetyAttributes"],Yx(l)),t}function JS(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=c(e,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>Er(i))),d(t,["generatedImages"],s)}const l=c(e,["positivePromptSafetyAttributes"]);return l!=null&&d(t,["positivePromptSafetyAttributes"],Jx(l)),t}function XS(e,t){const n={},o=c(e,["numberOfVideos"]);if(t!==void 0&&o!=null&&d(t,["parameters","sampleCount"],o),c(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=c(e,["durationSeconds"]);if(t!==void 0&&l!=null&&d(t,["parameters","durationSeconds"],l),c(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=c(e,["aspectRatio"]);t!==void 0&&s!=null&&d(t,["parameters","aspectRatio"],s);const i=c(e,["resolution"]);t!==void 0&&i!=null&&d(t,["parameters","resolution"],i);const r=c(e,["personGeneration"]);if(t!==void 0&&r!=null&&d(t,["parameters","personGeneration"],r),c(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=c(e,["negativePrompt"]);t!==void 0&&u!=null&&d(t,["parameters","negativePrompt"],u);const f=c(e,["enhancePrompt"]);if(t!==void 0&&f!=null&&d(t,["parameters","enhancePrompt"],f),c(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const h=c(e,["lastFrame"]);t!==void 0&&h!=null&&d(t,["instances[0]","lastFrame"],Tr(h));const p=c(e,["referenceImages"]);if(t!==void 0&&p!=null){let m=p;Array.isArray(m)&&(m=m.map(g=>JE(g))),d(t,["instances[0]","referenceImages"],m)}if(c(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function $S(e,t){const n={},o=c(e,["numberOfVideos"]);t!==void 0&&o!=null&&d(t,["parameters","sampleCount"],o);const l=c(e,["outputGcsUri"]);t!==void 0&&l!=null&&d(t,["parameters","storageUri"],l);const s=c(e,["fps"]);t!==void 0&&s!=null&&d(t,["parameters","fps"],s);const i=c(e,["durationSeconds"]);t!==void 0&&i!=null&&d(t,["parameters","durationSeconds"],i);const r=c(e,["seed"]);t!==void 0&&r!=null&&d(t,["parameters","seed"],r);const u=c(e,["aspectRatio"]);t!==void 0&&u!=null&&d(t,["parameters","aspectRatio"],u);const f=c(e,["resolution"]);t!==void 0&&f!=null&&d(t,["parameters","resolution"],f);const h=c(e,["personGeneration"]);t!==void 0&&h!=null&&d(t,["parameters","personGeneration"],h);const p=c(e,["pubsubTopic"]);t!==void 0&&p!=null&&d(t,["parameters","pubsubTopic"],p);const m=c(e,["negativePrompt"]);t!==void 0&&m!=null&&d(t,["parameters","negativePrompt"],m);const g=c(e,["enhancePrompt"]);t!==void 0&&g!=null&&d(t,["parameters","enhancePrompt"],g);const E=c(e,["generateAudio"]);t!==void 0&&E!=null&&d(t,["parameters","generateAudio"],E);const T=c(e,["lastFrame"]);t!==void 0&&T!=null&&d(t,["instances[0]","lastFrame"],Pn(T));const M=c(e,["referenceImages"]);if(t!==void 0&&M!=null){let v=M;Array.isArray(v)&&(v=v.map(S=>XE(S))),d(t,["instances[0]","referenceImages"],v)}const y=c(e,["mask"]);t!==void 0&&y!=null&&d(t,["instances[0]","mask"],YE(y));const x=c(e,["compressionQuality"]);return t!==void 0&&x!=null&&d(t,["parameters","compressionQuality"],x),n}function KS(e){const t={},n=c(e,["name"]);n!=null&&d(t,["name"],n);const o=c(e,["metadata"]);o!=null&&d(t,["metadata"],o);const l=c(e,["done"]);l!=null&&d(t,["done"],l);const s=c(e,["error"]);s!=null&&d(t,["error"],s);const i=c(e,["response","generateVideoResponse"]);return i!=null&&d(t,["response"],eE(i)),t}function ZS(e){const t={},n=c(e,["name"]);n!=null&&d(t,["name"],n);const o=c(e,["metadata"]);o!=null&&d(t,["metadata"],o);const l=c(e,["done"]);l!=null&&d(t,["done"],l);const s=c(e,["error"]);s!=null&&d(t,["error"],s);const i=c(e,["response"]);return i!=null&&d(t,["response"],tE(i)),t}function QS(e,t){const n={},o=c(t,["model"]);o!=null&&d(n,["_url","model"],$e(e,o));const l=c(t,["prompt"]);l!=null&&d(n,["instances[0]","prompt"],l);const s=c(t,["image"]);s!=null&&d(n,["instances[0]","image"],Tr(s));const i=c(t,["video"]);i!=null&&d(n,["instances[0]","video"],Kx(i));const r=c(t,["source"]);r!=null&&nE(r,n);const u=c(t,["config"]);return u!=null&&XS(u,n),n}function WS(e,t){const n={},o=c(t,["model"]);o!=null&&d(n,["_url","model"],$e(e,o));const l=c(t,["prompt"]);l!=null&&d(n,["instances[0]","prompt"],l);const s=c(t,["image"]);s!=null&&d(n,["instances[0]","image"],Pn(s));const i=c(t,["video"]);i!=null&&d(n,["instances[0]","video"],Zx(i));const r=c(t,["source"]);r!=null&&oE(r,n);const u=c(t,["config"]);return u!=null&&$S(u,n),n}function eE(e){const t={},n=c(e,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>iE(i))),d(t,["generatedVideos"],s)}const o=c(e,["raiMediaFilteredCount"]);o!=null&&d(t,["raiMediaFilteredCount"],o);const l=c(e,["raiMediaFilteredReasons"]);return l!=null&&d(t,["raiMediaFilteredReasons"],l),t}function tE(e){const t={},n=c(e,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>aE(i))),d(t,["generatedVideos"],s)}const o=c(e,["raiMediaFilteredCount"]);o!=null&&d(t,["raiMediaFilteredCount"],o);const l=c(e,["raiMediaFilteredReasons"]);return l!=null&&d(t,["raiMediaFilteredReasons"],l),t}function nE(e,t){const n={},o=c(e,["prompt"]);t!==void 0&&o!=null&&d(t,["instances[0]","prompt"],o);const l=c(e,["image"]);t!==void 0&&l!=null&&d(t,["instances[0]","image"],Tr(l));const s=c(e,["video"]);return t!==void 0&&s!=null&&d(t,["instances[0]","video"],Kx(s)),n}function oE(e,t){const n={},o=c(e,["prompt"]);t!==void 0&&o!=null&&d(t,["instances[0]","prompt"],o);const l=c(e,["image"]);t!==void 0&&l!=null&&d(t,["instances[0]","image"],Pn(l));const s=c(e,["video"]);return t!==void 0&&s!=null&&d(t,["instances[0]","video"],Zx(s)),n}function lE(e){const t={},n=c(e,["_self"]);n!=null&&d(t,["image"],hE(n));const o=c(e,["raiFilteredReason"]);o!=null&&d(t,["raiFilteredReason"],o);const l=c(e,["_self"]);return l!=null&&d(t,["safetyAttributes"],Yx(l)),t}function Er(e){const t={},n=c(e,["_self"]);n!=null&&d(t,["image"],Fx(n));const o=c(e,["raiFilteredReason"]);o!=null&&d(t,["raiFilteredReason"],o);const l=c(e,["_self"]);l!=null&&d(t,["safetyAttributes"],Jx(l));const s=c(e,["prompt"]);return s!=null&&d(t,["enhancedPrompt"],s),t}function sE(e){const t={},n=c(e,["_self"]);n!=null&&d(t,["mask"],Fx(n));const o=c(e,["labels"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(s=>s)),d(t,["labels"],l)}return t}function iE(e){const t={},n=c(e,["video"]);return n!=null&&d(t,["video"],OE(n)),t}function aE(e){const t={},n=c(e,["_self"]);return n!=null&&d(t,["video"],FE(n)),t}function rE(e){const t={},n=c(e,["modelSelectionConfig"]);n!=null&&d(t,["modelConfig"],n);const o=c(e,["audioTimestamp"]);o!=null&&d(t,["audioTimestamp"],o);const l=c(e,["candidateCount"]);l!=null&&d(t,["candidateCount"],l);const s=c(e,["enableAffectiveDialog"]);s!=null&&d(t,["enableAffectiveDialog"],s);const i=c(e,["frequencyPenalty"]);i!=null&&d(t,["frequencyPenalty"],i);const r=c(e,["logprobs"]);r!=null&&d(t,["logprobs"],r);const u=c(e,["maxOutputTokens"]);u!=null&&d(t,["maxOutputTokens"],u);const f=c(e,["mediaResolution"]);f!=null&&d(t,["mediaResolution"],f);const h=c(e,["presencePenalty"]);h!=null&&d(t,["presencePenalty"],h);const p=c(e,["responseJsonSchema"]);p!=null&&d(t,["responseJsonSchema"],p);const m=c(e,["responseLogprobs"]);m!=null&&d(t,["responseLogprobs"],m);const g=c(e,["responseMimeType"]);g!=null&&d(t,["responseMimeType"],g);const E=c(e,["responseModalities"]);E!=null&&d(t,["responseModalities"],E);const T=c(e,["responseSchema"]);T!=null&&d(t,["responseSchema"],T);const M=c(e,["routingConfig"]);M!=null&&d(t,["routingConfig"],M);const y=c(e,["seed"]);y!=null&&d(t,["seed"],y);const x=c(e,["speechConfig"]);x!=null&&d(t,["speechConfig"],Xx(x));const v=c(e,["stopSequences"]);v!=null&&d(t,["stopSequences"],v);const S=c(e,["temperature"]);S!=null&&d(t,["temperature"],S);const N=c(e,["thinkingConfig"]);N!=null&&d(t,["thinkingConfig"],N);const L=c(e,["topK"]);L!=null&&d(t,["topK"],L);const A=c(e,["topP"]);if(A!=null&&d(t,["topP"],A),c(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function cE(e,t){const n={},o=c(t,["model"]);return o!=null&&d(n,["_url","name"],$e(e,o)),n}function uE(e,t){const n={},o=c(t,["model"]);return o!=null&&d(n,["_url","name"],$e(e,o)),n}function dE(e){const t={};if(c(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function fE(e){const t={},n=c(e,["timeRangeFilter"]);if(n!=null&&d(t,["timeRangeFilter"],n),c(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function hE(e){const t={},n=c(e,["bytesBase64Encoded"]);n!=null&&d(t,["imageBytes"],ol(n));const o=c(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function Fx(e){const t={},n=c(e,["gcsUri"]);n!=null&&d(t,["gcsUri"],n);const o=c(e,["bytesBase64Encoded"]);o!=null&&d(t,["imageBytes"],ol(o));const l=c(e,["mimeType"]);return l!=null&&d(t,["mimeType"],l),t}function Tr(e){const t={};if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=c(e,["imageBytes"]);n!=null&&d(t,["bytesBase64Encoded"],ol(n));const o=c(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function Pn(e){const t={},n=c(e,["gcsUri"]);n!=null&&d(t,["gcsUri"],n);const o=c(e,["imageBytes"]);o!=null&&d(t,["bytesBase64Encoded"],ol(o));const l=c(e,["mimeType"]);return l!=null&&d(t,["mimeType"],l),t}function pE(e,t,n){const o={},l=c(t,["pageSize"]);n!==void 0&&l!=null&&d(n,["_query","pageSize"],l);const s=c(t,["pageToken"]);n!==void 0&&s!=null&&d(n,["_query","pageToken"],s);const i=c(t,["filter"]);n!==void 0&&i!=null&&d(n,["_query","filter"],i);const r=c(t,["queryBase"]);return n!==void 0&&r!=null&&d(n,["_url","models_url"],zx(e,r)),o}function mE(e,t,n){const o={},l=c(t,["pageSize"]);n!==void 0&&l!=null&&d(n,["_query","pageSize"],l);const s=c(t,["pageToken"]);n!==void 0&&s!=null&&d(n,["_query","pageToken"],s);const i=c(t,["filter"]);n!==void 0&&i!=null&&d(n,["_query","filter"],i);const r=c(t,["queryBase"]);return n!==void 0&&r!=null&&d(n,["_url","models_url"],zx(e,r)),o}function gE(e,t){const n={},o=c(t,["config"]);return o!=null&&pE(e,o,n),n}function yE(e,t){const n={},o=c(t,["config"]);return o!=null&&mE(e,o,n),n}function xE(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=c(e,["nextPageToken"]);o!=null&&d(t,["nextPageToken"],o);const l=c(e,["_self"]);if(l!=null){let s=Px(l);Array.isArray(s)&&(s=s.map(i=>Bu(i))),d(t,["models"],s)}return t}function vE(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=c(e,["nextPageToken"]);o!=null&&d(t,["nextPageToken"],o);const l=c(e,["_self"]);if(l!=null){let s=Px(l);Array.isArray(s)&&(s=s.map(i=>qu(i))),d(t,["models"],s)}return t}function bE(e){const t={},n=c(e,["maskMode"]);n!=null&&d(t,["maskMode"],n);const o=c(e,["segmentationClasses"]);o!=null&&d(t,["maskClasses"],o);const l=c(e,["maskDilation"]);return l!=null&&d(t,["dilation"],l),t}function Bu(e){const t={},n=c(e,["name"]);n!=null&&d(t,["name"],n);const o=c(e,["displayName"]);o!=null&&d(t,["displayName"],o);const l=c(e,["description"]);l!=null&&d(t,["description"],l);const s=c(e,["version"]);s!=null&&d(t,["version"],s);const i=c(e,["_self"]);i!=null&&d(t,["tunedModelInfo"],jE(i));const r=c(e,["inputTokenLimit"]);r!=null&&d(t,["inputTokenLimit"],r);const u=c(e,["outputTokenLimit"]);u!=null&&d(t,["outputTokenLimit"],u);const f=c(e,["supportedGenerationMethods"]);return f!=null&&d(t,["supportedActions"],f),t}function qu(e){const t={},n=c(e,["name"]);n!=null&&d(t,["name"],n);const o=c(e,["displayName"]);o!=null&&d(t,["displayName"],o);const l=c(e,["description"]);l!=null&&d(t,["description"],l);const s=c(e,["versionId"]);s!=null&&d(t,["version"],s);const i=c(e,["deployedModels"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(m=>zS(m))),d(t,["endpoints"],p)}const r=c(e,["labels"]);r!=null&&d(t,["labels"],r);const u=c(e,["_self"]);u!=null&&d(t,["tunedModelInfo"],UE(u));const f=c(e,["defaultCheckpointId"]);f!=null&&d(t,["defaultCheckpointId"],f);const h=c(e,["checkpoints"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(m=>m)),d(t,["checkpoints"],p)}return t}function CE(e){const t={},n=c(e,["videoMetadata"]);n!=null&&d(t,["videoMetadata"],n);const o=c(e,["thought"]);o!=null&&d(t,["thought"],o);const l=c(e,["inlineData"]);l!=null&&d(t,["inlineData"],uS(l));const s=c(e,["fileData"]);s!=null&&d(t,["fileData"],PS(s));const i=c(e,["thoughtSignature"]);i!=null&&d(t,["thoughtSignature"],i);const r=c(e,["functionCall"]);r!=null&&d(t,["functionCall"],r);const u=c(e,["codeExecutionResult"]);u!=null&&d(t,["codeExecutionResult"],u);const f=c(e,["executableCode"]);f!=null&&d(t,["executableCode"],f);const h=c(e,["functionResponse"]);h!=null&&d(t,["functionResponse"],h);const p=c(e,["text"]);return p!=null&&d(t,["text"],p),t}function SE(e){const t={},n=c(e,["productImage"]);return n!=null&&d(t,["image"],Pn(n)),t}function EE(e,t){const n={},o=c(e,["numberOfImages"]);t!==void 0&&o!=null&&d(t,["parameters","sampleCount"],o);const l=c(e,["baseSteps"]);t!==void 0&&l!=null&&d(t,["parameters","editConfig","baseSteps"],l);const s=c(e,["outputGcsUri"]);t!==void 0&&s!=null&&d(t,["parameters","storageUri"],s);const i=c(e,["seed"]);t!==void 0&&i!=null&&d(t,["parameters","seed"],i);const r=c(e,["safetyFilterLevel"]);t!==void 0&&r!=null&&d(t,["parameters","safetySetting"],r);const u=c(e,["personGeneration"]);t!==void 0&&u!=null&&d(t,["parameters","personGeneration"],u);const f=c(e,["addWatermark"]);t!==void 0&&f!=null&&d(t,["parameters","addWatermark"],f);const h=c(e,["outputMimeType"]);t!==void 0&&h!=null&&d(t,["parameters","outputOptions","mimeType"],h);const p=c(e,["outputCompressionQuality"]);t!==void 0&&p!=null&&d(t,["parameters","outputOptions","compressionQuality"],p);const m=c(e,["enhancePrompt"]);t!==void 0&&m!=null&&d(t,["parameters","enhancePrompt"],m);const g=c(e,["labels"]);return t!==void 0&&g!=null&&d(t,["labels"],g),n}function TE(e,t){const n={},o=c(t,["model"]);o!=null&&d(n,["_url","model"],$e(e,o));const l=c(t,["source"]);l!=null&&NE(l,n);const s=c(t,["config"]);return s!=null&&EE(s,n),n}function wE(e){const t={},n=c(e,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>Er(l))),d(t,["generatedImages"],o)}return t}function NE(e,t){const n={},o=c(e,["prompt"]);t!==void 0&&o!=null&&d(t,["instances[0]","prompt"],o);const l=c(e,["personImage"]);t!==void 0&&l!=null&&d(t,["instances[0]","personImage","image"],Pn(l));const s=c(e,["productImages"]);if(t!==void 0&&s!=null){let i=s;Array.isArray(i)&&(i=i.map(r=>SE(r))),d(t,["instances[0]","productImages"],i)}return n}function AE(e){const t={},n=c(e,["referenceImage"]);n!=null&&d(t,["referenceImage"],Pn(n));const o=c(e,["referenceId"]);o!=null&&d(t,["referenceId"],o);const l=c(e,["referenceType"]);l!=null&&d(t,["referenceType"],l);const s=c(e,["maskImageConfig"]);s!=null&&d(t,["maskImageConfig"],bE(s));const i=c(e,["controlImageConfig"]);i!=null&&d(t,["controlImageConfig"],yS(i));const r=c(e,["styleImageConfig"]);r!=null&&d(t,["styleImageConfig"],r);const u=c(e,["subjectImageConfig"]);return u!=null&&d(t,["subjectImageConfig"],u),t}function Yx(e){const t={},n=c(e,["safetyAttributes","categories"]);n!=null&&d(t,["categories"],n);const o=c(e,["safetyAttributes","scores"]);o!=null&&d(t,["scores"],o);const l=c(e,["contentType"]);return l!=null&&d(t,["contentType"],l),t}function Jx(e){const t={},n=c(e,["safetyAttributes","categories"]);n!=null&&d(t,["categories"],n);const o=c(e,["safetyAttributes","scores"]);o!=null&&d(t,["scores"],o);const l=c(e,["contentType"]);return l!=null&&d(t,["contentType"],l),t}function _E(e){const t={};if(c(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=c(e,["category"]);n!=null&&d(t,["category"],n);const o=c(e,["threshold"]);return o!=null&&d(t,["threshold"],o),t}function ME(e){const t={},n=c(e,["image"]);return n!=null&&d(t,["image"],Pn(n)),t}function RE(e,t){const n={},o=c(e,["mode"]);t!==void 0&&o!=null&&d(t,["parameters","mode"],o);const l=c(e,["maxPredictions"]);t!==void 0&&l!=null&&d(t,["parameters","maxPredictions"],l);const s=c(e,["confidenceThreshold"]);t!==void 0&&s!=null&&d(t,["parameters","confidenceThreshold"],s);const i=c(e,["maskDilation"]);t!==void 0&&i!=null&&d(t,["parameters","maskDilation"],i);const r=c(e,["binaryColorThreshold"]);t!==void 0&&r!=null&&d(t,["parameters","binaryColorThreshold"],r);const u=c(e,["labels"]);return t!==void 0&&u!=null&&d(t,["labels"],u),n}function IE(e,t){const n={},o=c(t,["model"]);o!=null&&d(n,["_url","model"],$e(e,o));const l=c(t,["source"]);l!=null&&DE(l,n);const s=c(t,["config"]);return s!=null&&RE(s,n),n}function kE(e){const t={},n=c(e,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>sE(l))),d(t,["generatedMasks"],o)}return t}function DE(e,t){const n={},o=c(e,["prompt"]);t!==void 0&&o!=null&&d(t,["instances[0]","prompt"],o);const l=c(e,["image"]);t!==void 0&&l!=null&&d(t,["instances[0]","image"],Pn(l));const s=c(e,["scribbleImage"]);return t!==void 0&&s!=null&&d(t,["instances[0]","scribble"],ME(s)),n}function Xx(e){const t={},n=c(e,["voiceConfig"]);if(n!=null&&d(t,["voiceConfig"],n),c(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=c(e,["languageCode"]);return o!=null&&d(t,["languageCode"],o),t}function LE(e){const t={},n=c(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>h)),d(t,["functionDeclarations"],f)}if(c(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=c(e,["googleSearch"]);o!=null&&d(t,["googleSearch"],fE(o));const l=c(e,["googleSearchRetrieval"]);if(l!=null&&d(t,["googleSearchRetrieval"],l),c(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=c(e,["googleMaps"]);s!=null&&d(t,["googleMaps"],dE(s));const i=c(e,["urlContext"]);i!=null&&d(t,["urlContext"],i);const r=c(e,["computerUse"]);r!=null&&d(t,["computerUse"],r);const u=c(e,["codeExecution"]);return u!=null&&d(t,["codeExecution"],u),t}function $x(e){const t={},n=c(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>BS(m))),d(t,["functionDeclarations"],p)}const o=c(e,["retrieval"]);o!=null&&d(t,["retrieval"],o);const l=c(e,["googleSearch"]);l!=null&&d(t,["googleSearch"],l);const s=c(e,["googleSearchRetrieval"]);s!=null&&d(t,["googleSearchRetrieval"],s);const i=c(e,["enterpriseWebSearch"]);i!=null&&d(t,["enterpriseWebSearch"],i);const r=c(e,["googleMaps"]);r!=null&&d(t,["googleMaps"],r);const u=c(e,["urlContext"]);u!=null&&d(t,["urlContext"],u);const f=c(e,["computerUse"]);f!=null&&d(t,["computerUse"],f);const h=c(e,["codeExecution"]);return h!=null&&d(t,["codeExecution"],h),t}function jE(e){const t={},n=c(e,["baseModel"]);n!=null&&d(t,["baseModel"],n);const o=c(e,["createTime"]);o!=null&&d(t,["createTime"],o);const l=c(e,["updateTime"]);return l!=null&&d(t,["updateTime"],l),t}function UE(e){const t={},n=c(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&d(t,["baseModel"],n);const o=c(e,["createTime"]);o!=null&&d(t,["createTime"],o);const l=c(e,["updateTime"]);return l!=null&&d(t,["updateTime"],l),t}function zE(e,t){const n={},o=c(e,["displayName"]);t!==void 0&&o!=null&&d(t,["displayName"],o);const l=c(e,["description"]);t!==void 0&&l!=null&&d(t,["description"],l);const s=c(e,["defaultCheckpointId"]);return t!==void 0&&s!=null&&d(t,["defaultCheckpointId"],s),n}function PE(e,t){const n={},o=c(e,["displayName"]);t!==void 0&&o!=null&&d(t,["displayName"],o);const l=c(e,["description"]);t!==void 0&&l!=null&&d(t,["description"],l);const s=c(e,["defaultCheckpointId"]);return t!==void 0&&s!=null&&d(t,["defaultCheckpointId"],s),n}function BE(e,t){const n={},o=c(t,["model"]);o!=null&&d(n,["_url","name"],$e(e,o));const l=c(t,["config"]);return l!=null&&zE(l,n),n}function qE(e,t){const n={},o=c(t,["model"]);o!=null&&d(n,["_url","model"],$e(e,o));const l=c(t,["config"]);return l!=null&&PE(l,n),n}function GE(e,t){const n={},o=c(e,["outputGcsUri"]);t!==void 0&&o!=null&&d(t,["parameters","storageUri"],o);const l=c(e,["includeRaiReason"]);t!==void 0&&l!=null&&d(t,["parameters","includeRaiReason"],l);const s=c(e,["outputMimeType"]);t!==void 0&&s!=null&&d(t,["parameters","outputOptions","mimeType"],s);const i=c(e,["outputCompressionQuality"]);t!==void 0&&i!=null&&d(t,["parameters","outputOptions","compressionQuality"],i);const r=c(e,["enhanceInputImage"]);t!==void 0&&r!=null&&d(t,["parameters","upscaleConfig","enhanceInputImage"],r);const u=c(e,["imagePreservationFactor"]);t!==void 0&&u!=null&&d(t,["parameters","upscaleConfig","imagePreservationFactor"],u);const f=c(e,["labels"]);t!==void 0&&f!=null&&d(t,["labels"],f);const h=c(e,["numberOfImages"]);t!==void 0&&h!=null&&d(t,["parameters","sampleCount"],h);const p=c(e,["mode"]);return t!==void 0&&p!=null&&d(t,["parameters","mode"],p),n}function VE(e,t){const n={},o=c(t,["model"]);o!=null&&d(n,["_url","model"],$e(e,o));const l=c(t,["image"]);l!=null&&d(n,["instances[0]","image"],Pn(l));const s=c(t,["upscaleFactor"]);s!=null&&d(n,["parameters","upscaleConfig","upscaleFactor"],s);const i=c(t,["config"]);return i!=null&&GE(i,n),n}function HE(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=c(e,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(s=>Er(s))),d(t,["generatedImages"],l)}return t}function OE(e){const t={},n=c(e,["uri"]);n!=null&&d(t,["uri"],n);const o=c(e,["encodedVideo"]);o!=null&&d(t,["videoBytes"],ol(o));const l=c(e,["encoding"]);return l!=null&&d(t,["mimeType"],l),t}function FE(e){const t={},n=c(e,["gcsUri"]);n!=null&&d(t,["uri"],n);const o=c(e,["bytesBase64Encoded"]);o!=null&&d(t,["videoBytes"],ol(o));const l=c(e,["mimeType"]);return l!=null&&d(t,["mimeType"],l),t}function YE(e){const t={},n=c(e,["image"]);n!=null&&d(t,["_self"],Pn(n));const o=c(e,["maskMode"]);return o!=null&&d(t,["maskMode"],o),t}function JE(e){const t={},n=c(e,["image"]);n!=null&&d(t,["image"],Tr(n));const o=c(e,["referenceType"]);return o!=null&&d(t,["referenceType"],o),t}function XE(e){const t={},n=c(e,["image"]);n!=null&&d(t,["image"],Pn(n));const o=c(e,["referenceType"]);return o!=null&&d(t,["referenceType"],o),t}function Kx(e){const t={},n=c(e,["uri"]);n!=null&&d(t,["uri"],n);const o=c(e,["videoBytes"]);o!=null&&d(t,["encodedVideo"],ol(o));const l=c(e,["mimeType"]);return l!=null&&d(t,["encoding"],l),t}function Zx(e){const t={},n=c(e,["uri"]);n!=null&&d(t,["gcsUri"],n);const o=c(e,["videoBytes"]);o!=null&&d(t,["bytesBase64Encoded"],ol(o));const l=c(e,["mimeType"]);return l!=null&&d(t,["mimeType"],l),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $E="Content-Type",KE="X-Server-Timeout",ZE="User-Agent",Gu="x-goog-api-client",QE="1.26.0",WE=`google-genai-sdk/${QE}`,eT="v1beta1",tT="v1beta",Vp=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class nT{constructor(t){var n,o;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const l={};this.clientOptions.vertexai?(l.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:eT,l.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(l.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:tT,l.baseUrl="https://generativelanguage.googleapis.com/"),l.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=l,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(l,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&o.push(t.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,o){const l=[this.getRequestUrlInternal(n)];return o&&l.push(this.getBaseResourcePath()),t!==""&&l.push(t),new URL(`${l.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const o=this.shouldPrependVertexProjectPath(t),l=this.constructUrl(t.path,n,o);if(t.queryParams)for(const[i,r]of Object.entries(t.queryParams))l.searchParams.append(i,String(r));let s={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=t.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,t.abortSignal),this.unaryApiCall(l,s,t.httpMethod)}patchHttpOptions(t,n){const o=JSON.parse(JSON.stringify(t));for(const[l,s]of Object.entries(n))typeof s=="object"?o[l]=Object.assign(Object.assign({},o[l]),s):s!==void 0&&(o[l]=s);return o}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const o=this.shouldPrependVertexProjectPath(t),l=this.constructUrl(t.path,n,o);(!l.searchParams.has("alt")||l.searchParams.get("alt")!=="sse")&&l.searchParams.set("alt","sse");let s={};return s.body=t.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,t.abortSignal),this.streamApiCall(l,s,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,o){if(n&&n.timeout||o){const l=new AbortController,s=l.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const i=setTimeout(()=>l.abort(),n.timeout);i&&typeof i.unref=="function"&&i.unref()}o&&o.addEventListener("abort",()=>{l.abort()}),t.signal=s}return n&&n.extraBody!==null&&oT(t,n.extraBody),t.headers=await this.getHeadersInternal(n),t}async unaryApiCall(t,n,o){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:o})).then(async l=>(await Hp(l),new Uu(l))).catch(l=>{throw l instanceof Error?l:new Error(JSON.stringify(l))})}async streamApiCall(t,n,o){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:o})).then(async l=>(await Hp(l),this.processStreamResponse(l))).catch(l=>{throw l instanceof Error?l:new Error(JSON.stringify(l))})}processStreamResponse(t){var n;return ls(this,arguments,function*(){const l=(n=t==null?void 0:t.body)===null||n===void 0?void 0:n.getReader(),s=new TextDecoder("utf-8");if(!l)throw new Error("Response body is empty");try{let i="";for(;;){const{done:r,value:u}=yield pt(l.read());if(r){if(i.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=s.decode(u,{stream:!0});try{const p=JSON.parse(f);if("error"in p){const m=JSON.parse(JSON.stringify(p.error)),g=m.status,E=m.code,T=`got status: ${g}. ${JSON.stringify(p)}`;if(E>=400&&E<600)throw new Cr({message:T,status:E})}}catch(p){if(p.name==="ApiError")throw p}i+=f;let h=i.match(Vp);for(;h;){const p=h[1];try{const m=new Response(p,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield pt(new Uu(m)),i=i.slice(h[0].length),h=i.match(Vp)}catch(m){throw new Error(`exception parsing stream chunk ${p}. ${m}`)}}}}finally{l.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const t={},n=WE+" "+this.clientOptions.userAgentExtra;return t[ZE]=n,t[Gu]=n,t[$E]="application/json",t}async getHeadersInternal(t){const n=new Headers;if(t&&t.headers){for(const[o,l]of Object.entries(t.headers))n.append(o,l);t.timeout&&t.timeout>0&&n.append(KE,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(t,n){var o;const l={};n!=null&&(l.mimeType=n.mimeType,l.name=n.name,l.displayName=n.displayName),l.name&&!l.name.startsWith("files/")&&(l.name=`files/${l.name}`);const s=this.clientOptions.uploader,i=await s.stat(t);l.sizeBytes=String(i.size);const r=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:i.type;if(r===void 0||r==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");l.mimeType=r;const u=await this.fetchUploadUrl(l,n);return s.upload(t,u,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n){var o;let l={};n!=null&&n.httpOptions?l=n.httpOptions:l={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${t.mimeType}`}};const s={file:t},i=await this.request({path:ce("upload/v1beta/files",s._url),body:JSON.stringify(s),httpMethod:"POST",httpOptions:l});if(!i||!(i!=null&&i.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const r=(o=i==null?void 0:i.headers)===null||o===void 0?void 0:o["x-goog-upload-url"];if(r===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return r}}async function Hp(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let o;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?o=await e.json():o={error:{message:await e.text(),code:e.status,status:e.statusText}};const l=JSON.stringify(o);throw n>=400&&n<600?new Cr({message:l,status:n}):new Error(l)}}function oT(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const s=JSON.parse(e.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(s,i){const r=Object.assign({},s);for(const u in i)if(Object.prototype.hasOwnProperty.call(i,u)){const f=i[u],h=r[u];f&&typeof f=="object"&&!Array.isArray(f)&&h&&typeof h=="object"&&!Array.isArray(h)?r[u]=o(h,f):(h&&f&&typeof h!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${u}". Original type: ${typeof h}, New type: ${typeof f}. Overwriting.`),r[u]=f)}return r}const l=o(n,t);e.body=JSON.stringify(l)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lT="mcp_used/unknown";let sT=!1;function Qx(e){for(const t of e)if(iT(t)||typeof t=="object"&&"inputSchema"in t)return!0;return sT}function Wx(e){var t;const n=(t=e[Gu])!==null&&t!==void 0?t:"";e[Gu]=(n+` ${lT}`).trimStart()}function iT(e){return e!==null&&typeof e=="object"&&e instanceof Zd}function aT(e,t=100){return ls(this,arguments,function*(){let o,l=0;for(;l<t;){const s=yield pt(e.listTools({cursor:o}));for(const i of s.tools)yield yield pt(i),l++;if(!s.nextCursor)break;o=s.nextCursor}})}class Zd{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new Zd(t,n)}async initialize(){var t,n,o,l;if(this.mcpTools.length>0)return;const s={},i=[];for(const h of this.mcpClients)try{for(var r=!0,u=(n=void 0,ii(aT(h))),f;f=await u.next(),t=f.done,!t;r=!0){l=f.value,r=!1;const p=l;i.push(p);const m=p.name;if(s[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);s[m]=h}}catch(p){n={error:p}}finally{try{!r&&!t&&(o=u.return)&&await o.call(u)}finally{if(n)throw n.error}}this.mcpTools=i,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),fC(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const o of t)if(o.name in this.functionNameToMcpClient){const l=this.functionNameToMcpClient[o.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const i=await l.callTool({name:o.name,arguments:o.args},void 0,s);n.push({functionResponse:{name:o.name,response:i.isError?{error:i}:i}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function rT(e,t,n){const o=new lC;let l;n.data instanceof Blob?l=JSON.parse(await n.data.text()):l=JSON.parse(n.data),Object.assign(o,l),t(o)}class cT{constructor(t,n,o){this.apiClient=t,this.auth=n,this.webSocketFactory=o}async connect(t){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const l=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),i=fT(this.apiClient.getDefaultHeaders()),r=this.apiClient.getApiKey(),u=`${l}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${r}`;let f=()=>{};const h=new Promise(v=>{f=v}),p=t.callbacks,m=function(){f({})},g=this.apiClient,E={onopen:m,onmessage:v=>{rT(g,p.onmessage,v)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(v){},onclose:(o=p==null?void 0:p.onclose)!==null&&o!==void 0?o:function(v){}},T=this.webSocketFactory.create(u,dT(i),E);T.connect(),await h;const x={setup:{model:$e(this.apiClient,t.model)}};return T.send(JSON.stringify(x)),new uT(T,this.apiClient)}}class uT{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=tS(t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=eS(t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const n={playbackControl:t};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl($l.PLAY)}pause(){this.sendPlaybackControl($l.PAUSE)}stop(){this.sendPlaybackControl($l.STOP)}resetContext(){this.sendPlaybackControl($l.RESET_CONTEXT)}close(){this.conn.close()}}function dT(e){const t={};return e.forEach((n,o)=>{t[o]=n}),t}function fT(e){const t=new Headers;for(const[n,o]of Object.entries(e))t.append(n,o);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hT="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function pT(e,t,n){const o=new oC;let l;n.data instanceof Blob?l=await n.data.text():n.data instanceof ArrayBuffer?l=new TextDecoder().decode(n.data):l=n.data;const s=JSON.parse(l);if(e.isVertexAI()){const i=lS(s);Object.assign(o,i)}else Object.assign(o,s);t(o)}class mT{constructor(t,n,o){this.apiClient=t,this.auth=n,this.webSocketFactory=o,this.music=new cT(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,o,l,s,i,r;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const u=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let h;const p=this.apiClient.getHeaders();t.config&&t.config.tools&&Qx(t.config.tools)&&Wx(p);const m=vT(p);if(this.apiClient.isVertexAI())h=`${u}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m);else{const I=this.apiClient.getApiKey();let w="BidiGenerateContent",j="key";I!=null&&I.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),w="BidiGenerateContentConstrained",j="access_token"),h=`${u}/ws/google.ai.generativelanguage.${f}.GenerativeService.${w}?${j}=${I}`}let g=()=>{};const E=new Promise(I=>{g=I}),T=t.callbacks,M=function(){var I;(I=T==null?void 0:T.onopen)===null||I===void 0||I.call(T),g({})},y=this.apiClient,x={onopen:M,onmessage:I=>{pT(y,T.onmessage,I)},onerror:(n=T==null?void 0:T.onerror)!==null&&n!==void 0?n:function(I){},onclose:(o=T==null?void 0:T.onclose)!==null&&o!==void 0?o:function(I){}},v=this.webSocketFactory.create(h,xT(m),x);v.connect(),await E;let S=$e(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&S.startsWith("publishers/")){const I=this.apiClient.getProject(),w=this.apiClient.getLocation();S=`projects/${I}/locations/${w}/`+S}let N={};this.apiClient.isVertexAI()&&((l=t.config)===null||l===void 0?void 0:l.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[ys.AUDIO]}:t.config.responseModalities=[ys.AUDIO]),!((s=t.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const L=(r=(i=t.config)===null||i===void 0?void 0:i.tools)!==null&&r!==void 0?r:[],A=[];for(const I of L)if(this.isCallableTool(I)){const w=I;A.push(await w.tool())}else A.push(I);A.length>0&&(t.config.tools=A);const b={model:S,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?N=W2(this.apiClient,b):N=Q2(this.apiClient,b),delete N.config,v.send(JSON.stringify(N)),new yT(v,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const gT={turnComplete:!0};class yT{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=In(n.turns),t.isVertexAI()||(o=o.map(l=>Sr(l)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const s of o){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!t.isVertexAI()&&!("id"in s))throw new Error(hT)}return{toolResponse:{functionResponses:o}}}sendClientContent(t){t=Object.assign(Object.assign({},gT),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:oS(t)}:n={realtimeInput:nS(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function xT(e){const t={};return e.forEach((n,o)=>{t[o]=n}),t}function vT(e){const t=new Headers;for(const[n,o]of Object.entries(e))t.append(n,o);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Op=10;function Fp(e){var t,n,o;if(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let l=!1;for(const i of(n=e==null?void 0:e.tools)!==null&&n!==void 0?n:[])if(ss(i)){l=!0;break}if(!l)return!0;const s=(o=e==null?void 0:e.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function ss(e){return"callTool"in e&&typeof e.callTool=="function"}function bT(e){var t,n,o;return(o=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(l=>ss(l)))!==null&&o!==void 0?o:!1}function CT(e){var t,n,o;return(o=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(l=>!ss(l)))!==null&&o!==void 0?o:!1}function Yp(e){var t;return!(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ST extends _l{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var o,l,s,i,r;const u=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!bT(n)||Fp(n.config))return await this.generateContentInternal(u);if(CT(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let f,h;const p=In(u.contents),m=(s=(l=(o=u.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||l===void 0?void 0:l.maximumRemoteCalls)!==null&&s!==void 0?s:Op;let g=0;for(;g<m&&(f=await this.generateContentInternal(u),!(!f.functionCalls||f.functionCalls.length===0));){const E=f.candidates[0].content,T=[];for(const M of(r=(i=n.config)===null||i===void 0?void 0:i.tools)!==null&&r!==void 0?r:[])if(ss(M)){const x=await M.callTool(f.functionCalls);T.push(...x)}g++,h={role:"user",parts:T},u.contents=In(u.contents),u.contents.push(E),u.contents.push(h),Yp(u.config)&&(p.push(E),p.push(h))}return Yp(u.config)&&(f.automaticFunctionCallingHistory=p),f},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),Fp(n.config)){const o=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(o)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var l;let s;const i=[];if(o!=null&&o.generatedImages)for(const u of o.generatedImages)u&&(u!=null&&u.safetyAttributes)&&((l=u==null?void 0:u.safetyAttributes)===null||l===void 0?void 0:l.contentType)==="Positive Prompt"?s=u==null?void 0:u.safetyAttributes:i.push(u);let r;return s?r={generatedImages:i,positivePromptSafetyAttributes:s,sdkHttpResponse:o.sdkHttpResponse}:r={generatedImages:i,sdkHttpResponse:o.sdkHttpResponse},r}),this.list=async n=>{var o;const i={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!i.config.queryBase){if(!((o=i.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");i.config.filter="labels.tune-type:*"}return new Li(Cl.PAGED_ITEM_MODELS,r=>this.listInternal(r),await this.listInternal(i),i)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(l=>l.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const l={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(l)},this.generateVideos=async n=>{var o,l,s,i,r,u;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((l=n.video)===null||l===void 0)&&l.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((i=(s=n.source)===null||s===void 0?void 0:s.video)===null||i===void 0)&&i.uri&&(!((u=(r=n.source)===null||r===void 0?void 0:r.video)===null||u===void 0)&&u.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,o,l;const s=(n=t.config)===null||n===void 0?void 0:n.tools;if(!s)return t;const i=await Promise.all(s.map(async u=>ss(u)?await u.tool():u)),r={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:i})};if(r.config.tools=i,t.config&&t.config.tools&&Qx(t.config.tools)){const u=(l=(o=t.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&l!==void 0?l:{};let f=Object.assign({},u);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),Wx(f),r.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:f})}return r}async initAfcToolsMap(t){var n,o,l;const s=new Map;for(const i of(o=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(ss(i)){const r=i,u=await r.tool();for(const f of(l=u.functionDeclarations)!==null&&l!==void 0?l:[]){if(!f.name)throw new Error("Function declaration name is required.");if(s.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);s.set(f.name,r)}}return s}async processAfcStream(t){var n,o,l;const s=(l=(o=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:Op;let i=!1,r=0;const u=await this.initAfcToolsMap(t);return function(f,h,p){var m,g;return ls(this,arguments,function*(){for(var E,T,M,y;r<s;){i&&(r++,i=!1);const N=yield pt(f.processParamsMaybeAddMcpUsage(p)),L=yield pt(f.generateContentStreamInternal(N)),A=[],b=[];try{for(var x=!0,v=(T=void 0,ii(L)),S;S=yield pt(v.next()),E=S.done,!E;x=!0){y=S.value,x=!1;const I=y;if(yield yield pt(I),I.candidates&&(!((m=I.candidates[0])===null||m===void 0)&&m.content)){b.push(I.candidates[0].content);for(const w of(g=I.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(r<s&&w.functionCall){if(!w.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(w.functionCall.name)){const j=yield pt(h.get(w.functionCall.name).callTool([w.functionCall]));A.push(...j)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${w.functionCall.name}`)}}}}catch(I){T={error:I}}finally{try{!x&&!E&&(M=v.return)&&(yield pt(M.call(v)))}finally{if(T)throw T.error}}if(A.length>0){i=!0;const I=new Bs;I.candidates=[{content:{role:"user",parts:A}}],yield yield pt(I);const w=[];w.push(...b),w.push({role:"user",parts:A});const j=In(p.contents).concat(w);p.contents=j}else break}})}(this,u,t)}async generateContentInternal(t){var n,o,l,s;let i,r="",u={};if(this.apiClient.isVertexAI()){const f=Bp(this.apiClient,t);return r=ce("{model}:generateContent",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),i.then(h=>{const p=Gp(h),m=new Bs;return Object.assign(m,p),m})}else{const f=Pp(this.apiClient,t);return r=ce("{model}:generateContent",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),i.then(h=>{const p=qp(h),m=new Bs;return Object.assign(m,p),m})}}async generateContentStreamInternal(t){var n,o,l,s;let i,r="",u={};if(this.apiClient.isVertexAI()){const f=Bp(this.apiClient,t);return r=ce("{model}:streamGenerateContent?alt=sse",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.requestStream({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}),i.then(function(p){return ls(this,arguments,function*(){var m,g,E,T;try{for(var M=!0,y=ii(p),x;x=yield pt(y.next()),m=x.done,!m;M=!0){T=x.value,M=!1;const v=T,S=Gp(yield pt(v.json()));S.sdkHttpResponse={headers:v.headers};const N=new Bs;Object.assign(N,S),yield yield pt(N)}}catch(v){g={error:v}}finally{try{!M&&!m&&(E=y.return)&&(yield pt(E.call(y)))}finally{if(g)throw g.error}}})})}else{const f=Pp(this.apiClient,t);return r=ce("{model}:streamGenerateContent?alt=sse",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.requestStream({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}),i.then(function(p){return ls(this,arguments,function*(){var m,g,E,T;try{for(var M=!0,y=ii(p),x;x=yield pt(y.next()),m=x.done,!m;M=!0){T=x.value,M=!1;const v=T,S=qp(yield pt(v.json()));S.sdkHttpResponse={headers:v.headers};const N=new Bs;Object.assign(N,S),yield yield pt(N)}}catch(v){g={error:v}}finally{try{!M&&!m&&(E=y.return)&&(yield pt(E.call(y)))}finally{if(g)throw g.error}}})})}}async embedContent(t){var n,o,l,s;let i,r="",u={};if(this.apiClient.isVertexAI()){const f=LS(this.apiClient,t);return r=ce("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),i.then(h=>{const p=US(h),m=new Sp;return Object.assign(m,p),m})}else{const f=DS(this.apiClient,t);return r=ce("{model}:batchEmbedContents",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),i.then(h=>{const p=jS(h),m=new Sp;return Object.assign(m,p),m})}}async generateImagesInternal(t){var n,o,l,s;let i,r="",u={};if(this.apiClient.isVertexAI()){const f=FS(this.apiClient,t);return r=ce("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),i.then(h=>{const p=JS(h),m=new Ep;return Object.assign(m,p),m})}else{const f=OS(this.apiClient,t);return r=ce("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),i.then(h=>{const p=YS(h),m=new Ep;return Object.assign(m,p),m})}}async editImageInternal(t){var n,o;let l,s="",i={};if(this.apiClient.isVertexAI()){const r=MS(this.apiClient,t);return s=ce("{model}:predict",r._url),i=r._query,delete r._url,delete r._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(r),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:u.headers},h})),l.then(u=>{const f=RS(u),h=new $1;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,o;let l,s="",i={};if(this.apiClient.isVertexAI()){const r=VE(this.apiClient,t);return s=ce("{model}:predict",r._url),i=r._query,delete r._url,delete r._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(r),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:u.headers},h})),l.then(u=>{const f=HE(u),h=new K1;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,o;let l,s="",i={};if(this.apiClient.isVertexAI()){const r=TE(this.apiClient,t);return s=ce("{model}:predict",r._url),i=r._query,delete r._url,delete r._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(r),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),l.then(u=>{const f=wE(u),h=new Z1;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,o;let l,s="",i={};if(this.apiClient.isVertexAI()){const r=IE(this.apiClient,t);return s=ce("{model}:predict",r._url),i=r._query,delete r._url,delete r._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(r),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),l.then(u=>{const f=kE(u),h=new Q1;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,o,l,s;let i,r="",u={};if(this.apiClient.isVertexAI()){const f=uE(this.apiClient,t);return r=ce("{name}",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),i.then(h=>qu(h))}else{const f=cE(this.apiClient,t);return r=ce("{name}",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),i.then(h=>Bu(h))}}async listInternal(t){var n,o,l,s;let i,r="",u={};if(this.apiClient.isVertexAI()){const f=yE(this.apiClient,t);return r=ce("{models_url}",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),i.then(h=>{const p=vE(h),m=new Tp;return Object.assign(m,p),m})}else{const f=gE(this.apiClient,t);return r=ce("{models_url}",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),i.then(h=>{const p=xE(h),m=new Tp;return Object.assign(m,p),m})}}async update(t){var n,o,l,s;let i,r="",u={};if(this.apiClient.isVertexAI()){const f=qE(this.apiClient,t);return r=ce("{model}",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),i.then(h=>qu(h))}else{const f=BE(this.apiClient,t);return r=ce("{name}",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),i.then(h=>Bu(h))}}async delete(t){var n,o,l,s;let i,r="",u={};if(this.apiClient.isVertexAI()){const f=wS(this.apiClient,t);return r=ce("{name}",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),i.then(h=>{const p=AS(h),m=new wp;return Object.assign(m,p),m})}else{const f=TS(this.apiClient,t);return r=ce("{name}",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),i.then(h=>{const p=NS(h),m=new wp;return Object.assign(m,p),m})}}async countTokens(t){var n,o,l,s;let i,r="",u={};if(this.apiClient.isVertexAI()){const f=CS(this.apiClient,t);return r=ce("{model}:countTokens",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),i.then(h=>{const p=ES(h),m=new Np;return Object.assign(m,p),m})}else{const f=bS(this.apiClient,t);return r=ce("{model}:countTokens",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),i.then(h=>{const p=SS(h),m=new Np;return Object.assign(m,p),m})}}async computeTokens(t){var n,o;let l,s="",i={};if(this.apiClient.isVertexAI()){const r=hS(this.apiClient,t);return s=ce("{model}:computeTokens",r._url),i=r._query,delete r._url,delete r._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(r),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:u.headers},h})),l.then(u=>{const f=pS(u),h=new W1;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,o,l,s;let i,r="",u={};if(this.apiClient.isVertexAI()){const f=WS(this.apiClient,t);return r=ce("{model}:predictLongRunning",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),i.then(h=>{const p=ZS(h),m=new Wa;return Object.assign(m,p),m})}else{const f=QS(this.apiClient,t);return r=ce("{model}:predictLongRunning",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),i.then(h=>{const p=KS(h),m=new Wa;return Object.assign(m,p),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ET extends _l{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,o=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const l=n.name.split("/operations/")[0];let s;o&&"httpOptions"in o&&(s=o.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:l,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:i,isVertexAI:!0})}else{const l=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:l,isVertexAI:!1})}}async get(t){const n=t.operation,o=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const l=n.name.split("/operations/")[0];let s;o&&"httpOptions"in o&&(s=o.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:l,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:i,isVertexAI:!0})}else{const l=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:l,isVertexAI:!1})}}async getVideosOperationInternal(t){var n,o,l,s;let i,r="",u={};if(this.apiClient.isVertexAI()){const f=Y1(t);return r=ce("{operationName}",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),i}else{const f=F1(t);return r=ce("{operationName}",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),i}}async fetchPredictVideosOperationInternal(t){var n,o;let l,s="",i={};if(this.apiClient.isVertexAI()){const r=P1(t);return s=ce("{resourceName}:fetchPredictOperation",r._url),i=r._query,delete r._url,delete r._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(r),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),l}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TT(e){const t={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(e,["data"]);n!=null&&d(t,["data"],n);const o=c(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function wT(e){const t={},n=c(e,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(s=>DT(s))),d(t,["parts"],l)}const o=c(e,["role"]);return o!=null&&d(t,["role"],o),t}function NT(e,t,n){const o={},l=c(t,["expireTime"]);n!==void 0&&l!=null&&d(n,["expireTime"],l);const s=c(t,["newSessionExpireTime"]);n!==void 0&&s!=null&&d(n,["newSessionExpireTime"],s);const i=c(t,["uses"]);n!==void 0&&i!=null&&d(n,["uses"],i);const r=c(t,["liveConnectConstraints"]);n!==void 0&&r!=null&&d(n,["bidiGenerateContentSetup"],kT(e,r));const u=c(t,["lockAdditionalFields"]);return n!==void 0&&u!=null&&d(n,["fieldMask"],u),o}function AT(e,t){const n={},o=c(t,["config"]);return o!=null&&d(n,["config"],NT(e,o,n)),n}function _T(e){const t={};if(c(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const o=c(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function MT(e){const t={};if(c(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function RT(e){const t={},n=c(e,["timeRangeFilter"]);if(n!=null&&d(t,["timeRangeFilter"],n),c(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function IT(e,t){const n={},o=c(e,["generationConfig"]);t!==void 0&&o!=null&&d(t,["setup","generationConfig"],o);const l=c(e,["responseModalities"]);t!==void 0&&l!=null&&d(t,["setup","generationConfig","responseModalities"],l);const s=c(e,["temperature"]);t!==void 0&&s!=null&&d(t,["setup","generationConfig","temperature"],s);const i=c(e,["topP"]);t!==void 0&&i!=null&&d(t,["setup","generationConfig","topP"],i);const r=c(e,["topK"]);t!==void 0&&r!=null&&d(t,["setup","generationConfig","topK"],r);const u=c(e,["maxOutputTokens"]);t!==void 0&&u!=null&&d(t,["setup","generationConfig","maxOutputTokens"],u);const f=c(e,["mediaResolution"]);t!==void 0&&f!=null&&d(t,["setup","generationConfig","mediaResolution"],f);const h=c(e,["seed"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","seed"],h);const p=c(e,["speechConfig"]);t!==void 0&&p!=null&&d(t,["setup","generationConfig","speechConfig"],Kd(p));const m=c(e,["thinkingConfig"]);t!==void 0&&m!=null&&d(t,["setup","generationConfig","thinkingConfig"],m);const g=c(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&d(t,["setup","generationConfig","enableAffectiveDialog"],g);const E=c(e,["systemInstruction"]);t!==void 0&&E!=null&&d(t,["setup","systemInstruction"],wT(Ft(E)));const T=c(e,["tools"]);if(t!==void 0&&T!=null){let L=_s(T);Array.isArray(L)&&(L=L.map(A=>jT(As(A)))),d(t,["setup","tools"],L)}const M=c(e,["sessionResumption"]);t!==void 0&&M!=null&&d(t,["setup","sessionResumption"],LT(M));const y=c(e,["inputAudioTranscription"]);t!==void 0&&y!=null&&d(t,["setup","inputAudioTranscription"],y);const x=c(e,["outputAudioTranscription"]);t!==void 0&&x!=null&&d(t,["setup","outputAudioTranscription"],x);const v=c(e,["realtimeInputConfig"]);t!==void 0&&v!=null&&d(t,["setup","realtimeInputConfig"],v);const S=c(e,["contextWindowCompression"]);t!==void 0&&S!=null&&d(t,["setup","contextWindowCompression"],S);const N=c(e,["proactivity"]);return t!==void 0&&N!=null&&d(t,["setup","proactivity"],N),n}function kT(e,t){const n={},o=c(t,["model"]);o!=null&&d(n,["setup","model"],$e(e,o));const l=c(t,["config"]);return l!=null&&d(n,["config"],IT(l,n)),n}function DT(e){const t={},n=c(e,["videoMetadata"]);n!=null&&d(t,["videoMetadata"],n);const o=c(e,["thought"]);o!=null&&d(t,["thought"],o);const l=c(e,["inlineData"]);l!=null&&d(t,["inlineData"],TT(l));const s=c(e,["fileData"]);s!=null&&d(t,["fileData"],_T(s));const i=c(e,["thoughtSignature"]);i!=null&&d(t,["thoughtSignature"],i);const r=c(e,["functionCall"]);r!=null&&d(t,["functionCall"],r);const u=c(e,["codeExecutionResult"]);u!=null&&d(t,["codeExecutionResult"],u);const f=c(e,["executableCode"]);f!=null&&d(t,["executableCode"],f);const h=c(e,["functionResponse"]);h!=null&&d(t,["functionResponse"],h);const p=c(e,["text"]);return p!=null&&d(t,["text"],p),t}function LT(e){const t={},n=c(e,["handle"]);if(n!=null&&d(t,["handle"],n),c(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function jT(e){const t={},n=c(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>h)),d(t,["functionDeclarations"],f)}if(c(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=c(e,["googleSearch"]);o!=null&&d(t,["googleSearch"],RT(o));const l=c(e,["googleSearchRetrieval"]);if(l!=null&&d(t,["googleSearchRetrieval"],l),c(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=c(e,["googleMaps"]);s!=null&&d(t,["googleMaps"],MT(s));const i=c(e,["urlContext"]);i!=null&&d(t,["urlContext"],i);const r=c(e,["computerUse"]);r!=null&&d(t,["computerUse"],r);const u=c(e,["codeExecution"]);return u!=null&&d(t,["codeExecution"],u),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UT(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const o=e[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const l=Object.keys(o).map(s=>`${n}.${s}`);t.push(...l)}else t.push(n)}return t.join(",")}function zT(e,t){let n=null;const o=e.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const s=o.setup;typeof s=="object"&&s!==null?(e.bidiGenerateContentSetup=s,n=s):delete e.bidiGenerateContentSetup}else o!==void 0&&delete e.bidiGenerateContentSetup;const l=e.fieldMask;if(n){const s=UT(n);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)s?e.fieldMask=s:delete e.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&l!==null&&Array.isArray(l)&&l.length>0){const i=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let r=[];l.length>0&&(r=l.map(f=>i.includes(f)?`generationConfig.${f}`:f));const u=[];s&&u.push(s),r.length>0&&u.push(...r),u.length>0?e.fieldMask=u.join(","):delete e.fieldMask}else delete e.fieldMask}else l!==null&&Array.isArray(l)&&l.length>0?e.fieldMask=l.join(","):delete e.fieldMask;return e}class PT extends _l{constructor(t){super(),this.apiClient=t}async create(t){var n,o;let l,s="",i={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const r=AT(this.apiClient,t);s=ce("auth_tokens",r._url),i=r._query,delete r.config,delete r._url,delete r._query;const u=zT(r,t.config);return l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BT(e){const t={},n=c(e,["name"]);return n!=null&&d(t,["_url","name"],n),t}function qT(e){const t={},n=c(e,["name"]);return n!=null&&d(t,["_url","name"],n),t}function GT(e,t){const n={};if(c(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=c(e,["tunedModelDisplayName"]);if(t!==void 0&&o!=null&&d(t,["displayName"],o),c(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=c(e,["epochCount"]);t!==void 0&&l!=null&&d(t,["tuningTask","hyperparameters","epochCount"],l);const s=c(e,["learningRateMultiplier"]);if(s!=null&&d(n,["tuningTask","hyperparameters","learningRateMultiplier"],s),c(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const i=c(e,["batchSize"]);t!==void 0&&i!=null&&d(t,["tuningTask","hyperparameters","batchSize"],i);const r=c(e,["learningRate"]);if(t!==void 0&&r!=null&&d(t,["tuningTask","hyperparameters","learningRate"],r),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return n}function VT(e,t){const n={},o=c(e,["validationDataset"]);t!==void 0&&o!=null&&d(t,["supervisedTuningSpec"],ow(o,n));const l=c(e,["tunedModelDisplayName"]);t!==void 0&&l!=null&&d(t,["tunedModelDisplayName"],l);const s=c(e,["description"]);t!==void 0&&s!=null&&d(t,["description"],s);const i=c(e,["epochCount"]);t!==void 0&&i!=null&&d(t,["supervisedTuningSpec","hyperParameters","epochCount"],i);const r=c(e,["learningRateMultiplier"]);t!==void 0&&r!=null&&d(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],r);const u=c(e,["exportLastCheckpointOnly"]);t!==void 0&&u!=null&&d(t,["supervisedTuningSpec","exportLastCheckpointOnly"],u);const f=c(e,["adapterSize"]);if(t!==void 0&&f!=null&&d(t,["supervisedTuningSpec","hyperParameters","adapterSize"],f),c(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const h=c(e,["labels"]);return t!==void 0&&h!=null&&d(t,["labels"],h),n}function HT(e){const t={},n=c(e,["baseModel"]);n!=null&&d(t,["baseModel"],n);const o=c(e,["preTunedModel"]);o!=null&&d(t,["preTunedModel"],o);const l=c(e,["trainingDataset"]);l!=null&&d(t,["tuningTask","trainingData"],ew(l));const s=c(e,["config"]);return s!=null&&GT(s,t),t}function OT(e){const t={},n=c(e,["baseModel"]);n!=null&&d(t,["baseModel"],n);const o=c(e,["preTunedModel"]);o!=null&&d(t,["preTunedModel"],o);const l=c(e,["trainingDataset"]);l!=null&&d(t,["supervisedTuningSpec","trainingDatasetUri"],tw(l,t));const s=c(e,["config"]);return s!=null&&VT(s,t),t}function FT(e){const t={},n=c(e,["name"]);return n!=null&&d(t,["_url","name"],n),t}function YT(e){const t={},n=c(e,["name"]);return n!=null&&d(t,["_url","name"],n),t}function JT(e,t){const n={},o=c(e,["pageSize"]);t!==void 0&&o!=null&&d(t,["_query","pageSize"],o);const l=c(e,["pageToken"]);t!==void 0&&l!=null&&d(t,["_query","pageToken"],l);const s=c(e,["filter"]);return t!==void 0&&s!=null&&d(t,["_query","filter"],s),n}function XT(e,t){const n={},o=c(e,["pageSize"]);t!==void 0&&o!=null&&d(t,["_query","pageSize"],o);const l=c(e,["pageToken"]);t!==void 0&&l!=null&&d(t,["_query","pageToken"],l);const s=c(e,["filter"]);return t!==void 0&&s!=null&&d(t,["_query","filter"],s),n}function $T(e){const t={},n=c(e,["config"]);return n!=null&&JT(n,t),t}function KT(e){const t={},n=c(e,["config"]);return n!=null&&XT(n,t),t}function ZT(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=c(e,["nextPageToken"]);o!=null&&d(t,["nextPageToken"],o);const l=c(e,["tunedModels"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(i=>e0(i))),d(t,["tuningJobs"],s)}return t}function QT(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=c(e,["nextPageToken"]);o!=null&&d(t,["nextPageToken"],o);const l=c(e,["tuningJobs"]);if(l!=null){let s=l;Array.isArray(s)&&(s=s.map(i=>Vu(i))),d(t,["tuningJobs"],s)}return t}function WT(e){const t={},n=c(e,["name"]);n!=null&&d(t,["model"],n);const o=c(e,["name"]);return o!=null&&d(t,["endpoint"],o),t}function ew(e){const t={};if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=c(e,["examples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>l)),d(t,["examples","examples"],o)}return t}function tw(e,t){const n={},o=c(e,["gcsUri"]);t!==void 0&&o!=null&&d(t,["supervisedTuningSpec","trainingDatasetUri"],o);const l=c(e,["vertexDatasetResource"]);if(t!==void 0&&l!=null&&d(t,["supervisedTuningSpec","trainingDatasetUri"],l),c(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function e0(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=c(e,["name"]);o!=null&&d(t,["name"],o);const l=c(e,["state"]);l!=null&&d(t,["state"],jx(l));const s=c(e,["createTime"]);s!=null&&d(t,["createTime"],s);const i=c(e,["tuningTask","startTime"]);i!=null&&d(t,["startTime"],i);const r=c(e,["tuningTask","completeTime"]);r!=null&&d(t,["endTime"],r);const u=c(e,["updateTime"]);u!=null&&d(t,["updateTime"],u);const f=c(e,["description"]);f!=null&&d(t,["description"],f);const h=c(e,["baseModel"]);h!=null&&d(t,["baseModel"],h);const p=c(e,["_self"]);return p!=null&&d(t,["tunedModel"],WT(p)),t}function Vu(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=c(e,["name"]);o!=null&&d(t,["name"],o);const l=c(e,["state"]);l!=null&&d(t,["state"],jx(l));const s=c(e,["createTime"]);s!=null&&d(t,["createTime"],s);const i=c(e,["startTime"]);i!=null&&d(t,["startTime"],i);const r=c(e,["endTime"]);r!=null&&d(t,["endTime"],r);const u=c(e,["updateTime"]);u!=null&&d(t,["updateTime"],u);const f=c(e,["error"]);f!=null&&d(t,["error"],f);const h=c(e,["description"]);h!=null&&d(t,["description"],h);const p=c(e,["baseModel"]);p!=null&&d(t,["baseModel"],p);const m=c(e,["tunedModel"]);m!=null&&d(t,["tunedModel"],m);const g=c(e,["preTunedModel"]);g!=null&&d(t,["preTunedModel"],g);const E=c(e,["supervisedTuningSpec"]);E!=null&&d(t,["supervisedTuningSpec"],E);const T=c(e,["tuningDataStats"]);T!=null&&d(t,["tuningDataStats"],T);const M=c(e,["encryptionSpec"]);M!=null&&d(t,["encryptionSpec"],M);const y=c(e,["partnerModelTuningSpec"]);y!=null&&d(t,["partnerModelTuningSpec"],y);const x=c(e,["customBaseModel"]);x!=null&&d(t,["customBaseModel"],x);const v=c(e,["experiment"]);v!=null&&d(t,["experiment"],v);const S=c(e,["labels"]);S!=null&&d(t,["labels"],S);const N=c(e,["outputUri"]);N!=null&&d(t,["outputUri"],N);const L=c(e,["pipelineJob"]);L!=null&&d(t,["pipelineJob"],L);const A=c(e,["serviceAccount"]);A!=null&&d(t,["serviceAccount"],A);const b=c(e,["tunedModelDisplayName"]);b!=null&&d(t,["tunedModelDisplayName"],b);const I=c(e,["veoTuningSpec"]);return I!=null&&d(t,["veoTuningSpec"],I),t}function nw(e){const t={},n=c(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const o=c(e,["name"]);o!=null&&d(t,["name"],o);const l=c(e,["metadata"]);l!=null&&d(t,["metadata"],l);const s=c(e,["done"]);s!=null&&d(t,["done"],s);const i=c(e,["error"]);return i!=null&&d(t,["error"],i),t}function ow(e,t){const n={},o=c(e,["gcsUri"]);o!=null&&d(n,["validationDatasetUri"],o);const l=c(e,["vertexDatasetResource"]);return t!==void 0&&l!=null&&d(t,["supervisedTuningSpec","trainingDatasetUri"],l),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lw extends _l{constructor(t){super(),this.apiClient=t,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Li(Cl.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const l={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(l.checkpointId=n.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},n),{preTunedModel:l});return s.baseModel=void 0,await this.tuneInternal(s)}else{const l=Object.assign({},n);return await this.tuneInternal(l)}else{const l=Object.assign({},n),s=await this.tuneMldevInternal(l);let i="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?i=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(i=s.name.split("/operations/")[0]),{name:i,state:ju.JOB_STATE_QUEUED}}}}async getInternal(t){var n,o,l,s;let i,r="",u={};if(this.apiClient.isVertexAI()){const f=YT(t);return r=ce("{name}",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),i.then(h=>Vu(h))}else{const f=FT(t);return r=ce("{name}",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),i.then(h=>e0(h))}}async listInternal(t){var n,o,l,s;let i,r="",u={};if(this.apiClient.isVertexAI()){const f=KT(t);return r=ce("tuningJobs",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),i.then(h=>{const p=QT(h),m=new Ap;return Object.assign(m,p),m})}else{const f=$T(t);return r=ce("tunedModels",f._url),u=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),i.then(h=>{const p=ZT(h),m=new Ap;return Object.assign(m,p),m})}}async cancel(t){var n,o,l,s;let i="",r={};if(this.apiClient.isVertexAI()){const u=qT(t);i=ce("{name}:cancel",u._url),r=u._query,delete u._url,delete u._query,await this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}else{const u=BT(t);i=ce("{name}:cancel",u._url),r=u._query,delete u._url,delete u._query,await this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}}async tuneInternal(t){var n,o;let l,s="",i={};if(this.apiClient.isVertexAI()){const r=OT(t);return s=ce("tuningJobs",r._url),i=r._query,delete r._url,delete r._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(r),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:u.headers},h})),l.then(u=>Vu(u))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,o;let l,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=HT(t);return s=ce("tunedModels",r._url),i=r._query,delete r._url,delete r._query,l=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(r),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:u.headers},h})),l.then(u=>nw(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sw{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const iw=1024*1024*8,aw=3,rw=1e3,cw=2,Rc="x-goog-upload-status";async function uw(e,t,n){var o,l,s;let i=0,r=0,u=new Uu(new Response),f="upload";for(i=e.size;r<i;){const p=Math.min(iw,i-r),m=e.slice(r,r+p);r+p>=i&&(f+=", finalize");let g=0,E=rw;for(;g<aw&&(u=await n.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(r),"Content-Length":String(p)}}}),!(!((o=u==null?void 0:u.headers)===null||o===void 0)&&o[Rc]));)g++,await fw(E),E=E*cw;if(r+=p,((l=u==null?void 0:u.headers)===null||l===void 0?void 0:l[Rc])!=="active")break;if(i<=r)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const h=await(u==null?void 0:u.json());if(((s=u==null?void 0:u.headers)===null||s===void 0?void 0:s[Rc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return h.file}async function dw(e){return{size:e.size,type:e.type}}function fw(e){return new Promise(t=>setTimeout(t,e))}class hw{async upload(t,n,o){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await uw(t,n,o)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await dw(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pw{create(t,n,o){return new mw(t,n,o)}}class mw{constructor(t,n,o){this.url=t,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Jp="x-goog-api-key";class gw{constructor(t){this.apiKey=t}async addAuthHeaders(t){if(t.get(Jp)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(Jp,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yw="gl-node/";class xw{constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const o=U1(t.httpOptions,t.vertexai,void 0,void 0);o&&(t.httpOptions?t.httpOptions.baseUrl=o:t.httpOptions={baseUrl:o}),this.apiVersion=t.apiVersion;const l=new gw(this.apiKey);this.apiClient=new nT({auth:l,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:t.httpOptions,userAgentExtra:yw+"web",uploader:new hw,downloader:new sw}),this.models=new ST(this.apiClient),this.live=new mT(this.apiClient,l,new pw),this.batches=new t2(this.apiClient),this.chats=new D2(this.models,this.apiClient),this.caches=new R2(this.apiClient),this.files=new H2(this.apiClient),this.operations=new ET(this.apiClient),this.authTokens=new PT(this.apiClient),this.tunings=new lw(this.apiClient)}}const vw={apiKey:"AIzaSyBK5eiKiX7GFTVMy_LrTYDKYVEfoV8vImY",authDomain:"sketcher-companion.firebaseapp.com",projectId:"sketcher-companion",storageBucket:"sketcher-companion.firebasestorage.app",messagingSenderId:"629894472307",appId:"1:629894472307:web:7be8c8a190d1e9a25e4006"},Qd=A0(vw),Hu=S0(Qd),Vn=_0(Qd),Hn=I0(Qd),wr=({className:e})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"m4 4 7.07 17 2.51-7.39 7.39-2.51L4 4z"})}),xs=({className:e})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"})}),ji=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21H7Z"}),a.jsx("path",{d:"M18 9 9.5 17.5"})]}),Nr=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M17 3l5 5L9 21H4v-5L17 3z"}),a.jsx("path",{d:"M15 5l5 5"}),a.jsx("path",{d:"M7 13l-2.5 2.5"}),a.jsx("path",{d:"M14 20h5"})]}),Ar=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M5 3h14"}),a.jsx("path",{d:"M12 3v18"})]}),bw=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("polygon",{points:"12 2 2 7 12 12 22 7 12 2"}),a.jsx("polyline",{points:"2 17 12 22 22 17"}),a.jsx("polyline",{points:"2 12 12 17 22 12"})]}),Xp=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),$p=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"m9.9 9.9 4.2 4.2"}),a.jsx("path",{d:"M10.5 10.5c.5.5.8 1.2.8 2s-.3 1.5-.8 2"}),a.jsx("path",{d:"M13.5 13.5c-.5-.5-.8-1.2-.8-2s.3-1.5.8-2"}),a.jsx("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7a13.3 13.3 0 0 1-5-1.2"}),a.jsx("path",{d:"m2 2 20 20"})]}),tr=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),_r=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M4 20L17 7"}),a.jsx("path",{d:"M17 5H21M19 3V7"}),a.jsx("path",{d:"M18 4L20 6M18 6L20 4"})]}),Mr=({className:e})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"2 2",children:a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"})}),Rr=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 22a7 7 0 0 0-7-7c0-4 7-4 7-10 0 6 7 6 7 10a7 7 0 0 0-7 7z"}),a.jsx("path",{d:"M12 15a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"})]}),Ui=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"m9.88 2.88 1.42 1.42"}),a.jsx("path",{d:"m14.12 2.88 1.42-1.42"}),a.jsx("path",{d:"m12 6.88-1.42-1.42"}),a.jsx("path",{d:"M16 8 2 2"}),a.jsx("path",{d:"M12 22V10"}),a.jsx("path",{d:"M7 10H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h2"}),a.jsx("path",{d:"m19 10 2 2"}),a.jsx("path",{d:"M17 10h2a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2h-2"})]}),Sl=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("polyline",{points:"3 6 5 6 21 6"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),Ir=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),a.jsx("polyline",{points:"17 8 12 3 7 8"}),a.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),Ca=({className:e})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.23A2 2 0 0 0 8.27 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"})}),Kp=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),a.jsx("polyline",{points:"3.27 6.96 12 12.01 20.73 6.96"}),a.jsx("line",{x1:"12",y1:"22.08",x2:"12",y2:"12"})]}),t0=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}),a.jsx("line",{x1:"11",y1:"8",x2:"11",y2:"14"}),a.jsx("line",{x1:"8",y1:"11",x2:"14",y2:"11"})]}),n0=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}),a.jsx("line",{x1:"8",y1:"11",x2:"14",y2:"11"})]}),o0=({className:e})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.05 4.575a1.575 1.575 0 1 0-3.15 0v3m3.15-3v-1.5a1.575 1.575 0 0 1 3.15 0v1.5m-3.15 0 .075 5.925m3.075.75V4.575m0 0a1.575 1.575 0 0 1 3.15 0V15M6.9 7.575a1.575 1.575 0 1 0-3.15 0v8.175a6.75 6.75 0 0 0 6.75 6.75h2.018a5.25 5.25 0 0 0 3.712-1.538l1.732-1.732a5.25 5.25 0 0 0 1.538-3.712l.003-2.024a.668.668 0 0 1 .198-.471 1.575 1.575 0 1 0-2.228-2.228 3.818 3.818 0 0 0-1.12 2.687M6.9 7.575V12m6.27 4.318A4.49 4.49 0 0 1 16.35 15m.002 0h-.002"})}),l0=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"22",y1:"12",x2:"18",y2:"12"}),a.jsx("line",{x1:"6",y1:"12",x2:"2",y2:"12"}),a.jsx("line",{x1:"12",y1:"6",x2:"12",y2:"2"}),a.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"18"})]}),Zp=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 22v-8"}),a.jsx("path",{d:"m15 17-3 3-3-3"}),a.jsx("path",{d:"M3 3v10a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V3"})]}),Cw=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 2v8"}),a.jsx("path",{d:"m15 7-3-3-3 3"}),a.jsx("path",{d:"M3 21v-10a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10"})]}),Sw=({className:e})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"m6 9 6 6 6-6"})}),s0=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 7v6h6"}),a.jsx("path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"})]}),i0=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M21 7v6h-6"}),a.jsx("path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3L21 13"})]}),Ew=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"}),a.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),a.jsx("path",{d:"M3 21v-5h5"})]}),a0=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),a.jsx("polyline",{points:"15 3 21 3 21 9"}),a.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]}),kr=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M6.13 1L6 16a2 2 0 0 0 2 2h15"}),a.jsx("path",{d:"M1 6.13L16 6a2 2 0 0 1 2 2v15"})]}),r0=({className:e})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polyline",{points:"20 6 9 17 4 12"})}),Xn=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Tw=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"6",cy:"6",r:"3"}),a.jsx("circle",{cx:"18",cy:"18",r:"3"}),a.jsx("line",{x1:"8.12",y1:"8.12",x2:"15.88",y2:"15.88"})]}),ww=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 21h18"}),a.jsx("path",{d:"M7 21l3-14"}),a.jsx("path",{d:"M17 21l-3-14"}),a.jsx("path",{d:"M10 7h4"})]}),Nw=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Aw=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 2v20"}),a.jsx("path",{d:"M5 12a7.7 7.7 0 0 0 7 7.7 7.7 7.7 0 0 0 7-7.7c0-4.5-3-7.7-7-7.7-4 0-7 3.2-7 7.7z"}),a.jsx("path",{d:"M19 12a7.7 7.7 0 0 1-7 7.7 7.7 7.7 0 0 1-7-7.7c0-4.5 3-7.7 7-7.7 4 0 7 3.2 7 7.7z"})]}),Qp=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}),a.jsx("path",{d:"M3 9h18M3 15h18M9 3v18M15 3v18"})]}),_w=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 2 22 8 12 14 2 8 12 2z"}),a.jsx("path",{d:"m2 8 v8 l10 6 10-6 V8"}),a.jsx("path",{d:"m12 14 v8"})]}),Wp=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),em=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 9.9-1"})]}),Dr=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M4 4L20 4L20 20L4 20Z",strokeDasharray:"2 2",strokeWidth:"1.5"}),a.jsx("path",{d:"M7 7L17 7L17 17L7 17Z"}),a.jsx("path",{d:"M4 4m-1.5 0a1.5 1.5 0 1 0 3 0a1.5 1.5 0 1 0-3 0"}),a.jsx("path",{d:"M20 4m-1.5 0a1.5 1.5 0 1 0 3 0a1.5 1.5 0 1 0-3 0"}),a.jsx("path",{d:"M4 20m-1.5 0a1.5 1.5 0 1 0 3 0a1.5 1.5 0 1 0-3 0"}),a.jsx("path",{d:"M20 20m-1.5 0a1.5 1.5 0 1 0 3 0a1.5 1.5 0 1 0-3 0"})]}),Lr=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M5 5L19 3l-1 16L4 18z"}),a.jsx("circle",{cx:"5",cy:"5",r:"1.5"}),a.jsx("circle",{cx:"19",cy:"3",r:"1.5"}),a.jsx("circle",{cx:"18",cy:"19",r:"1.5"}),a.jsx("circle",{cx:"4",cy:"18",r:"1.5"})]}),Mw=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"4"}),a.jsx("path",{d:"M12 2v2"}),a.jsx("path",{d:"M12 20v2"}),a.jsx("path",{d:"m4.93 4.93 1.41 1.41"}),a.jsx("path",{d:"m17.66 17.66 1.41 1.41"}),a.jsx("path",{d:"M2 12h2"}),a.jsx("path",{d:"M20 12h2"}),a.jsx("path",{d:"m6.34 17.66-1.41 1.41"}),a.jsx("path",{d:"m19.07 4.93-1.41 1.41"})]}),Rw=({className:e})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"})}),c0=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),a.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),Iw=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"6",cy:"6",r:"3"}),a.jsx("circle",{cx:"6",cy:"18",r:"3"}),a.jsx("line",{x1:"20",y1:"4",x2:"8.12",y2:"15.88"}),a.jsx("line",{x1:"14.47",y1:"14.48",x2:"20",y2:"20"}),a.jsx("line",{x1:"8.12",y1:"8.12",x2:"12",y2:"12"})]}),kw=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),a.jsx("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"})]}),Dw=({className:e})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"m15 18-6-6 6-6"})}),u0=({className:e})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"m9 18 6-6-6-6"})}),d0=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),Lw=({className:e})=>a.jsxs("svg",{className:e,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),a.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),a.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z",fill:"#FBBC05"}),a.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),jw=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),a.jsx("polyline",{points:"16 17 21 12 16 7"}),a.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),f0=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"5"}),a.jsx("polyline",{points:"5 12 12 5 19 12"})]}),Uw=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("polyline",{points:"19 12 12 19 5 12"})]}),Ic=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M4 13a8 8 0 0 1 8-8v8h8a8 8 0 0 1-8 8 8 8 0 0 1-8-8z"}),a.jsx("path",{d:"M4 21V19"}),a.jsx("path",{d:"M20 21V19"}),a.jsx("path",{d:"M12 4V2"})]}),h0=({className:e})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"m19 21-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"})}),zw=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),a.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),a.jsx("polyline",{points:"7 3 7 8 15 8"})]}),Pw=({className:e})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})}),Bw=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),a.jsx("line",{x1:"3",y1:"9",x2:"21",y2:"9"}),a.jsx("line",{x1:"9",y1:"21",x2:"9",y2:"9"})]}),tm=({className:e})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M4 12c4 0 8-4 16-4"})}),nm=({className:e})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("line",{x1:"4",y1:"20",x2:"20",y2:"4"})}),om=({className:e})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M4 20 10 4 16 16 20 12"})}),lm=({className:e})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M4 12A8 8 0 0 1 12 4"})}),sm=({className:e})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M4 4c4 0 8 8 16 8"})}),qw=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M15 3h6v6"}),a.jsx("path",{d:"M9 21H3v-6"}),a.jsx("path",{d:"M21 3l-7 7"}),a.jsx("path",{d:"M3 21l7-7"})]}),Gw=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M4 14h6v6"}),a.jsx("path",{d:"M20 10h-6V4"}),a.jsx("path",{d:"M14 10l7-7"}),a.jsx("path",{d:"M3 21l7-7"})]}),im=({className:e})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("line",{x1:"4",y1:"12",x2:"20",y2:"12"})}),am=({className:e})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M4 12h4m6 0h4m-5 0h2"})}),rm=({className:e})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M4 12h.01M8 12h.01M12 12h.01M16 12h.01M20 12h.01"})}),cm=({className:e})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M4 12h4m4 0h.01M16 12h4"})}),Vw=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),a.jsx("path",{d:"M3 3v5h5"}),a.jsx("path",{d:"M12 7v5l4 2"})]}),Ou=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"1"}),a.jsx("circle",{cx:"12",cy:"5",r:"1"}),a.jsx("circle",{cx:"12",cy:"19",r:"1"})]}),Hw=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"12",y1:"13",x2:"12",y2:"23"}),a.jsx("line",{x1:"7",y1:"18",x2:"17",y2:"18"}),a.jsx("line",{x1:"12",y1:"7",x2:"12",y2:"1"}),a.jsx("polyline",{points:"9 4 12 1 15 4"})]}),Ow=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"11"}),a.jsx("line",{x1:"7",y1:"6",x2:"17",y2:"6"}),a.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"23"}),a.jsx("polyline",{points:"9 20 12 23 15 20"})]}),jr=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M20.7 7.3c-2-2.7-5.3-4.3-8.7-4.3-4.9 0-9 4-9 9 0 2.6.9 5 2.5 6.7"}),a.jsx("path",{d:"M12 21c-2.4 0-4.6-.9-6.3-2.5"}),a.jsx("path",{d:"m15.5 13.5-3.8 2.3"}),a.jsx("path",{d:"M18 10.2s-2.3 2.5-5.5 1.6"}),a.jsx("path",{d:"M13.2 5.3s3.1-1.1 5.4 1.1"})]}),Ur=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M6 18h4"}),a.jsx("path",{d:"M14 18h4"}),a.jsx("path",{d:"M10 22h4"}),a.jsx("path",{d:"M12 18v-4"}),a.jsx("path",{d:"M12 14c-4.42 0-8-2.69-8-6s3.58-6 8-6 8 2.69 8 6"}),a.jsx("path",{d:"M12 2a4 4 0 0 0-4 4"})]}),Rs=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"m16.86 3.46 1.41-1.41a2 2 0 1 1 2.83 2.83l-1.41 1.41"}),a.jsx("path",{d:"m3.46 16.86 1.41-1.41a2 2 0 1 1 2.83 2.83l-1.41 1.41"}),a.jsx("path",{d:"M3 21v-3h3"}),a.jsx("path",{d:"M21 3v3h-3"}),a.jsx("path",{d:"M12 3v3"}),a.jsx("path",{d:"M12 21v-3"}),a.jsx("path",{d:"M3 12h3"}),a.jsx("path",{d:"M21 12h-3"}),a.jsx("path",{d:"m16.86 15.46.7-.7a2 2 0 1 0-2.83-2.83l-.7.7"}),a.jsx("path",{d:"m8.54 7.14-.7.7a2 2 0 1 0 2.83 2.83l.7-.7"})]}),zr=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"m16.86 3.46 1.41-1.41a2 2 0 1 1 2.83 2.83l-1.41 1.41m-12.02 12.02 1.41-1.41a2 2 0 1 1 2.83 2.83l-1.41 1.41"}),a.jsx("path",{d:"m6.34 17.66 11.32-11.32"})]}),Pr=({className:e})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"m20.55 3.45-1.5 1.5"}),a.jsx("path",{d:"m16 6 3.19 3.19"}),a.jsx("path",{d:"M14.28 15.16 5.72 6.6a2.07 2.07 0 0 0-2.93 0L2.2 7.19a2.07 2.07 0 0 0 0 2.93l8.56 8.56"}),a.jsx("path",{d:"M18 11.45c0 3.22-2.1 5.5-5.34 5.5-1.7 0-3.32-.83-4.48-2.22"}),a.jsx("path",{d:"M18.01 19.38c.6-.57.99-1.37.99-2.25 0-1.77-1.43-3.2-3.2-3.2-1.29 0-2.4.76-2.93 1.84"})]}),rn=({title:e,children:t,defaultOpen:n=!1})=>{const[o,l]=C.useState(n);return a.jsxs("div",{className:"border-b border-[--bg-tertiary]",children:[a.jsxs("button",{onClick:()=>l(!o),className:"w-full flex justify-between items-center p-2 text-xs font-bold uppercase text-[--text-secondary] hover:bg-[--bg-tertiary]",children:[a.jsx("span",{children:e}),a.jsx(Sw,{className:`w-4 h-4 transition-transform ${o?"rotate-180":""}`})]}),o&&a.jsx("div",{className:"p-4 space-y-4",children:t})]})},Fw=[{name:"Normal",value:"source-over"},{name:"Multiply",value:"multiply"},{name:"Screen",value:"screen"},{name:"Overlay",value:"overlay"},{name:"Darken",value:"darken"},{name:"Lighten",value:"lighten"},{name:"Color Dodge",value:"color-dodge"},{name:"Color Burn",value:"color-burn"},{name:"Hard Light",value:"hard-light"},{name:"Soft Light",value:"soft-light"},{name:"Difference",value:"difference"},{name:"Exclusion",value:"exclusion"},{name:"Hue",value:"hue"},{name:"Saturation",value:"saturation"},{name:"Color",value:"color"},{name:"Luminosity",value:"luminosity"}],Yw=["Arial","Verdana","Georgia","Courier New","Lucida Console","Impact","Comic Sans MS"],um=[{tool:"marquee-rect",name:"Marco Rectangular",icon:Mr},{tool:"lasso",name:"Lazo",icon:Rr},{tool:"magic-wand",name:"Varita Mgica",icon:Ui}],dm=[{tool:"brush",name:"Rapidograph Solido",icon:xs},{tool:"simple-marker",name:"Marcador",icon:Nr},{tool:"advanced-marker",name:"Lpiz de color",icon:jr},{tool:"natural-marker",name:"Marcador slido",icon:zr},{tool:"airbrush",name:"Aergrafo",icon:Ur},{tool:"fx-brush",name:"Pincel de Efectos",icon:Rs},{tool:"watercolor",name:"Acuarela",icon:Pr}],fm={select:wr,"marquee-rect":Mr,lasso:Rr,"magic-wand":Ui,brush:xs,eraser:ji,"simple-marker":Nr,transform:Dr,"free-transform":Lr,enhance:_r,crop:kr,pan:()=>null,"debug-brush":xs,text:Ar,"natural-marker":zr,airbrush:Ur,"fx-brush":Rs,"advanced-marker":jr,watercolor:Pr},Jw=({tool:e,setTool:t,brushSettings:n,setBrushSettings:o,eraserSettings:l,setEraserSettings:s,simpleMarkerSettings:i,setSimpleMarkerSettings:r,naturalMarkerSettings:u,setNaturalMarkerSettings:f,airbrushSettings:h,setAirbrushSettings:p,fxBrushSettings:m,setFxBrushSettings:g,advancedMarkerSettings:E,setAdvancedMarkerSettings:T,watercolorSettings:M,setWatercolorSettings:y,magicWandSettings:x,setMagicWandSettings:v,textSettings:S,setTextSettings:N,activeGuide:L,setActiveGuide:A,isOrthogonalVisible:b,onToggleOrthogonal:I,onExportClick:w,onEnhance:j,isEnhancing:_,enhancementPreview:R,onGenerateEnhancementPreview:H,objects:ee,libraryItems:z,backgroundDataUrl:U,debugInfo:G,strokeMode:J,setStrokeMode:P,strokeModifier:q,setStrokeModifier:Q,brushPresets:X,...he})=>{const[pe,ie]=C.useState(null),[Ue,Ee]=C.useState(null),[Te,Me]=C.useState(null),He=C.useRef(null),tt=C.useRef(null),[W,le]=C.useState(!1),[oe,ue]=C.useState(!1),ve=C.useRef(null),[Ce,ze]=C.useState(!1),at=C.useRef(null),[xt,_e]=C.useState(!1),Ye=C.useRef(null),[de,je]=C.useState(!1),wt=C.useRef(null),[Pe,Qe]=C.useState("marquee-rect"),[bt,$t]=C.useState("brush"),[It,zt]=C.useState("object"),[bn,Zn]=C.useState(""),[Dn,re]=C.useState(""),[ae,be]=C.useState(""),[nt,ot]=C.useState(100),[me,Re]=C.useState("none"),[De,ut]=C.useState("full"),[Je,fe]=C.useState("#FFFFFF"),[te,$]=C.useState(""),[B,K]=C.useState(null),[se,ye]=C.useState(!1),[O,ge]=C.useState(""),[ne,we]=C.useState(!0),[Se,Ae]=C.useState({main:null,a:null,b:null,c:null}),Le=C.useRef(null),Ge=C.useRef(null),[dt,Cn]=C.useState({description:[],style:[],negative:[]}),[Pt,ll]=C.useState({openFor:null,anchorEl:null}),sl=C.useRef(null);C.useEffect(()=>{try{const Z=localStorage.getItem("sketcher-ai-prompts");Z&&Cn(JSON.parse(Z))}catch(Z){console.error("Failed to load prompts from localStorage",Z)}},[]),C.useEffect(()=>{const Z=k=>{sl.current&&!sl.current.contains(k.target)&&ll({openFor:null,anchorEl:null}),ve.current&&!ve.current.contains(k.target)&&ue(!1),at.current&&!at.current.contains(k.target)&&ze(!1),Ye.current&&!Ye.current.contains(k.target)&&_e(!1),wt.current&&!wt.current.contains(k.target)&&je(!1),pe!=="enhance"&&He.current&&!He.current.contains(k.target)&&Ue&&!Ue.contains(k.target)&&(ie(null),Ee(null),Me(null))};return document.addEventListener("mousedown",Z),()=>document.removeEventListener("mousedown",Z)},[Ue,pe]),C.useEffect(()=>{W?me==="none"&&Re("green"):Re("none")},[W,Re]),C.useEffect(()=>{um.some(Z=>Z.tool===e)?Qe(e):dm.some(Z=>Z.tool===e)&&$t(e)},[e]);const Kt=Z=>{e!==Z&&(ie(null),Ee(null),Me(null)),t(Z)},Bn=(Z,k)=>{Z==="enhance"&&pe!=="enhance"&&H(),ie(V=>{const lt=k.currentTarget;return V===Z&&Ue===lt?(Ee(null),Me(null),null):(Ee(lt),Me(null),ue(!1),ze(!1),_e(!1),je(!1),Z)})},To=(Z,k)=>{Z.stopPropagation();const V=Z.currentTarget,lt=V.getBoundingClientRect(),ft=tt.current.getBoundingClientRect();_e(!1),je(!1),ue(!1),ze(!1),Me({left:lt.right-ft.left+8,top:lt.top-ft.top}),Ee(V),ie(k)},ln=Z=>`p-3 rounded-lg transition-colors ${e===Z?"bg-[--accent-primary] text-white":"bg-[--bg-secondary] text-[--text-secondary] hover:bg-[--bg-tertiary]"}`,Is=Z=>{if(Z.preventDefault(),ye(!1),Z.dataTransfer.files&&Z.dataTransfer.files[0]){const k=Z.dataTransfer.files[0];if(k.type.startsWith("image/")){const V=new FileReader;V.onload=lt=>{var ft;K({url:(ft=lt.target)==null?void 0:ft.result,name:k.name})},V.readAsDataURL(k)}}},wo=(Z,k)=>{if(Z.preventDefault(),Z.stopPropagation(),Z.dataTransfer.files&&Z.dataTransfer.files.length>0){const V=Z.dataTransfer.files[0];if(V.type.startsWith("image/")){const lt=new FileReader;lt.onload=ft=>{var Qn;const an=(Qn=ft.target)==null?void 0:Qn.result;Ae(Rl=>({...Rl,[k]:{id:`file-${Date.now()}`,type:"file",url:an,name:V.name}}))},lt.readAsDataURL(V)}return}try{const V=Z.dataTransfer.getData("application/json");if(!V)return;const lt=JSON.parse(V);if(lt.type==="outliner-item"){const ft=ee.find(an=>an.id===lt.id);if(ft&&ft.type==="object"&&ft.canvas){const an=ft.canvas.toDataURL();Ae(Qn=>({...Qn,[k]:{id:ft.id,type:"outliner",url:an,name:ft.name}}))}}else if(lt.type==="library-item"){const ft=z.find(an=>an.id===lt.id);ft&&ft.type==="image"&&ft.dataUrl&&Ae(an=>({...an,[k]:{id:ft.id,type:"library",url:ft.dataUrl,name:ft.name}}))}}catch(V){console.error("Error handling drop:",V)}},No=Z=>{if(Z.target.files&&Z.target.files[0]&&Ge.current){const k=Z.target.files[0],V=Ge.current,lt=new FileReader;lt.onload=ft=>{var Qn;const an=(Qn=ft.target)==null?void 0:Qn.result;Ae(Rl=>({...Rl,[V]:{id:`file-${Date.now()}`,type:"file",url:an,name:k.name}}))},lt.readAsDataURL(k)}Z.target&&(Z.target.value=""),Ge.current=null},Ml=(Z,k)=>{if(!k.trim()||dt[Z].includes(k.trim()))return;const V={...dt,[Z]:[...dt[Z],k.trim()]};Cn(V),localStorage.setItem("sketcher-ai-prompts",JSON.stringify(V))},qr=(Z,k)=>{const V={...dt,[Z]:dt[Z].filter(lt=>lt!==k)};Cn(V),localStorage.setItem("sketcher-ai-prompts",JSON.stringify(V))},Gr=(Z,k)=>{Z==="description"&&Zn(k),Z==="style"&&re(k),Z==="negative"&&be(k),ll({openFor:null,anchorEl:null})},Nt=({type:Z,value:k})=>a.jsxs("div",{className:"flex justify-end gap-2 mt-1",children:[a.jsx("button",{onClick:()=>Ml(Z,k),className:"text-xs px-2 py-1 rounded bg-[--bg-tertiary] hover:bg-[--bg-hover]",children:"Guardar"}),a.jsx("button",{onClick:V=>ll({openFor:Z,anchorEl:V.currentTarget}),className:"text-xs px-2 py-1 rounded bg-[--bg-tertiary] hover:bg-[--bg-hover]",children:"Cargar"})]}),qn=({slotData:Z,onDrop:k,onClear:V,onFileSelect:lt,placeholder:ft,className:an=""})=>{const[Qn,Rl]=C.useState(!1),b0=Wn=>{Wn.preventDefault(),Wn.stopPropagation(),Wn.dataTransfer.dropEffect="copy",Rl(!0)},Yr=Wn=>{Wn.preventDefault(),Wn.stopPropagation(),Rl(!1)},C0=Wn=>{Yr(Wn),k(Wn)};return a.jsx("div",{onClick:Z?void 0:lt,onDrop:C0,onDragOver:b0,onDragLeave:Yr,onDragEnd:Yr,className:`relative bg-[--bg-tertiary] rounded-md flex items-center justify-center text-center text-xs text-[--text-secondary] p-2 transition-all ${Qn?"border-2 border-dashed border-[--accent-primary]":"border-2 border-dashed border-transparent"} ${Z?"":"cursor-pointer"} ${an}`,children:Z?a.jsxs(a.Fragment,{children:[a.jsx("img",{src:Z.url,alt:Z.name,className:"max-w-full max-h-full object-contain rounded-md"}),a.jsx("button",{onClick:V,className:"absolute top-1 right-1 p-0.5 w-5 h-5 flex items-center justify-center bg-black/50 hover:bg-red-600 rounded-full text-white text-base",children:a.jsx(Xn,{className:"w-3 h-3"})})]}):a.jsxs("div",{className:"flex flex-col items-center gap-1 pointer-events-none",children:[a.jsx(Ir,{className:"w-5 h-5"}),a.jsx("span",{children:ft}),a.jsx("span",{className:"text-[10px]",children:"(Arrastra o haz clic para cargar)"})]})})},zi=({value:Z,onChange:k})=>a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[--text-secondary] block mb-1",children:"Modo de Fusin"}),a.jsx("select",{value:Z,onChange:V=>k(V.target.value),className:"w-full bg-[--bg-tertiary] text-[--text-primary] text-xs rounded-md p-2",children:Fw.map(V=>a.jsx("option",{value:V.value,children:V.name},V.value))})]}),Pi=Z=>{switch(Z){case"select":case"transform":case"free-transform":case"marquee-rect":case"lasso":return null;case"text":return a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsx("h4",{className:"text-sm font-bold uppercase text-[--text-secondary]",children:"Herramienta de Texto"}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[--text-secondary] block mb-1",children:"Fuente"}),a.jsx("select",{value:S.fontFamily,onChange:k=>N(V=>({...V,fontFamily:k.target.value})),className:"w-full bg-[--bg-tertiary] text-[--text-primary] text-xs rounded-md p-2",children:Yw.map(k=>a.jsx("option",{value:k,children:k},k))})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-xs text-[--text-secondary] block mb-1",children:["Tamao: ",S.fontSize,"px"]}),a.jsx("input",{type:"range",min:"8",max:"256",value:S.fontSize,onChange:k=>N(V=>({...V,fontSize:parseInt(k.target.value)})),className:"w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[--text-secondary] block mb-1",children:"Color"}),a.jsx("input",{type:"color",value:S.color,onChange:k=>N(V=>({...V,color:k.target.value})),className:"w-full h-8 p-0.5 bg-[--bg-tertiary] border border-[--bg-hover] rounded-md cursor-pointer"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[--text-secondary] block mb-1",children:"Alineacin"}),a.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[a.jsx("button",{onClick:()=>N(k=>({...k,textAlign:"left"})),className:`text-xs p-2 rounded ${S.textAlign==="left"?"bg-[--accent-hover] text-white":"bg-[--bg-tertiary] hover:bg-[--bg-hover]"}`,children:"Izquierda"}),a.jsx("button",{onClick:()=>N(k=>({...k,textAlign:"center"})),className:`text-xs p-2 rounded ${S.textAlign==="center"?"bg-[--accent-hover] text-white":"bg-[--bg-tertiary] hover:bg-[--bg-hover]"}`,children:"Centro"}),a.jsx("button",{onClick:()=>N(k=>({...k,textAlign:"right"})),className:`text-xs p-2 rounded ${S.textAlign==="right"?"bg-[--accent-hover] text-white":"bg-[--bg-tertiary] hover:bg-[--bg-hover]"}`,children:"Derecha"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[--text-secondary] block mb-1",children:"Estilo"}),a.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[a.jsx("button",{onClick:()=>N(k=>({...k,fontWeight:"normal"})),className:`text-xs p-2 rounded ${S.fontWeight==="normal"?"bg-[--accent-hover] text-white":"bg-[--bg-tertiary] hover:bg-[--bg-hover]"}`,children:"Normal"}),a.jsx("button",{onClick:()=>N(k=>({...k,fontWeight:"bold"})),className:`text-xs p-2 rounded ${S.fontWeight==="bold"?"bg-[--accent-hover] text-white":"bg-[--bg-tertiary] hover:bg-[--bg-hover]"}`,children:"Negrita"}),a.jsx("button",{onClick:()=>N(k=>({...k,fontWeight:"italic"})),className:`text-xs p-2 rounded ${S.fontWeight==="italic"?"bg-[--accent-hover] text-white":"bg-[--bg-tertiary] hover:bg-[--bg-hover]"}`,children:"Cursiva"})]})]})]});case"magic-wand":return a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsx("h4",{className:"text-sm font-bold uppercase text-[--text-secondary]",children:"Varita Mgica"}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-xs text-[--text-secondary] block mb-1",children:["Tolerancia: ",x.tolerance]}),a.jsx("input",{type:"range",min:"0",max:"100",value:x.tolerance,onChange:k=>v(V=>({...V,tolerance:parseInt(k.target.value)})),className:"w-full"})]}),a.jsxs("div",{className:"flex items-center justify-between py-1",children:[a.jsx("label",{htmlFor:"contiguous-toggle",className:"text-xs text-[--text-secondary]",children:"Contiguo (solo pxeles adyacentes)"}),a.jsx("button",{id:"contiguous-toggle",role:"switch","aria-checked":x.contiguous,onClick:()=>v(k=>({...k,contiguous:!k.contiguous})),className:`relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[--accent-primary] focus:ring-offset-[--bg-primary] ${x.contiguous?"bg-[--accent-primary]":"bg-[--bg-tertiary]"}`,children:a.jsx("span",{className:`inline-block w-4 h-4 transform bg-white rounded-full transition-transform ${x.contiguous?"translate-x-6":"translate-x-1"}`})})]})]});case"enhance":return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex border-b border-[--bg-tertiary]",children:[a.jsx("button",{onClick:()=>zt("object"),className:`flex-1 p-2 text-sm font-semibold transition-colors ${It==="object"?"text-[--accent-primary] border-b-2 border-[--accent-primary]":"text-[--text-secondary] hover:bg-[--bg-tertiary]"}`,children:"OBJETO"}),a.jsx("button",{onClick:()=>zt("composition"),className:`flex-1 p-2 text-sm font-semibold transition-colors ${It==="composition"?"text-[--accent-primary] border-b-2 border-[--accent-primary]":"text-[--text-secondary] hover:bg-[--bg-tertiary]"}`,children:"COMPOSICIN"}),a.jsx("button",{onClick:()=>zt("free"),className:`flex-1 p-2 text-sm font-semibold transition-colors ${It==="free"?"text-[--accent-primary] border-b-2 border-[--accent-primary]":"text-[--text-secondary] hover:bg-[--bg-tertiary]"}`,children:"LIBRE"})]}),It==="object"&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{style:{backgroundColor:Je},className:"rounded-md p-2 aspect-video flex items-center justify-center",children:R?a.jsx("img",{src:De==="bbox"&&R.croppedDataUrl?R.croppedDataUrl:R.fullDataUrl,alt:"AI Input Preview",className:"max-w-full max-h-full object-contain"}):a.jsx("span",{className:"text-xs text-[--text-secondary]",children:"Generando vista previa..."})}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"preview-bg-color",className:"text-xs font-bold text-[--text-secondary] block mb-1",children:"Fondo"}),a.jsx("input",{type:"color",id:"preview-bg-color",value:Je,onChange:k=>fe(k.target.value),className:"w-full h-8 p-0.5 bg-[--bg-tertiary] border border-[--bg-hover] rounded-md cursor-pointer",disabled:_})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-bold text-[--text-secondary] block mb-2",children:"Imagen de Entrada"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsx("button",{onClick:()=>ut("full"),disabled:_,className:`text-xs p-2 rounded transition-colors ${De==="full"?"bg-[--accent-primary] text-white":"bg-[--bg-tertiary] hover:bg-[--bg-hover]"}`,children:"Lienzo Completo"}),a.jsx("button",{onClick:()=>ut("bbox"),disabled:_||!(R!=null&&R.bbox),className:`text-xs p-2 rounded transition-colors ${De==="bbox"?"bg-[--accent-primary] text-white":"bg-[--bg-tertiary] hover:bg-[--bg-hover] disabled:opacity-50 disabled:cursor-not-allowed"}`,children:"Ajustar a Contenido"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-bold text-[--text-secondary] block mb-1",children:"Descripcin del Objeto (Necesario)"}),a.jsx("textarea",{value:bn,onChange:k=>Zn(k.target.value),placeholder:"Ej: 'aade un castillo de fantasa en el fondo'",className:"w-full h-20 p-2 bg-[--bg-tertiary] text-[--text-primary] text-sm rounded-md resize-none",disabled:_}),a.jsx(Nt,{type:"description",value:bn})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-bold text-[--text-secondary] block mb-1",children:"Estilo (Necesario)"}),a.jsx("textarea",{value:Dn,onChange:k=>re(k.target.value),placeholder:"Ej: 'fotorrealista, colores vivos, pintura al leo'",className:"w-full h-16 p-2 bg-[--bg-tertiary] text-[--text-primary] text-sm rounded-md resize-none",disabled:_}),a.jsx(Nt,{type:"style",value:Dn})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-bold text-[--text-secondary] block mb-1",children:"Negativo/Evitar (Opcional)"}),a.jsx("textarea",{value:ae,onChange:k=>be(k.target.value),placeholder:"Ej: 'borroso, baja resolucin, texto, marcas de agua'",className:"w-full h-16 p-2 bg-[--bg-tertiary] text-[--text-primary] text-sm rounded-md resize-none",disabled:_}),a.jsx(Nt,{type:"negative",value:ae})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-xs font-bold text-[--text-secondary] block mb-1",children:["Creatividad: ",nt]}),a.jsx("input",{type:"range",min:"0",max:"150",value:nt,onChange:k=>ot(parseInt(k.target.value)),className:"w-full",disabled:_}),a.jsxs("div",{className:"flex justify-between text-xs text-[--text-secondary] mt-1",children:[a.jsx("span",{children:"Fiel"}),a.jsx("span",{children:"Equilibrado"}),a.jsx("span",{children:"Imaginativo"})]})]}),a.jsxs("div",{className:"flex items-center justify-between py-1",children:[a.jsx("label",{htmlFor:"chroma-key-toggle",className:"text-xs font-bold text-[--text-secondary]",children:"Forzar Fondo Chroma"}),a.jsx("button",{id:"chroma-key-toggle",role:"switch","aria-checked":W,onClick:()=>le(k=>!k),className:`relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[--accent-primary] focus:ring-offset-[--bg-primary] ${W?"bg-[--accent-primary]":"bg-[--bg-tertiary]"}`,disabled:_,children:a.jsx("span",{className:`inline-block w-4 h-4 transform bg-white rounded-full transition-transform ${W?"translate-x-6":"translate-x-1"}`})})]}),W&&a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsx("button",{onClick:()=>Re("green"),disabled:_,className:`text-xs p-2 rounded transition-colors ${me==="green"?"bg-green-600 text-white":"bg-[--bg-tertiary] hover:bg-[--bg-hover]"}`,children:"Verde"}),a.jsx("button",{onClick:()=>Re("blue"),disabled:_,className:`text-xs p-2 rounded transition-colors ${me==="blue"?"bg-blue-600 text-white":"bg-[--bg-tertiary] hover:bg-[--bg-hover]"}`,children:"Azul"})]}),a.jsx("button",{onClick:()=>j({activeAiTab:It,enhancementPrompt:bn,enhancementStylePrompt:Dn,enhancementNegativePrompt:ae,enhancementCreativity:nt,enhancementInputMode:De,enhancementChromaKey:W?me:"none",enhancementPreviewBgColor:Je}),disabled:!bn.trim()||!Dn.trim()||_,className:"w-full bg-[--accent-primary] hover:bg-[--accent-hover] text-white font-bold py-2 px-4 rounded-md disabled:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed mt-2",children:_?"Generando...":"Generar"}),_&&a.jsx("div",{className:"text-center text-xs text-[--text-secondary]",children:"Esto puede tardar unos momentos..."})]}),It==="composition"&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("h5",{className:"font-bold text-md",children:"Composicin de Escena"}),a.jsx("p",{className:"text-xs text-[--text-secondary]",children:"Describe cmo combinar, estilizar o modificar la escena actual. La IA usar todos los objetos visibles y el fondo como base. El resultado reemplazar el fondo actual."}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-bold text-[--text-secondary] block mb-1",children:"Preview de Entrada"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{className:"bg-[--bg-tertiary] p-1 rounded-md text-center aspect-video flex items-center justify-center flex-col",children:[R!=null&&R.fullDataUrl?a.jsx("img",{src:R.fullDataUrl,alt:"Composite Preview",className:"max-w-full max-h-[80%] object-contain"}):a.jsx("span",{className:"text-xs text-[--text-secondary]",children:"Cargando..."}),a.jsx("span",{className:"text-xs text-[--text-secondary] mt-1",children:"Objetos Visibles"})]}),a.jsxs("div",{className:"bg-[--bg-tertiary] p-1 rounded-md text-center aspect-video flex items-center justify-center flex-col",children:[U?a.jsx("img",{src:U,alt:"Background Preview",className:"max-w-full max-h-[80%] object-contain"}):a.jsx("span",{className:"text-xs text-[--text-secondary]",children:"Sin Fondo"}),a.jsx("span",{className:"text-xs text-[--text-secondary] mt-1",children:"Fondo"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-bold text-[--text-secondary] block mb-1",children:"Instrucciones de Composicin (Necesario)"}),a.jsx("textarea",{value:te,onChange:k=>$(k.target.value),placeholder:"Ej: 'mezcla los objetos en un estilo de acuarela, con una iluminacin suave desde la izquierda'",className:"w-full h-24 p-2 bg-[--bg-tertiary] text-[--text-primary] text-sm rounded-md resize-none",disabled:_})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-bold text-[--text-secondary] block mb-1",children:"Referencia de Estilo (Opcional)"}),a.jsx("div",{onDrop:Is,onDragOver:k=>{k.preventDefault(),ye(!0)},onDragLeave:()=>ye(!1),className:`w-full h-24 p-2 bg-[--bg-tertiary] rounded-md flex items-center justify-center text-center transition-colors ${se?"border-2 border-dashed border-[--accent-primary]":"border-2 border-dashed border-transparent"}`,children:B?a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:B.url,alt:"Style reference",className:"max-h-20 object-contain"}),a.jsx("button",{onClick:()=>K(null),className:"absolute -top-1 -right-1 p-0.5 w-5 h-5 flex items-center justify-center bg-black/50 hover:bg-red-600 rounded-full text-white text-base",children:a.jsx(Xn,{className:"w-3 h-3"})})]}):a.jsx("span",{className:"text-xs text-[--text-secondary]",children:"Arrastra una imagen de referencia aqu"})})]}),a.jsx("button",{onClick:()=>j({activeAiTab:It,compositionPrompt:te,styleRef:B}),disabled:!te.trim()||_,className:"w-full bg-[--accent-primary] hover:bg-[--accent-hover] text-white font-bold py-2 px-4 rounded-md disabled:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed mt-2",children:_?"Generando...":"Generar"})]}),It==="free"&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("h5",{className:"font-bold text-md",children:"Creacin Libre"}),a.jsx("p",{className:"text-xs text-[--text-secondary]",children:"Arrastra objetos desde el Outliner/Librera o haz clic para cargar imgenes en las ranuras. Luego, describe cmo combinarlos."}),a.jsx("input",{type:"file",accept:"image/*",className:"hidden",ref:Le,onChange:No}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(qn,{slotData:Se.main,onDrop:k=>wo(k,"main"),onClear:()=>Ae(k=>({...k,main:null})),onFileSelect:()=>{var k;Ge.current="main",(k=Le.current)==null||k.click()},placeholder:"[Objeto 1] Principal",className:"h-28"}),a.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[a.jsx(qn,{slotData:Se.a,onDrop:k=>wo(k,"a"),onClear:()=>Ae(k=>({...k,a:null})),onFileSelect:()=>{var k;Ge.current="a",(k=Le.current)==null||k.click()},placeholder:"[Aadido A]",className:"h-20"}),a.jsx(qn,{slotData:Se.b,onDrop:k=>wo(k,"b"),onClear:()=>Ae(k=>({...k,b:null})),onFileSelect:()=>{var k;Ge.current="b",(k=Le.current)==null||k.click()},placeholder:"[Aadido B]",className:"h-20"}),a.jsx(qn,{slotData:Se.c,onDrop:k=>wo(k,"c"),onClear:()=>Ae(k=>({...k,c:null})),onFileSelect:()=>{var k;Ge.current="c",(k=Le.current)==null||k.click()},placeholder:"[Aadido C]",className:"h-20"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-bold text-[--text-secondary] block mb-1",children:"Instrucciones"}),a.jsx("textarea",{value:O,onChange:k=>ge(k.target.value),placeholder:"Ej: Coloca [Objeto 1] en un paisaje similar a [Aadido A]",className:"w-full h-24 p-2 bg-[--bg-tertiary] text-[--text-primary] text-sm rounded-md resize-none",disabled:_})]}),a.jsxs("div",{className:"flex items-center justify-between py-1",children:[a.jsx("label",{htmlFor:"add-to-library-toggle-free",className:"text-xs font-bold text-[--text-secondary]",children:"Aadir a la Librera"}),a.jsx("button",{id:"add-to-library-toggle-free",role:"switch","aria-checked":ne,onClick:()=>we(k=>!k),className:`relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[--accent-primary] focus:ring-offset-[--bg-primary] ${ne?"bg-[--accent-primary]":"bg-[--bg-tertiary]"}`,disabled:_,children:a.jsx("span",{className:`inline-block w-4 h-4 transform bg-white rounded-full transition-transform ${ne?"translate-x-6":"translate-x-1"}`})})]}),a.jsxs("div",{className:"flex items-center justify-between py-1",children:[a.jsx("label",{htmlFor:"chroma-key-toggle-free",className:"text-xs font-bold text-[--text-secondary]",children:"Forzar Fondo Chroma"}),a.jsx("button",{id:"chroma-key-toggle-free",role:"switch","aria-checked":W,onClick:()=>le(k=>!k),className:`relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[--accent-primary] focus:ring-offset-[--bg-primary] ${W?"bg-[--accent-primary]":"bg-[--bg-tertiary]"}`,disabled:_,children:a.jsx("span",{className:`inline-block w-4 h-4 transform bg-white rounded-full transition-transform ${W?"translate-x-6":"translate-x-1"}`})})]}),a.jsx("button",{onClick:()=>j({activeAiTab:It,freeFormPrompt:O,freeFormSlots:Se,addEnhancedImageToLibrary:ne,enhancementChromaKey:W?me:"none"}),disabled:!O.trim()||_,className:"w-full bg-[--accent-primary] hover:bg-[--accent-hover] text-white font-bold py-2 px-4 rounded-md disabled:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed mt-2",children:_?"Generando...":"Generar"})]}),G&&a.jsxs(rn,{title:"Debug Preview",defaultOpen:!0,children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-bold text-[--text-secondary] block mb-1",children:"Prompt Final Enviada"}),a.jsx("pre",{className:"text-xs p-2 bg-[--bg-tertiary] rounded-md whitespace-pre-wrap font-sans",children:G.prompt})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-bold text-[--text-secondary] block mb-1",children:"Imgenes Enviadas"}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:G.images.map((k,V)=>a.jsxs("div",{className:"bg-[--bg-tertiary] p-1 rounded-md text-center",children:[a.jsx("img",{src:k.url,alt:k.name,className:"max-w-full max-h-24 object-contain mx-auto"}),a.jsx("span",{className:"text-xs text-[--text-secondary] mt-1 block",children:k.name})]},V))})]})]})]});case"brush":return a.jsxs("div",{className:"max-h-[calc(100vh-80px)] overflow-y-auto",children:[a.jsx("div",{className:"p-4 space-y-3 bg-[--bg-secondary] sticky top-0 z-10 border-b border-[--bg-tertiary]",children:a.jsx("h4",{className:"text-sm font-bold uppercase text-[--text-secondary]",children:"Rapidograph Solido"})}),a.jsxs(rn,{title:"General",defaultOpen:!0,children:[a.jsxs("div",{children:[a.jsxs("label",{className:"text-xs text-[--text-secondary] block mb-1",children:["Tamao: ",n.size,"px"]}),a.jsx("input",{type:"range",min:"1",max:"200",value:n.size,onChange:k=>o(V=>({...V,size:parseInt(k.target.value)})),className:"w-full"})]}),a.jsx("div",{className:"pt-2",children:a.jsx("div",{className:"grid grid-cols-3 gap-2",children:[1,3,5,10,20,40].map(k=>a.jsxs("button",{onClick:()=>o(V=>({...V,size:k})),className:`text-xs p-2 rounded ${n.size===k?"bg-[--accent-hover] text-white":"bg-[--bg-tertiary] hover:bg-[--bg-hover]"}`,children:[k,"px"]},k))})}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[--text-secondary] block mb-1",children:"Color"}),a.jsx("input",{type:"color",value:n.color,onChange:k=>o(V=>({...V,color:k.target.value})),className:"w-full h-8 p-0.5 bg-[--bg-tertiary] border border-[--bg-hover] rounded-md cursor-pointer"})]})]}),a.jsx(rn,{title:"Dinmica de Presin",children:a.jsxs("div",{className:"flex items-center justify-between py-1",children:[a.jsx("label",{htmlFor:"pressure-size-brush",className:"text-xs text-[--text-secondary]",children:"Controlar Tamao"}),a.jsx("input",{id:"pressure-size-brush",type:"checkbox",checked:n.pressureControl.size,onChange:k=>o(V=>({...V,pressureControl:{...V.pressureControl,size:k.target.checked}})),className:"w-4 h-4 text-[--accent-primary] bg-[--bg-tertiary] border-[--bg-hover] rounded focus:ring-[--accent-primary]"})]})})]});case"simple-marker":return a.jsxs("div",{className:"max-h-[calc(100vh-80px)] overflow-y-auto",children:[a.jsx("div",{className:"p-4 space-y-3 bg-[--bg-secondary] sticky top-0 z-10 border-b border-[--bg-tertiary]",children:a.jsx("h4",{className:"text-sm font-bold uppercase text-[--text-secondary]",children:"Marcador"})}),a.jsxs(rn,{title:"General",defaultOpen:!0,children:[a.jsxs("div",{children:[a.jsxs("label",{className:"text-xs text-[--text-secondary] block mb-1",children:["Tamao: ",i.size,"px"]}),a.jsx("input",{type:"range",min:"1",max:"200",value:i.size,onChange:k=>r(V=>({...V,size:parseInt(k.target.value)})),className:"w-full"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-xs text-[--text-secondary] block mb-1",children:["Opacidad: ",Math.round(i.opacity*100),"%"]}),a.jsx("input",{type:"range",min:"1",max:"100",value:i.opacity*100,onChange:k=>r(V=>({...V,opacity:parseInt(k.target.value)/100})),className:"w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[--text-secondary] block mb-1",children:"Color"}),a.jsx("input",{type:"color",value:i.color,onChange:k=>r(V=>({...V,color:k.target.value})),className:"w-full h-8 p-0.5 bg-[--bg-tertiary] border border-[--bg-hover] rounded-md cursor-pointer"})]}),a.jsx(zi,{value:i.blendMode,onChange:k=>r(V=>({...V,blendMode:k}))})]}),a.jsx(rn,{title:"Punta",children:a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[--text-secondary] block mb-1",children:"Forma de la punta"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>r(k=>({...k,tipShape:"square"})),className:`flex-1 text-xs p-2 rounded ${i.tipShape==="square"?"bg-[--accent-hover] text-white":"bg-[--bg-tertiary] hover:bg-[--bg-hover]"}`,children:"Cuadrada"}),a.jsx("button",{onClick:()=>r(k=>({...k,tipShape:"line"})),className:`flex-1 text-xs p-2 rounded ${i.tipShape==="line"?"bg-[--accent-hover] text-white":"bg-[--bg-tertiary] hover:bg-[--bg-hover]"}`,children:"Lnea"}),a.jsx("button",{onClick:()=>r(k=>({...k,tipShape:"circle"})),className:`flex-1 text-xs p-2 rounded ${i.tipShape==="circle"?"bg-[--accent-hover] text-white":"bg-[--bg-tertiary] hover:bg-[--bg-hover]"}`,children:"Redonda"})]})]})}),a.jsx(rn,{title:"Dinmica de Presin",children:a.jsxs("div",{className:"flex items-center justify-between py-1",children:[a.jsx("label",{htmlFor:"pressure-opacity-marker",className:"text-xs text-[--text-secondary]",children:"Controlar Opacidad"}),a.jsx("input",{id:"pressure-opacity-marker",type:"checkbox",checked:i.pressureControl.opacity,onChange:k=>r(V=>({...V,pressureControl:{...V.pressureControl,opacity:k.target.checked}})),className:"w-4 h-4 text-[--accent-primary] bg-[--bg-tertiary] border-[--bg-hover] rounded focus:ring-[--accent-primary]"})]})})]});case"advanced-marker":return a.jsxs("div",{className:"max-h-[calc(100vh-80px)] overflow-y-auto",children:[a.jsx("div",{className:"p-4 space-y-3 bg-[--bg-secondary] sticky top-0 z-10 border-b border-[--bg-tertiary]",children:a.jsx("h4",{className:"text-sm font-bold uppercase text-[--text-secondary]",children:"Lpiz de color"})}),a.jsxs(rn,{title:"General",defaultOpen:!0,children:[a.jsxs("div",{children:[a.jsxs("label",{className:"text-xs text-[--text-secondary] block mb-1",children:["Tamao: ",E.size,"px"]}),a.jsx("input",{type:"range",min:"1",max:"300",value:E.size,onChange:k=>T(V=>({...V,size:parseInt(k.target.value)})),className:"w-full"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-xs text-[--text-secondary] block mb-1",children:["Flujo: ",E.flow,"%"]}),a.jsx("input",{type:"range",min:"1",max:"100",value:E.flow,onChange:k=>T(V=>({...V,flow:parseInt(k.target.value)})),className:"w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[--text-secondary] block mb-1",children:"Color"}),a.jsx("input",{type:"color",value:E.color,onChange:k=>T(V=>({...V,color:k.target.value})),className:"w-full h-8 p-0.5 bg-[--bg-tertiary] border border-[--bg-hover] rounded-md cursor-pointer"})]}),a.jsx(zi,{value:E.blendMode,onChange:k=>T(V=>({...V,blendMode:k}))})]}),a.jsxs(rn,{title:"Punta",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"text-xs text-[--text-secondary] block mb-1",children:["Dureza: ",E.hardness,"%"]}),a.jsx("input",{type:"range",min:"0",max:"100",value:E.hardness,onChange:k=>T(V=>({...V,hardness:parseInt(k.target.value)})),className:"w-full"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-xs text-[--text-secondary] block mb-1",children:["Espaciado: ",E.spacing,"%"]}),a.jsx("input",{type:"range",min:"1",max:"100",value:E.spacing,onChange:k=>T(V=>({...V,spacing:parseInt(k.target.value)})),className:"w-full"})]})]}),a.jsxs(rn,{title:"Dinmica de Presin",children:[a.jsxs("div",{className:"flex items-center justify-between py-1",children:[a.jsx("label",{htmlFor:"pressure-size-adv",className:"text-xs text-[--text-secondary]",children:"Controlar Tamao"}),a.jsx("input",{id:"pressure-size-adv",type:"checkbox",checked:E.pressureControl.size,onChange:k=>T(V=>({...V,pressureControl:{...V.pressureControl,size:k.target.checked}})),className:"w-4 h-4 text-[--accent-primary] bg-[--bg-tertiary] border-[--bg-hover] rounded focus:ring-[--accent-primary]"})]}),a.jsxs("div",{className:"flex items-center justify-between py-1",children:[a.jsx("label",{htmlFor:"pressure-flow-adv",className:"text-xs text-[--text-secondary]",children:"Controlar Flujo"}),a.jsx("input",{id:"pressure-flow-adv",type:"checkbox",checked:E.pressureControl.flow,onChange:k=>T(V=>({...V,pressureControl:{...V.pressureControl,flow:k.target.checked}})),className:"w-4 h-4 text-[--accent-primary] bg-[--bg-tertiary] border-[--bg-hover] rounded focus:ring-[--accent-primary]"})]})]})]});case"watercolor":return a.jsxs("div",{className:"max-h-[calc(100vh-80px)] overflow-y-auto",children:[a.jsx("div",{className:"p-4 space-y-3 bg-[--bg-secondary] sticky top-0 z-10 border-b border-[--bg-tertiary]",children:a.jsx("h4",{className:"text-sm font-bold uppercase text-[--text-secondary]",children:"Acuarela"})}),a.jsxs(rn,{title:"General",defaultOpen:!0,children:[a.jsxs("div",{children:[a.jsxs("label",{className:"text-xs text-[--text-secondary] block mb-1",children:["Tamao: ",M.size,"px"]}),a.jsx("input",{type:"range",min:"1",max:"300",value:M.size,onChange:k=>y(V=>({...V,size:parseInt(k.target.value)})),className:"w-full"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-xs text-[--text-secondary] block mb-1",children:["Flujo (Densidad): ",M.flow,"%"]}),a.jsx("input",{type:"range",min:"1",max:"100",value:M.flow,onChange:k=>y(V=>({...V,flow:parseInt(k.target.value)})),className:"w-full"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-xs text-[--text-secondary] block mb-1",children:["Humedad (Opacidad por dab): ",M.wetness,"%"]}),a.jsx("input",{type:"range",min:"1",max:"100",value:M.wetness,onChange:k=>y(V=>({...V,wetness:parseInt(k.target.value)})),className:"w-full"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-xs text-[--text-secondary] block mb-1",children:["Opacidad (General): ",Math.round(M.opacity*100),"%"]}),a.jsx("input",{type:"range",min:"0",max:"100",value:M.opacity*100,onChange:k=>y(V=>({...V,opacity:parseInt(k.target.value)/100})),className:"w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[--text-secondary] block mb-1",children:"Color"}),a.jsx("input",{type:"color",value:M.color,onChange:k=>y(V=>({...V,color:k.target.value})),className:"w-full h-8 p-0.5 bg-[--bg-tertiary] border border-[--bg-hover] rounded-md cursor-pointer"})]})]}),a.jsxs(rn,{title:"Dinmica de Presin",children:[a.jsxs("div",{className:"flex items-center justify-between py-1",children:[a.jsx("label",{htmlFor:"pressure-size-wc",className:"text-xs text-[--text-secondary]",children:"Controlar Tamao"}),a.jsx("input",{id:"pressure-size-wc",type:"checkbox",checked:M.pressureControl.size,onChange:k=>y(V=>({...V,pressureControl:{...V.pressureControl,size:k.target.checked}})),className:"w-4 h-4 text-[--accent-primary] bg-[--bg-tertiary] border-[--bg-hover] rounded focus:ring-[--accent-primary]"})]}),a.jsxs("div",{className:"flex items-center justify-between py-1",children:[a.jsx("label",{htmlFor:"pressure-flow-wc",className:"text-xs text-[--text-secondary]",children:"Controlar Flujo"}),a.jsx("input",{id:"pressure-flow-wc",type:"checkbox",checked:M.pressureControl.flow,onChange:k=>y(V=>({...V,pressureControl:{...V.pressureControl,flow:k.target.checked}})),className:"w-4 h-4 text-[--accent-primary] bg-[--bg-tertiary] border-[--bg-hover] rounded focus:ring-[--accent-primary]"})]}),a.jsxs("div",{className:"flex items-center justify-between py-1",children:[a.jsx("label",{htmlFor:"pressure-opacity-wc",className:"text-xs text-[--text-secondary]",children:"Controlar Opacidad"}),a.jsx("input",{id:"pressure-opacity-wc",type:"checkbox",checked:M.pressureControl.opacity,onChange:k=>y(V=>({...V,pressureControl:{...V.pressureControl,opacity:k.target.checked}})),className:"w-4 h-4 text-[--accent-primary] bg-[--bg-tertiary] border-[--bg-hover] rounded focus:ring-[--accent-primary]"})]})]})]});case"natural-marker":return a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsx("h4",{className:"text-sm font-bold uppercase text-[--text-secondary]",children:"Marcador Natural"}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-xs text-[--text-secondary] block mb-1",children:["Tamao: ",u.size,"px"]}),a.jsx("input",{type:"range",min:"1",max:"200",value:u.size,onChange:k=>f(V=>({...V,size:parseInt(k.target.value)})),className:"w-full"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-xs text-[--text-secondary] block mb-1",children:["Opacidad: ",Math.round(u.opacity*100),"%"]}),a.jsx("input",{type:"range",min:"1",max:"100",value:u.opacity*100,onChange:k=>f(V=>({...V,opacity:parseInt(k.target.value)/100})),className:"w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[--text-secondary] block mb-1",children:"Color"}),a.jsx("input",{type:"color",value:u.color,onChange:k=>f(V=>({...V,color:k.target.value})),className:"w-full h-8 p-0.5 bg-[--bg-tertiary] border border-[--bg-hover] rounded-md cursor-pointer"})]})]});case"airbrush":return a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsx("h4",{className:"text-sm font-bold uppercase text-[--text-secondary]",children:"Aergrafo"}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-xs text-[--text-secondary] block mb-1",children:["Tamao: ",h.size,"px"]}),a.jsx("input",{type:"range",min:"1",max:"500",value:h.size,onChange:k=>p(V=>({...V,size:parseInt(k.target.value)})),className:"w-full"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-xs text-[--text-secondary] block mb-1",children:["Flujo: ",Math.round(h.flow*100),"%"]}),a.jsx("input",{type:"range",min:"1",max:"100",value:h.flow*100,onChange:k=>p(V=>({...V,flow:parseInt(k.target.value)/100})),className:"w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[--text-secondary] block mb-1",children:"Color"}),a.jsx("input",{type:"color",value:h.color,onChange:k=>p(V=>({...V,color:k.target.value})),className:"w-full h-8 p-0.5 bg-[--bg-tertiary] border border-[--bg-hover] rounded-md cursor-pointer"})]})]});case"fx-brush":return a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsx("h4",{className:"text-sm font-bold uppercase text-[--text-secondary]",children:"Pincel de Efectos"}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[--text-secondary] block mb-1",children:"Preset"}),a.jsxs("select",{value:m.presetId||"",onChange:k=>g(V=>({...V,presetId:k.target.value||null})),className:"w-full bg-[--bg-tertiary] text-[--text-primary] text-xs rounded-md p-2",children:[a.jsx("option",{value:"",children:"Ninguno"}),X.map(k=>a.jsx("option",{value:k.id,children:k.name},k.id))]})]})]});case"eraser":return a.jsxs("div",{className:"max-h-[calc(100vh-80px)] overflow-y-auto",children:[a.jsx("div",{className:"p-4 space-y-3 bg-[--bg-secondary] sticky top-0 z-10 border-b border-[--bg-tertiary]",children:a.jsx("h4",{className:"text-sm font-bold uppercase text-[--text-secondary]",children:"Goma de Borrar"})}),a.jsxs(rn,{title:"General",defaultOpen:!0,children:[a.jsxs("div",{children:[a.jsxs("label",{className:"text-xs text-[--text-secondary] block mb-1",children:["Tamao: ",l.size,"px"]}),a.jsx("input",{type:"range",min:"1",max:"500",value:l.size,onChange:k=>s(V=>({...V,size:parseInt(k.target.value)})),className:"w-full"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-xs text-[--text-secondary] block mb-1",children:["Opacidad: ",Math.round(l.opacity*100),"%"]}),a.jsx("input",{type:"range",min:"1",max:"100",value:l.opacity*100,onChange:k=>s(V=>({...V,opacity:parseInt(k.target.value)/100})),className:"w-full"})]})]}),a.jsxs(rn,{title:"Punta",defaultOpen:!0,children:[a.jsxs("div",{children:[a.jsxs("label",{className:"text-xs text-[--text-secondary] block mb-1",children:["Dureza: ",l.hardness,"%"]}),a.jsx("input",{type:"range",min:"0",max:"100",value:l.hardness,onChange:k=>s(V=>({...V,hardness:parseInt(k.target.value)})),className:"w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[--text-secondary] block mb-1",children:"Forma"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsx("button",{onClick:()=>s(k=>({...k,tipShape:"round"})),className:`text-xs p-2 rounded ${l.tipShape==="round"?"bg-[--accent-hover] text-white":"bg-[--bg-tertiary] hover:bg-[--bg-hover]"}`,children:"Redonda"}),a.jsx("button",{onClick:()=>s(k=>({...k,tipShape:"square"})),className:`text-xs p-2 rounded ${l.tipShape==="square"?"bg-[--accent-hover] text-white":"bg-[--bg-tertiary] hover:bg-[--bg-hover]"}`,children:"Cuadrada"})]})]})]})]});default:return null}},Vr={freehand:tm,line:nm,polyline:om,curve:sm,arc:lm}[J],Hr=[{mode:"freehand",label:"A mano alzada",icon:tm},{mode:"line",label:"Lnea (2 Puntos)",icon:nm},{mode:"polyline",label:"Polilnea",icon:om},{mode:"curve",label:"Curva (3 Puntos)",icon:sm},{mode:"arc",label:"Arco (Centro)",icon:lm}],Or={solid:im,dashed:am,dotted:rm,"dash-dot":cm}[q.style],Bi=[{style:"solid",label:"Slido",icon:im},{style:"dashed",label:"Segmentado",icon:am},{style:"dotted",label:"Punteado",icon:rm},{style:"dash-dot",label:"Lnea y punto",icon:cm}],Ao=`p-3 rounded-lg transition-colors ${["brush","simple-marker","eraser","natural-marker","advanced-marker","airbrush","fx-brush","watercolor"].includes(e)?"bg-[--accent-primary] text-white hover:bg-[--accent-hover]":"bg-[--bg-secondary] text-[--text-secondary] hover:bg-[--bg-tertiary]"}`,F=`p-3 rounded-lg transition-colors ${q.style!=="solid"?"bg-[--accent-primary] text-white hover:bg-[--accent-hover]":"bg-[--bg-secondary] text-[--text-secondary] hover:bg-[--bg-tertiary]"}`,xe=["marquee-rect","lasso","magic-wand"],Oe=["brush","simple-marker","natural-marker","advanced-marker","airbrush","fx-brush","watercolor"],Xe=xe.includes(e),Ot=Oe.includes(e),sn=fm[Xe?e:Pe],x0=fm[Ot?e:bt],v0=()=>{if(!pe)return{display:"none"};if(Te)return{position:"absolute",left:`${Te.left}px`,top:`${Te.top}px`,maxHeight:`calc(100vh - ${Te.top+16}px)`};if(!Ue||!tt.current)return{display:"none"};const Z=Ue.getBoundingClientRect(),k=tt.current.getBoundingClientRect();return{position:"absolute",left:`${Z.right-k.left+8}px`,top:`${Z.top-k.top}px`,maxHeight:`calc(100vh - ${Z.top-k.top+16}px)`}};return a.jsxs("div",{ref:tt,className:"relative flex-shrink-0",children:[a.jsxs("div",{className:"bg-[--bg-primary] text-[--text-primary] h-full flex flex-col p-2",children:[a.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[a.jsx("button",{onClick:()=>Kt("select"),className:ln("select"),title:"Seleccionar",children:a.jsx(wr,{className:"w-6 h-6"})}),a.jsx("div",{className:"w-10/12 h-px bg-[--bg-tertiary] my-2 self-center"}),a.jsxs("div",{className:"relative",ref:Ye,children:[a.jsx("button",{onClick:()=>{je(!1),ue(!1),ze(!1),_e(Z=>!Z)},onDoubleClick:Z=>Bn(Xe?e:Pe,Z),className:`p-3 rounded-lg transition-colors ${Xe?"bg-[--accent-primary] text-white":"bg-[--bg-secondary] text-[--text-secondary] hover:bg-[--bg-tertiary]"}`,title:"Herramientas de Seleccin (doble clic para opciones)",children:a.jsx(sn,{className:"w-6 h-6"})}),xt&&a.jsx("div",{className:"absolute left-full top-0 ml-2 bg-[--bg-primary] border border-[--bg-tertiary] rounded-lg shadow-lg w-60 z-20 p-2 space-y-1",children:um.map(({tool:Z,name:k,icon:V})=>a.jsxs("div",{className:`flex items-center justify-between rounded-md text-sm ${e===Z?"bg-[--accent-primary] text-white":"hover:bg-[--bg-tertiary]"}`,children:[a.jsxs("button",{onClick:()=>{Kt(Z),_e(!1)},className:"flex items-center gap-3 p-2 flex-grow text-left",children:[a.jsx(V,{className:"w-5 h-5"}),a.jsx("span",{children:k})]}),a.jsx("button",{onClick:lt=>{To(lt,Z)},className:"p-2 mr-1 rounded-full hover:bg-black/10 flex-shrink-0",title:"Configuracin de la herramienta",children:a.jsx(Ou,{className:"w-4 h-4"})})]},Z))})]}),a.jsxs("div",{className:"relative",ref:ve,children:[a.jsx("button",{onClick:()=>{ze(!1),_e(!1),je(!1),ue(Z=>!Z)},className:Ao,title:`Modo de Trazo: ${J} (clic para cambiar)`,children:a.jsx(Vr,{className:"w-6 h-6"})}),oe&&a.jsxs("div",{className:"absolute left-full top-0 ml-2 bg-[--bg-primary] border border-[--bg-tertiary] rounded-lg shadow-lg w-60 z-20 p-2 space-y-1",children:[a.jsx("h4",{className:"px-2 pb-1 text-sm font-bold uppercase text-[--text-secondary]",children:"Modos de Trazo"}),Hr.map(({mode:Z,label:k,icon:V})=>a.jsxs("button",{onClick:()=>{P(Z),ue(!1)},className:`w-full flex items-center gap-3 p-2 rounded-md text-sm ${J===Z?"bg-[--accent-primary] text-white":"hover:bg-[--bg-tertiary]"}`,children:[a.jsx(V,{className:"w-5 h-5"}),a.jsx("span",{children:k})]},Z))]})]}),a.jsxs("div",{className:"relative",ref:at,children:[a.jsx("button",{onClick:()=>{ue(!1),_e(!1),je(!1),ze(Z=>!Z)},className:F,title:`Estilo de Trazo: ${q.style} (clic para cambiar)`,children:a.jsx(Or,{className:"w-6 h-6"})}),Ce&&a.jsxs("div",{className:"absolute left-full top-0 ml-2 bg-[--bg-primary] border border-[--bg-tertiary] rounded-lg shadow-lg w-60 z-20 p-2 space-y-2",children:[a.jsx("h4",{className:"px-2 pb-1 text-sm font-bold uppercase text-[--text-secondary]",children:"Estilo de Trazo"}),a.jsx("div",{className:"space-y-1",children:Bi.map(({style:Z,label:k,icon:V})=>a.jsxs("button",{onClick:()=>{Q(lt=>({...lt,style:Z}))},className:`w-full flex items-center gap-3 p-2 rounded-md text-sm ${q.style===Z?"bg-[--accent-primary] text-white":"hover:bg-[--bg-tertiary]"}`,children:[a.jsx(V,{className:"w-5 h-5"}),a.jsx("span",{children:k})]},Z))}),a.jsxs("div",{className:"border-t border-[--bg-tertiary] pt-2 mt-2",children:[a.jsxs("label",{className:"px-2 text-xs font-bold text-[--text-secondary]",children:["Escala del Patrn: ",q.scale.toFixed(1)]}),a.jsx("input",{type:"range",min:"0.5",max:"10",step:"0.5",value:q.scale,onChange:Z=>Q(k=>({...k,scale:parseFloat(Z.target.value)})),className:"w-full mt-1",disabled:q.style==="solid"})]})]})]}),a.jsx("div",{className:"w-10/12 h-px bg-[--bg-tertiary] my-2 self-center"}),a.jsxs("div",{className:"relative",ref:wt,children:[a.jsx("button",{onClick:()=>{_e(!1),ue(!1),ze(!1),je(Z=>!Z)},onDoubleClick:Z=>Bn(Ot?e:bt,Z),className:`p-3 rounded-lg transition-colors ${Ot?"bg-[--accent-primary] text-white":"bg-[--bg-secondary] text-[--text-secondary] hover:bg-[--bg-tertiary]"}`,title:"Herramientas de Dibujo (doble clic para opciones)",children:a.jsx(x0,{className:"w-6 h-6"})}),de&&a.jsx("div",{className:"absolute left-full top-0 ml-2 bg-[--bg-primary] border border-[--bg-tertiary] rounded-lg shadow-lg w-60 z-20 p-2 space-y-1",children:dm.map(({tool:Z,name:k,icon:V})=>a.jsxs("div",{className:`flex items-center justify-between rounded-md text-sm ${e===Z?"bg-[--accent-primary] text-white":"hover:bg-[--bg-tertiary]"}`,children:[a.jsxs("button",{onClick:()=>{Kt(Z),je(!1)},className:"flex items-center gap-3 p-2 flex-grow text-left",children:[a.jsx(V,{className:"w-5 h-5"}),a.jsx("span",{children:k})]}),a.jsx("button",{onClick:lt=>{To(lt,Z)},className:"p-2 mr-1 rounded-full hover:bg-black/10 flex-shrink-0",title:"Configuracin de la herramienta",children:a.jsx(Ou,{className:"w-4 h-4"})})]},Z))})]}),a.jsx("button",{onClick:()=>Kt("eraser"),onDoubleClick:Z=>Bn("eraser",Z),className:ln("eraser"),title:"Goma de Borrar (doble clic para opciones)",children:a.jsx(ji,{className:"w-6 h-6"})}),a.jsx("div",{className:"w-10/12 h-px bg-[--bg-tertiary] my-2 self-center"}),a.jsx("button",{onClick:()=>Kt("text"),onDoubleClick:Z=>Bn("text",Z),className:ln("text"),title:"Texto (doble clic para opciones)",children:a.jsx(Ar,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"w-10/12 h-px bg-[--bg-tertiary] my-2 self-center"}),a.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[a.jsx("button",{onClick:()=>A("ruler"),className:`p-3 rounded-lg transition-colors ${L==="ruler"?"bg-[--accent-primary] text-white":"bg-[--bg-secondary] text-[--text-secondary] hover:bg-[--bg-tertiary]"}`,title:"Gua de Regla",children:a.jsx(Tw,{className:"w-6 h-6"})}),a.jsx("button",{onClick:()=>A("perspective"),className:`p-3 rounded-lg transition-colors ${L==="perspective"?"bg-[--accent-primary] text-white":"bg-[--bg-secondary] text-[--text-secondary] hover:bg-[--bg-tertiary]"}`,title:"Gua de Perspectiva",children:a.jsx(ww,{className:"w-6 h-6"})}),a.jsx("button",{onClick:I,className:`p-3 rounded-lg transition-colors ${b?"bg-[--accent-primary] text-white":"bg-[--bg-secondary] text-[--text-secondary] hover:bg-[--bg-tertiary]"}`,title:"Gua Ortogonal",children:a.jsx(Nw,{className:"w-6 h-6"})}),a.jsx("button",{onClick:()=>A("mirror"),className:`p-3 rounded-lg transition-colors ${L==="mirror"?"bg-[--accent-primary] text-white":"bg-[--bg-secondary] text-[--text-secondary] hover:bg-[--bg-tertiary]"}`,title:"Gua de Espejo",children:a.jsx(Aw,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"w-10/12 h-px bg-[--bg-tertiary] my-2 self-center"}),a.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[a.jsx("button",{onClick:()=>Kt("transform"),className:ln("transform"),title:"Transformar (Escalar/Rotar)",children:a.jsx(Dr,{className:"w-6 h-6"})}),a.jsx("button",{onClick:()=>Kt("free-transform"),className:ln("free-transform"),title:"Transformacin Libre (Distorsionar)",children:a.jsx(Lr,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"w-10/12 h-px bg-[--bg-tertiary] my-2 self-center"}),a.jsx("div",{className:"flex flex-col items-center space-y-2",children:a.jsx("button",{onClick:()=>Kt("enhance"),onDoubleClick:Z=>Bn("enhance",Z),className:ln("enhance"),title:"Mejora con IA (doble clic para opciones)",children:a.jsx(_r,{className:"w-6 h-6"})})}),a.jsxs("div",{className:"mt-auto flex flex-col items-center space-y-2",children:[a.jsx("button",{onClick:()=>Kt("crop"),className:ln("crop"),title:"Recortar",children:a.jsx(kr,{className:"w-6 h-6"})}),a.jsx("button",{onClick:w,className:"p-3 rounded-lg bg-[--bg-secondary] text-[--text-secondary] hover:bg-[--bg-tertiary]",title:"Exportar Imagen",children:a.jsx(a0,{className:"w-6 h-6"})})]})]}),pe&&pe!=="enhance"&&a.jsx("div",{ref:He,className:"bg-[--bg-primary] border border-[--bg-tertiary] rounded-lg shadow-lg w-80 z-20 overflow-y-auto",style:v0(),children:Pi(pe)}),pe==="enhance"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:()=>{ie(null),Ee(null)}}),a.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 pointer-events-none",children:a.jsxs("div",{ref:He,className:"bg-[--bg-primary] border border-[--bg-tertiary] rounded-lg shadow-lg w-[500px] max-h-[90vh] flex flex-col pointer-events-auto",children:[a.jsxs("div",{className:"flex-shrink-0 p-4 border-b border-[--bg-tertiary] flex justify-between items-center",children:[a.jsx("h4",{className:"text-sm font-bold uppercase text-[--text-secondary]",children:"Mejora con IA"}),a.jsx("button",{onClick:()=>{ie(null),Ee(null)},className:"p-1 rounded-full hover:bg-[--bg-hover]",children:a.jsx(Xn,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"flex-grow overflow-y-auto p-4",children:Pi(pe)})]})})]}),Pt.openFor&&Pt.anchorEl&&a.jsx("div",{ref:sl,className:"absolute z-30 bg-[--bg-secondary] border border-[--bg-tertiary] rounded-lg shadow-lg w-64 max-h-60 overflow-y-auto",style:{left:Pt.anchorEl.getBoundingClientRect().right+8,top:Pt.anchorEl.getBoundingClientRect().top},children:a.jsx("ul",{className:"p-1",children:dt[Pt.openFor].length>0?dt[Pt.openFor].map((Z,k)=>a.jsxs("li",{className:"group flex items-center justify-between text-sm text-[--text-primary] rounded-md hover:bg-[--bg-hover]",children:[a.jsx("button",{onClick:()=>Gr(Pt.openFor,Z),className:"flex-grow text-left p-2 truncate",children:Z}),a.jsx("button",{onClick:()=>qr(Pt.openFor,Z),className:"p-2 text-[--text-secondary] opacity-0 group-hover:opacity-100 hover:text-red-500",children:a.jsx(Sl,{className:"w-4 h-4"})})]},k)):a.jsx("li",{className:"p-2 text-center text-xs text-[--text-secondary]",children:"No hay prompts guardados."})})})]})},Xw=({items:e,activeItemId:t,onAddItem:n,onCopyItem:o,onDeleteItem:l,onSelectItem:s,onUpdateItem:i,onMoveItem:r,onMergeItems:u,onUpdateBackground:f,onRemoveBackgroundImage:h,onExportItem:p,onOpenCanvasSizeModal:m,activeItemState:g,onMoveItemUpDown:E,onMergeItemDown:T,onMergeItemUp:M,onAddObjectAbove:y,onAddObjectBelow:x})=>{const[v,S]=C.useState(!1),N=C.useRef(null),[L,A]=C.useState(null),b=e.find(U=>U.type==="object"&&U.isBackground),I=!!((b==null?void 0:b.type)==="object"&&b.backgroundImage);C.useEffect(()=>{const U=G=>{N.current&&!N.current.contains(G.target)&&S(!1)};return document.addEventListener("mousedown",U),()=>{document.removeEventListener("mousedown",U)}},[]);const w=U=>{U.target.files&&U.target.files[0]&&(f({file:U.target.files[0]}),U.target.value="")},j=(U,G)=>{U.stopPropagation(),U.dataTransfer.effectAllowed="copyMove",U.dataTransfer.setData("application/json",JSON.stringify({type:"outliner-item",id:G.id}))},_=(U,G)=>{U.preventDefault(),U.stopPropagation();const J=U.currentTarget.getBoundingClientRect(),P=U.clientY-J.top,q=J.height;let Q;if(!U.dataTransfer.types.find(pe=>pe==="application/json"))return;const he=!0;if(G.type==="group"||G.type==="object"&&he){const pe=q*.25;P<pe?Q="top":P>q-pe?Q="bottom":Q="middle"}else Q=P<q/2?"top":"bottom";A({id:G.id,position:Q})},R=U=>{U.stopPropagation(),A(null)},H=(U,G)=>{U.preventDefault(),U.stopPropagation(),A(null);try{const J=JSON.parse(U.dataTransfer.getData("application/json"));if(J.type!=="outliner-item"||!J.id)return;const P=J.id;L&&L.id===G.id&&(L.position==="middle"&&G.type==="object"?u(P,G.id):r(P,G.id,L.position))}catch{}},ee=(U,G)=>{if(U.type==="object"&&U.isBackground)return null;const J=U.type==="group",P=U.type==="object",q=t===U.id,Q=(L==null?void 0:L.id)===U.id,X=L==null?void 0:L.position,he=P&&Q&&X==="middle",pe=()=>Q&&X==="middle"&&P?"bg-red-700":q?"bg-[--accent-hover]":"bg-[--bg-secondary] hover:bg-[--bg-tertiary]";return a.jsxs("div",{draggable:!(U.type==="object"&&U.isBackground),onDragStart:ie=>j(ie,U),onDragOver:ie=>_(ie,U),onDragLeave:R,onDrop:ie=>H(ie,U),onClick:()=>s(U.id),className:`group relative p-2 rounded-lg transition-colors duration-100 ${pe()}`,style:{marginLeft:`${G*16}px`},children:[Q&&X==="top"&&a.jsx("div",{className:"absolute top-0 left-0 right-0 h-0.5 bg-[--accent-primary] z-10"}),Q&&X==="bottom"&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[--accent-primary] z-10"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center flex-grow min-w-0",children:[a.jsx("span",{className:"flex-shrink-0 cursor-grab text-[--text-secondary] hover:text-[--text-primary] mr-2",children:a.jsx(Ou,{className:"w-5 h-5"})}),J&&a.jsx(Ca,{className:"w-4 h-4 mr-2 text-red-400 flex-shrink-0"}),he&&a.jsx(Zp,{className:"w-4 h-4 mr-2 text-red-400"}),a.jsx("input",{type:"text",value:U.name,onClick:ie=>ie.stopPropagation(),onDragStart:ie=>ie.stopPropagation(),onChange:ie=>i(U.id,{name:ie.target.value}),className:"bg-transparent text-sm w-full outline-none pointer-events-auto truncate"})]}),a.jsxs("div",{className:"flex items-center space-x-2 ml-2 flex-shrink-0",children:[a.jsx("button",{onClick:ie=>{ie.stopPropagation(),i(U.id,{isVisible:!U.isVisible})},className:"p-1",children:U.isVisible?a.jsx(Xp,{className:"w-4 h-4"}):a.jsx($p,{className:"w-4 h-4 text-gray-500"})}),!(U.type==="object"&&U.isBackground)&&a.jsx("button",{onClick:ie=>{ie.stopPropagation(),l(U.id)},className:"p-1 text-[--text-secondary] hover:text-red-500",children:a.jsx(Sl,{className:"w-4 h-4"})})]})]}),q&&U.type==="object"&&a.jsxs("div",{className:"mt-2 space-y-2",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:`opacity-${U.id}`,className:"text-xs text-[--text-secondary]",children:"Opacidad"}),a.jsx("input",{id:`opacity-${U.id}`,type:"range",min:"0",max:"100",value:U.opacity*100,onClick:ie=>ie.stopPropagation(),onChange:ie=>i(U.id,{opacity:parseInt(ie.target.value,10)/100}),className:"w-full h-1 bg-[--bg-tertiary] rounded-lg appearance-none cursor-pointer"})]}),a.jsxs("div",{className:"flex items-center flex-wrap gap-1 border-t border-[--bg-tertiary] pt-2",children:[a.jsx("button",{onClick:ie=>{ie.stopPropagation(),E(U.id,"up")},disabled:!g.canMoveUp,className:"p-1 rounded bg-[--bg-tertiary] hover:bg-[--bg-hover] disabled:opacity-50 disabled:cursor-not-allowed",title:"Mover arriba",children:a.jsx(f0,{className:"w-3.5 h-3.5"})}),a.jsx("button",{onClick:ie=>{ie.stopPropagation(),E(U.id,"down")},disabled:!g.canMoveDown,className:"p-1 rounded bg-[--bg-tertiary] hover:bg-[--bg-hover] disabled:opacity-50 disabled:cursor-not-allowed",title:"Mover abajo",children:a.jsx(Uw,{className:"w-3.5 h-3.5"})}),P&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-px h-3.5 bg-[--bg-tertiary] mx-0.5"}),a.jsx("button",{onClick:ie=>{ie.stopPropagation(),y(U.id)},className:"p-1 rounded bg-[--bg-tertiary] hover:bg-[--bg-hover]",title:"Aadir objeto arriba",children:a.jsx(Hw,{className:"w-3.5 h-3.5"})}),a.jsx("button",{onClick:ie=>{ie.stopPropagation(),x(U.id)},className:"p-1 rounded bg-[--bg-tertiary] hover:bg-[--bg-hover]",title:"Aadir objeto abajo",children:a.jsx(Ow,{className:"w-3.5 h-3.5"})}),a.jsx("div",{className:"w-px h-3.5 bg-[--bg-tertiary] mx-0.5"}),a.jsx("button",{onClick:ie=>{ie.stopPropagation(),M(U.id)},disabled:!g.canMergeUp,className:"p-1 rounded bg-[--bg-tertiary] hover:bg-[--bg-hover] disabled:opacity-50 disabled:cursor-not-allowed",title:"Combinar arriba",children:a.jsx(Cw,{className:"w-3.5 h-3.5"})}),a.jsx("button",{onClick:ie=>{ie.stopPropagation(),T(U.id)},disabled:!g.canMergeDown,className:"p-1 rounded bg-[--bg-tertiary] hover:bg-[--bg-hover] disabled:opacity-50 disabled:cursor-not-allowed",title:"Combinar abajo",children:a.jsx(Zp,{className:"w-3.5 h-3.5"})})]})]})]})]},U.id)},z=(U=null,G=0)=>e.filter(J=>J.parentId===U&&!(J.type==="object"&&J.isBackground)).reverse().flatMap(J=>[ee(J,G),...J.type==="group"?z(J.id,G+1):[]]);return a.jsxs("div",{className:"bg-[--bg-primary] text-[--text-primary] p-4 flex flex-col h-full",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(bw,{className:"w-5 h-5 mr-2 text-[--text-secondary]"}),a.jsx("h3",{className:"text-sm font-bold uppercase text-[--text-secondary]",children:"Outliner"})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("button",{onClick:p,disabled:!t||!!e.find(U=>U.id===t&&U.type==="object"&&U.isBackground),className:"p-2 rounded-md hover:bg-[--bg-tertiary] disabled:text-gray-600 disabled:cursor-not-allowed disabled:hover:bg-transparent",title:"Exportar objeto seleccionado",children:a.jsx(a0,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>t&&o(t),disabled:!t||!!e.find(U=>U.id===t&&U.type==="object"&&U.isBackground),className:"p-2 rounded-md hover:bg-[--bg-tertiary] disabled:text-gray-600 disabled:cursor-not-allowed disabled:hover:bg-transparent",title:"Duplicar objeto seleccionado",children:a.jsx(c0,{className:"w-5 h-5"})}),a.jsxs("div",{className:"relative",ref:N,children:[a.jsx("button",{onClick:()=>S(!v),className:"p-2 rounded-md hover:bg-[--bg-tertiary]",children:a.jsx(tr,{className:"w-5 h-5"})}),v&&a.jsxs("div",{className:"absolute right-0 mt-2 w-40 bg-[--bg-tertiary] rounded-md shadow-lg z-10",children:[a.jsx("button",{onClick:()=>{n("group"),S(!1)},className:"block w-full text-left px-4 py-2 text-sm text-[--text-primary] hover:bg-[--bg-hover]",children:"Nueva Carpeta"}),a.jsx("button",{onClick:()=>{n("object"),S(!1)},className:"block w-full text-left px-4 py-2 text-sm text-[--text-primary] hover:bg-[--bg-hover]",children:"Nuevo Objeto"})]})]})]})]}),a.jsx("div",{className:"flex-grow overflow-y-auto space-y-2 pr-2",children:z()}),a.jsxs("div",{className:"flex-shrink-0 border-t border-[--bg-tertiary] mt-4 pt-4",children:[a.jsx("h3",{className:"text-sm font-bold uppercase text-[--text-secondary] mb-3",children:"Canvas"}),a.jsx("div",{className:"space-y-2",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"color",id:"canvas-color",value:(b==null?void 0:b.type)==="object"&&b.color||"#FFFFFF",onChange:U=>f({color:U.target.value}),className:"w-10 h-10 p-0.5 bg-[--bg-tertiary] border border-[--bg-hover] rounded-md cursor-pointer flex-shrink-0",title:"Color de fondo"}),a.jsx("button",{onDoubleClick:m,className:"h-10 px-3 rounded-lg bg-[--bg-tertiary] hover:bg-[--bg-hover] cursor-pointer text-[--text-secondary] text-sm flex-grow",title:"Tamao del lienzo (doble clic)",children:"Personalizado"}),b&&a.jsx("button",{onClick:()=>i(b.id,{isVisible:!b.isVisible}),className:"h-10 w-10 flex-shrink-0 p-2 rounded-lg bg-[--bg-tertiary] hover:bg-[--bg-hover] cursor-pointer text-[--text-secondary]",title:b.isVisible?"Ocultar fondo":"Mostrar fondo",children:b.isVisible?a.jsx(Xp,{className:"w-5 h-5"}):a.jsx($p,{className:"w-5 h-5"})}),a.jsx("label",{htmlFor:"canvas-image-upload",className:"h-10 w-10 flex items-center justify-center p-2 rounded-lg bg-[--bg-tertiary] hover:bg-[--bg-hover] cursor-pointer text-[--text-secondary] flex-shrink-0",title:"Importar imagen de fondo",children:a.jsx(Ir,{className:"w-5 h-5"})}),a.jsx("input",{id:"canvas-image-upload",type:"file",accept:"image/*",className:"hidden",onChange:w}),I&&a.jsx("button",{onClick:h,className:"h-10 w-10 flex-shrink-0 p-2 rounded-lg bg-red-800 hover:bg-red-700 cursor-pointer text-gray-200",title:"Eliminar imagen de fondo",children:a.jsx(Sl,{className:"w-5 h-5"})})]})})]})]})},so=(e,t,n)=>{const o=n.getBoundingClientRect(),l=e.clientX-o.left,s=e.clientY-o.top;return{x:(l-t.pan.x)/t.zoom,y:(s-t.pan.y)/t.zoom}},hm=(e,t,n)=>{const o=l=>`0${Math.round(l).toString(16)}`.slice(-2);return`#${o(e)}${o(t)}${o(n)}`},pm=(e,t,n)=>{const o=n.x-t.x,l=n.y-t.y;if(o===0&&l===0)return t;const s=o*o+l*l,i=((e.x-t.x)*o+(e.y-t.y)*l)/s,r=t.x+i*o,u=t.y+i*l;return{x:r,y:u}},kc=(e,t)=>{const{start:n,end:o}=e,{start:l,end:s}=t,i=(n.x-o.x)*(l.y-s.y)-(n.y-o.y)*(l.x-s.x);if(i===0)return null;const u=((n.x-l.x)*(l.y-s.y)-(n.y-l.y)*(l.x-s.x))/i;return{x:n.x+u*(o.x-n.x),y:n.y+u*(o.y-n.y)}},jn=(e,t,n)=>Math.hypot(e.x-t.x,e.y-t.y)<n,Dc=(e,t,n)=>{const o=(t.x-n.x)**2+(t.y-n.y)**2;if(o===0)return Math.hypot(e.x-t.x,e.y-t.y);let l=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/o;l=Math.max(0,Math.min(1,l));const s={x:t.x+l*(n.x-t.x),y:t.y+l*(n.y-t.y)};return Math.hypot(e.x-s.x,e.y-s.y)},Br=(e,t=1)=>{const n=e.getContext("2d",{willReadFrequently:!0});if(!n)return null;try{const l=n.getImageData(0,0,e.width,e.height).data;let s=e.width,i=e.height,r=-1,u=-1;for(let f=0;f<e.height;f++)for(let h=0;h<e.width;h++)l[(f*e.width+h)*4+3]>=t&&(s=Math.min(s,h),i=Math.min(i,f),r=Math.max(r,h),u=Math.max(u,f));return r===-1?null:{x:s,y:i,width:r-s+1,height:u-i+1}}catch(o){return console.error("Could not get canvas image data, it may be tainted.",o),{x:0,y:0,width:e.width,height:e.height}}},ro=e=>{e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,e.canvas.width,e.canvas.height),e.restore()};function $w(e,t){const n=e.length;for(let l=0;l<n;l++){let s=l;for(let i=l+1;i<n;i++)Math.abs(e[i][l])>Math.abs(e[s][l])&&(s=i);if([e[l],e[s]]=[e[s],e[l]],[t[l],t[s]]=[t[s],t[l]],Math.abs(e[l][l])<=1e-10)return null;for(let i=l+1;i<n;i++){const r=e[i][l]/e[l][l];t[i]-=r*t[l];for(let u=l;u<n;u++)e[i][u]-=r*e[l][u]}}const o=new Array(n);for(let l=n-1;l>=0;l--){let s=0;for(let i=l+1;i<n;i++)s+=e[l][i]*o[i];o[l]=(t[l]-s)/e[l][l]}return o}function p0(e,t){if(e.length!==4||t.length!==4)return null;const n=[];for(let s=0;s<4;s++){const{x:i,y:r}=e[s],{x:u,y:f}=t[s];n.push([i,r,1,0,0,0,-u*i,-u*r]),n.push([0,0,0,i,r,1,-f*i,-f*r])}const o=[];for(const{x:s,y:i}of t)o.push(s,i);const l=$w(n,o);return l?[l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],1]:null}const Kw=(e,t)=>{const n="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)",o=p0(e,t);if(!o)return n;const l=[[o[0],o[1],o[2]],[o[3],o[4],o[5]],[o[6],o[7],1]];return`matrix3d(${[l[0][0],l[1][0],0,l[2][0],l[0][1],l[1][1],0,l[2][1],0,0,1,0,l[0][2],l[1][2],0,1].join(", ")})`},Zw=(e,t)=>{let n=!1;for(let o=0,l=t.length-1;o<t.length;l=o++){const s=t[o].x,i=t[o].y,r=t[l].x,u=t[l].y;i>e.y!=u>e.y&&e.x<(r-s)*(e.y-i)/(u-i)+s&&(n=!n)}return n},ai=e=>{const t=document.createElement("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d",{willReadFrequently:!0});return n&&n.drawImage(e,0,0),t},mm=e=>{const t=document.createElement("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d",{willReadFrequently:!0});if(!n)throw new Error("Failed to get 2D context for cloned canvas");return n.drawImage(e,0,0),{canvas:t,context:n}},cn=(e,t)=>{const n=document.createElement("canvas");n.width=e,n.height=t;const o=n.getContext("2d",{willReadFrequently:!0});if(!o)throw new Error("Failed to get 2D context");return{canvas:n,context:o}},Qw=(e,t,n)=>new Promise((o,l)=>{const s=document.createElement("canvas"),i=s.getContext("2d");if(!i)return l(new Error("Could not create thumbnail context"));const r=e.width/e.height;let u=t,f=u/r;f>n&&(f=n,u=f*r),s.width=u,s.height=f,i.drawImage(e,0,0,e.width,e.height,0,0,u,f),s.toBlob(h=>{h?o(h):l(new Error("Canvas toBlob returned null"))},"image/png",.9)});function gm(e,t,n,o,l,s,i,r,u){if(o<128&&r<128)return!0;if(o<128||r<128)return!1;const f=(u/100*255)**2*3;return(e-l)**2+(t-s)**2+(n-i)**2<=f}function Ww(e,t,n,o,l){const{width:s,height:i,data:r}=e;if(t<0||t>=s||n<0||n>=i)return null;const u=(n*s+t)*4,f=r[u],h=r[u+1],p=r[u+2],m=r[u+3],g=new Uint8Array(s*i);let E=s,T=i,M=-1,y=-1;if(l){if(m<128)return null;const v=[[t,n]];g[n*s+t]=1;let S=0;for(;S<v.length;){const[N,L]=v[S++];E=Math.min(E,N),T=Math.min(T,L),M=Math.max(M,N),y=Math.max(y,L);const A=[[N,L-1],[N+1,L],[N,L+1],[N-1,L]];for(const[b,I]of A)if(b>=0&&b<s&&I>=0&&I<i){const w=I*s+b;if(g[w]===0){const j=w*4;gm(f,h,p,m,r[j],r[j+1],r[j+2],r[j+3],o)&&(g[w]=1,v.push([b,I]))}}}}else for(let v=0;v<i;v++)for(let S=0;S<s;S++){const N=(v*s+S)*4;gm(f,h,p,m,r[N],r[N+1],r[N+2],r[N+3],o)&&(g[v*s+S]=1,E=Math.min(E,S),T=Math.min(T,v),M=Math.max(M,S),y=Math.max(y,v))}if(M===-1)return null;const x=new Path2D;for(let v=0;v<i;v++)for(let S=0;S<s;S++)if(g[v*s+S]===1){let N=S;for(;S+1<s&&g[v*s+(S+1)]===1;)S++;x.rect(N,v,S-N+1,1)}return{path:x,bbox:{x:E,y:T,width:M-E+1,height:y-T+1}}}class Eo{constructor(){this.points=[],this.beforeCanvas=null,this.isDrawing=!1,this.strokeSeed=0,this.smoothing=0,this.lastPreviewPointCount=0}updateSmoothing(t){this.smoothing=t}onPointerDown(t,n){var o;this.strokeSeed=t.x*1337+t.y*31337+Date.now(),this.isDrawing=!0,this.points=[t],this.lastPreviewPointCount=0;try{this.clearPreview(n)}catch{}this.beforeCanvas=document.createElement("canvas"),this.beforeCanvas.width=n.mainCtx.canvas.width,this.beforeCanvas.height=n.mainCtx.canvas.height,(o=this.beforeCanvas.getContext("2d"))==null||o.drawImage(n.mainCtx.canvas,0,0)}onPointerMove(t,n){if(this.isDrawing){if(this.smoothing>0&&this.points.length>0){const o=this.points[this.points.length-1],l={x:o.x+(t.x-o.x)*(1-this.smoothing),y:o.y+(t.y-o.y)*(1-this.smoothing),pressure:t.pressure!==void 0?o.pressure!==void 0?o.pressure+(t.pressure-o.pressure)*(1-this.smoothing):t.pressure:void 0};this.points.push(l)}else this.points.push(t);this.updatePreview(n)}}onPointerUp(t){if(!this.isDrawing||!this.beforeCanvas)return;this.isDrawing=!1;const n=t.mainCtx;this.drawWithMirroring(n,this.points,t),t.onDrawCommit(t.activeItemId,this.beforeCanvas),this.clearPreview(t),this.reset()}onPointerCancel(t){if(t)this.onPointerUp(t);else{if(!this.isDrawing)return;this.isDrawing=!1,this.reset()}}updatePreview(t){const{previewCtx:n,viewTransform:o}=t;if(!n||(this.lastPreviewPointCount===0&&this.clearPreview(t),this.points.length<=this.lastPreviewPointCount))return;const l=Math.max(0,this.lastPreviewPointCount-1),s=this.points.slice(l);n.save(),n.setTransform(o.zoom,0,0,o.zoom,o.pan.x,o.pan.y),this.drawWithMirroring(n,s,t),n.restore(),this.lastPreviewPointCount=this.points.length}clearPreview(t){const{previewCtx:n}=t;ro(n),this.lastPreviewPointCount=0}reset(){this.points=[],this.beforeCanvas=null,this.isDrawing=!1,this.strokeSeed=0}drawWithMirroring(t,n,o){t.save();try{this.drawStroke(t,n,o)}finally{t.restore()}const{activeGuide:l,mirrorGuides:s}=o;l==="mirror"&&s.length>0&&s.forEach(i=>{t.save();try{const[r,u]=[i.start,i.end],f=u.x-r.x,h=u.y-r.y,p=Math.atan2(h,f);t.translate(r.x,r.y),t.rotate(p),t.scale(1,-1),t.rotate(-p),t.translate(-r.x,-r.y),this.drawStroke(t,n,o)}finally{t.restore()}})}}class Wd extends Eo{constructor(t){super(),this.settings=t}updateSettings(t){this.settings=t}drawStroke(t,n,o){const{color:l,lineCap:s,lineJoin:i,opacity:r,size:u,pressureControl:f}=this.settings,{strokeModifier:h}=o;if(t.lineCap=s,t.lineJoin=i,t.globalAlpha=r,t.globalCompositeOperation="source-over",n.length<1)return;t.fillStyle=l;const p=(y,x)=>{const v=x&&f.size?x*u:u;v>.5&&(t.beginPath(),t.arc(y.x,y.y,v/2,0,Math.PI*2),t.fill())},g=((y,x)=>{switch(y){case"dashed":return[10*x,5*x];case"dotted":return[2*x,4*x];case"dash-dot":return[10*x,4*x,2*x,4*x];default:return null}})(h.style,h.scale);if(n.length===1){g||p(n[0],n[0].pressure??1);return}const E=1e3,T=Math.max(1,Math.ceil(n.length/E));g&&t.setLineDash(g),t.strokeStyle=l,t.lineCap=s||"round",t.lineJoin=i||"round",t.lineWidth=u,t.globalAlpha=r,t.beginPath(),t.moveTo(n[0].x,n[0].y);for(let y=T;y<n.length;y+=T){const x=n[y];t.lineTo(x.x,x.y)}const M=n[n.length-1];t.lineTo(M.x,M.y),t.stroke(),g&&t.setLineDash([])}}class eN extends Eo{constructor(t){super(),this.settings=t}updateSettings(t){this.settings=t}updatePreview(t){const{previewCtx:n,mainCtx:o,viewTransform:l}=t;this.clearPreview(t),n.save(),n.setTransform(l.zoom,0,0,l.zoom,l.pan.x,l.pan.y),n.drawImage(o.canvas,0,0),this.drawWithMirroring(n,this.points,t),n.restore()}drawStroke(t,n,o){t.globalCompositeOperation="destination-out";const{size:l,hardness:s,tipShape:i,opacity:r}=this.settings;if(n.length===0)return;const u=h=>{if(t.beginPath(),i==="round"?t.arc(h.x,h.y,l/2,0,Math.PI*2):t.rect(h.x-l/2,h.y-l/2,l,l),s>=100)t.fillStyle=`rgba(0,0,0,${r})`;else{const p=t.createRadialGradient(h.x,h.y,l/2*(s/100),h.x,h.y,l/2);p.addColorStop(0,`rgba(0,0,0,${r})`),p.addColorStop(1,"rgba(0,0,0,0)"),t.fillStyle=p}t.fill()};if(n.length===1){u(n[0]);return}let f=n[0];for(let h=1;h<n.length;h++){const p=n[h],m=Math.hypot(p.x-f.x,p.y-f.y),g=Math.atan2(p.y-f.y,p.x-f.x),E=Math.max(1,l*.1);for(let T=0;T<m;T+=E){const M=f.x+Math.cos(g)*T,y=f.y+Math.sin(g)*T;u({x:M,y})}f=p}}}class tN extends Eo{constructor(t){super(),this.settings=t}updateSettings(t){this.settings=t}drawStroke(t,n,o){const{color:l,tipShape:s,size:i,blendMode:r,opacity:u,pressureControl:f}=this.settings,{strokeModifier:h}=o;if(t.strokeStyle=l,t.lineCap=s==="line"?"butt":s==="circle"?"round":"square",t.lineJoin=s==="circle"?"round":"miter",t.lineWidth=i,t.globalCompositeOperation=r,n.length<2)return;const m=((g,E)=>{if(g==="solid")return null;const T=M=>M*E*Math.max(1,i/5);switch(g){case"dashed":return[T(10),T(5)];case"dotted":return[T(1),T(4)];case"dash-dot":return[T(10),T(4),T(2),T(4)];default:return null}})(h.style,h.scale);if(m){t.setLineDash(m),t.globalAlpha=u,t.beginPath(),t.moveTo(n[0].x,n[0].y);for(let g=1;g<n.length;g++)t.lineTo(n[g].x,n[g].y);t.stroke(),t.setLineDash([])}else for(let g=1;g<n.length;g++){const E=n[g-1],T=n[g],M=T.pressure??1;let y=u;f.opacity&&(y*=M),t.globalAlpha=y,t.beginPath(),t.moveTo(E.x,E.y),t.lineTo(T.x,T.y),t.stroke()}}}class nN extends Eo{constructor(t){super(),this.settings=t,this.pencilEquivalent=new Wd({...t,lineCap:"round",lineJoin:"round",hasStrokeCaps:!0})}updateSettings(t){this.settings=t,this.pencilEquivalent.updateSettings({...t,lineCap:"round",lineJoin:"round",hasStrokeCaps:!0})}updatePreview(t){const{previewCtx:n,viewTransform:o}=t;n&&(this.clearPreview(t),n.save(),n.setTransform(o.zoom,0,0,o.zoom,o.pan.x,o.pan.y),this.drawWithMirroring(n,this.points,t),n.restore(),this.lastPreviewPointCount=this.points.length)}drawStroke(t,n,o){this.pencilEquivalent.drawStroke(t,n,o)}}class oN extends Eo{constructor(t){super(),this.settings=t}updateSettings(t){this.settings=t}drawStroke(t,n,o){t.globalCompositeOperation="source-over";const{size:l,flow:s,color:i}=this.settings;if(n.length===0)return;const r=f=>{const h=t.createRadialGradient(f.x,f.y,0,f.x,f.y,l/2);t.strokeStyle,t.fillStyle=i;const p=parseInt(t.fillStyle.slice(1,3),16),m=parseInt(t.fillStyle.slice(3,5),16),g=parseInt(t.fillStyle.slice(5,7),16);h.addColorStop(0,`rgba(${p},${m},${g},${s})`),h.addColorStop(1,`rgba(${p},${m},${g},0)`),t.fillStyle=h,t.beginPath(),t.arc(f.x,f.y,l/2,0,Math.PI*2),t.fill()};if(n.length===1){r(n[0]);return}let u=n[0];for(let f=1;f<n.length;f++){const h=n[f],p=Math.hypot(h.x-u.x,h.y-u.y),m=Math.atan2(h.y-u.y,h.x-u.x),g=Math.max(1,l*.1);for(let E=0;E<p;E+=g){const T=u.x+Math.cos(m)*E,M=u.y+Math.sin(m)*E;r({x:T,y:M})}u=h}}}class lN extends Eo{constructor(t){super(),this.settings=t,this.pencilEquivalent=new Wd({...t,lineCap:"round",lineJoin:"round",hasStrokeCaps:!0,pressureControl:{size:!0}})}updateSettings(t){this.settings=t,this.pencilEquivalent.updateSettings({...t,lineCap:"round",lineJoin:"round",hasStrokeCaps:!0,pressureControl:{size:!0}})}drawStroke(t,n,o){this.pencilEquivalent.drawStroke(t,n,o)}}class sN extends Eo{constructor(){super()}drawStroke(t,n,o){}}class iN extends Eo{constructor(t){super(),this.settings=t}updateSettings(t){this.settings=t}drawStroke(t,n,o){const{color:l,size:s,hardness:i,flow:r,blendMode:u,pressureControl:f,spacing:h}=this.settings,{strokeModifier:p}=o;if(t.globalCompositeOperation=u,n.length<1)return;const m=A=>{const b=document.createElement("canvas").getContext("2d");if(b){b.fillStyle=A,b.fillRect(0,0,1,1);const I=b.getImageData(0,0,1,1).data;return[I[0],I[1],I[2]]}return[0,0,0]},[g,E,T]=m(l),M=(A,b)=>{const I=f.size?b*s:s;if(I<.5)return;const w=f.flow?b*(r/100):r/100;if(t.beginPath(),i>=100)t.arc(A.x,A.y,I/2,0,Math.PI*2),t.fillStyle=`rgba(${g},${E},${T},${w})`;else{const j=t.createRadialGradient(A.x,A.y,I/2*(i/100),A.x,A.y,I/2);j.addColorStop(0,`rgba(${g},${E},${T},${w})`),j.addColorStop(1,`rgba(${g},${E},${T},0)`),t.fillStyle=j,t.arc(A.x,A.y,I/2,0,Math.PI*2)}t.fill()},x=((A,b)=>{switch(A){case"dashed":return[10*b,5*b];case"dotted":return[2*b,4*b];case"dash-dot":return[10*b,4*b,2*b,4*b];default:return null}})(p.style,p.scale);if(n.length===1){x||M(n[0],n[0].pressure??1);return}let v=n[0],S=0,N=0,L=!0;for(let A=1;A<n.length;A++){const b=n[A],I=Math.hypot(b.x-v.x,b.y-v.y),w=Math.atan2(b.y-v.y,b.x-v.x),j=v.pressure??1,_=b.pressure??1,R=Math.max(1,s*(h/100));for(let H=0;H<I;H+=R){const ee=!x||L;if(x&&(S+=R,S>=x[N]&&(S-=x[N],N=(N+1)%x.length,L=!L)),ee){const z=I>0?H/I:0,U=v.x+Math.cos(w)*H,G=v.y+Math.sin(w)*H,J=j+(_-j)*z;M({x:U,y:G},J)}}v=b}}}function na(e,t,n,o){const l=Math.floor(t*1e3),s=Math.floor(n*1e3);let i=l*374761393^s*668265263^e+(o|0)*2654435761;return i=Math.imul(i^i>>>13,1274126177),i=(i^i>>>16)>>>0,i/4294967295}class aN extends Eo{constructor(t){super(),this.settings=t}updateSettings(t){this.settings=t}drawStroke(t,n,o){const{color:l,size:s,flow:i,wetness:r,opacity:u,pressureControl:f}=this.settings,{strokeModifier:h}=o;if(t.globalCompositeOperation="source-over",n.length<1)return;const p=_=>{const R=document.createElement("canvas").getContext("2d");if(R){R.fillStyle=_,R.fillRect(0,0,1,1);const H=R.getImageData(0,0,1,1).data;return[H[0],H[1],H[2]]}return[0,0,0]},[m,g,E]=p(l),T=Math.max(1,s*.2),M=Math.max(1,Math.floor(i/100*5));let y=0;for(let _=1;_<this.points.length;_++){const R=this.points[_-1],H=this.points[_];y+=Math.hypot(H.x-R.x,H.y-R.y)}const x=Math.ceil(y/T)*M,v=6e3;let S=T;if(x>v){const _=Math.sqrt(x/v);S=T*_}const N=(_,R)=>{const H=f.size?R*s:s;if(H<1)return;const ee=f.flow?R*(i/100):i/100,z=Math.max(1,Math.floor(ee*5));for(let U=0;U<z;U++){const G=(na(this.strokeSeed,_.x,_.y,U*4+1)-.5)*H*.4,J=(na(this.strokeSeed,_.x,_.y,U*4+2)-.5)*H*.4,P=_.x+G,q=_.y+J,Q=H*(.8+na(this.strokeSeed,_.x,_.y,U*4+3)*.4),X=r/100*(.5+na(this.strokeSeed,_.x,_.y,U*4+4)*.5),he=f.opacity?R:1,pe=X*u*he,ie=t.createRadialGradient(P,q,0,P,q,Q/2);ie.addColorStop(0,`rgba(${m},${g},${E},${pe})`),ie.addColorStop(1,`rgba(${m},${g},${E},0)`),t.fillStyle=ie,t.beginPath(),t.arc(P,q,Q/2,0,Math.PI*2),t.fill()}},A=((_,R)=>{switch(_){case"dashed":return[10*R,5*R];case"dotted":return[2*R,4*R];case"dash-dot":return[10*R,4*R,2*R,4*R];default:return null}})(h.style,h.scale);if(n.length===1){A||N(n[0],n[0].pressure??1);return}let b=n[0],I=0,w=0,j=!0;for(let _=1;_<n.length;_++){const R=n[_],H=Math.hypot(R.x-b.x,R.y-b.y),ee=Math.atan2(R.y-b.y,R.x-b.x),z=b.pressure??1,U=R.pressure??1,G=S;for(let J=0;J<H;J+=G){const P=!A||j;if(A&&(I+=G,I>=A[w]&&(I-=A[w],w=(w+1)%A.length,j=!j)),P){const q=H>0?J/H:0,Q=b.x+Math.cos(ee)*J,X=b.y+Math.sin(ee)*J,he=z+(U-z)*q;N({x:Q,y:X},he)}}b=R}}}function rN({brushSettings:e,eraserSettings:t,simpleMarkerSettings:n,naturalMarkerSettings:o,airbrushSettings:l,fxBrushSettings:s,advancedMarkerSettings:i,watercolorSettings:r}){const u=C.useMemo(()=>({brush:new Wd(e),eraser:new eN(t),"simple-marker":new tN(n),"natural-marker":new nN(o),airbrush:new oN(l),"fx-brush":new lN(s),"debug-brush":new sN,"advanced-marker":new iN(i),watercolor:new aN(r)}),[]);return u.brush.updateSettings(e),u.eraser.updateSettings(t),u["simple-marker"].updateSettings(n),u["natural-marker"].updateSettings(o),u.airbrush.updateSettings(l),u["fx-brush"].updateSettings(s),u["advanced-marker"].updateSettings(i),u.watercolor.updateSettings(r),{getBrushForTool:h=>u[h]||null}}function cN({mainCanvasRef:e,guideCanvasRef:t,uiCanvasRef:n,items:o,viewTransform:l,activeItemId:s,activeGuide:i,isOrthogonalVisible:r,rulerGuides:u,mirrorGuides:f,perspectiveGuide:h,orthogonalGuide:p,gridGuide:m,isCropping:g,cropRect:E,isTransforming:T,transformState:M,transformSourceBbox:y,livePreviewLayerId:x}){const v=C.useRef({vpGreen:null,vpRed:null,vpBlue:null}),S=C.useCallback(b=>{if(m.type==="none"||m.spacing<=0)return;const I={x:-l.pan.x/l.zoom,y:-l.pan.y/l.zoom,width:b.canvas.width/l.zoom,height:b.canvas.height/l.zoom},{spacing:w,majorLineFrequency:j,type:_,isoAngle:R,majorLineColor:H,minorLineColor:ee}=m;b.lineWidth=.5/l.zoom;const z=ee,U=H;if(_==="cartesian"){const G=Math.floor(I.x/w)*w,J=I.x+I.width,P=Math.floor(I.y/w)*w,q=I.y+I.height;let Q=Math.round(G/w);for(let he=G;he<=J;he+=w)b.strokeStyle=Q%j===0?U:z,b.beginPath(),b.moveTo(he,I.y),b.lineTo(he,q),b.stroke(),Q++;let X=Math.round(P/w);for(let he=P;he<=q;he+=w)b.strokeStyle=X%j===0?U:z,b.beginPath(),b.moveTo(I.x,he),b.lineTo(J,he),b.stroke(),X++}else if(_==="isometric"){const G=Math.hypot(I.width,I.height)*1.2,J={x:I.x+I.width/2,y:I.y+I.height/2};[90*(Math.PI/180),(90-R)*(Math.PI/180),(90+R)*(Math.PI/180)].forEach(q=>{const Q=Math.cos(q),X=Math.sin(q),he=Math.cos(q+Math.PI/2),pe=Math.sin(q+Math.PI/2),ie=J.x*he+J.y*pe,Ue=Math.floor((ie-G/2)/w),Ee=Math.ceil((ie+G/2)/w);for(let Te=Ue;Te<=Ee;Te++){const Me=Te*w,He={x:Me*he,y:Me*pe},tt={x:He.x-G*Q,y:He.y-G*X},W={x:He.x+G*Q,y:He.y+G*X};b.strokeStyle=Te%j===0?U:z,b.beginPath(),b.moveTo(tt.x,tt.y),b.lineTo(W.x,W.y),b.stroke()}})}},[m,l]),N=C.useCallback(()=>{var j;const b=(j=e.current)==null?void 0:j.getContext("2d");if(!b)return;b.save(),b.setTransform(1,0,0,1,0,0),b.clearRect(0,0,b.canvas.width,b.canvas.height),b.restore(),b.save(),b.setTransform(l.zoom,0,0,l.zoom,l.pan.x,l.pan.y);const I=o.find(_=>_.type==="object"&&_.isBackground),w=o.filter(_=>_.type==="object"&&!_.isBackground);I&&I.canvas&&I.isVisible&&(b.globalAlpha=I.opacity,b.drawImage(I.canvas,I.offsetX||0,I.offsetY||0)),S(b),w.forEach(_=>{if(!_.isVisible)return;const R=_.id===x;T&&_.id===s||R||_.canvas&&(b.globalAlpha=_.opacity,b.drawImage(_.canvas,_.offsetX||0,_.offsetY||0))}),b.restore()},[o,l,s,T,x,S]),L=C.useCallback(()=>{var j;const b=(j=t.current)==null?void 0:j.getContext("2d");if(!b)return;b.save(),b.setTransform(1,0,0,1,0,0),b.clearRect(0,0,b.canvas.width,b.canvas.height),b.restore(),b.save(),b.translate(l.pan.x,l.pan.y),b.scale(l.zoom,l.zoom);const I=8/l.zoom,w={x:-l.pan.x/l.zoom,y:-l.pan.y/l.zoom,width:b.canvas.width/l.zoom,height:b.canvas.height/l.zoom};if(i==="ruler"&&u&&u.forEach(_=>{b.strokeStyle="cyan",b.lineWidth=1/l.zoom,b.beginPath(),b.moveTo(_.start.x,_.start.y),b.lineTo(_.end.x,_.end.y),b.stroke(),b.fillStyle="cyan";const R={x:(_.start.x+_.end.x)/2,y:(_.start.y+_.end.y)/2};[_.start,_.end,R].forEach(H=>{b.beginPath(),b.arc(H.x,H.y,I,0,2*Math.PI),b.fill()})}),i==="mirror"&&f&&f.forEach(_=>{b.strokeStyle="rgba(139, 0, 255, 0.8)",b.lineWidth=1/l.zoom,b.setLineDash([5/l.zoom,5/l.zoom]),b.beginPath(),b.moveTo(_.start.x,_.start.y),b.lineTo(_.end.x,_.end.y),b.stroke(),b.setLineDash([]),b.fillStyle="rgba(139, 0, 255, 0.8)";const R={x:(_.start.x+_.end.x)/2,y:(_.start.y+_.end.y)/2};[_.start,_.end,R].forEach(H=>{b.beginPath(),b.arc(H.x,H.y,I,0,2*Math.PI),b.fill()})}),r&&p){const _={x:w.x+w.width/2,y:w.y+w.height/2},R=Math.max(w.width,w.height)*1.5;b.save(),b.translate(_.x,_.y),b.rotate(p.angle*Math.PI/180),b.strokeStyle="rgba(255, 165, 0, 0.7)",b.lineWidth=1/l.zoom,b.setLineDash([5/l.zoom,5/l.zoom]),b.beginPath(),b.moveTo(-R/2,0),b.lineTo(R/2,0),b.moveTo(0,-R/2),b.lineTo(0,R/2),b.stroke(),b.restore(),b.setLineDash([])}if(i==="perspective"&&h){const{lines:_,guidePoint:R,extraGuideLines:H}=h,ee=Math.hypot(w.width,w.height)*10,z=kc(_.green[0],_.green[1]),U=kc(_.red[0],_.red[1]),G=kc(_.blue[0],_.blue[1]);if(v.current={vpGreen:z,vpRed:U,vpBlue:G},z&&U){b.strokeStyle="rgba(255, 255, 0, 0.7)",b.lineWidth=1.5/l.zoom,b.setLineDash([8/l.zoom,4/l.zoom]),b.beginPath();const P=U.x-z.x,q=U.y-z.y,Q=Math.hypot(P,q)||1;b.moveTo(z.x-P/Q*ee,z.y-q/Q*ee),b.lineTo(U.x+P/Q*ee,U.y+q/Q*ee),b.stroke(),b.setLineDash([])}const J=(P,q,Q,X)=>{const he=P.replace("0.5","0.4"),pe=P,ie=P;q&&(b.strokeStyle=he,b.lineWidth=.8/l.zoom,b.setLineDash([4/l.zoom,4/l.zoom]),[...Q.flatMap(Te=>[Te.start,Te.end]),...X,R].forEach(Te=>{b.beginPath(),b.moveTo(q.x,q.y),b.lineTo(Te.x,Te.y),b.stroke()}),b.setLineDash([])),b.strokeStyle=pe,b.lineWidth=1/l.zoom,Q.forEach(Ee=>{b.beginPath(),b.moveTo(Ee.start.x,Ee.start.y),b.lineTo(Ee.end.x,Ee.end.y),b.stroke()}),b.fillStyle=ie,[...Q.flatMap(Ee=>[Ee.start,Ee.end]),...X].forEach(Ee=>{b.beginPath(),b.arc(Ee.x,Ee.y,I,0,2*Math.PI),b.fill()})};if(J("rgba(0, 255, 0, 0.5)",z,_.green,H.green.map(P=>P.handle)),J("rgba(255, 0, 0, 0.5)",U,_.red,H.red.map(P=>P.handle)),G)J("rgba(0, 0, 255, 0.5)",G,_.blue,H.blue.map(P=>P.handle));else{const P="rgba(0, 0, 255, 0.5)",q="rgba(0, 0, 255, 0.4)";if(b.strokeStyle=q,b.lineWidth=.8/l.zoom,b.setLineDash([4/l.zoom,4/l.zoom]),_.blue.length>0){const X=_.blue[0],he=Math.atan2(X.end.y-X.start.y,X.end.x-X.start.x),pe=Math.cos(he),ie=Math.sin(he);[..._.blue.flatMap(Ee=>[Ee.start,Ee.end]),...H.blue.map(Ee=>Ee.handle),R].forEach(Ee=>{b.beginPath(),b.moveTo(Ee.x-pe*ee,Ee.y-ie*ee),b.lineTo(Ee.x+pe*ee,Ee.y+ie*ee),b.stroke()})}b.setLineDash([]),b.strokeStyle=P,b.lineWidth=1/l.zoom,_.blue.forEach(X=>{b.beginPath(),b.moveTo(X.start.x,X.start.y),b.lineTo(X.end.x,X.end.y),b.stroke()}),b.fillStyle=P,[..._.blue.flatMap(X=>[X.start,X.end]),...H.blue.map(X=>X.handle)].forEach(X=>{b.beginPath(),b.arc(X.x,X.y,I,0,2*Math.PI),b.fill()})}b.fillStyle="yellow",b.strokeStyle="black",b.lineWidth=.5/l.zoom,b.beginPath(),b.arc(R.x,R.y,I*1.5,0,2*Math.PI),b.fill(),b.stroke()}b.restore()},[l,i,u,f,r,p,h]),A=C.useCallback(()=>{var w;const b=(w=n.current)==null?void 0:w.getContext("2d");if(!b)return;b.save(),b.setTransform(1,0,0,1,0,0),b.clearRect(0,0,b.canvas.width,b.canvas.height),b.restore(),b.save(),b.setTransform(l.zoom,0,0,l.zoom,l.pan.x,l.pan.y);const I=8/l.zoom;if(g&&E){b.strokeStyle="rgba(255, 255, 255, 0.7)",b.lineWidth=1/l.zoom,b.setLineDash([4/l.zoom,2/l.zoom]),b.strokeRect(E.x,E.y,E.width,E.height),b.setLineDash([]);const{x:j,y:_,width:R,height:H}=E,ee=[{x:j,y:_},{x:j+R,y:_},{x:j,y:_+H},{x:j+R,y:_+H},{x:j+R/2,y:_},{x:j+R/2,y:_+H},{x:j,y:_+H/2},{x:j+R,y:_+H/2}];b.fillStyle="white",b.strokeStyle="black",b.lineWidth=1/l.zoom,ee.forEach(z=>{b.beginPath(),b.rect(z.x-I/2,z.y-I/2,I,I),b.fill(),b.stroke()})}if(T&&M){b.lineWidth=1/l.zoom,b.strokeStyle="#00BFFF",b.fillStyle="white";const j=(_,R=!1)=>{b.strokeStyle="black",b.lineWidth=.5/l.zoom,b.beginPath(),R?b.arc(_.x,_.y,I/2,0,2*Math.PI):b.rect(_.x-I/2,_.y-I/2,I,I),b.fill(),b.stroke()};if(M.type==="affine"){const{x:_,y:R,width:H,height:ee,rotation:z}=M,U={x:_+H/2,y:R+ee/2};b.save(),b.translate(U.x,U.y),b.rotate(z),b.strokeStyle="#00BFFF",b.lineWidth=1/l.zoom,b.strokeRect(-H/2,-ee/2,H,ee),b.restore();const G=Math.cos(z),J=Math.sin(z),P=he=>({x:U.x+(he.x-U.x)*G-(he.y-U.y)*J,y:U.y+(he.x-U.x)*J+(he.y-U.y)*G}),q={tl:P({x:_,y:R}),tr:P({x:_+H,y:R}),bl:P({x:_,y:R+ee}),br:P({x:_+H,y:R+ee}),t:P({x:_+H/2,y:R}),b:P({x:_+H/2,y:R+ee}),l:P({x:_,y:R+ee/2}),r:P({x:_+H,y:R+ee/2})};Object.values(q).forEach(he=>j(he));const Q=P({x:_+H/2,y:R-25/l.zoom}),X=P({x:_+H/2,y:R});b.strokeStyle="#00BFFF",b.lineWidth=1/l.zoom,b.beginPath(),b.moveTo(Q.x,Q.y),b.lineTo(X.x,X.y),b.stroke(),j(Q,!0)}else if(M.type==="free"){const{tl:_,tr:R,br:H,bl:ee}=M.corners;b.strokeStyle="#00BFFF",b.lineWidth=1/l.zoom,b.beginPath(),b.moveTo(_.x,_.y),b.lineTo(R.x,R.y),b.lineTo(H.x,H.y),b.lineTo(ee.x,ee.y),b.closePath(),b.stroke(),[_,R,H,ee].forEach(z=>j(z))}}b.restore()},[l,g,E,T,M]);return{redrawMainCanvas:N,redrawGuides:L,redrawUI:A,perspectiveVPs:v}}function ym(e){if(e.length<3)return e;const t=[],[n,o,l]=e;for(let s=0;s<=1;s+=.01){const i=(1-s)**2*n.x+2*(1-s)*s*o.x+s**2*l.x,r=(1-s)**2*n.y+2*(1-s)*s*o.y+s**2*l.y,u=n.pressure??1,f=o.pressure??u+((l.pressure??1)-u)/2,h=l.pressure??1,p=(1-s)**2*u+2*(1-s)*s*f+s**2*h;t.push({x:i,y:r,pressure:p})}return t}function xm(e,t){if(e.length<3)return e;const[n,o,l]=e,s=Math.hypot(o.x-n.x,o.y-n.y),i=Math.atan2(o.y-n.y,o.x-n.x);let r;if(t!==void 0)r=t;else{const h=Math.atan2(l.y-n.y,l.x-n.x),p=Math.PI*2;r=h-i,r>Math.PI&&(r-=p),r<-Math.PI&&(r+=p)}const u=[],f=Math.max(10,Math.ceil(Math.abs(r*s)/2));for(let h=0;h<=f;h++){const p=h/f,m=i+r*p,g=n.x+s*Math.cos(m),E=n.y+s*Math.sin(m),T=(o.pressure??1)*(1-p)+(l.pressure??1)*p;u.push({x:g,y:E,pressure:T})}return u}function uN({items:e,uiCanvasRef:t,previewCanvasRef:n,viewTransform:o,setViewTransform:l,activeItem:s,tool:i,isDrawingTool:r,isSelectionTool:u,onDrawCommit:f,onSelectItem:h,getBrushForTool:p,areGuidesLocked:m,activeGuide:g,isOrthogonalVisible:E,rulerGuides:T,setRulerGuides:M,mirrorGuides:y,setMirrorGuides:x,perspectiveGuide:v,setPerspectiveGuide:S,perspectiveVPs:N,orthogonalGuide:L,guideDragState:A,setGuideDragState:b,cropRect:I,setCropRect:w,transformState:j,setTransformState:_,isAspectRatioLocked:R,isAngleSnapEnabled:H,angleSnapValue:ee,livePreviewLayerId:z,setLivePreviewLayerId:U,isPerspectiveStrokeLockEnabled:G,isSnapToGridEnabled:J,gridGuide:P,strokeMode:q,strokeState:Q,setStrokeState:X,magicWandSettings:he,selection:pe,setSelection:ie,onUpdateItem:Ue,forceRender:Ee,getMinZoom:Te,MAX_ZOOM:Me,onAddItem:He,textEditState:tt,setTextEditState:W,onCommitText:le,strokeSmoothing:oe,strokeModifier:ue,setDebugPointers:ve}){const Ce=C.useRef({type:"none"}),ze=C.useRef(null),at=C.useRef(null),xt=C.useRef(null),_e=C.useRef(null),Ye=C.useRef(new Map),de=C.useRef(null),je=C.useRef(!1),wt=C.useRef(null),Pe=C.useRef(null),Qe=re=>{Ce.current=re,Ee()};C.useEffect(()=>{var re;if(!Q){const ae=(re=n.current)==null?void 0:re.getContext("2d");ae&&ro(ae)}},[Q,n]),C.useEffect(()=>{_e.current=null},[i,q]);const bt=C.useCallback(re=>{if(!J||P.type==="none")return re;const{spacing:ae}=P;if(P.type==="cartesian")return{...re,x:Math.round(re.x/ae)*ae,y:Math.round(re.y/ae)*ae};if(P.type==="isometric"){const be=ae,{x:nt,y:ot}=re,me=-30*(Math.PI/180),Re=Math.cos(me),De=Math.sin(me),ut=nt*Re-ot*De,Je=nt*De+ot*Re,fe=be*2/Math.sqrt(3),te=(ut*(Math.sqrt(3)/3)-Je/3)/(fe/Math.sqrt(3)),$=Je*2/3/(fe/Math.sqrt(3)),B=-te-$;let K=Math.round(te),se=Math.round($),ye=Math.round(B);const O=Math.abs(K-te),ge=Math.abs(se-$),ne=Math.abs(ye-B);O>ge&&O>ne?K=-se-ye:ge>ne&&(se=-K-ye);const we=fe*(K+se/2),Se=fe*(se*Math.sqrt(3)/2),Ae=30*(Math.PI/180),Le=Math.cos(Ae),Ge=Math.sin(Ae),dt=we*Le-Se*Ge,Cn=we*Ge+Se*Le;return{...re,x:dt,y:Cn}}return re},[J,P]),$t=C.useCallback(re=>{var Re,De,ut,Je;if(!t.current||re.button!==0&&re.pointerType==="mouse"&&re.button!==1||re.pointerType==="pen"&&re.pressure===0)return;if(Ye.current.set(re.pointerId,{x:re.clientX,y:re.clientY}),ve(new Map(Ye.current)),Ye.current.size>=2){if(je.current=!0,(Re=ze.current)!=null&&Re.isDrawing){ze.current.onPointerCancel(null),ze.current=null;const fe=(De=n.current)==null?void 0:De.getContext("2d");fe&&ro(fe)}if(X(null),Pe.current&&clearTimeout(Pe.current),de.current=null,Ye.current.size===2){const fe=Array.from(Ye.current.values()),te=fe[0],$=fe[1],B={x:(te.x+$.x)/2,y:(te.y+$.y)/2},K=$.x-te.x,se=$.y-te.y,ye=Math.hypot(K,se);wt.current={distance:ye,midpoint:B,zoom:o.zoom,pan:o.pan},Qe({type:"pan",startX:B.x,startY:B.y,startPan:o.pan})}else Qe({type:"none"});return}const ae=so(re.nativeEvent,o,t.current),be=bt(ae),ot=q==="freehand"&&re.pointerType==="pen"?re.pressure:1,me={...be,pressure:ot};if(at.current=null,xt.current=null,!m){const fe=10/o.zoom;if(g==="ruler")for(const te of T){if(jn(ae,te.start,fe)){b({type:"ruler",id:te.id,part:"start",offset:{x:0,y:0}});return}if(jn(ae,te.end,fe)){b({type:"ruler",id:te.id,part:"end",offset:{x:0,y:0}});return}if(Dc(ae,te.start,te.end)<fe){b({type:"ruler",id:te.id,part:"line",offset:{x:te.start.x-ae.x,y:te.start.y-ae.y}});return}}if(g==="mirror")for(const te of y){if(jn(ae,te.start,fe)){b({type:"mirror",id:te.id,part:"start",offset:{x:0,y:0}});return}if(jn(ae,te.end,fe)){b({type:"mirror",id:te.id,part:"end",offset:{x:0,y:0}});return}if(Dc(ae,te.start,te.end)<fe){b({type:"mirror",id:te.id,part:"line",offset:{x:te.start.x-ae.x,y:te.start.y-ae.y}});return}}if(g==="perspective"&&v){const{lines:te,guidePoint:$,extraGuideLines:B}=v;if(jn(ae,$,fe*1.5)){b({type:"perspective-point",part:"point"});return}for(const K of["green","red","blue"]){for(const se of te[K]){if(jn(ae,se.start,fe)){b({type:"perspective",color:K,lineId:se.id,part:"start"});return}if(jn(ae,se.end,fe)){b({type:"perspective",color:K,lineId:se.id,part:"end"});return}}for(const se of B[K])if(jn(ae,se.handle,fe)){b({type:"perspective-extra",color:K,id:se.id});return}}}}if(i==="crop"&&I){const te=(B=>({tl:{x:B.x,y:B.y},tr:{x:B.x+B.width,y:B.y},bl:{x:B.x,y:B.y+B.height},br:{x:B.x+B.width,y:B.y+B.height},t:{x:B.x+B.width/2,y:B.y},b:{x:B.x+B.width/2,y:B.y+B.height},l:{x:B.x,y:B.y+B.height/2},r:{x:B.x+B.width,y:B.y+B.height/2}}))(I),$=10/o.zoom;for(const[B,K]of Object.entries(te))if(K&&jn(ae,K,$)){Qe({type:"crop",handle:B,startRect:I,startPoint:ae});return}if(ae.x>I.x&&ae.x<I.x+I.width&&ae.y>I.y&&ae.y<I.y+I.height){Qe({type:"crop",handle:"move",startRect:I,startPoint:ae});return}}if((i==="transform"||i==="free-transform")&&j){const fe=10/o.zoom;if(j.type==="affine"){const{x:te,y:$,width:B,height:K,rotation:se}=j,ye={x:te+B/2,y:$+K/2},O=Math.cos(se),ge=Math.sin(se),ne=Se=>({x:ye.x+(Se.x-ye.x)*O-(Se.y-ye.y)*ge,y:ye.y+(Se.x-ye.x)*ge+(Se.y-ye.y)*O}),we={tl:ne({x:te,y:$}),tr:ne({x:te+B,y:$}),bl:ne({x:te,y:$+K}),br:ne({x:te+B,y:$+K}),t:ne({x:te+B/2,y:$}),b:ne({x:te+B/2,y:$+K}),l:ne({x:te,y:$+K/2}),r:ne({x:te+B,y:$+K/2}),rotate:ne({x:te+B/2,y:$-25/o.zoom})};for(const[Se,Ae]of Object.entries(we))if(Ae&&jn(ae,Ae,fe)){Qe({type:"transform",handle:Se,startState:j,startPoint:ae,center:ye});return}}else if(j.type==="free"){const te=j.corners;for(const[$,B]of Object.entries(te))if(B&&jn(ae,B,fe)){Qe({type:"transform",handle:$,startState:j,startPoint:ae});return}}if(j.type==="free"&&Zw(ae,Object.values(j.corners))){Qe({type:"transform",handle:"move",startState:j,startPoint:ae});return}if(j.type==="affine"){const te={x:ae.x-(j.x+j.width/2),y:ae.y-(j.y+j.height/2)},$={x:te.x*Math.cos(-j.rotation)-te.y*Math.sin(-j.rotation),y:te.x*Math.sin(-j.rotation)+te.y*Math.cos(-j.rotation)};if(Math.abs($.x)<j.width/2&&Math.abs($.y)<j.height/2){Qe({type:"transform",handle:"move",startState:j,startPoint:ae});return}}}if(i==="text"){tt&&le(tt),Qe({type:"text-place"});return}if(u){if(ie(null),i==="marquee-rect"||i==="lasso"){Qe({type:"selection",tool:i,startPoint:be,points:[be]});return}else if(i==="magic-wand"){if(s&&s.type==="object"&&s.canvas){const fe=s.canvas,te=fe.getContext("2d",{willReadFrequently:!0});if(!te)return;try{const $=te.getImageData(0,0,fe.width,fe.height),B=Math.floor(be.x),K=Math.floor(be.y),se=Ww($,B,K,he.tolerance,he.contiguous);se&&ie({path:se.path,boundingBox:se.bbox,sourceItemId:s.id})}catch($){console.error("Could not get image data for magic wand.",$),alert("Error: Could not perform magic wand selection. The canvas may be tainted by cross-origin content.")}}return}}if(r&&q==="line"){Qe({type:"draw"}),Q||X({mode:"line",points:[me]});return}if(r&&["polyline","curve","arc"].includes(q)){if(q==="polyline"&&(Pe.current&&clearTimeout(Pe.current),Pe.current=window.setTimeout(()=>{if(s&&s.type==="object"&&Q&&Q.points.length>1){const fe=ai(s.canvas),te=s.context,$=p(i);if($){const B={mainCtx:te,previewCtx:n.current.getContext("2d"),viewTransform:o,onDrawCommit:f,activeItemId:s.id,activeGuide:g,mirrorGuides:y,strokeModifier:ue};$.drawWithMirroring(te,Q.points,B),f(s.id,fe)}}X(null),Pe.current=null},700)),!Q)X({mode:q,points:[me]}),q==="arc"&&(_e.current=null);else{const fe=[...Q.points,me];X({...Q,points:fe});let te=!1;if(q==="curve"&&fe.length===3&&(te=!0),q==="arc"&&fe.length===3&&(te=!0),te&&(s==null?void 0:s.type)==="object"){const $=ai(s.canvas),B=s.context,K=p(i);if(K){const se={mainCtx:B,previewCtx:n.current.getContext("2d"),viewTransform:o,onDrawCommit:f,activeItemId:s.id,activeGuide:g,mirrorGuides:y,strokeModifier:ue};let ye=fe;q==="curve"&&(ye=ym(fe)),q==="arc"&&(ye=xm(fe,(ut=_e.current)==null?void 0:ut.totalAngle)),K.drawWithMirroring(B,ye,se),f(s.id,$)}X(null)}}return}if(i==="pan"||re.button===1&&re.pointerType==="mouse"){Qe({type:"pan",startX:re.clientX,startY:re.clientY,startPan:o.pan}),re.currentTarget.style.cursor="grabbing";return}if(r&&s&&s.type==="object"&&q==="freehand"){i==="eraser"&&U(s.id);const fe=p(i);if(!fe)return;if(fe.updateSmoothing(oe),ze.current=fe,Qe({type:"draw"}),xt.current={axis:"x",startPoint:be},G&&g==="perspective"&&N.current){const{vpGreen:B,vpRed:K,vpBlue:se}=N.current,ye=[B,K,se].filter(Boolean);let O=null,ge=1/0;ye.forEach(ne=>{if(ne){const we=(be.x-ne.x)**2+(be.y-ne.y)**2;we<ge&&(ge=we,O=ne)}}),at.current={startPoint:be,targetVP:O}}const te=s.context,$=(Je=n.current)==null?void 0:Je.getContext("2d");if(te&&$){const B={mainCtx:te,previewCtx:$,viewTransform:o,onDrawCommit:f,activeItemId:s.id,activeGuide:g,mirrorGuides:y,strokeModifier:ue};fe.onPointerDown(me,B)}}},[i,o,s,r,u,he,ie,I,g,T,y,v,m,S,M,x,b,N,j,G,bt,q,Q,X,f,He,W,tt,le,p,oe,ue,ve]),It=C.useCallback(re=>{var ut,Je,fe,te;if(!t.current)return;const ae=re.nativeEvent,be=ae.getCoalescedEvents?ae.getCoalescedEvents():[ae];for(const $ of be)Ye.current.has($.pointerId)&&Ye.current.set($.pointerId,{x:$.clientX,y:$.clientY});if(ve(new Map(Ye.current)),Ye.current.size>=2){const $=Array.from(Ye.current.values());if($.length<2)return;const[B,K]=$,se={x:(B.x+K.x)/2,y:(B.y+K.y)/2},ye=K.x-B.x,O=K.y-B.y,ge=Math.hypot(ye,O);wt.current||(wt.current={distance:ge,midpoint:se,zoom:o.zoom,pan:o.pan});const ne=wt.current,we=ne.distance>0?ge/ne.distance:1;let Se=ne.zoom*we;const Ae=Te?Te():.1;Se<Ae&&(Se=Ae),Se>Me&&(Se=Me);const Le=ne.zoom>0?Se/ne.zoom:1,Ge=se.x-(ne.midpoint.x-ne.pan.x)*Le,dt=se.y-(ne.midpoint.y-ne.pan.y)*Le;l(Cn=>({...Cn,zoom:Se,pan:{x:Ge,y:dt}})),je.current=!0;return}const nt=ae.getCoalescedEvents?ae.getCoalescedEvents():[ae],ot=nt[nt.length-1],me=Ce.current;if(me.type==="draw"&&ze.current){const $=s==null?void 0:s.context,B=(ut=n.current)==null?void 0:ut.getContext("2d");if($&&B&&s){const K={mainCtx:$,previewCtx:B,viewTransform:o,onDrawCommit:f,activeItemId:s.id,activeGuide:g,mirrorGuides:y,strokeModifier:ue};for(const se of nt){const ye=so(se,o,t.current);let O=ye,ge=!1;if(E&&xt.current){const{startPoint:Ae}=xt.current,Le=Math.abs(ye.x-Ae.x),Ge=Math.abs(ye.y-Ae.y);(Le>5||Ge>5)&&(Le>Ge?xt.current.axis="x":xt.current.axis="y"),xt.current.axis==="x"?O={...ye,y:Ae.y}:O={...ye,x:Ae.x},ge=!0}else if(g==="ruler"&&T.length>0){let Ae=1/0,Le=null;T.forEach(Ge=>{const dt=Dc(ye,Ge.start,Ge.end);dt<Ae&&(Ae=dt,Le=Ge)}),Le&&(O=pm(ye,Le.start,Le.end),ge=!0)}else G&&g==="perspective"&&((Je=at.current)!=null&&Je.targetVP)&&(O=pm(ye,at.current.startPoint,at.current.targetVP),ge=!0);ge||(O=bt(ye));const we=q==="freehand"&&se.pointerType==="pen"?se.pressure:1,Se={...O,pressure:we};ze.current.onPointerMove(Se,K)}}return}const Re=so(ot,o,t.current);let De=Re;if(A){A.type==="ruler"?M($=>$.map(B=>{if(B.id===A.id){const K={...B};if(A.part==="start")K.start=Re;else if(A.part==="end")K.end=Re;else if(A.part==="line"){const se=B.end.x-B.start.x,ye=B.end.y-B.start.y;K.start.x=Re.x+A.offset.x,K.start.y=Re.y+A.offset.y,K.end.x=K.start.x+se,K.end.y=K.start.y+ye}return K}return B})):A.type==="mirror"?x($=>$.map(B=>{if(B.id===A.id){const K={...B};if(A.part==="start")K.start=Re;else if(A.part==="end")K.end=Re;else if(A.part==="line"){const se=B.end.x-B.start.x,ye=B.end.y-B.start.y;K.start.x=Re.x+A.offset.x,K.start.y=Re.y+A.offset.y,K.end.x=K.start.x+se,K.end.y=K.start.y+ye}return K}return B})):(A.type==="perspective"||A.type==="perspective-point"||A.type==="perspective-extra")&&S($=>{if(!$)return null;const B=JSON.parse(JSON.stringify($));if(A.type==="perspective-point")B.guidePoint=Re;else if(A.type==="perspective-extra"){const K=B.extraGuideLines[A.color].find(se=>se.id===A.id);K&&(K.handle=Re)}else if(A.type==="perspective"){const K=B.lines[A.color].find(se=>se.id===A.lineId);K&&(K[A.part]=Re)}return B});return}if(De=bt(Re),Q){const $=(fe=n.current)==null?void 0:fe.getContext("2d");if(!$)return;const B=ot.pointerType==="pen"?ot.pressure:1,K={...De,pressure:B};ro($),$.save(),$.setTransform(o.zoom,0,0,o.zoom,o.pan.x,o.pan.y);const se=p(i);if(se&&s){const ye={mainCtx:s.context,previewCtx:$,viewTransform:o,onDrawCommit:f,activeItemId:s.id,activeGuide:g,mirrorGuides:y,strokeModifier:ue};let O;if(Q.mode==="line"?O=[Q.points[0],K]:O=[...Q.points,K],Q.mode==="curve"&&O.length>=2)O.length===3&&(O=ym(O));else if(Q.mode==="arc"&&O.length>=2){const[ge,ne]=O,we=Math.hypot(ne.x-ge.x,ne.y-ge.y);if($.strokeStyle="rgba(0,0,0,0.4)",$.lineWidth=1/o.zoom,$.setLineDash([4/o.zoom,2/o.zoom]),$.beginPath(),$.arc(ge.x,ge.y,we,0,2*Math.PI),$.stroke(),$.setLineDash([]),O.length===3){const Se=O[2],Ae=Math.atan2(Se.y-ge.y,Se.x-ge.x);if(!_e.current)_e.current={lastAngle:Ae,totalAngle:0};else{let Le=Ae-_e.current.lastAngle;Le>Math.PI&&(Le-=2*Math.PI),Le<-Math.PI&&(Le+=2*Math.PI),_e.current.totalAngle+=Le,_e.current.lastAngle=Ae}O=xm(O,_e.current.totalAngle)}else O=[ne,De]}se.drawWithMirroring($,O,ye)}$.restore();return}if(me.type==="pan"&&l($=>({...$,pan:{x:$.pan.x+ot.movementX,y:$.pan.y+ot.movementY}})),me.type==="selection"){let $;if(me.tool==="lasso"){$=[...me.points];for(const K of nt){const se=so(K,o,t.current);$.push(bt(se))}}else $=[...me.points,De];Qe({...me,points:$});const B=(te=n.current)==null?void 0:te.getContext("2d");if(!B)return;if(ro(B),B.save(),B.setTransform(o.zoom,0,0,o.zoom,o.pan.x,o.pan.y),B.lineWidth=1/o.zoom,B.strokeStyle="black",B.setLineDash([4/o.zoom,4/o.zoom]),B.beginPath(),me.tool==="marquee-rect"){const{startPoint:K}=me;B.rect(K.x,K.y,De.x-K.x,De.y-K.y)}else{B.moveTo($[0].x,$[0].y);for(let K=1;K<$.length;K++)B.lineTo($[K].x,$[K].y)}B.stroke(),B.restore();return}if(me.type,me.type==="transform"&&j){const $=Re;if(me.startState.type==="affine"){const{startState:B,startPoint:K,handle:se}=me,ye=me.center;let O=$.x-K.x,ge=$.y-K.y;if(se==="rotate"&&ye){const ne=Math.atan2(K.y-ye.y,K.x-ye.x),we=Math.atan2($.y-ye.y,$.x-ye.x);let Se=B.rotation+(we-ne);if(H){const Ae=ee*Math.PI/180;Se=Math.round(Se/Ae)*Ae}_({...B,rotation:Se})}else if(se==="move")_({...B,x:B.x+O,y:B.y+ge});else{const{rotation:ne}=B,we=Math.cos(-ne),Se=Math.sin(-ne),Ae=O*we-ge*Se,Le=O*Se+ge*we;let Ge=B.width,dt=B.height;if(se.includes("r")&&(Ge+=Ae),se.includes("l")&&(Ge-=Ae),se.includes("b")&&(dt+=Le),se.includes("t")&&(dt-=Le),R&&(Ge!==B.width||dt!==B.height)){const No=B.width/B.height;Math.abs(Ge-B.width)>Math.abs(dt-B.height)?dt=Ge/No:Ge=dt*No}let Cn=B.x,Pt=B.y;const ll=Ge-B.width,sl=dt-B.height,Kt=Math.cos(ne),Bn=Math.sin(ne);let To=0,ln=0;se.includes("l")&&(To+=ll),se.includes("t")&&(ln+=sl);const Is=(To*Kt-ln*Bn)/2,wo=(To*Bn+ln*Kt)/2;Cn-=Is,Pt-=wo,_({...B,x:Cn,y:Pt,width:Ge,height:dt})}}else if(me.startState.type==="free"){const{handle:B,startState:K,startPoint:se}=me;if(K.type!=="free")return;const ye=$.x-se.x,O=$.y-se.y;if(B==="move")_({...K,corners:{tl:{x:K.corners.tl.x+ye,y:K.corners.tl.y+O},tr:{x:K.corners.tr.x+ye,y:K.corners.tr.y+O},bl:{x:K.corners.bl.x+ye,y:K.corners.bl.y+O},br:{x:K.corners.br.x+ye,y:K.corners.br.y+O}}});else if(B in K.corners){const ge={...K.corners};ge[B]=$,_({...K,corners:ge})}}}},[o,l,s,i,Q,X,A,b,M,x,S,w,_,bt,Te,Me,R,H,ee,r,g,T,E,G,N,f,y,ue,p,ve]),zt=C.useCallback(re=>{var nt,ot,me;const ae=Ye.current.size;if(Ye.current.delete(re.pointerId),ve(new Map(Ye.current)),Ye.current.size===0&&(je.current=!1),ae>1){Ye.current.size<2&&(de.current=null,wt.current=null,Qe({type:"none"}));return}if(je.current)return;if(Pe.current&&(clearTimeout(Pe.current),Pe.current=null),(nt=ze.current)!=null&&nt.isDrawing){const Re=s==null?void 0:s.context,De=(ot=n.current)==null?void 0:ot.getContext("2d");if(Re&&De&&s){const ut={mainCtx:Re,previewCtx:De,viewTransform:o,onDrawCommit:f,activeItemId:s.id,activeGuide:g,mirrorGuides:y,strokeModifier:ue};ze.current.onPointerUp(ut)}ze.current=null}if(i==="eraser"&&U(null),Ce.current.type==="draw"&&Q&&Q.mode==="line"&&Q.points.length>0&&(s==null?void 0:s.type)==="object"){const Re=ai(s.canvas),De=s.context,ut=p(i),Je=bt(so(re.nativeEvent,o,t.current)),fe=re.pointerType==="pen"?re.pressure:1,te={...Je,pressure:fe},$=[Q.points[0],te];if(ut&&$.length>1){const B={mainCtx:De,previewCtx:n.current.getContext("2d"),viewTransform:o,onDrawCommit:f,activeItemId:s.id,activeGuide:g,mirrorGuides:y,strokeModifier:ue};ut.drawWithMirroring(De,$,B),f(s.id,Re)}X(null)}if(Ce.current.type==="selection"&&s){const{tool:Re,points:De,startPoint:ut}=Ce.current;if(De.length>1){let Je,fe;if(Re==="marquee-rect"){const te=De[De.length-1],$=Math.min(ut.x,te.x),B=Math.min(ut.y,te.y),K=Math.abs(ut.x-te.x),se=Math.abs(ut.y-te.y);Je=new Path2D,Je.rect($,B,K,se),fe={x:$,y:B,width:K,height:se}}else{Je=new Path2D,Je.moveTo(De[0].x,De[0].y);for(let se=1;se<De.length;se++)Je.lineTo(De[se].x,De[se].y);Je.closePath();let te=1/0,$=1/0,B=-1/0,K=-1/0;De.forEach(se=>{te=Math.min(te,se.x),$=Math.min($,se.y),B=Math.max(B,se.x),K=Math.max(K,se.y)}),fe={x:te,y:$,width:B-te,height:K-$}}ie({path:Je,boundingBox:fe,sourceItemId:s.id})}}if(Ce.current.type==="text-place"){const Re=bt(so(re.nativeEvent,o,t.current));W({position:Re,value:"",activeItemId:(s==null?void 0:s.id)||""})}(i==="pan"||re.button===1&&re.pointerType==="mouse")&&(re.currentTarget.style.cursor="grab");const be=(me=n.current)==null?void 0:me.getContext("2d");be&&!Q&&ro(be),Qe({type:"none"}),b(null)},[o,t,s,f,h,i,b,r,Q,X,bt,ie,W,le,ue,y,g,U,p,ve]),bn=C.useCallback(re=>{zt(re)},[zt]),Zn=C.useCallback(re=>{if(!t.current)return;const ae=re.deltaY>0?1/1.1:1.1,be=t.current.getBoundingClientRect(),nt=re.clientX-be.left,ot=re.clientY-be.top;l(me=>{const Re=Te(),De=Math.max(Re,Math.min(me.zoom*ae,Me)),ut=(nt-me.pan.x)/me.zoom,Je=(ot-me.pan.y)/me.zoom,fe=nt-ut*De,te=ot-Je*De;return{zoom:De,pan:{x:fe,y:te}}})},[l,Te,Me]),Dn=C.useCallback(re=>{if(i==="select"){const ae=so(re.nativeEvent,o,t.current);let be=!1;[...e].reverse().forEach(nt=>{if(be||nt.type!=="object"||!nt.isVisible||!nt.canvas)return;const ot=nt.context;ot&&ot.getImageData(Math.floor(ae.x),Math.floor(ae.y),1,1).data[3]>0&&(h(nt.id),be=!0)}),be||h(null)}},[r,q,Q,X,f,s,h,e,i,o,p,g,y,ue]);return{dragActionRef:Ce,onPointerDown:$t,onPointerMove:It,onPointerUp:zt,onPointerCancel:bn,onWheel:Zn,onDoubleClick:Dn}}const dN=({selection:e,viewTransform:t,onCut:n,onCopy:o,onDelete:l,onDeselect:s})=>{if(!e)return null;const{x:i,y:r,width:u}=e.boundingBox,f=r-10,p=(i+u/2)*t.zoom+t.pan.x,g={position:"absolute",top:`${f*t.zoom+t.pan.y}px`,left:`${p}px`,transform:"translate(-50%, -100%)",zIndex:20};return a.jsxs("div",{style:g,className:"bg-[--bg-primary]/80 backdrop-blur-sm rounded-lg p-1 flex items-center gap-1 shadow-lg",onPointerDown:E=>E.stopPropagation(),children:[a.jsx("button",{onClick:o,className:"p-2 rounded-md bg-[--bg-tertiary] text-[--text-primary] hover:bg-[--bg-hover]",title:"Copiar",children:a.jsx(c0,{className:"w-5 h-5"})}),a.jsx("button",{onClick:n,className:"p-2 rounded-md bg-[--bg-tertiary] text-[--text-primary] hover:bg-[--bg-hover]",title:"Cortar",children:a.jsx(Iw,{className:"w-5 h-5"})}),a.jsx("button",{onClick:l,className:"p-2 rounded-md bg-[--bg-tertiary] text-[--text-primary] hover:bg-[--bg-hover]",title:"Eliminar",children:a.jsx(Sl,{className:"w-5 h-5"})}),a.jsx("div",{className:"h-6 w-px bg-[--bg-hover] mx-1"}),a.jsx("button",{onClick:s,className:"p-2 rounded-md bg-[--bg-tertiary] text-red-500 hover:bg-red-500 hover:text-white",title:"Deseleccionar",children:a.jsx(Xn,{className:"w-5 h-5"})})]})},fN=e=>{const{items:t,activeItemId:n,tool:o,viewTransform:l,setViewTransform:s,onDrawCommit:i,onSelectItem:r,onUpdateItem:u,activeGuide:f,isOrthogonalVisible:h,rulerGuides:p,setRulerGuides:m,mirrorGuides:g,setMirrorGuides:E,perspectiveGuide:T,setPerspectiveGuide:M,orthogonalGuide:y,gridGuide:x,areGuidesLocked:v,isCropping:S,cropRect:N,setCropRect:L,isTransforming:A,transformState:b,setTransformState:I,transformSourceBbox:w,isAspectRatioLocked:j,isAngleSnapEnabled:_,angleSnapValue:R,isPerspectiveStrokeLockEnabled:H,setIsPerspectiveStrokeLockEnabled:ee,isSnapToGridEnabled:z,strokeMode:U,strokeState:G,setStrokeState:J,selection:P,setSelection:q,onCutSelection:Q,onCopySelection:X,onDeleteSelection:he,onDeselect:pe,getMinZoom:ie,MAX_ZOOM:Ue,onAddItem:Ee,textSettings:Te,textEditState:Me,setTextEditState:He,onCommitText:tt,strokeSmoothing:W,strokeModifier:le}=e,oe=C.useRef(null),ue=C.useRef(null),ve=C.useRef(null),Ce=C.useRef(null),ze=C.useRef(null),at=C.useRef(null),xt=C.useRef(null),_e=C.useRef(null),[Ye,de]=C.useReducer(O=>O+1,0),[je,wt]=C.useState(null),Pe=C.useRef(!1),[Qe,bt]=C.useState(null),[$t,It]=C.useState(null),[zt,bn]=C.useState(null),[Zn,Dn]=C.useState(new Map),re=t.find(O=>O.id===n),ae=["brush","eraser","simple-marker","natural-marker","airbrush","fx-brush","debug-brush","advanced-marker","watercolor"].includes(o),be=["marquee-rect","lasso","magic-wand"].includes(o),{getBrushForTool:nt}=rN({brushSettings:e.brushSettings,eraserSettings:e.eraserSettings,simpleMarkerSettings:e.simpleMarkerSettings,naturalMarkerSettings:e.naturalMarkerSettings,airbrushSettings:e.airbrushSettings,fxBrushSettings:e.fxBrushSettings,advancedMarkerSettings:e.advancedMarkerSettings,watercolorSettings:e.watercolorSettings}),{redrawMainCanvas:ot,redrawGuides:me,redrawUI:Re,perspectiveVPs:De}=cN({mainCanvasRef:ue,guideCanvasRef:xt,uiCanvasRef:ze,items:t,viewTransform:l,isTransforming:A,activeItemId:n,activeGuide:f,isOrthogonalVisible:h,rulerGuides:p,mirrorGuides:g,perspectiveGuide:T,orthogonalGuide:y,gridGuide:x,isCropping:S,cropRect:N,transformState:b,transformSourceBbox:w,livePreviewLayerId:zt}),{dragActionRef:ut,...Je}=uN({items:t,uiCanvasRef:ze,previewCanvasRef:ve,viewTransform:l,setViewTransform:s,activeItem:re,tool:o,isDrawingTool:ae,isSelectionTool:be,onDrawCommit:i,onSelectItem:r,onUpdateItem:u,getBrushForTool:nt,areGuidesLocked:v,activeGuide:f,isOrthogonalVisible:h,rulerGuides:p,setRulerGuides:m,mirrorGuides:g,setMirrorGuides:E,perspectiveGuide:T,setPerspectiveGuide:M,perspectiveVPs:De,orthogonalGuide:y,guideDragState:Qe,setGuideDragState:bt,cropRect:N,setCropRect:L,transformState:b,setTransformState:I,isAspectRatioLocked:j,isAngleSnapEnabled:_,angleSnapValue:R,livePreviewLayerId:zt,setLivePreviewLayerId:bn,isPerspectiveStrokeLockEnabled:H,isSnapToGridEnabled:z,gridGuide:x,strokeMode:U,strokeState:G,setStrokeState:J,magicWandSettings:e.magicWandSettings,selection:P,setSelection:q,forceRender:de,getMinZoom:ie,MAX_ZOOM:Ue,onAddItem:Ee,textEditState:Me,setTextEditState:He,onCommitText:tt,strokeSmoothing:W,strokeModifier:le,setDebugPointers:Dn}),fe={onPointerDown:O=>{Pe.current=!0,Je.onPointerDown(O)},onPointerUp:O=>{Pe.current=!1,Je.onPointerUp(O)},onPointerCancel:O=>{Pe.current=!1,Je.onPointerCancel(O)},onPointerMove:Je.onPointerMove,onDoubleClick:Je.onDoubleClick,onWheel:Je.onWheel};C.useEffect(()=>{if(A&&(re==null?void 0:re.type)==="object"&&(re!=null&&re.canvas)&&w){const O=document.createElement("canvas");O.width=w.width,O.height=w.height;const ge=O.getContext("2d");ge&&(ge.drawImage(re.canvas,w.x,w.y,w.width,w.height,0,0,w.width,w.height),It(O.toDataURL()))}else It(null)},[A,re,w]),C.useEffect(()=>{const O=we=>{if(!ze.current)return;const Se={x:we.clientX-ze.current.getBoundingClientRect().left,y:we.clientY-ze.current.getBoundingClientRect().top};wt(Se)},ge=()=>{wt(null),Pe.current=!1},ne=oe.current;return ne==null||ne.addEventListener("pointermove",O),ne==null||ne.addEventListener("pointerleave",ge),()=>{ne==null||ne.removeEventListener("pointermove",O),ne==null||ne.removeEventListener("pointerleave",ge)}},[]),C.useEffect(()=>{var ge;const O=(ge=Ce.current)==null?void 0:ge.getContext("2d");if(O&&(O.clearRect(0,0,O.canvas.width,O.canvas.height),Zn.size<=1&&ae&&je&&(!Pe.current||o==="eraser"))){let ne=0;switch(o){case"brush":ne=e.brushSettings.size;break;case"eraser":ne=e.eraserSettings.size;break;case"simple-marker":ne=e.simpleMarkerSettings.size;break;case"natural-marker":ne=e.naturalMarkerSettings.size;break;case"airbrush":ne=e.airbrushSettings.size;break;case"fx-brush":ne=e.fxBrushSettings.size;break;case"debug-brush":ne=2;break;case"advanced-marker":ne=e.advancedMarkerSettings.size;break;case"watercolor":ne=e.watercolorSettings.size;break}if(ne>0){const we=ne*l.zoom,Se=Le=>{O.lineWidth=1,O.strokeStyle="rgba(0, 0, 0, 0.7)",O.setLineDash([]),O.beginPath(),Le==="circle"?O.arc(je.x,je.y,we/2,0,2*Math.PI):O.rect(je.x-we/2,je.y-we/2,we,we),O.stroke(),O.strokeStyle="rgba(255, 255, 255, 0.7)",O.setLineDash([2,2]),O.beginPath(),Le==="circle"?O.arc(je.x,je.y,we/2,0,2*Math.PI):O.rect(je.x-we/2,je.y-we/2,we,we),O.stroke(),O.setLineDash([])},Ae=o==="eraser"&&e.eraserSettings.tipShape==="square"||o==="simple-marker"&&e.simpleMarkerSettings.tipShape==="square"?"square":"circle";Se(Ae)}}},[ae,o,je,l.zoom,e.brushSettings,e.eraserSettings,e.simpleMarkerSettings,e.naturalMarkerSettings,e.airbrushSettings,e.fxBrushSettings,e.advancedMarkerSettings,e.watercolorSettings,Pe.current,Zn]),C.useEffect(()=>{var Se;const O=(Se=at.current)==null?void 0:Se.getContext("2d");if(!P||!O||P.sourceItemId!==n){O&&ro(O);return}let ge,ne=0;const we=()=>{ne=(ne+.5)%8,ro(O),O.save(),O.setTransform(l.zoom,0,0,l.zoom,l.pan.x,l.pan.y),O.lineWidth=1/l.zoom,O.strokeStyle="white",O.setLineDash([4/l.zoom,4/l.zoom]),O.lineDashOffset=-ne,O.stroke(P.path),O.strokeStyle="black",O.lineDashOffset=4-ne,O.stroke(P.path),O.restore(),ge=requestAnimationFrame(we)};return we(),()=>{cancelAnimationFrame(ge),O&&ro(O)}},[P,l,n]),C.useLayoutEffect(()=>{ot(),me(),Re()},[ot,me,Re,A,b,re,w,l,Ye,zt]),C.useEffect(()=>{const O=oe.current,ge=[ue.current,ve.current,Ce.current,ze.current,xt.current,at.current];if(!O||ge.some(we=>!we))return;const ne=new ResizeObserver(we=>{const Se=we[0],{width:Ae,height:Le}=Se.contentRect;ge.forEach(Ge=>{Ge&&(Ge.width=Ae,Ge.height=Le)}),ot(),me(),Re()});return ne.observe(O),()=>ne.disconnect()},[ot,me,Re]),C.useEffect(()=>{Me&&_e.current&&(_e.current.focus(),_e.current.value=Me.value)},[Me]),C.useEffect(()=>{_e.current&&(_e.current.style.height="auto",_e.current.style.height=`${_e.current.scrollHeight}px`)},[Me==null?void 0:Me.value]);let te={display:"none"};if(A&&b&&w&&$t){if(b.type==="affine"){const{x:O,y:ge,width:ne,height:we,rotation:Se}=b,Ae=ne/w.width,Le=we/w.height,Ge=`
                matrix(${l.zoom}, 0, 0, ${l.zoom}, ${l.pan.x}, ${l.pan.y})
                translate(${O+ne/2}px, ${ge+we/2}px)
                rotate(${Se}rad)
                scale(${Ae}, ${Le})
                translate(-${w.width/2}px, -${w.height/2}px)
             `;te={position:"absolute",top:0,left:0,width:`${w.width}px`,height:`${w.height}px`,willChange:"transform",imageRendering:"pixelated",transformOrigin:"top left",transform:Ge}}else if(b.type==="free"){const{corners:O}=b,{width:ge,height:ne}=w,we=[{x:0,y:0},{x:ge,y:0},{x:ge,y:ne},{x:0,y:ne}],Se=[O.tl,O.tr,O.br,O.bl].map(Le=>({x:Le.x*l.zoom+l.pan.x,y:Le.y*l.zoom+l.pan.y})),Ae=Kw(we,Se);te={position:"absolute",top:0,left:0,width:`${ge}px`,height:`${ne}px`,willChange:"transform",imageRendering:"pixelated",transformOrigin:"top left",transform:Ae}}}const $=()=>o==="text"?"text":ae?"none":be?"crosshair":o==="pan"?Pe.current?"grabbing":"grab":"default",B=()=>{Me&&tt(Me)},K=O=>{Me&&He({...Me,value:O.target.value})},se=O=>{O.key==="Escape"?He(null):O.key==="Enter"&&!O.shiftKey&&(O.preventDefault(),B())};let ye={display:"none"};if(Me){const{position:O}=Me,ge=O.x*l.zoom+l.pan.x,ne=O.y*l.zoom+l.pan.y;ye={position:"absolute",left:`${ge}px`,top:`${ne}px`,transform:Te.textAlign==="center"?"translateX(-50%)":Te.textAlign==="right"?"translateX(-100%)":"none",display:"block",background:"rgba(255, 255, 255, 0.1)",border:"1px dashed rgba(255, 255, 255, 0.8)",borderRadius:"2px",padding:"0",margin:"0",resize:"none",overflow:"hidden",outline:"none",whiteSpace:"pre-wrap",fontFamily:Te.fontFamily,fontSize:`${Te.fontSize*l.zoom}px`,lineHeight:1.2,color:Te.color,textAlign:Te.textAlign,fontWeight:Te.fontWeight,minWidth:`${10*l.zoom}px`,minHeight:`${Te.fontSize*1.2*l.zoom}px`,height:"auto"}}return a.jsxs("div",{ref:oe,className:"w-full h-full overflow-hidden relative bg-[--bg-tertiary]",style:{cursor:$(),touchAction:"none"},...fe,onContextMenu:O=>O.preventDefault(),children:[a.jsx("canvas",{ref:ue,className:"absolute inset-0"}),a.jsx("canvas",{ref:xt,className:"absolute inset-0 pointer-events-none"}),a.jsx("canvas",{ref:ve,className:"absolute inset-0 pointer-events-none"}),a.jsx("img",{src:$t||"",alt:"Transform preview",className:"pointer-events-none",style:te}),a.jsx("canvas",{ref:ze,className:"absolute inset-0 pointer-events-none"}),a.jsx("canvas",{ref:at,className:"absolute inset-0 pointer-events-none"}),a.jsx("canvas",{ref:Ce,className:"absolute inset-0 pointer-events-none"}),Me&&a.jsx("textarea",{ref:_e,style:ye,defaultValue:Me.value,onChange:K,onBlur:B,onKeyDown:se,onPointerDown:O=>O.stopPropagation()}),P&&n===P.sourceItemId&&a.jsx(dN,{selection:P,viewTransform:l,onCut:Q,onCopy:X,onDelete:he,onDeselect:pe})]})},hN=({item:e,onApply:t,onCancel:n})=>{const o=C.useRef(null),l=C.useRef(null),s=C.useRef(null),i=C.useRef(null),r=C.useRef(null),u=C.useRef(null),[f,h]=C.useState("picker"),[p,m]=C.useState({zoom:1,pan:{x:0,y:0}}),[g,E]=C.useState(30),[T,M]=C.useState({size:50}),[y,x]=C.useState(5),[v,S]=C.useState("mm"),[N,L]=C.useState("5"),[A,b]=C.useState(null),[I,w]=C.useState([]),[j,_]=C.useState(-1),R=C.useRef({isPanning:!1,isErasing:!1,lastPoint:null}),H=C.useMemo(()=>I[j],[I,j]),ee=C.useMemo(()=>(H==null?void 0:H.colors)??[],[H]),z=j>0,U=j<I.length-1,G=C.useMemo(()=>({mm:1,cm:10,m:1e3}),[]),J=C.useCallback(W=>{const le=I.slice(0,j+1);w([...le,W]),_(le.length)},[I,j]);C.useEffect(()=>{if(e){const W=e.scaleFactor||5,le=e.scaleUnit||"mm";x(W),S(le),L(String(Number((W*G[le]).toFixed(2)))),E(e.tolerance!==void 0?e.tolerance:30);const oe=new Image;oe.crossOrigin="anonymous",oe.onload=()=>{b(oe)},oe.src=e.originalDataUrl}else b(null),w([]),_(-1),m({zoom:1,pan:{x:0,y:0}})},[e,G]);const P=C.useCallback(()=>{if(!u.current||!l.current)return;const W=u.current,le=l.current,oe=le.getContext("2d");if(!oe)return;oe.clearRect(0,0,le.width,le.height),oe.save(),oe.translate(p.pan.x,p.pan.y),oe.scale(p.zoom,p.zoom),W.width>0&&(oe.imageSmoothingEnabled=p.zoom<3,oe.drawImage(W,0,0)),oe.restore(),oe.save();const ue=le.height-30,ve=20,Ce=100,ze=1/(y*p.zoom),at=Ce*ze,xt=[.1,.5,1,2,5,10,20,50,100,200,500,1e3,2e3,5e3,1e4];let _e=xt[0];for(const $t of xt){if($t>at)break;_e=$t}const Ye=_e*y*p.zoom;let de=`${_e}mm`;_e>=1e3?de=`${_e/1e3}m`:_e>=10&&(de=`${_e/10}cm`),oe.font="12px sans-serif";const wt=oe.measureText(de).width,Pe=Math.max(Ye,wt)+16,Qe=ve-8,bt=ue-18;oe.fillStyle="rgba(255, 255, 255, 0.7)",oe.fillRect(Qe,bt,Pe,24),oe.strokeStyle="rgba(0, 0, 0, 0.8)",oe.lineWidth=1.5,oe.beginPath(),oe.moveTo(ve,ue-5),oe.lineTo(ve,ue),oe.lineTo(ve+Ye,ue),oe.lineTo(ve+Ye,ue-5),oe.stroke(),oe.fillStyle="rgba(0, 0, 0, 0.8)",oe.textAlign="center",oe.fillText(de,ve+Ye/2,ue-8),oe.restore()},[p,y]),q=C.useCallback(()=>{const W=s.current,le=i.current,oe=r.current,ue=u.current;if(!W||!le||!oe||!ue)return;const ve=ue.getContext("2d");ve&&(ve.clearRect(0,0,ue.width,ue.height),ve.drawImage(W,0,0),ve.globalCompositeOperation="destination-in",ve.drawImage(le,0,0),ve.globalCompositeOperation="destination-out",ve.drawImage(oe,0,0),ve.globalCompositeOperation="source-over",P())},[P]);C.useEffect(()=>{var de,je,wt;if(!H||!A)return;const W=(de=s.current)==null?void 0:de.getContext("2d",{willReadFrequently:!0}),le=(je=i.current)==null?void 0:je.getContext("2d"),oe=(wt=r.current)==null?void 0:wt.getContext("2d");if(!W||!le||!oe)return;const{width:ue,height:ve}=A,{colors:Ce,eraserMaskData:ze}=H;ze?oe.putImageData(ze,0,0):oe.clearRect(0,0,ue,ve);const at=W.getImageData(0,0,ue,ve).data,xt=le.createImageData(ue,ve),_e=xt.data,Ye=(g/100*255)**2*3;for(let Pe=0;Pe<at.length;Pe+=4){let Qe=!1;if(Ce.length>0){const bt=at[Pe],$t=at[Pe+1],It=at[Pe+2];for(const zt of Ce)if((bt-zt.r)**2+($t-zt.g)**2+(It-zt.b)**2<=Ye){Qe=!0;break}}_e[Pe]=255,_e[Pe+1]=255,_e[Pe+2]=255,_e[Pe+3]=Qe?0:255}le.putImageData(xt,0,0),q()},[H,g,A,q]),C.useEffect(()=>{var ve;if(!A||!s.current||!r.current||!u.current)return;const{width:W,height:le}=A;[s.current,r.current,u.current,i.current].forEach(Ce=>{Ce&&(Ce.width=W,Ce.height=le)}),(ve=s.current.getContext("2d"))==null||ve.drawImage(A,0,0);const oe=r.current.getContext("2d");if(!oe)return;oe.clearRect(0,0,W,le);const ue=oe.getImageData(0,0,W,le);w([{colors:(e==null?void 0:e.transparentColors)||[],eraserMaskData:ue}]),_(0)},[A,e]),C.useEffect(()=>{if(A&&o.current&&j===0){const W=o.current.offsetWidth,le=o.current.offsetHeight,oe=.9,ue=W/A.width,ve=le/A.height,Ce=Math.min(ue,ve)*oe,ze=(W-A.width*Ce)/2,at=(le-A.height*Ce)/2;m({zoom:Ce,pan:{x:ze,y:at}})}},[A,j]),C.useEffect(()=>{const W=new ResizeObserver(()=>{if(o.current&&l.current){const{width:le,height:oe}=o.current.getBoundingClientRect();l.current.width=le,l.current.height=oe,P()}});return o.current&&W.observe(o.current),()=>W.disconnect()},[P]),C.useEffect(P,[P]);const Q=W=>{if(W.button!==0&&W.button!==1||!H)return;W.currentTarget.setPointerCapture(W.pointerId);const le=so(W.nativeEvent,p,l.current);if(R.current.lastPoint=le,f==="pan"||W.button===1)R.current.isPanning=!0;else if(f==="picker"&&s.current){const oe=s.current.getContext("2d",{willReadFrequently:!0});if(oe&&le.x>=0&&le.x<s.current.width&&le.y>=0&&le.y<s.current.height){const ue=oe.getImageData(Math.floor(le.x),Math.floor(le.y),1,1).data,ve={r:ue[0],g:ue[1],b:ue[2]};ee.some(Ce=>Ce.r===ve.r&&Ce.g===ve.g&&Ce.b===ve.b)||J({colors:[...ee,ve],eraserMaskData:H.eraserMaskData})}}else if(f==="eraser"&&r.current){R.current.isErasing=!0;const oe=r.current.getContext("2d");oe&&(oe.fillStyle="black",oe.beginPath(),oe.arc(le.x,le.y,T.size/2,0,Math.PI*2),oe.fill(),q())}},X=W=>{const le=so(W.nativeEvent,p,l.current),{isPanning:oe,isErasing:ue,lastPoint:ve}=R.current;if(oe)m(Ce=>({...Ce,pan:{x:Ce.pan.x+W.movementX,y:Ce.pan.y+W.movementY}}));else if(ue&&ve&&r.current){const Ce=r.current.getContext("2d");Ce&&(Ce.fillStyle="black",Ce.strokeStyle="black",Ce.lineWidth=T.size,Ce.lineCap="round",Ce.lineJoin="round",Ce.beginPath(),Ce.moveTo(ve.x,ve.y),Ce.lineTo(le.x,le.y),Ce.stroke(),q())}R.current.lastPoint=le},he=W=>{var le;if(W.currentTarget.releasePointerCapture(W.pointerId),R.current.isErasing){const oe=(le=r.current)==null?void 0:le.getContext("2d");if(oe&&H){const ue=oe.getImageData(0,0,oe.canvas.width,oe.canvas.height);J({colors:ee,eraserMaskData:ue})}}R.current={isPanning:!1,isErasing:!1,lastPoint:null}},pe=()=>{u.current&&t(u.current.toDataURL(),ee,y,g,v)},ie=()=>z&&_(W=>W-1),Ue=()=>U&&_(W=>W+1),Ee=()=>I.length>0&&_(0),Te=()=>{if(!A||!r.current)return;const W=r.current.getContext("2d");if(!W)return;const{width:le,height:oe}=A;W.clearRect(0,0,le,oe);const ue=W.getImageData(0,0,le,oe);w([{colors:[],eraserMaskData:ue}]),_(0)},Me=W=>{const le=W.target.value,oe=y;S(le),L(String(Number((oe*G[le]).toFixed(2))))},He=W=>{const le=W.target.value;L(le);const oe=parseFloat(le);!isNaN(oe)&&oe>0&&x(oe/G[v])};if(!e)return null;const tt=W=>`p-2 rounded-md transition-colors ${f===W?"bg-[--accent-primary] text-white":"bg-[--bg-tertiary] text-[--text-primary] hover:bg-[--bg-hover]"}`;return a.jsx("div",{className:"fixed inset-0 bg-black/75 z-40 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-[--bg-secondary] rounded-lg shadow-xl w-full h-full max-w-6xl max-h-[90vh] flex flex-col",children:[a.jsxs("div",{className:"flex-shrink-0 flex items-center justify-between p-2 border-b border-[--bg-tertiary]",children:[a.jsxs("h2",{className:"text-lg font-bold",children:["Editar Transparencia: ",e.name]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:pe,className:"px-4 py-2 rounded-md bg-green-600 hover:bg-green-500 text-white font-semibold",children:"Aplicar"}),a.jsx("button",{onClick:n,className:"p-2 rounded-full hover:bg-[--bg-tertiary]",children:a.jsx(Xn,{className:"w-6 h-6"})})]})]}),a.jsxs("div",{className:"flex-grow flex min-h-0",children:[a.jsxs("div",{className:"w-64 flex-shrink-0 bg-[--bg-primary] p-4 flex flex-col gap-4 border-r border-[--bg-tertiary] overflow-y-auto",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-bold uppercase text-[--text-secondary] mb-2",children:"Herramientas"}),a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsx("button",{onClick:()=>h("picker"),className:tt("picker"),title:"Cuentagotas",children:a.jsx(l0,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>h("eraser"),className:tt("eraser"),title:"Borrador",children:a.jsx(ji,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>h("pan"),className:tt("pan"),title:"Mover",children:a.jsx(o0,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>m(W=>({...W,zoom:W.zoom*1.2})),className:"p-2 rounded-md bg-[--bg-tertiary] text-[--text-primary] hover:bg-[--bg-hover]",title:"Acercar",children:a.jsx(t0,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>m(W=>({...W,zoom:W.zoom/1.2})),className:"p-2 rounded-md bg-[--bg-tertiary] text-[--text-primary] hover:bg-[--bg-hover]",title:"Alejar",children:a.jsx(n0,{className:"w-5 h-5"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-bold uppercase text-[--text-secondary] mb-2",children:"Historial"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:ie,disabled:!z,className:"p-2 rounded-md bg-[--bg-tertiary] text-[--text-primary] hover:bg-[--bg-hover] disabled:opacity-50 disabled:cursor-not-allowed",title:"Deshacer",children:a.jsx(s0,{className:"w-5 h-5"})}),a.jsx("button",{onClick:Ue,disabled:!U,className:"p-2 rounded-md bg-[--bg-tertiary] text-[--text-primary] hover:bg-[--bg-hover] disabled:opacity-50 disabled:cursor-not-allowed",title:"Rehacer",children:a.jsx(i0,{className:"w-5 h-5"})}),a.jsx("button",{onClick:Ee,className:"p-2 rounded-md bg-[--bg-tertiary] text-[--text-primary] hover:bg-[--bg-hover]",title:"Restablecer Sesin",children:a.jsx(Vw,{className:"w-5 h-5"})}),a.jsx("button",{onClick:Te,className:"p-2 rounded-md bg-[--bg-tertiary] text-[--text-primary] hover:bg-[--bg-hover]",title:"Restaurar Original (sin transparencia)",children:a.jsx(Ew,{className:"w-5 h-5"})})]})]}),f==="eraser"&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-bold uppercase text-[--text-secondary] mb-2",children:"Ajustes del Borrador"}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"eraser-size",className:"text-xs text-[--text-secondary]",children:["Tamao: ",T.size]}),a.jsx("input",{type:"range",id:"eraser-size",min:"1",max:"200",step:"1",value:T.size,onChange:W=>M(le=>({...le,size:parseInt(W.target.value,10)})),className:"w-full"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-bold uppercase text-[--text-secondary] mb-2",children:"Seleccin de Color"}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"tolerance",className:"text-xs text-[--text-secondary]",children:["Tolerancia: ",g]}),a.jsx("input",{type:"range",id:"tolerance",min:"0",max:"100",step:"1",value:g,onChange:W=>E(parseInt(W.target.value,10)),className:"w-full"})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"flex justify-between items-center mb-2",children:a.jsx("h3",{className:"text-sm font-bold uppercase text-[--text-secondary]",children:"Colores Transparentes"})}),a.jsxs("div",{className:"max-h-60 overflow-y-auto space-y-1 pr-2",children:[ee.map((W,le)=>a.jsxs("div",{className:"flex items-center justify-between p-1 rounded bg-[--bg-tertiary]",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-6 h-6 rounded border border-white/20",style:{backgroundColor:hm(W.r,W.g,W.b)}}),a.jsx("span",{className:"text-xs font-mono",children:hm(W.r,W.g,W.b)})]}),a.jsx("button",{onClick:()=>{if(!H)return;const oe=ee.filter((ue,ve)=>ve!==le);J({colors:oe,eraserMaskData:H.eraserMaskData})},className:"p-1 rounded-full text-xs text-gray-400 hover:bg-red-500 hover:text-white",children:""})]},le)),ee.length===0&&a.jsx("p",{className:"text-xs text-center text-[--text-secondary] py-2",children:"Usa el cuentagotas para aadir colores."})]})]}),a.jsxs("div",{className:"mt-auto pt-4 border-t border-[--bg-tertiary]",children:[a.jsx("h3",{className:"text-sm font-bold uppercase text-[--text-secondary] mb-2",children:"Propiedades"}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[--text-secondary]",children:"Factor de Escala"}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("span",{className:"text-sm",children:"1"}),a.jsxs("select",{value:v,onChange:Me,className:"bg-[--bg-tertiary] text-sm rounded-md p-1 border border-[--bg-hover]",children:[a.jsx("option",{value:"mm",children:"mm"}),a.jsx("option",{value:"cm",children:"cm"}),a.jsx("option",{value:"m",children:"m"})]}),a.jsx("span",{className:"text-sm",children:"="}),a.jsx("input",{type:"number",value:N,onChange:He,className:"w-20 bg-[--bg-secondary] text-sm rounded-md p-1 border border-[--bg-tertiary]"}),a.jsx("span",{className:"text-sm",children:"px"})]})]})]})]}),a.jsxs("div",{ref:o,className:"flex-grow bg-gray-500",onPointerDown:Q,onPointerMove:X,onPointerUp:he,onPointerLeave:he,style:{cursor:f==="pan"?R.current.isPanning?"grabbing":"grab":"crosshair",backgroundImage:"linear-gradient(45deg, #808080 25%, transparent 25%), linear-gradient(-45deg, #808080 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #808080 75%), linear-gradient(-45deg, transparent 75%, #808080 75%)",backgroundSize:"20px 20px",backgroundPosition:"0 0, 0 10px, 10px -10px, -10px 0px"},children:[a.jsx("canvas",{ref:l,className:"w-full h-full"}),a.jsx("canvas",{ref:s,className:"hidden"}),a.jsx("canvas",{ref:i,className:"hidden"}),a.jsx("canvas",{ref:r,className:"hidden"}),a.jsx("canvas",{ref:u,className:"hidden"})]})]})]})})},pN=({user:e,items:t,onImportImage:n,onCreateFolder:o,onEditItem:l,onDeleteItem:s,onAddItemToScene:i,onMoveItems:r})=>{const[u,f]=C.useState(null),[h,p]=C.useState(!1),[m,g]=C.useState(""),E=C.useRef(null),[T,M]=C.useState(new Set),y=w=>{w.target.files&&w.target.files[0]&&(n(w.target.files[0],u),w.target.value="")},x=(w,j)=>{if(j.type==="folder"){w.preventDefault();return}w.stopPropagation(),w.dataTransfer.effectAllowed="copy",w.dataTransfer.setData("application/json",JSON.stringify({type:"library-item",id:j.id}))},v=()=>{m.trim()&&o(m.trim(),u),g(""),p(!1)},S=w=>{M(j=>{const _=new Set(j);return _.has(w)?_.delete(w):_.add(w),_})},N=w=>{f(w)},L=()=>{T.size!==0&&(r(Array.from(T),u),M(new Set))},A=C.useMemo(()=>{const w=[];let j=u;for(;j;){const _=t.find(R=>R.id===j);if(_)w.unshift(_),j=_.parentId;else break}return w},[u,t]),b=C.useMemo(()=>t.filter(j=>j.parentId===u).sort((j,_)=>j.type==="folder"&&_.type!=="folder"?-1:j.type!=="folder"&&_.type==="folder"?1:j.name.localeCompare(_.name)),[t,u]),I=w=>{w.type==="folder"?N(w.id):i(w.id)};return a.jsxs("div",{className:"p-4 flex flex-col h-full bg-[--bg-primary]",children:[a.jsxs("div",{className:"flex-shrink-0 mb-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"text-sm font-bold uppercase text-[--text-secondary]",children:"Libreria"}),T.size>0&&a.jsxs("button",{onClick:L,className:"text-sm px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-500",children:["Mover ",T.size," aqu"]})]}),a.jsxs("div",{className:"flex items-center text-sm text-[--text-secondary] flex-wrap",children:[u!==null&&a.jsx("button",{onClick:()=>N(A.length>1?A[A.length-2].id:null),className:"p-1 rounded-md hover:bg-[--bg-tertiary] mr-1",title:"Subir un nivel",children:a.jsx(f0,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>N(null),className:"hover:text-[--text-primary]",children:"Raz"}),A.map(w=>a.jsxs(Um.Fragment,{children:[a.jsx(u0,{className:"w-4 h-4 mx-1"}),a.jsx("button",{onClick:()=>N(w.id),className:"hover:text-[--text-primary]",children:w.name})]},w.id))]})]}),a.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:e?b.length===0&&!h?a.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center text-[--text-secondary] p-4",children:[a.jsx(Kp,{className:"w-12 h-12 mb-4"}),a.jsx("p",{className:"text-sm font-bold",children:"La carpeta est vaca"}),a.jsx("p",{className:"text-xs",children:"Importe imgenes o cree una nueva carpeta."})]}):a.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[h&&a.jsxs("div",{className:"aspect-square bg-[--bg-secondary] rounded-md flex flex-col items-center justify-center p-2",children:[a.jsx(Ca,{className:"w-10 h-10 text-[--text-secondary] mb-1"}),a.jsx("input",{ref:E,type:"text",value:m,onChange:w=>g(w.target.value),onBlur:v,onKeyDown:w=>{w.key==="Enter"&&v(),w.key==="Escape"&&(p(!1),g(""))},placeholder:"Nombre...",className:"w-full text-center bg-[--bg-tertiary] text-[--text-primary] rounded text-xs p-1",autoFocus:!0})]}),b.map(w=>{const j=T.has(w.id);return a.jsxs("div",{draggable:w.type==="image",onDragStart:_=>x(_,w),onDoubleClick:()=>I(w),className:`group relative aspect-square bg-[--bg-secondary] rounded-md flex flex-col items-center justify-center p-1 hover:bg-[--bg-hover] ${w.type==="folder"?"cursor-pointer":"cursor-grab"} transition-all duration-150 border-2 ${j?"border-[--accent-primary]":"border-transparent"}`,title:w.name,children:[a.jsx("button",{onClick:_=>{_.stopPropagation(),S(w.id)},"aria-label":`Select ${w.name}`,className:"absolute top-1 left-1 w-5 h-5 bg-black/30 backdrop-blur-sm rounded-sm flex items-center justify-center border border-white/30 z-10 hover:bg-black/50",children:j&&a.jsx(r0,{className:"w-4 h-4 text-white"})}),w.type==="image"&&w.dataUrl?a.jsx("img",{src:w.dataUrl,alt:w.name,className:"max-w-full max-h-full object-contain pointer-events-none"}):w.type==="folder"?a.jsx(Ca,{className:"w-10 h-10 text-red-400"}):a.jsx(Kp,{className:"w-8 h-8 text-gray-500 pointer-events-none"}),a.jsx("span",{className:"text-xs text-[--text-secondary] mt-1 truncate w-full text-center pointer-events-none",children:w.name}),a.jsx("button",{onClick:_=>{_.stopPropagation(),s(w)},"aria-label":`Delete ${w.name}`,className:"absolute top-1 right-1 p-1 bg-[--bg-primary]/60 rounded-full text-[--text-primary] opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-500 z-10",children:a.jsx(Sl,{className:"w-4 h-4"})}),w.type==="image"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:_=>{_.stopPropagation(),i(w.id)},"aria-label":`Add ${w.name} to scene`,className:"absolute bottom-1 left-1 p-1 bg-[--bg-primary]/60 rounded-full text-[--text-primary] opacity-0 group-hover:opacity-100 transition-opacity hover:bg-green-500 z-10",children:a.jsx(tr,{className:"w-4 h-4"})}),a.jsx("button",{onClick:_=>{_.stopPropagation(),l(w.id)},"aria-label":`Edit transparency for ${w.name}`,className:"absolute bottom-1 right-1 p-1 bg-[--bg-primary]/60 rounded-full text-[--text-primary] opacity-0 group-hover:opacity-100 transition-opacity hover:bg-[--accent-primary] z-10",children:a.jsx(Ui,{className:"w-4 h-4"})})]})]},w.id)})]}):a.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center text-[--text-secondary] p-4",children:[a.jsx(d0,{className:"w-12 h-12 mb-4"}),a.jsx("p",{className:"text-sm font-bold",children:"Se requiere iniciar sesin"}),a.jsx("p",{className:"text-xs",children:"Por favor, inicie sesin para acceder a su librera de activos en lnea."})]})}),a.jsxs("div",{className:"flex-shrink-0 mt-4 flex items-center gap-2",children:[a.jsxs("label",{htmlFor:"library-image-upload",className:"flex-grow flex items-center justify-center p-2 rounded-lg bg-[--bg-tertiary] hover:bg-[--bg-hover] cursor-pointer text-[--text-secondary] disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(Ir,{className:"w-5 h-5 mr-2"}),a.jsx("span",{className:"text-sm",children:"Importar"})]}),a.jsx("input",{id:"library-image-upload",type:"file",accept:"image/*",className:"hidden",onChange:y,disabled:!e}),a.jsxs("button",{onClick:()=>p(!0),disabled:!e||h,className:"flex-shrink-0 flex items-center justify-center p-2 rounded-lg bg-[--bg-tertiary] hover:bg-[--bg-hover] cursor-pointer text-[--text-secondary] disabled:opacity-50 disabled:cursor-not-allowed",title:"Crear nueva carpeta",children:[a.jsx(Ca,{className:"w-5 h-5 mr-2"}),a.jsx("span",{className:"text-sm",children:"Nueva Carpeta"})]})]})]})},mN=({tool:e,setTool:t,onSetActiveGuide:n,onSetGridType:o,isSnapToGridEnabled:l,onToggleSnapToGrid:s,isOrthogonalVisible:i,onZoomExtents:r,onZoomIn:u,onZoomOut:f,onUndo:h,onRedo:p,onClearAll:m,canUndo:g,canRedo:E,isCropping:T,onApplyCrop:M,onCancelCrop:y,isTransforming:x,transformState:v,onApplyTransform:S,onCancelTransform:N,isAspectRatioLocked:L,onSetAspectRatioLocked:A,isAngleSnapEnabled:b,onToggleAngleSnap:I,angleSnapValue:w,onSetAngleSnapValue:j,activeGuide:_,orthogonalGuide:R,onSetOrthogonalAngle:H,gridGuide:ee,onSetGridSpacing:z,onSetGridMajorLineFrequency:U,onSetGridIsoAngle:G,onSetGridMajorLineColor:J,onSetGridMinorLineColor:P,areGuidesLocked:q,onSetAreGuidesLocked:Q,isPerspectiveStrokeLockEnabled:X,onSetIsPerspectiveStrokeLockEnabled:he,scaleFactor:pe,scaleUnit:ie,onPaste:Ue,hasClipboardContent:Ee,strokeSmoothing:Te,setStrokeSmoothing:Me})=>{C.useState("");const[He,tt]=C.useState("50"),[W,le]=C.useState("5"),[oe,ue]=C.useState(!1),ve=C.useRef(null),Ce=C.useRef(null),ze=[{name:"Gris",value:"rgba(128, 128, 128, 0.6)"},{name:"Rojo",value:"rgba(239, 68, 68, 0.6)"},{name:"Verde",value:"rgba(34, 197, 94, 0.6)"},{name:"Azul",value:"rgba(59, 130, 246, 0.6)"},{name:"Negro",value:"rgba(0, 0, 0, 0.6)"}],at=[{name:"Gris",value:"rgba(128, 128, 128, 0.3)"},{name:"Rojo",value:"rgba(239, 68, 68, 0.3)"},{name:"Verde",value:"rgba(34, 197, 94, 0.3)"},{name:"Azul",value:"rgba(59, 130, 246, 0.3)"},{name:"Negro",value:"rgba(0, 0, 0, 0.3)"}];C.useEffect(()=>{ee&&(tt(String(ee.spacing)),le(String(ee.majorLineFrequency)))},[ee]),C.useEffect(()=>{const de=je=>{ve.current&&!ve.current.contains(je.target)&&Ce.current&&!Ce.current.contains(je.target)&&ue(!1)};return document.addEventListener("mousedown",de),()=>document.removeEventListener("mousedown",de)},[]);const xt=C.useMemo(()=>{if(!ee||!pe)return`${He}px`;const de=parseInt(He)/pe;let je;switch(ie){case"cm":je=(de/10).toFixed(1);break;case"m":je=(de/1e3).toFixed(2);break;case"mm":default:je=de.toFixed(1);break}return`${He}px (${je}${ie})`},[He,ee,pe,ie]),_e=C.useMemo(()=>_!=="none"||i||ee&&ee.type!=="none",[_,i,ee]),Ye=de=>`p-2 rounded-md transition-colors ${e===de?"bg-[--accent-primary] text-white":"bg-[--bg-tertiary] text-[--text-primary] hover:bg-[--bg-hover]"}`;return a.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-[--bg-primary]/80 backdrop-blur-sm rounded-lg p-1 flex items-center gap-1 shadow-lg z-10",children:[(T||x)&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:T?y:N,className:"p-2 rounded-md bg-red-600 text-white hover:bg-red-500 transition-colors",title:"Cancelar",children:a.jsx(Xn,{className:"w-5 h-5"})}),a.jsx("button",{onClick:T?M:S,className:"p-2 rounded-md bg-green-600 text-white hover:bg-green-500 transition-colors",title:"Aplicar",children:a.jsx(r0,{className:"w-5 h-5"})}),a.jsx("div",{className:"w-px h-6 bg-[--bg-hover] mx-1"})]}),x&&(v==null?void 0:v.type)==="affine"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>A(de=>!de),className:`p-2 rounded-md transition-colors ${L?"bg-[--accent-primary] text-white":"bg-[--bg-tertiary] text-[--text-primary] hover:bg-[--bg-hover]"}`,title:L?"Desbloquear relacin de aspecto":"Bloquear relacin de aspecto",children:L?a.jsx(Wp,{className:"w-5 h-5"}):a.jsx(em,{className:"w-5 h-5"})}),a.jsx("button",{onClick:I,className:`p-2 rounded-md transition-colors ${b?"bg-[--accent-primary] text-white":"bg-[--bg-tertiary] text-[--text-primary] hover:bg-[--bg-hover]"}`,title:"Activar anclaje de ngulo",children:a.jsx(Ic,{className:"w-5 h-5"})}),b&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-px h-6 bg-[--bg-hover] mx-1"}),[1,5,10,15].map(de=>a.jsxs("button",{onClick:()=>j(de),className:`px-2 py-1 rounded-md text-xs font-semibold transition-colors ${w===de?"bg-[--accent-primary] text-white":"bg-[--bg-tertiary] text-[--text-primary] hover:bg-[--bg-hover]"}`,title:`Anclar a ${de}`,children:[de,""]},de))]})]}),!T&&!x&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>t("pan"),className:Ye("pan"),title:"Mover (Arrastrar)",children:a.jsx(o0,{className:"w-5 h-5"})}),a.jsx("div",{className:"w-px h-6 bg-[--bg-hover] mx-1"}),a.jsx("button",{onClick:f,className:"p-2 rounded-md bg-[--bg-tertiary] text-[--text-primary] hover:bg-[--bg-hover]",title:"Alejar",children:a.jsx(n0,{className:"w-5 h-5"})}),a.jsx("button",{onClick:u,className:"p-2 rounded-md bg-[--bg-tertiary] text-[--text-primary] hover:bg-[--bg-hover]",title:"Acercar",children:a.jsx(t0,{className:"w-5 h-5"})}),a.jsx("button",{onClick:r,className:"p-2 rounded-md bg-[--bg-tertiary] text-[--text-primary] hover:bg-[--bg-hover]",title:"Ajustar a la vista",children:a.jsx(l0,{className:"w-5 h-5"})}),a.jsx("div",{className:"w-px h-6 bg-[--bg-hover] mx-1"}),a.jsx("button",{onClick:h,disabled:!g,className:"p-2 rounded-md bg-[--bg-tertiary] text-[--text-primary] hover:bg-[--bg-hover] disabled:opacity-50 disabled:cursor-not-allowed",title:"Deshacer",children:a.jsx(s0,{className:"w-5 h-5"})}),a.jsx("button",{onClick:p,disabled:!E,className:"p-2 rounded-md bg-[--bg-tertiary] text-[--text-primary] hover:bg-[--bg-hover] disabled:opacity-50 disabled:cursor-not-allowed",title:"Rehacer",children:a.jsx(i0,{className:"w-5 h-5"})}),a.jsx("button",{onClick:Ue,disabled:!Ee,className:"p-2 rounded-md bg-[--bg-tertiary] text-[--text-primary] hover:bg-[--bg-hover] disabled:opacity-50 disabled:cursor-not-allowed",title:"Pegar",children:a.jsx(kw,{className:"w-5 h-5"})}),a.jsx("div",{className:"w-px h-6 bg-[--bg-hover] mx-1"}),a.jsx("div",{className:"flex items-center gap-2 group",title:`Suavizado: ${Math.round(Te*100)}%`,children:a.jsx("input",{type:"range",min:"0",max:"0.95",step:"0.05",value:Te,onChange:de=>Me(parseFloat(de.target.value)),className:"w-24"})}),a.jsx("div",{className:"w-px h-6 bg-[--bg-hover] mx-1"}),_e&&a.jsx("button",{onClick:()=>Q(de=>!de),className:`p-2 rounded-md transition-colors ${q?"bg-[--accent-primary] text-white":"bg-[--bg-tertiary] text-[--text-primary] hover:bg-[--bg-hover]"}`,title:q?"Desbloquear Guas":"Bloquear Guas",children:q?a.jsx(Wp,{className:"w-5 h-5"}):a.jsx(em,{className:"w-5 h-5"})}),a.jsxs("div",{className:"relative",children:[a.jsx("button",{ref:Ce,onClick:()=>ue(de=>!de),className:`p-2 rounded-md transition-colors ${ee&&ee.type!=="none"?"bg-[--accent-primary] text-white":"bg-[--bg-tertiary] text-[--text-primary] hover:bg-[--bg-hover]"}`,title:"Ajustes de la Retcula",children:a.jsx(Qp,{className:"w-5 h-5"})}),oe&&ee&&a.jsxs("div",{ref:ve,className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-72 bg-[--bg-primary] border border-[--bg-tertiary] rounded-lg shadow-lg p-3 space-y-3 z-20",children:[a.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[a.jsx("button",{onClick:()=>o("none"),className:`text-xs p-2 rounded ${ee.type==="none"?"bg-red-500 text-white":"bg-[--bg-tertiary] hover:bg-[--bg-hover]"}`,children:"Apagado"}),a.jsxs("button",{onClick:()=>o("cartesian"),className:`flex items-center justify-center gap-1 text-xs p-2 rounded ${ee.type==="cartesian"?"bg-[--accent-primary] text-white":"bg-[--bg-tertiary] hover:bg-[--bg-hover]"}`,children:[a.jsx(Qp,{className:"w-4 h-4"})," Cartesiana"]}),a.jsxs("button",{onClick:()=>o("isometric"),className:`flex items-center justify-center gap-1 text-xs p-2 rounded ${ee.type==="isometric"?"bg-[--accent-primary] text-white":"bg-[--bg-tertiary] hover:bg-[--bg-hover]"}`,children:[a.jsx(_w,{className:"w-4 h-4"})," Isomtrica"]})]}),ee.type!=="none"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[--text-secondary]",children:"Color de Lnea Principal"}),a.jsx("div",{className:"flex items-center gap-2 mt-1",children:ze.map(de=>a.jsx("button",{title:de.name,onClick:()=>J(de.value),className:`w-6 h-6 rounded-full border-2 transition-all ${ee.majorLineColor===de.value?"border-[--accent-primary] ring-2 ring-offset-2 ring-offset-[--bg-primary] ring-[--accent-primary]":"border-transparent hover:border-gray-400"}`,style:{backgroundColor:de.value.replace(/, 0.6\)$/,", 1)")}},de.name))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-[--text-secondary]",children:"Color de Lnea Fina"}),a.jsx("div",{className:"flex items-center gap-2 mt-1",children:at.map(de=>a.jsx("button",{title:de.name,onClick:()=>P(de.value),className:`w-6 h-6 rounded-full border-2 transition-all ${ee.minorLineColor===de.value?"border-[--accent-primary] ring-2 ring-offset-2 ring-offset-[--bg-primary] ring-[--accent-primary]":"border-transparent hover:border-gray-400"}`,style:{backgroundColor:de.value.replace(/, 0.3\)$/,", 1)")}},de.name))})]}),a.jsx("div",{className:"border-t border-[--bg-tertiary] my-2"}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"grid-spacing",className:"text-xs text-[--text-secondary]",children:["Espaciado: ",xt]}),a.jsx("input",{type:"range",id:"grid-spacing",min:"10",max:"200",step:"5",value:He,onChange:de=>{tt(de.target.value),z(parseInt(de.target.value))},className:"w-full"})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"major-line-freq",className:"text-xs text-[--text-secondary]",children:["Lnea principal cada: ",W]}),a.jsx("input",{type:"range",id:"major-line-freq",min:"2",max:"10",step:"1",value:W,onChange:de=>{le(de.target.value),U(parseInt(de.target.value))},className:"w-full"})]}),ee.type==="isometric"&&a.jsx("div",{children:a.jsx("label",{className:"text-xs text-[--text-secondary]",children:"ngulo: 60"})})]})]})]}),a.jsx("button",{onClick:s,disabled:!ee||ee.type==="none",className:`p-2 rounded-md transition-colors ${l?"bg-[--accent-primary] text-white":"bg-[--bg-tertiary] text-[--text-primary] hover:bg-[--bg-hover]"} disabled:opacity-50 disabled:cursor-not-allowed`,title:"Ajustar a la Retcula",children:a.jsx(Ic,{className:"w-5 h-5"})}),_==="perspective"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-px h-6 bg-[--bg-hover] mx-1"}),a.jsx("button",{onClick:()=>he(de=>!de),className:`p-2 rounded-md transition-colors ${X?"bg-[--accent-primary] text-white":"bg-[--bg-tertiary] text-[--text-primary] hover:bg-[--bg-hover]"}`,title:X?"Desactivar bloqueo de trazo a perspectiva":"Activar bloqueo de trazo a perspectiva",children:a.jsx(Ic,{className:"w-5 h-5"})})]}),a.jsx("button",{onClick:m,className:"p-2 rounded-md bg-[--bg-tertiary] text-[--text-primary] hover:bg-[--bg-hover]",title:"Limpiar Lienzo",children:a.jsx(Sl,{className:"w-5 h-5"})})]})]})},gN=({isOpen:e,onClose:t,drawableObjects:n,canvasSize:o})=>{const[l,s]=C.useState(!0),[i,r]=C.useState("mi-boceto.png"),[u,f]=C.useState(""),[h,p]=C.useState(!1),[m,g]=C.useState("full"),E=C.useRef(null),T=n.find(S=>S.isBackground),M=(T==null?void 0:T.isVisible)??!1,y=C.useCallback(S=>{let N=null;return S.forEach(L=>{if(!L.canvas)return;const A=Br(L.canvas);if(A)if(!N)N={...A};else{const b=Math.min(N.x,A.x),I=Math.min(N.y,A.y),w=Math.max(N.x+N.width,A.x+A.width),j=Math.max(N.y+N.height,A.y+A.height);N={x:b,y:I,width:w-b,height:j-I}}}),N},[]),x=C.useCallback(async(S,N)=>{var _;if(!E.current||o.width===0)return null;const L=E.current,A=document.createElement("canvas");A.width=o.width,A.height=o.height;const b=A.getContext("2d");if(!b)return null;b.clearRect(0,0,A.width,A.height),S&&T&&T.canvas&&T.isVisible&&b.drawImage(T.canvas,0,0);const I=n.filter(R=>!R.isBackground&&R.isVisible&&R.canvas);for(const R of[...I].reverse())b.globalAlpha=R.opacity,b.drawImage(R.canvas,0,0),b.globalAlpha=1;if(N==="full"){L.width=o.width,L.height=o.height;const R=L.getContext("2d");return R==null||R.drawImage(A,0,0),L}const w=y(I);if(!w)return L.width=1,L.height=1,(_=L.getContext("2d"))==null||_.clearRect(0,0,1,1),L;L.width=w.width,L.height=w.height;const j=L.getContext("2d");return j?(j.drawImage(A,w.x,w.y,w.width,w.height,0,0,w.width,w.height),L):null},[o,n,T,y]);C.useEffect(()=>{e&&(s(M),g("full"))},[e,M]),C.useEffect(()=>{e&&(p(!0),x(l,m).then(S=>{S&&f(S.toDataURL("image/png")),p(!1)}))},[e,l,m,x]);const v=async()=>{p(!0);const S=await x(l,m);if(!S){alert("Error al generar la imagen."),p(!1);return}S.toBlob(N=>{if(N){const L=URL.createObjectURL(N),A=document.createElement("a");A.href=L,A.download=i.endsWith(".png")?i:`${i}.png`,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(L),t()}else alert("Error al crear el archivo de imagen.");p(!1)},"image/png")};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-[--bg-secondary] text-[--text-primary] rounded-lg shadow-xl p-6 w-full max-w-2xl flex flex-col space-y-4",children:[a.jsx("h2",{className:"text-xl font-bold",children:"Exportar Imagen"}),a.jsxs("div",{className:"flex-grow p-2 rounded-md flex justify-center items-center min-h-0 bg-[--bg-primary]",style:{minHeight:"20rem",backgroundImage:"linear-gradient(45deg, #808080 25%, transparent 25%), linear-gradient(-45deg, #808080 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #808080 75%), linear-gradient(-45deg, transparent 75%, #808080 75%)",backgroundSize:"20px 20px",backgroundPosition:"0 0, 0 10px, 10px -10px, -10px 0px"},children:[h&&a.jsx("p",{children:"Generando vista previa..."}),!h&&u&&a.jsx("img",{src:u,alt:"Vista previa de la exportacin",className:"max-w-full max-h-80 object-contain"}),a.jsx("canvas",{ref:E,className:"hidden"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"filename",className:"block text-sm text-[--text-secondary] mb-1",children:"Nombre del Archivo"}),a.jsx("input",{type:"text",id:"filename",value:i,onChange:S=>r(S.target.value),className:"w-full bg-[--bg-tertiary] text-[--text-primary] text-sm rounded-md p-2"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-[--text-secondary] mb-2",children:"Tamao de Exportacin"}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"exportMode",value:"full",checked:m==="full",onChange:()=>g("full"),className:"w-4 h-4 text-[--accent-primary] bg-[--bg-tertiary] border-[--bg-hover] focus:ring-[--accent-primary]"}),a.jsx("span",{className:"ml-2 text-sm",children:"Tamao completo del lienzo"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"exportMode",value:"bbox",checked:m==="bbox",onChange:()=>g("bbox"),className:"w-4 h-4 text-[--accent-primary] bg-[--bg-tertiary] border-[--bg-hover] focus:ring-[--accent-primary]"}),a.jsx("span",{className:"ml-2 text-sm",children:"Ajustar a contenido"})]})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"includeBackground",checked:l,onChange:S=>s(S.target.checked),disabled:!M,className:"w-4 h-4 text-[--accent-primary] bg-[--bg-tertiary] border-[--bg-hover] rounded focus:ring-[--accent-primary] disabled:opacity-50"}),a.jsx("label",{htmlFor:"includeBackground",className:`ml-2 text-sm ${M?"text-[--text-primary]":"text-[--text-secondary] opacity-50"}`,children:"Incluir fondo"})]})]}),a.jsxs("div",{className:"flex justify-end space-x-4 pt-2",children:[a.jsx("button",{onClick:t,className:"px-4 py-2 rounded-md bg-[--bg-tertiary] hover:bg-[--bg-hover]",disabled:h,children:"Cancelar"}),a.jsx("button",{onClick:v,className:"px-4 py-2 rounded-md bg-[--accent-primary] hover:bg-[--accent-hover] text-white disabled:bg-gray-500 disabled:cursor-wait",disabled:h,children:h?"Exportando...":"Exportar como PNG"})]})]})}):null},yN=({isOpen:e,onClose:t,item:n,canvasSize:o,onSaveToLibrary:l})=>{const[s,i]=C.useState("full"),[r,u]=C.useState(""),[f,h]=C.useState(""),[p,m]=C.useState(!1),g=C.useRef(null);C.useEffect(()=>{n!=null&&n.name?u(n.name.endsWith(".png")?n.name:`${n.name}.png`):u("objeto.png")},[n]);const E=C.useCallback(async y=>{if(!n||!n.canvas||!g.current)return null;const x=n.canvas,v=g.current;if(y==="full"){v.width=o.width,v.height=o.height;const S=v.getContext("2d");if(!S)return null;S.clearRect(0,0,v.width,v.height),S.globalAlpha=n.opacity,S.drawImage(x,0,0),S.globalAlpha=1}else{const S=Br(x);if(S){v.width=S.width,v.height=S.height;const N=v.getContext("2d");if(!N)return null;N.clearRect(0,0,v.width,v.height),N.globalAlpha=n.opacity,N.drawImage(x,S.x,S.y,S.width,S.height,0,0,S.width,S.height),N.globalAlpha=1}else{v.width=1,v.height=1;const N=v.getContext("2d");N==null||N.clearRect(0,0,1,1)}}return v},[n,o]);C.useEffect(()=>{!e||!n||(m(!0),E(s).then(y=>{y&&h(y.toDataURL("image/png")),m(!1)}))},[e,n,s,E]);const T=async()=>{m(!0);const y=await E(s);if(!y){alert("Error al generar la imagen."),m(!1);return}y.toBlob(x=>{if(x){const v=URL.createObjectURL(x),S=document.createElement("a");S.href=v,S.download=r.endsWith(".png")?r:`${r}.png`,document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(v),t()}else alert("Error al crear el archivo de imagen.");m(!1)},"image/png")},M=async()=>{m(!0);const y=await E(s);if(!y){alert("Error al generar la imagen."),m(!1);return}const x=y.toDataURL("image/png");l(x,r),m(!1),t()};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-[--bg-secondary] text-[--text-primary] rounded-lg shadow-xl p-6 w-full max-w-2xl flex flex-col space-y-4",children:[a.jsxs("h2",{className:"text-xl font-bold",children:['Exportar Objeto: "',n==null?void 0:n.name,'"']}),a.jsxs("div",{className:"flex-grow p-2 rounded-md flex justify-center items-center min-h-0 bg-[--bg-primary]",style:{minHeight:"20rem",backgroundImage:"linear-gradient(45deg, #808080 25%, transparent 25%), linear-gradient(-45deg, #808080 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #808080 75%), linear-gradient(-45deg, transparent 75%, #808080 75%)",backgroundSize:"20px 20px",backgroundPosition:"0 0, 0 10px, 10px -10px, -10px 0px"},children:[p&&a.jsx("p",{children:"Generando vista previa..."}),!p&&f&&a.jsx("img",{src:f,alt:"Vista previa de la exportacin",className:"max-w-full max-h-80 object-contain"}),a.jsx("canvas",{ref:g,className:"hidden"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"filename",className:"block text-sm text-[--text-secondary] mb-1",children:"Nombre del Archivo"}),a.jsx("input",{type:"text",id:"filename",value:r,onChange:y=>u(y.target.value),className:"w-full bg-[--bg-tertiary] text-[--text-primary] text-sm rounded-md p-2"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-[--text-secondary] mb-2",children:"Tamao de Exportacin"}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"exportMode",value:"full",checked:s==="full",onChange:()=>i("full"),className:"w-4 h-4 text-[--accent-primary] bg-[--bg-tertiary] border-[--bg-hover] focus:ring-[--accent-primary]"}),a.jsx("span",{className:"ml-2 text-sm",children:"Tamao completo del lienzo"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"exportMode",value:"bbox",checked:s==="bbox",onChange:()=>i("bbox"),className:"w-4 h-4 text-[--accent-primary] bg-[--bg-tertiary] border-[--bg-hover] focus:ring-[--accent-primary]"}),a.jsx("span",{className:"ml-2 text-sm",children:"Ajustar a contenido"})]})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-4 pt-2",children:[a.jsx("button",{onClick:t,className:"px-4 py-2 rounded-md bg-[--bg-tertiary] hover:bg-[--bg-hover]",disabled:p,children:"Cancelar"}),a.jsxs("button",{onClick:M,className:"px-4 py-2 rounded-md bg-blue-600 hover:bg-blue-500 text-white disabled:bg-gray-500 disabled:cursor-wait flex items-center gap-2",disabled:p,children:[a.jsx(Ir,{className:"w-4 h-4"}),p?"Guardando...":"Guardar en Librera"]}),a.jsx("button",{onClick:T,className:"px-4 py-2 rounded-md bg-[--accent-primary] hover:bg-[--accent-hover] text-white disabled:bg-gray-500 disabled:cursor-wait",disabled:p,children:p?"Exportando...":"Exportar como PNG"})]})]})}):null},xN=({user:e})=>{const[t,n]=C.useState(!1),o=C.useRef(null),l=async()=>{const i=new E0;try{await T0(Hu,i)}catch(r){console.error("Error during sign-in:",r),alert("Could not sign in. Please check the console for details.")}},s=async()=>{try{await w0(Hu),n(!1)}catch(i){console.error("Error during sign-out:",i)}};return C.useEffect(()=>{const i=r=>{o.current&&!o.current.contains(r.target)&&n(!1)};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[]),e?a.jsxs("div",{className:"relative",ref:o,children:[a.jsx("button",{onClick:()=>n(i=>!i),className:"w-10 h-10 rounded-full border-2 border-[--accent-primary] overflow-hidden focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[--accent-primary] focus:ring-offset-[--bg-primary]",children:a.jsx("img",{src:e.photoURL||void 0,alt:e.displayName||"User Avatar",className:"w-full h-full object-cover"})}),t&&a.jsxs("div",{className:"absolute top-full right-0 mt-2 w-56 bg-[--bg-primary] border border-[--bg-tertiary] rounded-lg shadow-lg z-30 py-1",children:[a.jsxs("div",{className:"px-3 py-2 border-b border-[--bg-tertiary]",children:[a.jsx("p",{className:"text-sm font-semibold truncate",children:e.displayName}),a.jsx("p",{className:"text-xs text-[--text-secondary] truncate",children:e.email})]}),a.jsxs("button",{onClick:s,className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-left text-[--text-primary] hover:bg-[--bg-hover]",children:[a.jsx(jw,{className:"w-4 h-4"}),a.jsx("span",{children:"Logout"})]})]})]}):a.jsxs("button",{onClick:l,className:"p-2 flex items-center gap-2 rounded-md bg-[--bg-secondary] text-[--text-primary] hover:bg-[--bg-tertiary] border border-[--bg-tertiary] transition-colors text-sm",title:"Login with Google",children:[a.jsx(Lw,{className:"w-5 h-5"}),a.jsx("span",{children:"Login"})]})},vm=50;function vN(e,t,n){const o=[{x:0,y:0},{x:t.width,y:0},{x:t.width,y:t.height},{x:0,y:t.height}],l=[n.tl,n.tr,n.br,n.bl],s=p0(l,o);if(!s){console.error("Could not compute homography matrix for warping."),e.drawImage(t,n.tl.x,n.tl.y);return}const i=Math.floor(Math.min(n.tl.x,n.tr.x,n.br.x,n.bl.x)),r=Math.floor(Math.min(n.tl.y,n.tr.y,n.br.y,n.bl.y)),u=Math.ceil(Math.max(n.tl.x,n.tr.x,n.br.x,n.bl.x)),f=Math.ceil(Math.max(n.tl.y,n.tr.y,n.br.y,n.bl.y)),h=u-i,p=f-r;if(h<=0||p<=0)return;const m=t.getContext("2d",{willReadFrequently:!0});if(!m)return;const g=m.getImageData(0,0,t.width,t.height),E=e.createImageData(h,p),T=g.data,M=E.data,y=g.width,x=g.height;for(let v=0;v<p;v++)for(let S=0;S<h;S++){const N=i+S,L=r+v,A=s[6]*N+s[7]*L+s[8],b=(s[0]*N+s[1]*L+s[2])/A,I=(s[3]*N+s[4]*L+s[5])/A;if(b>=0&&b<y-1&&I>=0&&I<x-1){const w=Math.floor(b),j=Math.floor(I),_=b-w,R=I-j,H=(j*y+w)*4,ee=(j*y+(w+1))*4,z=((j+1)*y+w)*4,U=((j+1)*y+(w+1))*4,G=(v*h+S)*4;for(let J=0;J<4;J++){const P=T[H+J],q=T[ee+J],Q=T[z+J],X=T[U+J],he=P+(q-P)*_,pe=Q+(X-Q)*_,ie=he+(pe-he)*R;M[G+J]=ie}}}e.putImageData(E,i,r)}const m0={objects:[{id:"background",name:"Background",type:"object",isVisible:!0,opacity:1,parentId:null,isBackground:!0,color:"#F0F0F0"},{id:"object-1",name:"Objeto 1",type:"object",isVisible:!0,opacity:1,parentId:null}],canvasSize:{width:0,height:0},scaleFactor:.1,scaleUnit:"cm"};function bN(e,t){switch(t.type){case"INITIALIZE_CANVASES":{const{width:n,height:o}=t.payload,l=e.objects.map(s=>{if(!s.canvas){const{canvas:i,context:r}=cn(n,o);return s.isBackground&&(r.fillStyle=s.color||"#F0F0F0",r.fillRect(0,0,n,o)),{...s,canvas:i,context:r}}return s});return{...e,objects:l,canvasSize:{width:n,height:o}}}case"ADD_ITEM":{const{type:n,activeItemId:o,canvasSize:l,newItemId:s,imageElement:i,name:r,initialDimensions:u}=t.payload,f=o?e.objects.find(g=>g.id===o):null;let h=null;f&&(h=f.type==="group"?f.id:f.parentId);let p;if(n==="group")p={id:s??`group-${Date.now()}`,name:r??`Carpeta ${e.objects.filter(E=>E.type==="group").length+1}`,type:"group",isVisible:!0,opacity:1,parentId:h};else{const g={id:s??`object-${Date.now()}`,name:r??`Objeto ${e.objects.filter(M=>M.type==="object"&&!M.isBackground).length+1}`,type:"object",isVisible:!0,opacity:1,parentId:h},{canvas:E,context:T}=cn(l.width,l.height);if(g.canvas=E,g.context=T,i)if(u){const M=(l.width-u.width)/2,y=(l.height-u.height)/2;T.drawImage(i,M,y,u.width,u.height)}else T.drawImage(i,0,0);p=g}const m=[...e.objects];if(f&&f.type!=="group"){const g=m.findIndex(E=>E.id===o);g!==-1?m.splice(g+1,0,p):m.push(p)}else m.push(p);return{...e,objects:m}}case"ADD_ITEM_BELOW":{const{targetId:n,canvasSize:o,newItemId:l}=t.payload,s=e.objects.find(p=>p.id===n);if(!s)return e;const i={id:l,name:`Objeto ${e.objects.filter(p=>p.type==="object"&&!p.isBackground).length+1}`,type:"object",isVisible:!0,opacity:1,parentId:s.parentId},{canvas:r,context:u}=cn(o.width,o.height);i.canvas=r,i.context=u;const f=[...e.objects],h=f.findIndex(p=>p.id===n);return h!==-1?f.splice(h,0,i):f.push(i),{...e,objects:f}}case"PASTE_FROM_CLIPBOARD":{const{newItemId:n,clipboard:o,canvasSize:l,activeItemId:s}=t.payload,i=s?e.objects.find(p=>p.id===s):null,r=i?i.type==="group"?i.id:i.parentId:null,{canvas:u,context:f}=cn(l.width,l.height);f.putImageData(o.imageData,o.sourceRect.x,o.sourceRect.y);const h={id:n,name:`Pegado ${e.objects.filter(p=>p.name.startsWith("Pegado")).length+1}`,type:"object",isVisible:!0,opacity:1,parentId:r,canvas:u,context:f};return{...e,objects:[...e.objects,h]}}case"DELETE_ITEM":{const{id:n}=t.payload,o=new Set([n]),l=r=>{e.objects.forEach(u=>{u.parentId===r&&(o.add(u.id),u.type==="group"&&l(u.id))})},s=e.objects.find(r=>r.id===n);s&&s.type==="group"&&l(n);const i=e.objects.filter(r=>!o.has(r.id));return{...e,objects:i}}case"UPDATE_ITEM":{const{id:n,updates:o}=t.payload,l=e.objects.map(s=>s.id===n?{...s,...o}:s);return{...e,objects:l}}case"MOVE_ITEM":{const{draggedId:n,targetId:o,position:l}=t.payload;if(n===o)return e;const s=(g,E)=>{const T=e.objects.find(M=>M.id===E);return!T||!T.parentId?!1:T.parentId===g?!0:s(g,T.parentId)};if(s(n,o))return e;const i=e.objects.find(g=>g.id===n),r=e.objects.find(g=>g.id===o);if(!i||!r)return e;const u=e.objects.filter(g=>g.id!==n);let f,h;if(l==="middle"&&r.type==="group"){f=r.id;const g=u.filter(E=>E.parentId===r.id);if(g.length>0){const E=g[g.length-1];h=u.findIndex(T=>T.id===E.id)+1}else h=u.findIndex(E=>E.id===o)+1}else{f=r.parentId;const g=u.findIndex(E=>E.id===o);h=l==="top"?g:g+1}const p={...i,parentId:f},m=[...u];return m.splice(h,0,p),{...e,objects:m}}case"COPY_ITEM":{const{id:n}=t.payload,o=e.objects.findIndex(u=>u.id===n);if(o===-1)return e;const l=e.objects[o];if(l.type==="object"&&l.isBackground)return e;let s;const i={...l,id:`${l.type}-${Date.now()}`,name:`Copia de ${l.name}`};if(l.canvas){const{canvas:u,context:f}=cn(l.canvas.width,l.canvas.height);f.drawImage(l.canvas,0,0),i.canvas=u,i.context=f}s=i;const r=[...e.objects];return r.splice(o+1,0,s),{...e,objects:r}}case"MERGE_ITEMS":{const{sourceId:n,targetId:o}=t.payload,l=e.objects.find(y=>y.id===n),s=e.objects.find(y=>y.id===o);if(!l||!s||!l.canvas||!s.canvas)return e;const i=e.objects.findIndex(y=>y.id===n),r=e.objects.findIndex(y=>y.id===o),u=i>r?l:s,f=i>r?s:l,{canvas:h,context:p}=cn(f.canvas.width,f.canvas.height),m=y=>{const{canvas:x,context:v}=cn(y.canvas.width,y.canvas.height);v.drawImage(y.canvas,0,0);try{const S=v.getImageData(0,0,x.width,x.height),N=S.data;for(let L=3;L<N.length;L+=4)N[L]=N[L]*y.opacity;v.putImageData(S,0,0)}catch(S){console.error("Could not bake opacity, falling back to simple draw.",S),v.clearRect(0,0,x.width,x.height),v.globalAlpha=y.opacity,v.drawImage(y.canvas,0,0),v.globalAlpha=1}return x},g=m(f);p.drawImage(g,0,0);const E=m(u);p.drawImage(E,0,0);const T={...f,canvas:h,context:p,opacity:1},M=e.objects.map(y=>y.id===f.id?T:y).filter(y=>y.id!==u.id);return{...e,objects:M}}case"UPDATE_BACKGROUND":{const{color:n,image:o}=t.payload,l=e.objects.map(s=>{if(s.type==="object"&&s.isBackground&&s.context){const i={...s};return n&&(i.color=n,i.context.fillStyle=n,i.context.fillRect(0,0,s.context.canvas.width,s.context.canvas.height),i.backgroundImage&&i.context.drawImage(i.backgroundImage,0,0)),o&&(i.backgroundImage=o,i.context.clearRect(0,0,s.context.canvas.width,s.context.canvas.height),i.color&&(i.context.fillStyle=i.color,i.context.fillRect(0,0,s.context.canvas.width,s.context.canvas.height)),i.context.drawImage(o,0,0,s.context.canvas.width,s.context.canvas.height)),i}return s});return{...e,objects:l}}case"SET_CANVAS_FROM_IMAGE":{const{image:n}=t.payload,o={width:n.width,height:n.height},l=e.objects.map(s=>{const i=s.canvas,{canvas:r,context:u}=cn(o.width,o.height);return s.isBackground?(u.drawImage(n,0,0),{...s,canvas:r,context:u,color:"#FFFFFF",backgroundImage:n}):(i&&u.drawImage(i,0,0),{...s,canvas:r,context:u})});return{...e,objects:l,canvasSize:o}}case"REMOVE_BACKGROUND_IMAGE":{const n=e.objects.map(o=>{if(o.type==="object"&&o.isBackground&&o.context){o.context.fillStyle=o.color||"#FFFFFF",o.context.fillRect(0,0,o.context.canvas.width,o.context.canvas.height);const{backgroundImage:l,...s}=o;return{...s,color:o.color||"#FFFFFF"}}return o});return{...e,objects:n}}case"CLEAR_CANVAS":{const n={...m0};return e.canvasSize.width>0&&(n.objects.forEach(o=>{const{canvas:l,context:s}=cn(e.canvasSize.width,e.canvasSize.height);o.type==="object"&&(o.canvas=l,o.context=s,o.isBackground&&(s.fillStyle=o.color,s.fillRect(0,0,l.width,l.height)))}),n.canvasSize=e.canvasSize),n}case"CROP_CANVAS":{const{cropRect:n}=t.payload,o={width:Math.round(n.width),height:Math.round(n.height)},l=e.objects.map(s=>{if(s.canvas){const{canvas:i,context:r}=cn(o.width,o.height);return r.drawImage(s.canvas,n.x,n.y,n.width,n.height,0,0,o.width,o.height),{...s,canvas:i,context:r}}return s});return{...e,objects:l,canvasSize:o}}case"RESIZE_CANVAS":{const{width:n,height:o}=t.payload,l={width:Math.round(n),height:Math.round(o)},s=e.objects.map(i=>{if(i.canvas){const{canvas:r,context:u}=cn(l.width,l.height);if(i.isBackground)i.backgroundImage?(u.fillStyle=i.color||"#FFFFFF",u.fillRect(0,0,l.width,l.height),u.drawImage(i.backgroundImage,0,0,l.width,l.height)):(u.fillStyle=i.color||"#FFFFFF",u.fillRect(0,0,l.width,l.height));else{const f=(l.width-i.canvas.width)/2,h=(l.height-i.canvas.height)/2;u.drawImage(i.canvas,f,h)}return{...i,canvas:r,context:u}}return i});return{...e,objects:s,canvasSize:l}}case"APPLY_TRANSFORM":{const{id:n,transform:o,sourceBbox:l}=t.payload,s=e.objects.findIndex(g=>g.id===n);if(s===-1)return e;const i=e.objects[s];if(!i.canvas||!i.context)return e;const r=document.createElement("canvas");r.width=l.width,r.height=l.height;const u=r.getContext("2d",{willReadFrequently:!0});if(!u)return e;u.drawImage(i.canvas,l.x,l.y,l.width,l.height,0,0,l.width,l.height);const{canvas:f,context:h}=cn(i.canvas.width,i.canvas.height);if(h.drawImage(i.canvas,0,0),h.save(),h.globalCompositeOperation="destination-out",h.fillRect(l.x,l.y,l.width,l.height),h.restore(),o.type==="free"){const{corners:g}=o;vN(h,r,g)}else o.type==="affine"&&(h.save(),h.translate(o.x+o.width/2,o.y+o.height/2),h.rotate(o.rotation),h.scale(o.width/l.width,o.height/l.height),h.drawImage(r,-r.width/2,-r.height/2),h.restore());const p={...i,canvas:f,context:h},m=[...e.objects];return m[s]=p,{...e,objects:m}}case"SET_SCALE_FACTOR":return{...e,scaleFactor:t.payload};case"SET_SCALE_UNIT":return{...e,scaleUnit:t.payload};case"SNAPSHOT":case"COMMIT_DRAWING":return{...e};default:return e}}const CN={past:[],present:m0,future:[]};function SN(e,t){const{past:n,present:o,future:l}=e;if(t.type==="UNDO"){if(n.length===0)return e;const u=n[n.length-1];return{past:n.slice(0,n.length-1),present:u,future:[o,...l]}}if(t.type==="REDO"){if(l.length===0)return e;const u=l[0],f=l.slice(1);return{past:[...n,o],present:u,future:f}}if(t.type==="LOAD_PROJECT_STATE")return{past:[],present:t.payload.newState,future:[]};if(t.type==="COMMIT_DRAWING"){const{activeItemId:u,beforeCanvas:f}=t.payload,h=f.getContext("2d",{willReadFrequently:!0});if(!h)return console.error("Could not get context for beforeCanvas in COMMIT_DRAWING"),e;const p={...o,objects:o.objects.map(E=>{if(E.id===u&&E.type==="object")return{...E,canvas:f,context:h};if(E.type==="object"&&E.canvas){const{canvas:T,context:M}=mm(E.canvas);return{...E,canvas:T,context:M}}return E})},m=[...n,p].slice(-vm),g={...o,objects:[...o.objects]};return{past:m,present:g,future:[]}}const s=bN(o,t);if(o===s)return e;const i={...o,objects:o.objects.map(u=>{if(u.type==="object"&&u.canvas){const{canvas:f,context:h}=mm(u.canvas);return{...u,canvas:f,context:h}}return u})};return{past:[...n,i].slice(-vm),present:s,future:[]}}const EN={size:3,opacity:1,color:"#000000",lineCap:"round",lineJoin:"round",hasStrokeCaps:!0,pressureControl:{size:!0}},TN={size:50,opacity:1,hardness:100,tipShape:"round"},wN={size:10,opacity:.8,color:"#facc15",tipShape:"line",blendMode:"source-over",pressureControl:{opacity:!0}},NN={size:20,opacity:.7,color:"#34d399",pressureControl:{size:!0,opacity:!0}},AN={size:60,flow:.5,color:"#60a5fa",pressureControl:{flow:!0}},_N={presetId:null,size:50,opacity:1,color:"#c084fc"},MN={size:5,color:"#f87171",tipShape:"circle",tipAngle:0,hardness:80,flow:5,wetness:10,spacing:25,blendMode:"source-over",pressureControl:{size:!0,flow:!0}},RN={size:40,flow:50,wetness:50,opacity:.9,color:"#3b82f6",pressureControl:{size:!0,flow:!1,opacity:!1}},IN={tolerance:30,contiguous:!0},kN={content:"Texto",fontFamily:"Arial",fontSize:48,color:"#000000",textAlign:"left",fontWeight:"normal"},bm="sketcher-fx-presets";function DN(){const[e,t]=C.useState(EN),[n,o]=C.useState(TN),[l,s]=C.useState(wN),[i,r]=C.useState(NN),[u,f]=C.useState(AN),[h,p]=C.useState(_N),[m,g]=C.useState(MN),[E,T]=C.useState(RN),[M,y]=C.useState(IN),[x,v]=C.useState(kN),[S,N]=C.useState([]);C.useEffect(()=>{try{const j=localStorage.getItem(bm);j&&N(JSON.parse(j))}catch(j){console.error("Failed to load FX presets from localStorage",j)}},[]);const L=C.useCallback(j=>{try{localStorage.setItem(bm,JSON.stringify(j))}catch(_){console.error("Failed to save FX presets to localStorage",_)}},[]),A=C.useCallback(j=>{const _={id:`fx-${Date.now()}`,name:j};N(R=>{const H=[...R,_];return L(H),H})},[L]),b=C.useCallback((j,_)=>{N(R=>{const H=R.map(ee=>ee.id===j?{...ee,..._}:ee);return L(H),H})},[L]),I=C.useCallback(j=>{p(_=>({..._,presetId:j}))},[]),w=C.useCallback(j=>{N(_=>{const R=_.filter(H=>H.id!==j);return L(R),R})},[L]);return{brushSettings:e,setBrushSettings:t,eraserSettings:n,setEraserSettings:o,simpleMarkerSettings:l,setSimpleMarkerSettings:s,naturalMarkerSettings:i,setNaturalMarkerSettings:r,airbrushSettings:u,setAirbrushSettings:f,fxBrushSettings:h,setFxBrushSettings:p,advancedMarkerSettings:m,setAdvancedMarkerSettings:g,watercolorSettings:E,setWatercolorSettings:T,magicWandSettings:M,setMagicWandSettings:y,textSettings:x,setTextSettings:v,brushPresets:S,onSavePreset:A,onUpdatePreset:b,onLoadPreset:I,onDeletePreset:w}}const LN=e=>{try{const t=e.split(",");if(t.length<2)return null;const n=t[0].match(/:(.*?);/);if(!n)return null;const o=n[1],l=atob(t[1]);let s=l.length;const i=new Uint8Array(s);for(;s--;)i[s]=l.charCodeAt(s);return new Blob([i],{type:o})}catch(t){return console.error("Error converting data URL to blob",t),null}};function jN(e){const[t,n]=C.useState([]),[o,l]=C.useState(null),[s,i]=C.useState(null);C.useEffect(()=>{if(e){const T=Lc(Io(Vn,`users/${e.uid}/libraryItems`),Em("createdAt","desc")),M=Tm(T,async y=>{const x=y.docs.map(async S=>{const N=S.data();if(N.type==="folder")return{id:S.id,name:N.name,type:"folder",parentId:N.parentId||null};if(!N.storagePath)return null;const L=await Sa(Gn(Hn,N.storagePath));return{id:S.id,name:N.name,type:"image",storagePath:N.storagePath,transparentColors:N.transparentColors||[],scaleFactor:N.scaleFactor||5,tolerance:N.tolerance,dataUrl:L,parentId:N.parentId||null,scaleUnit:N.scaleUnit||"mm"}}),v=(await Promise.all(x)).filter(Boolean);n(v)},y=>{console.error("Error fetching library items:",y)});return()=>M()}else n([])},[e]);const r=C.useCallback(async(T,M)=>{if(!e){alert("Please log in to save items to your library.");return}const y=`users/${e.uid}/library/${Date.now()}_${T.name}`,x=Gn(Hn,y);try{await Ea(x,T),await jc(Io(Vn,`users/${e.uid}/libraryItems`),{name:T.name.split(".").slice(0,-1).join(".")||"Image",storagePath:y,createdAt:Uc(),type:"image",parentId:M})}catch(v){console.error("Error uploading file to library:",v),alert("Failed to upload image.")}},[e]),u=C.useCallback(async(T,M)=>{if(!e){alert("Please log in to create folders.");return}try{await jc(Io(Vn,`users/${e.uid}/libraryItems`),{name:T,parentId:M,type:"folder",createdAt:Uc()})}catch(y){console.error("Error creating folder:",y)}},[e]),f=C.useCallback(async(T,M)=>{if(!e){alert("Please log in to manage library items.");return}const y=Io(Vn,`users/${e.uid}/libraryItems`),x=T.map(v=>{const S=(A,b)=>{const I=t.find(w=>w.id===b);return!I||!I.parentId?!1:I.parentId===A?!0:S(A,I.parentId)},N=t.find(A=>A.id===v);if((N==null?void 0:N.type)==="folder"&&(v===M||M&&S(v,M)))return console.warn(`Cannot move folder "${N.name}" into itself or a child folder.`),Promise.resolve();const L=Fs(y,v);return ef(L,{parentId:M})});try{await Promise.all(x)}catch(v){console.error("Error moving items:",v),alert("Failed to move items.")}},[e,t]),h=C.useCallback(async T=>{const M=t.find(y=>y.id===T);if(!(!M||M.type!=="image"||!M.dataUrl))try{const x=await(await fetch(M.dataUrl)).blob(),v=new FileReader;v.onloadend=()=>{const S=v.result;l({...M,originalDataUrl:S})},v.readAsDataURL(x)}catch(y){console.error("Error preparing image for editing:",y),alert("Could not load image for editing.")}},[t]),p=C.useCallback(async(T,M,y,x,v)=>{if(!o||!e)return;const S=LN(T);if(!S){alert("Error processing image data.");return}const N=Gn(Hn,o.storagePath),L=Fs(Vn,`users/${e.uid}/libraryItems`,o.id);try{await Ea(N,S);const A=await Sa(N);await ef(L,{transparentColors:M,scaleFactor:y,tolerance:x,scaleUnit:v}),n(b=>b.map(I=>I.id===o.id&&I.type==="image"?{...I,dataUrl:A,transparentColors:M,scaleFactor:y,tolerance:x,scaleUnit:v}:I)),l(null)}catch(A){console.error("Error applying transparency:",A),alert("Failed to save changes.")}},[e,o]),m=T=>i(T),g=C.useCallback(async()=>{if(!s||!e)return;const T=Io(Vn,`users/${e.uid}/libraryItems`),M=async y=>{const x=t.find(v=>v.id===y);if(x){if(x.type==="image")await zc(Gn(Hn,x.storagePath));else if(x.type==="folder"){const v=Lc(T,M0("parentId","==",y)),N=(await R0(v)).docs.map(L=>M(L.id));await Promise.all(N)}await wm(Fs(T,y))}};try{await M(s.id)}catch(y){console.error("Error deleting item:",y),alert("Failed to delete item.")}finally{i(null)}},[s,e,t]);return{libraryItems:t,imageToEdit:o,deletingLibraryItem:s,onImportToLibrary:r,onCreateFolder:u,onEditTransparency:h,onApplyTransparency:p,onDeleteLibraryItem:m,onConfirmDeleteLibraryItem:g,onCancelDeleteLibraryItem:()=>i(null),onCancelEditTransparency:()=>l(null),onMoveItems:f}}function UN(e){const[t,n]=C.useState("none"),[o,l]=C.useState(!1),[s,i]=C.useState([]),[r,u]=C.useState([]),[f,h]=C.useState(null),[p,m]=C.useState({angle:0}),[g,E]=C.useState({type:"cartesian",spacing:10,majorLineFrequency:10,isoAngle:60,majorLineColor:"rgba(239, 68, 68, 0.6)",minorLineColor:"rgba(128, 128, 128, 0.3)"}),[T,M]=C.useState(!1),[y,x]=C.useState(!1),[v,S]=C.useState(!1),N=C.useCallback(z=>{n(U=>{const G=U===z?"none":z;if((G==="none"||G!=="perspective")&&x(!1),G==="none"&&M(!1),G==="ruler"&&s.length===0){const{width:J,height:P}=e;i([{id:`ruler-${Date.now()}`,start:{x:J*.25,y:P/2},end:{x:J*.75,y:P/2}}])}if(G==="perspective"&&!f){const{width:J,height:P}=e,q=P*.4,Q=J*.1,X=J*.9;h({lines:{green:[{id:"g1",start:{x:0,y:0},end:{x:Q,y:q}},{id:"g2",start:{x:0,y:P},end:{x:Q,y:q}}],red:[{id:"r1",start:{x:J,y:0},end:{x:X,y:q}},{id:"r2",start:{x:J,y:P},end:{x:X,y:q}}],blue:[{id:"b1",start:{x:J*.3,y:0},end:{x:J*.3,y:P}},{id:"b2",start:{x:J*.7,y:0},end:{x:J*.7,y:P}}]},guidePoint:{x:J/2,y:P*.8},extraGuideLines:{green:[],red:[],blue:[]}})}if(G==="mirror"&&r.length===0){const{width:J,height:P}=e;u([{id:`mirror-${Date.now()}`,start:{x:J/2,y:0},end:{x:J/2,y:P}}])}return G})},[f,r,s,e]),L=C.useCallback(z=>{E(U=>({...U,type:z})),z==="none"&&S(!1)},[]),A=C.useCallback(()=>S(z=>!z),[]),b=C.useCallback(()=>l(z=>!z),[]),I=C.useCallback(z=>{m({angle:z})},[]),w=C.useCallback(z=>{z>0&&E(U=>({...U,spacing:z}))},[]),j=C.useCallback(z=>{E(U=>({...U,isoAngle:z}))},[]),_=C.useCallback(z=>{z>0&&E(U=>({...U,majorLineFrequency:z}))},[]),R=C.useCallback(z=>{E(U=>({...U,majorLineColor:z}))},[]),H=C.useCallback(z=>{E(U=>({...U,minorLineColor:z}))},[]),ee=C.useCallback(z=>{n(z.activeGuide),l(z.isOrthogonalVisible),i(z.rulerGuides),u(z.mirrorGuides),h(z.perspectiveGuide),m(z.orthogonalGuide),z.gridGuide?E({...z.gridGuide,majorLineColor:z.gridGuide.majorLineColor||"rgba(128, 128, 128, 0.6)",minorLineColor:z.gridGuide.minorLineColor||"rgba(128, 128, 128, 0.3)"}):E(U=>({...U,type:z.isGridVisible?"cartesian":"none",majorLineColor:U.majorLineColor||"rgba(128, 128, 128, 0.6)",minorLineColor:U.minorLineColor||"rgba(128, 128, 128, 0.3)"})),M(z.areGuidesLocked),x(z.isPerspectiveStrokeLockEnabled),S(z.isSnapToGridEnabled)},[]);return{activeGuide:t,isOrthogonalVisible:o,rulerGuides:s,setRulerGuides:i,mirrorGuides:r,setMirrorGuides:u,perspectiveGuide:f,setPerspectiveGuide:h,orthogonalGuide:p,gridGuide:g,areGuidesLocked:T,setAreGuidesLocked:M,isPerspectiveStrokeLockEnabled:y,setIsPerspectiveStrokeLockEnabled:x,isSnapToGridEnabled:v,toggleSnapToGrid:A,onSetActiveGuide:N,setGridType:L,toggleOrthogonal:b,onSetOrthogonalAngle:I,onSetGridSpacing:w,onSetGridMajorLineFrequency:_,onSetGridIsoAngle:j,onSetGridMajorLineColor:R,onSetGridMinorLineColor:H,loadGuideState:ee}}const g0=3;function zN(e,t){const[n,o]=C.useState({zoom:1,pan:{x:0,y:0}}),l=C.useCallback(()=>{if(!e.current||!t.width||!t.height)return .01;const r=e.current.offsetWidth,u=e.current.offsetHeight,f=.9,h=r/t.width,p=u/t.height;return Math.max(.01,Math.min(h,p)*f)},[e,t.width,t.height]);C.useEffect(()=>{const r=()=>{if(e.current){const u=e.current.offsetWidth,f=e.current.offsetHeight;o(h=>{const p=(u-t.width*h.zoom)/2,m=(f-t.height*h.zoom)/2;return{zoom:h.zoom,pan:{x:p,y:m}}})}};return window.addEventListener("resize",r),r(),()=>window.removeEventListener("resize",r)},[t.width,t.height,e]);const s=C.useCallback(()=>{if(!e.current||t.width===0)return;const r=e.current.offsetWidth,u=e.current.offsetHeight,f=l(),h=(r-t.width*f)/2,p=(u-t.height*f)/2;o({zoom:f,pan:{x:h,y:p}})},[t.width,t.height,e,l]),i=C.useCallback(r=>{if(!e.current)return;const u=e.current.offsetWidth,f=e.current.offsetHeight,h=u/2,p=f/2;o(m=>{const g=l(),E=Math.max(g,Math.min(m.zoom*r,g0)),T=(h-m.pan.x)/m.zoom,M=(p-m.pan.y)/m.zoom,y=h-T*E,x=p-M*E;return{zoom:E,pan:{x:y,y:x}}})},[e,l]);return{viewTransform:n,setViewTransform:o,onZoomExtents:s,onZoomIn:()=>i(1.2),onZoomOut:()=>i(1/1.2),getMinZoom:l}}function PN(e,t,n,o,l,s){return{onDropOnCanvas:(r,u,f)=>{if(r.type!=="library-item")return;const h=o.find(g=>g.id===r.id);if(!h||h.type!=="image"||!h.dataUrl)return;const p=`object-${Date.now()}`,m=new Image;m.crossOrigin="anonymous",m.onload=()=>{const E=(h.scaleFactor||5)/s,T={width:m.width*E,height:m.height*E};n({type:"ADD_ITEM",payload:{type:"object",activeItemId:u,newItemId:p,imageElement:m,canvasSize:l,name:h.name,initialDimensions:T}}),f([p]),t("transform")},m.src=h.dataUrl}}}const Cm="sketcher-workspace-templates";function BN(){const[e,t]=C.useState([]);C.useEffect(()=>{try{const s=localStorage.getItem(Cm);s&&t(JSON.parse(s))}catch(s){console.error("Failed to load workspace templates from localStorage",s)}},[]);const n=C.useCallback(s=>{try{localStorage.setItem(Cm,JSON.stringify(s))}catch(i){console.error("Failed to save workspace templates to localStorage",i),alert("Could not save workspace template. The data may be invalid.")}},[]),o=C.useCallback((s,i)=>{const r={id:`template-${Date.now()}`,name:s,...i};return t(u=>{const f=[...u,r];return n(f),f}),r.id},[n]),l=C.useCallback(s=>{t(i=>{const r=i.filter(u=>u.id!==s);return n(r),r})},[n]);return{templates:e,saveTemplate:o,deleteTemplate:l}}const Dl={colors:["#ef4444","#22c55e","#3b82f6"],sizes:[10,40,150],tools:[{type:"tool",tool:"brush"},{type:"tool",tool:"eraser"},null]};function qN(){const[e,t]=C.useState(Dl),n=C.useCallback((u,f)=>{t(h=>{const p=[...h.colors];return p[u]=f,{...h,colors:p}})},[]),o=C.useCallback(u=>{t(f=>({...f,colors:[...f.colors,u]}))},[]),l=C.useCallback(u=>{t(f=>({...f,colors:f.colors.filter((h,p)=>p!==u)}))},[]),s=C.useCallback((u,f)=>{f>0&&f<=1e3&&t(h=>{const p=[...h.sizes];return p[u]=f,{...h,sizes:p}})},[]),i=C.useCallback((u,f)=>{t(h=>{const p=[...h.tools];return p[u]=f,{...h,tools:p}})},[]),r=C.useCallback(u=>{if(u&&Array.isArray(u.colors)&&Array.isArray(u.sizes)&&Array.isArray(u.tools)){const f={...Dl,...u};f.sizes.length!==3&&(f.sizes=Dl.sizes),f.tools.length!==3&&(f.tools=Dl.tools),f.colors.length===0&&(f.colors=Dl.colors),t(f)}else t(Dl)},[]);return{quickAccessSettings:e,updateColor:n,addColor:o,removeColor:l,updateSize:s,updateTool:i,loadState:r}}const GN={select:wr,brush:xs,eraser:ji,"simple-marker":Nr,"natural-marker":zr,airbrush:Ur,"fx-brush":Rs,transform:Dr,"free-transform":Lr,enhance:_r,crop:kr,pan:()=>null,"marquee-rect":Mr,lasso:Rr,"magic-wand":Ui,"debug-brush":xs,text:Ar,"advanced-marker":jr,watercolor:Pr},VN=({anchorEl:e,initialColor:t,onColorChange:n,onClose:o})=>{const[l,s]=C.useState(t),i=C.useRef(null);C.useEffect(()=>{s(t)},[t]),C.useEffect(()=>{const m=g=>{i.current&&!i.current.contains(g.target)&&!e.contains(g.target)&&o()};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[o,e]);const r=m=>{const E=`#${m.target.value.toLowerCase()}`;s(E),/^#[0-9a-f]{6}$/i.test(E)&&n(E)},u=m=>{const g=m.target.value;s(g),n(g)},f=e.getBoundingClientRect(),h={position:"fixed",top:`${f.bottom+8}px`,left:`${f.left}px`,zIndex:50},p=["#ef4444","#f97316","#eab308","#84cc16","#22c55e","#14b8a6","#06b6d4","#3b82f6","#8b5cf6","#d946ef","#f43f5e","#78716c","#ffffff","#000000"];return a.jsxs("div",{ref:i,style:h,className:"bg-[--bg-secondary] p-3 rounded-lg shadow-2xl border border-[--bg-tertiary] space-y-3",onPointerDown:m=>m.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"relative w-10 h-10",children:[a.jsx("input",{type:"color",value:l,onChange:u,className:"absolute inset-0 w-full h-full p-0 bg-transparent border-none rounded-md cursor-pointer opacity-0"}),a.jsx("div",{className:"w-10 h-10 rounded-md border border-[--bg-hover]",style:{backgroundColor:l}})]}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-[--text-secondary] font-mono",children:"#"}),a.jsx("input",{type:"text",value:l.substring(1),onChange:r,className:"w-24 bg-[--bg-tertiary] text-[--text-primary] rounded-md p-2 pl-5 font-mono text-sm",maxLength:6})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-xs font-bold text-[--text-secondary] mb-2",children:"Presets"}),a.jsx("div",{className:"grid grid-cols-7 gap-1",children:p.map(m=>a.jsx("button",{onClick:()=>{s(m),n(m)},className:`w-6 h-6 rounded-full border-2 transition-all ${m===l?"border-[--accent-primary]":"border-transparent hover:border-gray-400"}`,style:{backgroundColor:m}},m))})]})]})},HN=({settings:e,onUpdateColor:t,onAddColor:n,onRemoveColor:o,onUpdateSize:l,onSelectColor:s,onSelectSize:i,onSelectTool:r,onOpenToolSelector:u,activeTool:f,activeColor:h,activeSize:p})=>{const[m,g]=C.useState(null),[E,T]=C.useState(null),M=C.useRef(null),[y,x]=C.useState(null),v=C.useRef(null);C.useEffect(()=>{const w=j=>{E&&M.current&&!M.current.contains(j.target)&&T(null)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[E]);const S=(w,j)=>{x({index:w,value:String(j)}),setTimeout(()=>{var _;return(_=v.current)==null?void 0:_.select()},0)},N=w=>{y!==null&&x({...y,value:w.target.value})},L=()=>{if(y!==null){const w=parseInt(y.value,10);isNaN(w)||l(y.index,w),x(null)}},A=w=>{w.key==="Enter"?L():w.key==="Escape"&&x(null)},b=w=>{if(!w)return a.jsx(tr,{className:"w-5 h-5 text-[--text-secondary]"});if(w.type==="tool"){const j=GN[w.tool];return j?a.jsx(j,{className:"w-5 h-5"}):null}return w.type==="fx-preset"?a.jsx(Rs,{className:"w-5 h-5"}):null},I=w=>w?w.type==="tool"?w.tool:w.type==="fx-preset"?`Preset: ${w.name}`:"":"Seleccionar herramienta";return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"absolute top-4 left-4 right-4 md:left-1/2 md:-translate-x-1/2 md:w-auto md:right-auto bg-[--bg-primary]/80 backdrop-blur-sm rounded-lg p-1 flex flex-wrap items-center justify-center gap-2 shadow-lg z-10",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[e.colors.map((w,j)=>{const _=h&&w.toLowerCase()===h.toLowerCase();return a.jsx("button",{onClick:()=>s(w),onDoubleClick:R=>{g({index:j,initialColor:w,anchorEl:R.currentTarget})},onContextMenu:R=>{R.preventDefault(),T({x:R.clientX,y:R.clientY,index:j})},className:`w-7 h-7 rounded-full border-2 transition-all hover:border-[--accent-primary] ${_?"border-[--accent-primary]":"border-[--bg-secondary]"}`,style:{backgroundColor:w},title:`Color: ${w} (clic para seleccionar, doble clic para editar, clic derecho para eliminar)`},j)}),a.jsx("button",{onClick:()=>n("#ffffff"),className:"w-7 h-7 rounded-full border-2 border-dashed border-[--bg-hover] flex items-center justify-center text-[--text-secondary] hover:bg-[--bg-tertiary] hover:border-[--accent-primary] transition-colors",title:"Agregar color",children:a.jsx(tr,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"h-6 w-px bg-[--bg-hover]"}),a.jsx("div",{className:"flex items-center gap-2",children:e.sizes.map((w,j)=>{const _=w===p;return a.jsx("div",{className:"relative",children:(y==null?void 0:y.index)===j?a.jsx("input",{ref:v,type:"number",value:y.value,onChange:N,onBlur:L,onKeyDown:A,className:"w-14 text-center bg-[--bg-hover] text-[--text-primary] p-1 rounded-md text-xs"}):a.jsxs("button",{onClick:()=>i(w),onDoubleClick:()=>S(j,w),className:`w-14 p-1 rounded-md text-xs transition-colors ${_?"bg-[--accent-primary] text-white":"bg-[--bg-tertiary] hover:bg-[--bg-hover]"}`,title:`Tamao: ${w}px (doble clic para cambiar)`,children:[w,"px"]})},j)})}),a.jsx("div",{className:"h-6 w-px bg-[--bg-hover]"}),a.jsx("div",{className:"flex items-center gap-2",children:e.tools.map((w,j)=>{const _=w!==null&&f!==void 0&&(w.type==="tool"&&w.tool===f||w.type==="fx-preset"&&f==="fx-brush");return a.jsx("button",{onClick:()=>w&&r(w),onContextMenu:R=>{R.preventDefault(),u(j)},className:`p-2 rounded-lg text-[--text-primary] transition-colors ${_?"bg-[--accent-primary] text-white":"bg-[--bg-tertiary] hover:bg-[--bg-hover]"}`,title:`${I(w)} (clic derecho para cambiar)`,children:b(w)},j)})})]}),m&&a.jsx(VN,{anchorEl:m.anchorEl,initialColor:m.initialColor,onClose:()=>g(null),onColorChange:w=>{m.index!==null&&(t(m.index,w),g(j=>j?{...j,initialColor:w}:null))}}),E&&a.jsx("div",{ref:M,className:"fixed z-50 bg-[--bg-secondary] rounded-md shadow-lg border border-[--bg-tertiary] py-1",style:{top:E.y,left:E.x},onPointerDown:w=>w.stopPropagation(),children:a.jsx("button",{onClick:()=>{e.colors.length>1?o(E.index):alert("No se puede eliminar el ltimo color."),T(null)},className:"block w-full text-left px-3 py-1 text-sm text-red-500 hover:bg-[--bg-hover]",children:"Eliminar"})})]})},ON=[{name:"select",icon:wr},{name:"marquee-rect",icon:Mr},{name:"lasso",icon:Rr},{name:"magic-wand",icon:Ui},{name:"text",icon:Ar},{name:"brush",icon:xs},{name:"eraser",icon:ji},{name:"simple-marker",icon:Nr},{name:"advanced-marker",icon:jr},{name:"natural-marker",icon:zr},{name:"watercolor",icon:Pr},{name:"airbrush",icon:Ur},{name:"fx-brush",icon:Rs},{name:"transform",icon:Dr},{name:"free-transform",icon:Lr},{name:"enhance",icon:_r},{name:"crop",icon:kr}],FN=({isOpen:e,onClose:t,onSelectTool:n,fxPresets:o})=>{if(!e)return null;const l=s=>{n(s),t()};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-[--bg-secondary] text-[--text-primary] rounded-lg shadow-xl p-6 w-full max-w-lg flex flex-col space-y-4 max-h-[80vh]",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-bold",children:"Seleccionar Herramienta de Acceso Rpido"}),a.jsx("button",{onClick:t,className:"p-1 rounded-full hover:bg-[--bg-tertiary]",children:a.jsx(Xn,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"flex-grow overflow-y-auto space-y-4 pr-2",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-bold uppercase text-[--text-secondary] mb-2",children:"Herramientas Estndar"}),a.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 gap-2",children:ON.map(({name:s,icon:i})=>a.jsxs("button",{onClick:()=>l({type:"tool",tool:s}),className:"flex flex-col items-center justify-center p-3 rounded-lg bg-[--bg-tertiary] hover:bg-[--bg-hover] transition-colors",title:s,children:[a.jsx(i,{className:"w-8 h-8"}),a.jsx("span",{className:"text-xs mt-2 capitalize",children:s==="advanced-marker"?"Lpiz de color":s==="natural-marker"?"Marcador slido":s.replace("-"," ")})]},s))})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-bold uppercase text-[--text-secondary] mb-2",children:"Presets de Pincel FX"}),o.length>0?a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:o.map(s=>a.jsx("button",{onClick:()=>l({type:"fx-preset",id:s.id,name:s.name}),className:"p-3 rounded-lg bg-[--bg-tertiary] hover:bg-[--bg-hover] transition-colors text-left",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Rs,{className:"w-6 h-6 flex-shrink-0"}),a.jsx("span",{className:"text-sm truncate",children:s.name})]})},s.id))}):a.jsx("p",{className:"text-sm text-[--text-secondary] text-center p-4",children:"No tienes presets de Pincel FX guardados."})]})]})]})})},YN=({isOpen:e,onClose:t,templates:n,onSave:o,onLoad:l,onDelete:s,onResetPreferences:i})=>{const[r,u]=C.useState(""),f=C.useRef(null);C.useEffect(()=>{const p=m=>{f.current&&!f.current.contains(m.target)&&t()};return e&&document.addEventListener("mousedown",p),()=>{document.removeEventListener("mousedown",p)}},[e,t]);const h=()=>{r.trim()&&(o(r.trim()),u(""))};return e?a.jsxs("div",{ref:f,className:"absolute top-full right-0 mt-2 w-72 bg-[--bg-primary] border border-[--bg-tertiary] rounded-lg shadow-lg z-30 py-2 flex flex-col",style:{maxHeight:"calc(100vh - 100px)"},children:[a.jsxs("div",{className:"flex justify-between items-center px-3 pb-2 border-b border-[--bg-tertiary]",children:[a.jsxs("h3",{className:"text-sm font-bold uppercase text-[--text-secondary] flex items-center gap-2",children:[a.jsx(h0,{className:"w-4 h-4"}),a.jsx("span",{children:"Plantillas de Espacio de Trabajo"})]}),a.jsx("button",{onClick:t,className:"p-1 rounded-full hover:bg-[--bg-hover]",children:a.jsx(Xn,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"flex-grow overflow-y-auto p-2 space-y-1",children:n.length>0?n.map(p=>a.jsxs("div",{className:"group flex items-center justify-between p-2 rounded-md hover:bg-[--bg-tertiary]",children:[a.jsx("button",{onClick:()=>l(p.id),className:"flex-grow text-left text-sm truncate",children:p.name}),a.jsx("button",{onClick:()=>s(p.id),className:"p-1 text-[--text-secondary] opacity-0 group-hover:opacity-100 hover:text-red-500",children:a.jsx(Sl,{className:"w-4 h-4"})})]},p.id)):a.jsx("div",{className:"text-center text-xs text-[--text-secondary] py-4",children:"No hay plantillas guardadas."})}),a.jsx("div",{className:"px-3 pt-2 border-t border-[--bg-tertiary]",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"text",value:r,onChange:p=>u(p.target.value),onKeyDown:p=>p.key==="Enter"&&h(),placeholder:"Nombre de la nueva plantilla...",className:"flex-grow bg-[--bg-secondary] text-[--text-primary] text-sm rounded-md p-2 border border-[--bg-tertiary] focus:ring-1 focus:ring-[--accent-primary] focus:outline-none"}),a.jsx("button",{onClick:h,disabled:!r.trim(),className:"px-4 py-2 rounded-md bg-[--accent-primary] hover:bg-[--accent-hover] text-white text-sm font-semibold disabled:bg-gray-500 disabled:cursor-not-allowed",children:"Guardar"})]})}),a.jsx("div",{className:"px-3 pt-2 mt-2 border-t border-[--bg-tertiary]",children:a.jsx("button",{onClick:i,className:"w-full text-center px-4 py-2 text-sm text-red-500 hover:bg-red-500 hover:text-white rounded-md transition-colors",children:"Restablecer todas las preferencias"})})]}):null},JN=({isOpen:e,onCancel:t,onConfirm:n,itemName:o,itemType:l})=>{if(!e)return null;const s=l==="group"?`Ests seguro de que quieres eliminar la carpeta "${o}"? Todos los objetos y subcarpetas dentro de ella tambin sern eliminados.`:`Ests seguro de que quieres eliminar el objeto "${o}"?`;return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-[--bg-secondary] text-[--text-primary] rounded-lg shadow-xl p-6 w-full max-w-sm",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"Confirmar Eliminacin"}),a.jsx("p",{className:"text-[--text-secondary] mb-6",children:s}),a.jsxs("div",{className:"flex justify-end space-x-4",children:[a.jsx("button",{onClick:t,className:"px-4 py-2 rounded-md bg-[--bg-tertiary] hover:bg-[--bg-hover]",children:"Cancelar"}),a.jsx("button",{onClick:n,className:"px-4 py-2 rounded-md bg-red-600 hover:bg-red-500 text-white",children:"Eliminar"})]})]})})},Sm={"720p":{width:1280,height:720},"1080p":{width:1920,height:1080},"4K":{width:3840,height:2160}},XN=({isOpen:e,onClose:t,currentSize:n,onApply:o})=>{const[l,s]=C.useState(n.width),[i,r]=C.useState(n.height),[u,f]=C.useState("horizontal");C.useEffect(()=>{e&&(s(n.width),r(n.height),f(n.width>=n.height?"horizontal":"vertical"))},[e,n]);const h=g=>{const E=Sm[g].width,T=Sm[g].height;u==="horizontal"?(s(E),r(T)):(s(T),r(E))},p=g=>{g!==u&&(f(g),s(i),r(l))},m=()=>{const g=Number(l),E=Number(i);!isNaN(g)&&!isNaN(E)&&g>0&&E>0&&o(g,E)};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-[--bg-secondary] text-[--text-primary] rounded-lg shadow-xl p-6 w-full max-w-md flex flex-col space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-bold",children:"Tamao del Lienzo"}),a.jsx("button",{onClick:t,className:"p-1 rounded-full hover:bg-[--bg-tertiary]",children:a.jsx(Xn,{className:"w-6 h-6"})})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-bold uppercase text-[--text-secondary] mb-2",children:"Presets"}),a.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[a.jsx("button",{onClick:()=>h("720p"),className:"p-2 rounded-md bg-[--bg-tertiary] hover:bg-[--bg-hover] text-sm",children:"720p"}),a.jsx("button",{onClick:()=>h("1080p"),className:"p-2 rounded-md bg-[--bg-tertiary] hover:bg-[--bg-hover] text-sm",children:"1080p"}),a.jsx("button",{onClick:()=>h("4K"),className:"p-2 rounded-md bg-[--bg-tertiary] hover:bg-[--bg-hover] text-sm",children:"2160p (4K)"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-bold uppercase text-[--text-secondary] mb-2",children:"Orientacin"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsx("button",{onClick:()=>p("horizontal"),className:`p-2 rounded-md text-sm transition-colors ${u==="horizontal"?"bg-[--accent-primary] text-white":"bg-[--bg-tertiary] hover:bg-[--bg-hover]"}`,children:"Horizontal"}),a.jsx("button",{onClick:()=>p("vertical"),className:`p-2 rounded-md text-sm transition-colors ${u==="vertical"?"bg-[--accent-primary] text-white":"bg-[--bg-tertiary] hover:bg-[--bg-hover]"}`,children:"Vertical"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-bold uppercase text-[--text-secondary] mb-2",children:"Personalizado"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"canvas-width",className:"block text-xs text-[--text-secondary] mb-1",children:"Ancho"}),a.jsx("input",{type:"number",id:"canvas-width",value:l,onChange:g=>s(Number(g.target.value)),className:"w-full bg-[--bg-tertiary] text-[--text-primary] text-sm rounded-md p-2"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"canvas-height",className:"block text-xs text-[--text-secondary] mb-1",children:"Alto"}),a.jsx("input",{type:"number",id:"canvas-height",value:i,onChange:g=>r(Number(g.target.value)),className:"w-full bg-[--bg-tertiary] text-[--text-primary] text-sm rounded-md p-2"})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-4 pt-2",children:[a.jsx("button",{onClick:t,className:"px-6 py-2 rounded-md bg-[--bg-tertiary] hover:bg-[--bg-hover]",children:"Cancelar"}),a.jsx("button",{onClick:m,className:"px-6 py-2 rounded-md bg-[--accent-primary] hover:bg-[--accent-hover] text-white",children:"Aplicar"})]})]})}):null},$N=({isOpen:e,onCancel:t,onConfirm:n})=>e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-[--bg-secondary] text-[--text-primary] rounded-lg shadow-xl p-6 w-full max-w-sm",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"Limpiar Lienzo"}),a.jsx("p",{className:"text-[--text-secondary] mb-6",children:"Ests seguro de que quieres borrar todo? Esta accin eliminar todas las capas y no se puede deshacer de forma convencional (aunque s con el botn Deshacer)."}),a.jsxs("div",{className:"flex justify-end space-x-4",children:[a.jsx("button",{onClick:t,className:"px-4 py-2 rounded-md bg-[--bg-tertiary] hover:bg-[--bg-hover]",children:"Cancelar"}),a.jsx("button",{onClick:n,className:"px-4 py-2 rounded-md bg-red-600 hover:bg-red-500 text-white",children:"Limpiar"})]})]})}):null,KN=({isOpen:e,onCancel:t,onConfirm:n,itemToDelete:o})=>{if(!e||!o)return null;const l=o.type==="folder",s=`Ests seguro de que quieres eliminar "${o.name}"?`,i="Esto tambin eliminar permanentemente todo su contenido. Esta accin no se puede deshacer.";return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-[--bg-secondary] text-[--text-primary] rounded-lg shadow-xl p-6 w-full max-w-sm",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"Confirmar Eliminacin"}),a.jsxs("p",{className:"text-[--text-secondary] mb-6",children:[s,l&&a.jsx("strong",{className:"block mt-2 text-[--text-primary]",children:i})]}),a.jsxs("div",{className:"flex justify-end space-x-4",children:[a.jsx("button",{onClick:t,className:"px-4 py-2 rounded-md bg-[--bg-tertiary] hover:bg-[--bg-hover]",children:"Cancelar"}),a.jsx("button",{onClick:n,className:"px-4 py-2 rounded-md bg-red-600 hover:bg-red-500 text-white",children:"Eliminar"})]})]})})},ZN=({isOpen:e,onCancel:t,onConfirm:n})=>e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-[--bg-secondary] text-[--text-primary] rounded-lg shadow-xl p-6 w-full max-w-sm",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"Restablecer Preferencias"}),a.jsxs("p",{className:"text-[--text-secondary] mb-6",children:["Ests seguro de que quieres restablecer todas las preferencias a sus valores por defecto? Esto eliminar permanentemente los preajustes de pincel personalizados y otras configuraciones.",a.jsx("strong",{className:"text-[--text-primary] block mt-2",children:"Tus plantillas de espacio de trabajo guardadas no se vern afectadas."}),"Esta accin no se puede deshacer."]}),a.jsxs("div",{className:"flex justify-end space-x-4",children:[a.jsx("button",{onClick:t,className:"px-4 py-2 rounded-md bg-[--bg-tertiary] hover:bg-[--bg-hover]",children:"Cancelar"}),a.jsx("button",{onClick:n,className:"px-4 py-2 rounded-md bg-red-600 hover:bg-red-500 text-white",children:"Restablecer"})]})]})}):null,oa=e=>e.split(",")[1];function QN(){const[e,t]=C.useState(!1),[n,o]=C.useState(!1),[l,s]=C.useState(null),[i,r]=C.useState(!1),[u,f]=C.useState(!1),[h,p]=C.useState(!1),[m,g]=C.useState(!1),[E,T]=C.useState(window.innerWidth>1024),[M,y]=C.useState(void 0),[x,v]=C.useState(!1),[S,N]=C.useState(!0),L=C.useRef(null),A=C.useRef({isResizing:!1,startY:0,startHeight:0});C.useEffect(()=>{if(L.current&&M===void 0){const R=L.current.offsetHeight*.75;y(R)}},[M]),C.useEffect(()=>{const R=()=>{v(!!(document.fullscreenElement||document.webkitFullscreenElement))};return document.addEventListener("fullscreenchange",R),document.addEventListener("webkitfullscreenchange",R),document.addEventListener("mozfullscreenchange",R),document.addEventListener("MSFullscreenChange",R),()=>{document.removeEventListener("fullscreenchange",R),document.removeEventListener("webkitfullscreenchange",R),document.removeEventListener("mozfullscreenchange",R),document.removeEventListener("MSFullscreenChange",R)}},[]);const b=()=>{x?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen().catch(R=>{console.error(`Error attempting to enable full-screen mode: ${R.message} (${R.name})`)})},I=()=>{N(!1),x||document.documentElement.requestFullscreen().catch(R=>{console.error(`Error attempting to enable full-screen mode: ${R.message} (${R.name})`)})},w=C.useCallback(R=>{if(!A.current.isResizing||!L.current)return;const{startY:H,startHeight:ee}=A.current,z=R.clientY-H;let U=ee+z;const G=L.current.offsetHeight;U=Math.max(100,Math.min(U,G-100-6)),y(U)},[]),j=C.useCallback(()=>{A.current.isResizing=!1,document.body.style.cursor="default",window.removeEventListener("pointermove",w),window.removeEventListener("pointerup",j)},[w]),_=C.useCallback(R=>{if(R.preventDefault(),!L.current)return;const H=L.current.children[0];A.current={isResizing:!0,startY:R.clientY,startHeight:H.offsetHeight},document.body.style.cursor="ns-resize",window.addEventListener("pointermove",w),window.addEventListener("pointerup",j,{once:!0})},[w,j]);return{isExportModalOpen:e,setExportModalOpen:t,isSingleExportModalOpen:n,setSingleExportModalOpen:o,deletingItemId:l,setDeletingItemId:s,showClearConfirm:i,setShowClearConfirm:r,isCanvasSizeModalOpen:u,setCanvasSizeModalOpen:f,isProjectGalleryOpen:h,setProjectGalleryOpen:p,isResetConfirmOpen:m,setIsResetConfirmOpen:g,isRightSidebarVisible:E,setIsRightSidebarVisible:T,rightSidebarTopHeight:M,rightSidebarRef:L,handlePointerDownResize:_,isFullscreen:x,showSplash:S,handleStart:I,handleToggleFullscreen:b}}function WN(e,t,n,o,l,s,i){const[r,u]=C.useState([]),[f,h]=C.useState(!0);C.useEffect(()=>{if(e){h(!0);const y=Lc(Io(Vn,`users/${e.uid}/projects`),Em("createdAt","desc")),x=Tm(y,async v=>{const S=v.docs.map(async L=>{const A=L.data();try{const b=await Sa(Gn(Hn,A.thumbnailPath));return{id:L.id,name:A.name,projectFilePath:A.projectFilePath,thumbnailPath:A.thumbnailPath,thumbnailUrl:b}}catch(b){return console.warn(`Could not get thumbnail for project ${A.name}`,b),null}}),N=(await Promise.all(S)).filter(Boolean);u(N),h(!1)},v=>{console.error("Error fetching projects:",v),h(!1)});return()=>x()}else u([]),h(!1)},[e]);const p=C.useCallback(async y=>{const{currentState:x,guides:v,toolSettings:S,quickAccess:N}=y(),L=x.objects.map(R=>{const{canvas:H,context:ee,backgroundImage:z,...U}=R,G={...U};return R.type==="object"&&H&&(G.dataUrl=H.toDataURL()),G}),A={fileFormatVersion:"1.0",canvasSize:x.canvasSize,objects:L,scaleFactor:x.scaleFactor,scaleUnit:x.scaleUnit,guides:v,toolSettings:S,quickAccessSettings:N},b=JSON.stringify(A),I=new Blob([b],{type:"application/json"}),w=document.createElement("canvas");w.width=x.canvasSize.width,w.height=x.canvasSize.height;const j=w.getContext("2d");if(j){const R=x.objects,H=R.find(z=>z.type==="object"&&z.isBackground);H!=null&&H.canvas&&H.isVisible&&j.drawImage(H.canvas,0,0),[...R.filter(z=>z.type==="object"&&!z.isBackground&&z.isVisible&&!!z.canvas)].reverse().forEach(z=>{j.globalAlpha=z.opacity,j.drawImage(z.canvas,0,0)}),j.globalAlpha=1}if(!w)throw new Error("Could not create composite for thumbnail.");const _=await Qw(w,400,225);return{projectBlob:I,thumbnailBlob:_}},[]),m=C.useCallback(async y=>{try{const x=await y.text(),v=JSON.parse(x);if(!v.fileFormatVersion||!v.canvasSize||!v.objects)throw new Error("Invalid project file format.");const S=v.objects.map(A=>new Promise((b,I)=>{const{dataUrl:w,backgroundImageDataUrl:j,..._}=A;if(A.type==="object"&&w){const R=new Image;R.onload=()=>{const{canvas:H,context:ee}=cn(v.canvasSize.width,v.canvasSize.height);ee.drawImage(R,0,0);const z={..._,canvas:H,context:ee};b(z)},R.onerror=I,R.src=w}else b(_)})),L={objects:await Promise.all(S),canvasSize:v.canvasSize,scaleFactor:v.scaleFactor||5,scaleUnit:v.scaleUnit||"mm"};if(t({type:"LOAD_PROJECT_STATE",payload:{newState:L}}),v.toolSettings){const{brushSettings:A,eraserSettings:b,solidMarkerSettings:I,simpleMarkerSettings:w,naturalMarkerSettings:j,airbrushSettings:_,fxBrushSettings:R,magicWandSettings:H,textSettings:ee,advancedMarkerSettings:z}=v.toolSettings;l({brushSettings:A,eraserSettings:b,solidMarkerSettings:I,simpleMarkerSettings:w,naturalMarkerSettings:j,airbrushSettings:_,fxBrushSettings:R,magicWandSettings:H,textSettings:ee,advancedMarkerSettings:z})}v.guides&&s(v.guides),v.quickAccessSettings&&i(v.quickAccessSettings),n(!1),setTimeout(o,100)}catch(x){console.error("Failed to load project from file:",x),alert(`Error loading project: ${x instanceof Error?x.message:String(x)}`)}},[t,l,s,i,n,o]),g=C.useCallback(async(y,x)=>{try{const{projectBlob:v}=await p(x),S=URL.createObjectURL(v),N=document.createElement("a");N.href=S,N.download=y.endsWith(".sketcher")?y:`${y}.sketcher`,document.body.appendChild(N),N.click(),document.body.removeChild(N),URL.revokeObjectURL(S)}catch(v){throw console.error("Error saving project locally:",v),alert(`Error saving project locally: ${v instanceof Error?v.message:String(v)}`),v}},[p]),E=C.useCallback(async(y,x)=>{if(!e){alert("Please log in to save projects to the cloud.");return}const{projectBlob:v,thumbnailBlob:S}=await p(x),N=Fs(Io(Vn,"dummy")).id,L=`users/${e.uid}/projects/${N}.sketcher`,A=`users/${e.uid}/projects/thumbnails/${N}.png`,b=Gn(Hn,L),I=Gn(Hn,A);await Ea(b,v),await Ea(I,S),await jc(Io(Vn,`users/${e.uid}/projects`),{name:y,projectFilePath:L,thumbnailPath:A,createdAt:Uc()})},[e,p]),T=C.useCallback(async y=>{if(e)try{const x=await Sa(Gn(Hn,y.projectFilePath)),S=await(await fetch(x)).blob(),N=new File([S],`${y.name}.sketcher`);await m(N)}catch(x){console.error("Error loading project from cloud:",x),alert("Failed to load project.")}},[e,m]),M=C.useCallback(async y=>{if(e)try{const x=Fs(Vn,`users/${e.uid}/projects`,y.id),v=Gn(Hn,y.projectFilePath),S=Gn(Hn,y.thumbnailPath);await wm(x),await Promise.all([zc(v).catch(N=>console.warn("Project file delete failed, it might not exist.",N)),zc(S).catch(N=>console.warn("Thumbnail delete failed, it might not exist.",N))])}catch(x){console.error("Error deleting project:",x),alert("Failed to delete project.")}},[e]);return{projects:r,projectsLoading:f,saveProject:E,loadProject:T,deleteProject:M,saveLocally:g,loadFromFile:m}}function eA(e,t,n,o){const[l,s]=C.useState(!1),[i,r]=C.useState(null),[u,f]=C.useState(null),[h,p]=C.useState(null),m=C.useCallback(M=>{let y=null;return M.forEach(x=>{if(!x.canvas)return;const v=Br(x.canvas);if(v)if(!y)y={...v};else{const S=Math.min(y.x,v.x),N=Math.min(y.y,v.y),L=Math.max(y.x+y.width,v.x+v.width),A=Math.max(y.y+y.height,v.y+v.height);y={x:S,y:N,width:L-S,height:A-N}}}),y},[]),g=C.useCallback((M,y,x,v)=>{const S=document.createElement("canvas");S.width=y.width,S.height=y.height;const N=S.getContext("2d");if(!N)return null;const L=x();return M&&(v!=null&&v.canvas)&&v.isVisible&&N.drawImage(v.canvas,0,0),[...L.filter(b=>b.type==="object"&&!b.isBackground&&b.isVisible&&!!b.canvas)].reverse().forEach(b=>{N.globalAlpha=b.opacity,N.drawImage(b.canvas,0,0)}),N.globalAlpha=1,S},[]),E=C.useCallback((M,y,x)=>{r(null),setTimeout(()=>{const v=g(!1,M,y,x);if(!v)return;const S=y().filter(b=>b.type==="object"&&!b.isBackground&&b.isVisible&&!!b.canvas),N=m(S),L=v.toDataURL("image/png");let A=null;if(N&&N.width>0&&N.height>0){const b=document.createElement("canvas");b.width=N.width,b.height=N.height;const I=b.getContext("2d");I&&(I.drawImage(v,N.x,N.y,N.width,N.height,0,0,N.width,N.height),A=b.toDataURL("image/png"))}r({fullDataUrl:L,croppedDataUrl:A,bbox:N})},10)},[g,m]),T=C.useCallback(async(M,y,x,v)=>{var A,b,I,w;p(null),s(!0);let S="";const N=[],L=[];try{const j=new xw({apiKey:void 0});switch(M.activeAiTab){case"object":{const{enhancementPrompt:G,enhancementStylePrompt:J,enhancementNegativePrompt:P,enhancementCreativity:q,enhancementInputMode:Q,enhancementChromaKey:X,enhancementPreviewBgColor:he}=M;if(!G)throw new Error("Description prompt is required.");const pe=g(!1,y,x,v);if(!pe)throw new Error("Could not create composite canvas.");let ie=pe;if(Q==="bbox"){const tt=x().filter(le=>le.type==="object"&&!le.isBackground&&le.isVisible&&!!le.canvas),W=m(tt);if(W&&W.width>0&&W.height>0){const le=document.createElement("canvas");le.width=W.width,le.height=W.height,(A=le.getContext("2d"))==null||A.drawImage(pe,W.x,W.y,W.width,W.height,0,0,W.width,W.height),ie=le}}let Ue=document.createElement("canvas");Ue.width=ie.width,Ue.height=ie.height;const Ee=Ue.getContext("2d");Ee?(Ee.fillStyle=he||"#FFFFFF",Ee.fillRect(0,0,Ue.width,Ue.height),Ee.drawImage(ie,0,0)):Ue=ie;const Te=Ue.toDataURL("image/jpeg");L.push({name:"Imagen de Entrada",url:Te}),N.push({inlineData:{mimeType:"image/jpeg",data:oa(Te)}});let Me="";q<=40?Me="S muy fiel a la imagen de entrada y a la descripcin proporcionada. Realiza solo los cambios solicitados.":q<=80?Me="Mantn una fidelidad moderada a la imagen y descripcin, pero puedes hacer pequeas mejoras estticas.":q<=120?Me="Usa la imagen y la descripcin como una fuerte inspiracin. Sintete libre de reinterpretar elementos para un mejor resultado artstico.":Me="Usa la imagen y la descripcin solo como una vaga inspiracin. Prioriza un resultado impactante y altamente creativo sobre la fidelidad al original.";const He=["Tu tarea es mejorar o transformar una imagen de entrada.",`Descripcin de la transformacin deseada: "${G}".`,`El estilo visual a aplicar es: "${J}".`,Me];if(P.trim()&&He.push(`Asegrate de evitar estrictamente lo siguiente: "${P}".`),X!=="none"){const tt=X==="green"?"#00FF00":"#0000FF";He.push(`Importante: La imagen resultante DEBE tener un fondo de croma slido y uniforme de color ${X} (${tt}). El sujeto principal no debe contener este color.`)}S=He.join(" ");break}case"composition":{const G=g(!0,y,x,v);if(!G)throw new Error("Could not create composite canvas.");const J=G.toDataURL("image/jpeg");L.push({name:"Escena Compuesta",url:J}),N.push({inlineData:{mimeType:"image/jpeg",data:oa(J)}}),(b=M.styleRef)!=null&&b.url&&(L.push({name:"Referencia de Estilo",url:M.styleRef.url}),N.push({inlineData:{mimeType:"image/jpeg",data:oa(M.styleRef.url)}})),S=M.compositionPrompt;break}case"free":{const G=["main","a","b","c"],J=["Objeto 1","Aadido A","Aadido B","Aadido C"];G.forEach((P,q)=>{const Q=M.freeFormSlots[P];Q!=null&&Q.url&&(L.push({name:J[q],url:Q.url}),N.push({inlineData:{mimeType:"image/png",data:oa(Q.url)}}))}),S=M.freeFormPrompt;break}}p({prompt:S,images:L});const _={text:S},R="gemini-2.5-flash-image",H={responseModalities:[ys.IMAGE,ys.TEXT]},ee=N.length>0?{parts:[...N,_]}:{parts:[_]},z=await j.models.generateContent({model:R,contents:ee,config:H});let U=null;for(const G of((w=(I=z.candidates)==null?void 0:I[0])==null?void 0:w.content.parts)||[])if(G.inlineData){U=G.inlineData.data;break}if(U){const G=new Image;G.onload=()=>{const J=`IA: ${S.substring(0,20)}...`;if(M.activeAiTab==="object"||M.activeAiTab==="free"&&M.addEnhancedImageToLibrary){const P=`data:image/png;base64,${U}`;fetch(P).then(q=>q.blob()).then(q=>{q&&t(new File([q],`${J}.png`,{type:"image/png"}),null)})}else if(M.activeAiTab==="composition")e({type:"UPDATE_BACKGROUND",payload:{image:G}});else{const P=`object-${Date.now()}`;e({type:"ADD_ITEM",payload:{type:"object",activeItemId:null,newItemId:P,imageElement:G,canvasSize:y,name:J}}),n(P),o("select")}},G.src=`data:image/png;base64,${U}`}else alert(`La IA no devolvi una imagen. Dijo: "${z.text}"`)}catch(j){console.error("Error during AI enhancement:",j),alert(`Ocurri un error: ${j instanceof Error?j.message:String(j)}`)}finally{s(!1)}},[e,t,n,o,g,m]);return{isEnhancing:l,enhancementPreview:i,backgroundDataUrl:u,setBackgroundDataUrl:f,debugInfo:h,generateEnhancementPreview:E,handleEnhance:T}}function tA(){const[e,t]=C.useReducer(SN,CN),{present:n,past:o,future:l}=e,{objects:s,canvasSize:i,scaleFactor:r,scaleUnit:u}=n,[f,h]=C.useState([]),[p,m]=C.useState("brush"),g=C.useRef(null),[E,T]=C.useState("dark"),[M,y]=C.useState(null),[x,v]=C.useState(!1),[S,N]=C.useState(null),[L,A]=C.useState("freehand"),[b,I]=C.useState(null),[w,j]=C.useState({style:"solid",scale:1}),[_,R]=C.useState(null),[H,ee]=C.useState(null),[z,U]=C.useState(null),[G,J]=C.useState(.5),P=QN(),q=DN(),Q=jN(M),X=UN(i),{getMinZoom:he,...pe}=zN(g,i),ie=BN(),Ue=qN(),Ee=C.useCallback(D=>{h(D?[D]:[]),(!D||_&&_.sourceItemId!==D)&&R(null)},[_]),Te=eA(t,Q.onImportToLibrary,Ee,m),Me=C.useCallback(D=>{q.setBrushSettings(D.brushSettings),q.setEraserSettings(D.eraserSettings),q.setSimpleMarkerSettings(D.solidMarkerSettings||D.simpleMarkerSettings),q.setNaturalMarkerSettings(D.naturalMarkerSettings),q.setAirbrushSettings(D.airbrushSettings),q.setFxBrushSettings(D.fxBrushSettings),D.magicWandSettings&&q.setMagicWandSettings(D.magicWandSettings),D.textSettings&&q.setTextSettings(D.textSettings),D.advancedMarkerSettings&&q.setAdvancedMarkerSettings(D.advancedMarkerSettings)},[q]),He=WN(M,t,P.setProjectGalleryOpen,pe.onZoomExtents,Me,X.loadGuideState,Ue.loadState),{onDropOnCanvas:tt}=PN(p,m,t,Q.libraryItems,i,n.scaleFactor),[W,le]=C.useState(!1),[oe,ue]=C.useState(!1),ve=C.useRef(null),[Ce,ze]=C.useState(!1),at=C.useRef(null),[xt,_e]=C.useState(!1),[Ye,de]=C.useState(null),[je,wt]=C.useState(!1),[Pe,Qe]=C.useState(null),[bt,$t]=C.useState(null),[It,zt]=C.useState(!1),[bn,Zn]=C.useState(!1),[Dn,re]=C.useState(15),ae=f.length>0?f[f.length-1]:null,be=ae?s.find(D=>D.id===ae):null,nt=o.length>0,ot=l.length>0,me=s.find(D=>D.type==="object"&&!!D.isBackground),Re=p==="enhance",{activeColor:De,activeSize:ut}=C.useMemo(()=>{let D,F;switch(p){case"brush":D=q.brushSettings.color,F=q.brushSettings.size;break;case"simple-marker":D=q.simpleMarkerSettings.color,F=q.simpleMarkerSettings.size;break;case"natural-marker":D=q.naturalMarkerSettings.color,F=q.naturalMarkerSettings.size;break;case"airbrush":D=q.airbrushSettings.color,F=q.airbrushSettings.size;break;case"fx-brush":D=q.fxBrushSettings.color,F=q.fxBrushSettings.size;break;case"eraser":F=q.eraserSettings.size;break}return{activeColor:D,activeSize:F}},[p,q]),Je=C.useCallback(D=>{switch(p){case"brush":q.setBrushSettings(F=>({...F,color:D}));break;case"simple-marker":q.setSimpleMarkerSettings(F=>({...F,color:D}));break;case"natural-marker":q.setNaturalMarkerSettings(F=>({...F,color:D}));break;case"airbrush":q.setAirbrushSettings(F=>({...F,color:D}));break;case"fx-brush":q.setFxBrushSettings(F=>({...F,color:D}));break}},[p,q]),fe=C.useCallback(D=>{switch(p){case"brush":q.setBrushSettings(F=>({...F,size:D}));break;case"eraser":q.setEraserSettings(F=>({...F,size:D}));break;case"simple-marker":q.setSimpleMarkerSettings(F=>({...F,size:D}));break;case"natural-marker":q.setNaturalMarkerSettings(F=>({...F,size:D}));break;case"airbrush":q.setAirbrushSettings(F=>({...F,size:D}));break;case"fx-brush":q.setFxBrushSettings(F=>({...F,size:D}));break}},[p,q]),te=C.useCallback(D=>t({type:"SET_SCALE_FACTOR",payload:D}),[t]),$=C.useCallback(D=>t({type:"SET_SCALE_UNIT",payload:D}),[t]),B=D=>{const F={canvasSize:i,backgroundColor:(me==null?void 0:me.color)||"#FFFFFF",scaleFactor:n.scaleFactor,scaleUnit:n.scaleUnit,guides:{activeGuide:X.activeGuide,isOrthogonalVisible:X.isOrthogonalVisible,rulerGuides:X.rulerGuides,mirrorGuides:X.mirrorGuides,perspectiveGuide:X.perspectiveGuide,orthogonalGuide:X.orthogonalGuide,gridGuide:X.gridGuide,areGuidesLocked:X.areGuidesLocked,isPerspectiveStrokeLockEnabled:X.isPerspectiveStrokeLockEnabled,isSnapToGridEnabled:X.isSnapToGridEnabled},toolSettings:{...q},quickAccessSettings:Ue.quickAccessSettings},xe=ie.saveTemplate(D,F);localStorage.setItem("sketcher-active-workspace-id",xe)},K=C.useCallback(D=>{const F=ie.templates.find(xe=>xe.id===D);F&&((F.canvasSize.width!==i.width||F.canvasSize.height!==i.height)&&t({type:"RESIZE_CANVAS",payload:{width:F.canvasSize.width,height:F.canvasSize.height}}),t({type:"UPDATE_BACKGROUND",payload:{color:F.backgroundColor}}),t({type:"SET_SCALE_FACTOR",payload:F.scaleFactor}),t({type:"SET_SCALE_UNIT",payload:F.scaleUnit}),X.loadGuideState(F.guides),Me(F.toolSettings),Ue.loadState(F.quickAccessSettings),localStorage.setItem("sketcher-active-workspace-id",D),setTimeout(pe.onZoomExtents,100))},[ie.templates,i,t,X,Me,Ue,pe.onZoomExtents]),se=C.useCallback(()=>{const D=new Map(s.map(xe=>[xe.id,xe])),F=xe=>{if(!xe.isVisible)return!1;if(xe.parentId){const Oe=D.get(xe.parentId);if(Oe)return F(Oe)}return!0};return s.map(xe=>({...xe,isVisible:F(xe)}))},[s]);C.useEffect(()=>{const D=N0(Hu,F=>y(F));return()=>D()},[]),C.useEffect(()=>{const D=localStorage.getItem("sketcher-theme");D&&T(D)},[]),C.useEffect(()=>{document.documentElement.classList.toggle("dark",E==="dark"),localStorage.setItem("sketcher-theme",E)},[E]),C.useLayoutEffect(()=>{if(W||!g.current||P.showSplash)return;const D=new ResizeObserver(F=>{const xe=F[0],{width:Oe,height:Xe}=xe.contentRect;Oe>0&&Xe>0&&(t({type:"INITIALIZE_CANVASES",payload:{width:Math.floor(Oe),height:Math.floor(Xe)}}),le(!0),h(["object-1"]),D.disconnect())});return D.observe(g.current),()=>D.disconnect()},[W,P.showSplash,t]),C.useEffect(()=>{if(!W)return;const D=localStorage.getItem("sketcher-active-workspace-id"),F=D?ie.templates.find(xe=>xe.id===D):null;F?K(F.id):pe.onZoomExtents()},[W]),C.useEffect(()=>{me!=null&&me.canvas?Te.setBackgroundDataUrl(me.canvas.toDataURL()):Te.setBackgroundDataUrl(null)},[me,me==null?void 0:me.canvas,Te]),C.useEffect(()=>{if(_e(!1),de(null),wt(!1),Qe(null),$t(null),p==="crop")_e(!0),de({x:0,y:0,width:i.width,height:i.height});else if((p==="transform"||p==="free-transform")&&(be==null?void 0:be.type)==="object"&&be.canvas){const D=Br(be.canvas);D?(wt(!0),$t(D),Qe(p==="transform"?{type:"affine",x:D.x,y:D.y,width:D.width,height:D.height,rotation:0}:{type:"free",x:D.x,y:D.y,width:D.width,height:D.height,corners:{tl:{x:D.x,y:D.y},tr:{x:D.x+D.width,y:D.y},bl:{x:D.x,y:D.y+D.height},br:{x:D.x+D.width,y:D.y+D.height}}})):m("select")}},[p,i.width,i.height,be,m]),C.useEffect(()=>{const D=F=>{F.key==="Escape"&&(I(null),R(null))};return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[]),C.useEffect(()=>{I(null)},[p,L]);const ye=C.useCallback(()=>t({type:"UNDO"}),[t]),O=C.useCallback(()=>t({type:"REDO"}),[t]),ge=C.useCallback(D=>{const F=`${D}-${Date.now()}`;return t({type:"ADD_ITEM",payload:{type:D,activeItemId:ae,canvasSize:i,newItemId:F}}),h([F]),F},[ae,i,t]),ne=C.useCallback(D=>t({type:"COPY_ITEM",payload:{id:D}}),[t]),we=C.useCallback(D=>P.setDeletingItemId(D),[P]),Se=C.useCallback((D,F,xe)=>t({type:"MOVE_ITEM",payload:{draggedId:D,targetId:F,position:xe}}),[t]),Ae=C.useCallback((D,F)=>t({type:"COMMIT_DRAWING",payload:{activeItemId:D,beforeCanvas:F}}),[t]),Le=C.useCallback((D,F)=>t({type:"UPDATE_ITEM",payload:{id:D,updates:F}}),[t]),Ge=C.useCallback(D=>{if(D.file){const F=new FileReader;F.onload=xe=>{var Oe;if((Oe=xe.target)!=null&&Oe.result){const Xe=new Image;Xe.onload=()=>{t({type:"SET_CANVAS_FROM_IMAGE",payload:{image:Xe}}),pe.onZoomExtents()},Xe.src=xe.target.result}},F.readAsDataURL(D.file)}else D.image?t({type:"UPDATE_BACKGROUND",payload:{image:D.image}}):D.color&&t({type:"UPDATE_BACKGROUND",payload:{color:D.color}})},[pe,t]),dt=C.useCallback(()=>t({type:"REMOVE_BACKGROUND_IMAGE"}),[t]),Cn=C.useCallback(()=>{P.deletingItemId&&(t({type:"DELETE_ITEM",payload:{id:P.deletingItemId}}),h(D=>D.filter(F=>F!==P.deletingItemId)),P.setDeletingItemId(null))},[P,t]),Pt=C.useCallback(async(D,F)=>{t({type:"MERGE_ITEMS",payload:{sourceId:D,targetId:F}}),h([F])},[t]),ll=C.useCallback(()=>{t({type:"CLEAR_CANVAS"}),P.setShowClearConfirm(!1)},[t,P]),sl=C.useCallback((D,F)=>{fetch(D).then(xe=>xe.blob()).then(xe=>{if(xe){const Oe=F.endsWith(".png")?F:`${F}.png`;Q.onImportToLibrary(new File([xe],Oe,{type:"image/png"}),null)}})},[Q]),Kt=C.useCallback(D=>{if(!D.value.trim()){U(null);return}const F=s.find(Ot=>Ot.id===D.activeItemId);if(!F||!F.context){U(null);return}const xe=ai(F.canvas),Oe=F.context;Oe.save();const Xe=q.textSettings;Oe.font=`${Xe.fontWeight==="italic"?"italic ":""}${Xe.fontWeight==="bold"?"bold ":""}${Xe.fontSize}px ${Xe.fontFamily}`,Oe.fillStyle=Xe.color,Oe.textAlign=Xe.textAlign,D.value.split(`
`).forEach((Ot,sn)=>Oe.fillText(Ot,D.position.x,D.position.y+sn*Xe.fontSize*1.2)),Oe.restore(),t({type:"COMMIT_DRAWING",payload:{activeItemId:D.activeItemId,beforeCanvas:xe}}),U(null)},[s,q.textSettings,t]),Bn=()=>{Ye&&(t({type:"CROP_CANVAS",payload:{cropRect:Ye}}),m("select"))},To=()=>m("select"),ln=()=>{Pe&&bt&&be&&(t({type:"APPLY_TRANSFORM",payload:{id:be.id,transform:Pe,sourceBbox:bt}}),m("select"))},Is=()=>m("select"),wo=C.useCallback(()=>R(null),[]),No=C.useCallback(()=>{if(!_||!be||be.type!=="object"||!be.context)return;const D=ai(be.canvas),F=be.context;F.save(),F.clip(_.path),F.globalCompositeOperation="destination-out",F.fillRect(0,0,F.canvas.width,F.canvas.height),F.restore(),Ae(be.id,D),R(null)},[_,be,Ae]),Ml=C.useCallback(()=>{if(!_||!be||be.type!=="object"||!be.context)return;const{boundingBox:D,path:F}=_,xe=be.context,Oe=document.createElement("canvas");Oe.width=D.width,Oe.height=D.height;const Xe=Oe.getContext("2d");if(!Xe)return;Xe.drawImage(xe.canvas,D.x,D.y,D.width,D.height,0,0,D.width,D.height),Xe.globalCompositeOperation="destination-in",Xe.save(),Xe.translate(-D.x,-D.y),Xe.fillStyle="black",Xe.fill(F),Xe.restore();const Ot=Xe.getImageData(0,0,D.width,D.height);ee({imageData:Ot,sourceRect:D})},[_,be]),qr=C.useCallback(()=>{Ml(),No()},[Ml,No]),Gr=C.useCallback(()=>{if(!H)return;const D=`object-${Date.now()}`;t({type:"PASTE_FROM_CLIPBOARD",payload:{newItemId:D,clipboard:H,canvasSize:i,activeItemId:ae}}),Ee(D),m("transform")},[H,i,ae,Ee,t]),Nt=C.useMemo(()=>{const D=(F=null)=>s.filter(xe=>xe.parentId===F&&(xe.type!=="object"||!xe.isBackground)).flatMap(xe=>[xe,...xe.type==="group"?D(xe.id):[]]);return D()},[s]),qn=C.useMemo(()=>{if(!ae)return{canMoveUp:!1,canMoveDown:!1,canMergeDown:!1,canMergeUp:!1};const D=Nt.findIndex(sn=>sn.id===ae);if(D===-1)return{canMoveUp:!1,canMoveDown:!1,canMergeDown:!1,canMergeUp:!1};const F=D<Nt.length-1,xe=D>0;let Oe=!1,Xe=!1;const Ot=Nt[D];if(F){const sn=Nt[D+1];Ot.type==="object"&&sn.type==="object"&&Ot.parentId===sn.parentId&&(Oe=!0)}if(xe){const sn=Nt[D-1];Ot.type==="object"&&sn.type==="object"&&Ot.parentId===sn.parentId&&(Xe=!0)}return{canMoveUp:F,canMoveDown:xe,canMergeDown:Xe,canMergeUp:Oe}},[ae,Nt]),zi=C.useCallback((D,F)=>{const xe=Nt.findIndex(sn=>sn.id===D);if(xe===-1)return;const Oe=F==="up"?xe+1:xe-1;if(Oe<0||Oe>=Nt.length)return;const Xe=Nt[Oe],Ot=F==="up"?"bottom":"top";Se(D,Xe.id,Ot)},[Nt,Se]),Pi=C.useCallback(D=>{if(qn.canMergeDown){const F=Nt.findIndex(xe=>xe.id===D);Pt(D,Nt[F-1].id)}},[qn.canMergeDown,Nt,Pt]),Vr=C.useCallback(D=>{if(qn.canMergeUp){const F=Nt.findIndex(xe=>xe.id===D);Pt(Nt[F+1].id,D)}},[qn.canMergeUp,Nt,Pt]),Hr=C.useCallback(D=>{const F=`object-${Date.now()}`;t({type:"ADD_ITEM",payload:{type:"object",activeItemId:D,canvasSize:i,newItemId:F}}),h([F])},[i,t]),Or=C.useCallback(D=>{const F=`object-${Date.now()}`;t({type:"ADD_ITEM_BELOW",payload:{targetId:D,canvasSize:i,newItemId:F}}),h([F])},[i,t]),Bi=C.useMemo(()=>{if(i.width>0&&r>0){const D=i.width/r,F=i.height/r;let xe,Oe;switch(u){case"cm":xe=(D/10).toFixed(2),Oe=(F/10).toFixed(2);break;case"m":xe=(D/1e3).toFixed(3),Oe=(F/1e3).toFixed(3);break;default:xe=D.toFixed(1),Oe=F.toFixed(1);break}return`${i.width} x ${i.height}px    ${xe} x ${Oe}${u}`}return null},[i,r,u]),Fr=se(),Ao=s.find(D=>D.id===P.deletingItemId);return P.showSplash?a.jsx("div",{className:"w-screen h-screen bg-[--bg-primary] text-[--text-primary] flex items-center justify-center font-sans",children:a.jsxs("div",{className:"text-center p-8",children:[a.jsx("h1",{className:"text-5xl font-bold mb-4",children:"Sketcher"}),a.jsx("p",{className:"text-lg text-[--text-secondary] mb-10",children:"Tu lienzo creativo te espera."}),a.jsx("button",{onClick:P.handleStart,className:"px-10 py-4 bg-[--accent-primary] text-white font-bold text-lg rounded-lg shadow-lg hover:bg-[--accent-hover] transform hover:scale-105 transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-offset-2 focus:ring-offset-[--bg-primary] focus:ring-[--accent-primary]",children:"Comenzar a Dibujar"})]})}):a.jsxs("div",{className:"w-screen h-screen bg-[--bg-primary] text-[--text-primary] flex flex-col font-sans overflow-hidden",children:[P.isExportModalOpen&&a.jsx(gN,{isOpen:P.isExportModalOpen,onClose:()=>P.setExportModalOpen(!1),drawableObjects:Fr.filter(D=>D.type==="object"),canvasSize:i}),P.isSingleExportModalOpen&&a.jsx(yN,{isOpen:P.isSingleExportModalOpen,onClose:()=>P.setSingleExportModalOpen(!1),item:be,canvasSize:i,onSaveToLibrary:sl}),P.deletingItemId&&a.jsx(JN,{isOpen:!!P.deletingItemId,onCancel:()=>P.setDeletingItemId(null),onConfirm:Cn,itemName:(Ao==null?void 0:Ao.name)||"",itemType:(Ao==null?void 0:Ao.type)==="group"?"group":"object"}),Q.deletingLibraryItem&&a.jsx(KN,{isOpen:!!Q.deletingLibraryItem,onCancel:Q.onCancelDeleteLibraryItem,onConfirm:Q.onConfirmDeleteLibraryItem,itemToDelete:Q.deletingLibraryItem}),P.showClearConfirm&&a.jsx($N,{isOpen:P.showClearConfirm,onCancel:()=>P.setShowClearConfirm(!1),onConfirm:ll}),P.isCanvasSizeModalOpen&&a.jsx(XN,{isOpen:P.isCanvasSizeModalOpen,onClose:()=>P.setCanvasSizeModalOpen(!1),currentSize:i,onApply:(D,F)=>{t({type:"RESIZE_CANVAS",payload:{width:D,height:F}}),P.setCanvasSizeModalOpen(!1),setTimeout(pe.onZoomExtents,100)}}),P.isResetConfirmOpen&&a.jsx(ZN,{isOpen:P.isResetConfirmOpen,onCancel:()=>P.setIsResetConfirmOpen(!1),onConfirm:()=>{console.log("Resetting preferences..."),P.setIsResetConfirmOpen(!1)}}),Q.imageToEdit&&a.jsx(hN,{item:Q.imageToEdit,onApply:Q.onApplyTransparency,onCancel:Q.onCancelEditTransparency}),x&&S!==null&&a.jsx(FN,{isOpen:x,onClose:()=>{v(!1),N(null)},onSelectTool:D=>Ue.updateTool(S,D),fxPresets:q.brushPresets}),a.jsx(nA,{isOpen:P.isProjectGalleryOpen,onClose:()=>P.setProjectGalleryOpen(!1),user:M,projects:He.projects,isLoading:He.projectsLoading,onSave:D=>He.saveProject(D,()=>({currentState:n,guides:X,toolSettings:{...q},quickAccess:Ue.quickAccessSettings})),onLoad:He.loadProject,onDelete:He.deleteProject,onSaveLocally:D=>He.saveLocally(D,()=>({currentState:n,guides:X,toolSettings:{...q},quickAccess:Ue.quickAccessSettings})),onLoadFromFile:He.loadFromFile}),a.jsxs("header",{className:"flex-shrink-0 flex items-center justify-between p-2 bg-[--bg-primary] border-b border-[--bg-tertiary] z-20",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("h1",{className:"text-xl font-bold",children:"Sketcher"}),a.jsxs("button",{onClick:()=>P.setProjectGalleryOpen(!0),className:"flex items-center gap-2 p-2 rounded-md bg-[--bg-secondary] hover:bg-[--bg-tertiary] border border-[--bg-tertiary] transition-colors text-sm",children:[a.jsx(Bw,{className:"w-5 h-5"}),a.jsx("span",{children:"Galera"})]}),a.jsxs("button",{ref:ve,onClick:()=>ue(D=>!D),className:"flex items-center gap-2 p-2 rounded-md bg-[--bg-secondary] hover:bg-[--bg-tertiary] border border-[--bg-tertiary] transition-colors text-sm relative",children:[a.jsx(h0,{className:"w-5 h-5"}),a.jsx("span",{children:"Plantillas"}),a.jsx(YN,{isOpen:oe,onClose:()=>ue(!1),templates:ie.templates,onSave:B,onLoad:K,onDelete:ie.deleteTemplate,onResetPreferences:()=>P.setIsResetConfirmOpen(!0)})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:()=>T(E==="dark"?"light":"dark"),className:"p-2 rounded-md bg-[--bg-secondary] hover:bg-[--bg-tertiary] text-[--text-secondary]",children:E==="dark"?a.jsx(Mw,{className:"w-5 h-5"}):a.jsx(Rw,{className:"w-5 h-5"})}),a.jsx(xN,{user:M})]})]}),a.jsxs("div",{className:"flex flex-grow min-h-0 relative",children:[a.jsx(Jw,{tool:p,setTool:m,...q,brushPresets:q.brushPresets,onSavePreset:q.onSavePreset,onUpdatePreset:q.onUpdatePreset,onLoadPreset:q.onLoadPreset,onDeletePreset:q.onDeletePreset,activeGuide:X.activeGuide,setActiveGuide:X.onSetActiveGuide,isOrthogonalVisible:X.isOrthogonalVisible,onToggleOrthogonal:X.toggleOrthogonal,onExportClick:()=>P.setExportModalOpen(!0),onEnhance:D=>Te.handleEnhance(D,i,se,me),isEnhancing:Te.isEnhancing,enhancementPreview:Te.enhancementPreview,onGenerateEnhancementPreview:()=>Te.generateEnhancementPreview(i,se,me),objects:s,libraryItems:Q.libraryItems,backgroundDataUrl:Te.backgroundDataUrl,debugInfo:Te.debugInfo,strokeMode:L,setStrokeMode:A,strokeModifier:w,setStrokeModifier:j}),a.jsxs("main",{ref:g,className:"flex-grow relative",onDrop:D=>{D.preventDefault();try{const F=JSON.parse(D.dataTransfer.getData("application/json"));F.type==="library-item"&&tt(F,ae,h)}catch{}},onDragOver:D=>{D.preventDefault(),D.dataTransfer.dropEffect="copy"},children:[a.jsx(fN,{items:Fr,activeItemId:ae,...q,tool:p,setTool:m,onDrawCommit:Ae,onUpdateItem:Le,viewTransform:pe.viewTransform,setViewTransform:pe.setViewTransform,onSelectItem:Ee,...X,isCropping:xt,cropRect:Ye,setCropRect:de,isTransforming:je,transformState:Pe,setTransformState:Qe,transformSourceBbox:bt,isAspectRatioLocked:It,strokeMode:L,strokeState:b,setStrokeState:I,strokeModifier:w,selection:_,setSelection:R,onCutSelection:qr,onCopySelection:Ml,onDeleteSelection:No,onDeselect:wo,getMinZoom:he,MAX_ZOOM:g0,isAngleSnapEnabled:bn,angleSnapValue:Dn,onAddItem:ge,textEditState:z,setTextEditState:U,onCommitText:Kt,strokeSmoothing:G}),a.jsx("div",{className:"absolute top-2 left-2 flex items-center gap-2 z-10",children:Bi&&a.jsx("button",{ref:at,onClick:()=>ze(D=>!D),className:"bg-[--bg-primary]/80 backdrop-blur-sm text-[--text-secondary] text-xs rounded-md px-2 py-1 pointer-events-auto hover:bg-[--bg-secondary] transition-colors",title:"Ajustar escala del lienzo",children:Bi})}),a.jsx("button",{onClick:P.handleToggleFullscreen,className:"absolute top-2 right-2 p-2 rounded-md bg-[--bg-primary]/80 backdrop-blur-sm hover:bg-[--bg-secondary] text-[--text-primary] transition-colors z-10",title:P.isFullscreen?"Salir de Pantalla Completa":"Entrar en Pantalla Completa",children:P.isFullscreen?a.jsx(Gw,{className:"w-5 h-5"}):a.jsx(qw,{className:"w-5 h-5"})}),a.jsx(oA,{isOpen:Ce,onClose:()=>ze(!1),anchorEl:at.current,scaleFactor:r,scaleUnit:u,onSetScaleFactor:te,onSetScaleUnit:$}),a.jsx(mN,{tool:p,setTool:m,onZoomExtents:pe.onZoomExtents,onZoomIn:pe.onZoomIn,onZoomOut:pe.onZoomOut,onUndo:ye,onRedo:O,onClearAll:()=>P.setShowClearConfirm(!0),canUndo:nt,canRedo:ot,isCropping:xt,onApplyCrop:Bn,onCancelCrop:To,isTransforming:je,transformState:Pe,onApplyTransform:ln,onCancelTransform:Is,isAspectRatioLocked:It,onSetAspectRatioLocked:zt,isAngleSnapEnabled:bn,onToggleAngleSnap:()=>Zn(D=>!D),angleSnapValue:Dn,onSetAngleSnapValue:re,onSetActiveGuide:X.onSetActiveGuide,onSetGridType:X.setGridType,isSnapToGridEnabled:X.isSnapToGridEnabled,onToggleSnapToGrid:X.toggleSnapToGrid,isOrthogonalVisible:X.isOrthogonalVisible,activeGuide:X.activeGuide,orthogonalGuide:X.orthogonalGuide,onSetOrthogonalAngle:X.onSetOrthogonalAngle,gridGuide:X.gridGuide,onSetGridSpacing:X.onSetGridSpacing,onSetGridMajorLineFrequency:X.onSetGridMajorLineFrequency,onSetGridIsoAngle:X.onSetGridIsoAngle,onSetGridMajorLineColor:X.onSetGridMajorLineColor,onSetGridMinorLineColor:X.onSetGridMinorLineColor,areGuidesLocked:X.areGuidesLocked,onSetAreGuidesLocked:X.setAreGuidesLocked,isPerspectiveStrokeLockEnabled:X.isPerspectiveStrokeLockEnabled,onSetIsPerspectiveStrokeLockEnabled:X.setIsPerspectiveStrokeLockEnabled,scaleFactor:n.scaleFactor,scaleUnit:n.scaleUnit,onPaste:Gr,hasClipboardContent:!!H,strokeSmoothing:G,setStrokeSmoothing:J}),a.jsx(HN,{settings:Ue.quickAccessSettings,onUpdateColor:Ue.updateColor,onAddColor:Ue.addColor,onRemoveColor:Ue.removeColor,onUpdateSize:Ue.updateSize,onUpdateTool:()=>{},onSelectColor:Je,onSelectSize:fe,onSelectTool:D=>{D.type==="tool"?m(D.tool):D.type==="fx-preset"&&(m("fx-brush"),q.onLoadPreset(D.id))},onOpenToolSelector:D=>{v(!0),N(D)},activeTool:p,activeColor:De,activeSize:ut})]}),P.isRightSidebarVisible&&a.jsxs("aside",{ref:P.rightSidebarRef,className:`flex-shrink-0 w-80 border-l border-[--bg-tertiary] flex flex-col ${Re?"z-50":""}`,children:[a.jsx("div",{style:{height:P.rightSidebarTopHeight},className:"flex-shrink-0",children:a.jsx(Xw,{items:s,activeItemId:ae,onAddItem:ge,onCopyItem:ne,onDeleteItem:we,onSelectItem:Ee,onUpdateItem:Le,onMoveItem:Se,onMergeItems:Pt,onUpdateBackground:Ge,onRemoveBackgroundImage:dt,onExportItem:()=>{be&&P.setSingleExportModalOpen(!0)},onOpenCanvasSizeModal:()=>P.setCanvasSizeModalOpen(!0),activeItemState:qn,onMoveItemUpDown:zi,onMergeItemDown:Pi,onMergeItemUp:Vr,onAddObjectAbove:Hr,onAddObjectBelow:Or})}),a.jsx("div",{onPointerDown:P.handlePointerDownResize,className:"flex-shrink-0 h-1.5 bg-[--bg-secondary] hover:bg-[--accent-primary] transition-colors cursor-ns-resize"}),a.jsx("div",{className:"flex-grow min-h-0",children:a.jsx(pN,{user:M,items:Q.libraryItems,onImportImage:Q.onImportToLibrary,onCreateFolder:Q.onCreateFolder,onEditItem:Q.onEditTransparency,onDeleteItem:Q.onDeleteLibraryItem,onAddItemToScene:D=>tt({type:"library-item",id:D},ae,h),onMoveItems:Q.onMoveItems})})]}),a.jsx("button",{onClick:()=>P.setIsRightSidebarVisible(!P.isRightSidebarVisible),className:"absolute top-1/2 -translate-y-1/2 bg-[--bg-secondary] p-2 rounded-full shadow-xl z-40 border border-[--bg-tertiary] hover:bg-[--bg-tertiary] transition-all",style:{right:P.isRightSidebarVisible?"20.25rem":"0.25rem"},title:P.isRightSidebarVisible?"Ocultar paneles":"Mostrar paneles",children:P.isRightSidebarVisible?a.jsx(u0,{className:"w-5 h-5"}):a.jsx(Dw,{className:"w-5 h-5"})})]})]})}const nA=({isOpen:e,onClose:t,user:n,projects:o,isLoading:l,onSave:s,onLoad:i,onDelete:r,onSaveLocally:u,onLoadFromFile:f})=>{const[h,p]=C.useState(""),[m,g]=C.useState(!1),[E,T]=C.useState(null),M=C.useRef(null),[y,x]=C.useState(!1),[v,S]=C.useState("mi-boceto"),N=C.useRef(null);C.useEffect(()=>{e&&(p(""),g(!1),T(null),x(!1))},[e]);const L=()=>{x(!0),setTimeout(()=>{var R,H;(R=N.current)==null||R.focus(),(H=N.current)==null||H.select()},0)},A=async()=>{if(v.trim())try{await u(v.trim()),x(!1)}catch(R){console.error("Failed to save project locally:",R),alert(`Error al guardar el proyecto localmente: ${R instanceof Error?R.message:String(R)}`)}},b=()=>x(!1),I=async()=>{if(!h.trim()){alert("Please enter a project name.");return}g(!0);try{await s(h.trim()),p("")}catch(R){console.error("Failed to save project:",R),alert(`Error saving project: ${R instanceof Error?R.message:String(R)}`)}finally{g(!1)}},w=async()=>{E&&(await r(E),T(null))},j=()=>{var R;return(R=M.current)==null?void 0:R.click()},_=async R=>{var H;(H=R.target.files)!=null&&H[0]&&await f(R.target.files[0]),R.target&&(R.target.value="")};return e?a.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:[a.jsxs("div",{className:"bg-[--bg-secondary] text-[--text-primary] rounded-lg shadow-xl p-6 w-full max-w-4xl h-full max-h-[90vh] flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4 flex-shrink-0",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Galera de Proyectos"}),y?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{ref:N,type:"text",value:v,onChange:R=>S(R.target.value),onKeyDown:R=>{R.key==="Enter"&&A(),R.key==="Escape"&&b()},placeholder:"Nombre del archivo...",className:"bg-[--bg-secondary] text-[--text-primary] text-sm rounded-md p-2 border border-[--bg-tertiary] focus:ring-1 focus:ring-[--accent-primary] focus:outline-none"}),a.jsx("button",{onClick:A,className:"px-4 py-2 rounded-md bg-[--accent-primary] hover:bg-[--accent-hover] text-white font-semibold",children:"Guardar"}),a.jsx("button",{onClick:b,className:"px-4 py-2 rounded-md bg-[--bg-tertiary] hover:bg-[--bg-hover]",children:"Cancelar"})]}):a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"file",ref:M,className:"hidden",accept:".sketcher,application/json",onChange:_}),a.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-4 py-2 rounded-md bg-[--bg-tertiary] hover:bg-[--bg-hover] font-semibold",children:[" ",a.jsx(Pw,{className:"w-5 h-5"})," ",a.jsx("span",{children:"Cargar desde Archivo"})," "]}),a.jsxs("button",{onClick:L,className:"flex items-center gap-2 px-4 py-2 rounded-md bg-[--bg-tertiary] hover:bg-[--bg-hover] font-semibold",children:[" ",a.jsx(zw,{className:"w-5 h-5"})," ",a.jsx("span",{children:"Guardar Local"})," "]}),a.jsxs("button",{onClick:t,className:"p-2 rounded-full hover:bg-[--bg-tertiary]",children:[" ",a.jsx(Xn,{className:"w-6 h-6"})," "]})]})]}),n?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-[--bg-primary] p-4 rounded-lg mb-4 flex-shrink-0",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Guardar Lienzo Actual"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"text",value:h,onChange:R=>p(R.target.value),placeholder:"Nombre del nuevo proyecto...",className:"flex-grow bg-[--bg-secondary] text-[--text-primary] text-sm rounded-md p-2 border border-[--bg-tertiary] focus:ring-1 focus:ring-[--accent-primary] focus:outline-none",disabled:m}),a.jsxs("button",{onClick:I,disabled:!h.trim()||m||!n,className:"px-4 py-2 rounded-md bg-[--accent-primary] hover:bg-[--accent-hover] text-white font-semibold disabled:bg-gray-500 disabled:cursor-not-allowed",title:n?"":"Inicie sesin para guardar en la nube",children:[" ",m?"Guardando...":"Guardar en la Nube"," "]})]})]}),a.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:l?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("div",{className:"w-8 h-8 border-4 border-[--accent-primary] border-t-transparent rounded-full animate-spin"})}):o.length===0?a.jsxs("div",{className:"text-center text-[--text-secondary] py-16",children:[" ",a.jsx("p",{children:"No se encontraron proyectos guardados."})," ",a.jsx("p",{className:"text-sm",children:"Guarda tu lienzo actual para empezar!"})," "]}):a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:o.map(R=>a.jsxs("div",{className:"group relative bg-[--bg-tertiary] rounded-lg overflow-hidden shadow-md",children:[a.jsx("div",{className:"aspect-video bg-white/10 flex items-center justify-center",children:a.jsx("img",{src:R.thumbnailUrl,alt:R.name,className:"w-full h-full object-cover"})}),a.jsx("div",{className:"p-2",children:a.jsx("p",{className:"font-semibold text-sm truncate",children:R.name})}),a.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center gap-2",children:[a.jsx("button",{onClick:()=>i(R),className:"px-4 py-2 rounded-md bg-blue-600 hover:bg-blue-500 text-white w-3/4",children:"Cargar"}),a.jsx("button",{onClick:()=>T(R),className:"px-4 py-2 rounded-md bg-red-600 hover:bg-red-500 text-white w-3/4",children:"Eliminar"})]})]},R.id))})})]}):a.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center text-center text-[--text-secondary]",children:[" ",a.jsx(d0,{className:"w-16 h-16 mb-4"})," ",a.jsx("h3",{className:"text-xl font-bold",children:"Por favor, inicie sesin"})," ",a.jsx("p",{children:"Inicie sesin para guardar y cargar sus proyectos en la nube."})," "]})]}),E&&a.jsxs("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center",children:[" ",a.jsxs("div",{className:"bg-[--bg-secondary] rounded-lg p-6 shadow-xl",children:[" ",a.jsx("h3",{className:"text-lg font-bold",children:"Confirmar Eliminacin"})," ",a.jsxs("p",{className:"my-2 text-[--text-secondary]",children:['Ests seguro de que quieres eliminar "',E.name,'"? Esta accin no se puede deshacer.']})," ",a.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[" ",a.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 rounded-md bg-[--bg-tertiary] hover:bg-[--bg-hover]",children:"Cancelar"})," ",a.jsx("button",{onClick:w,className:"px-4 py-2 rounded-md bg-red-600 hover:bg-red-500 text-white",children:"Eliminar"})," "]})," "]})," "]})]}):null},oA=({isOpen:e,onClose:t,anchorEl:n,scaleFactor:o,scaleUnit:l,onSetScaleFactor:s,onSetScaleUnit:i})=>{const[r,u]=C.useState(""),f=C.useRef(null),h={mm:1,cm:10,m:1e3};C.useEffect(()=>{u(Number((o*h[l]).toFixed(2)).toString())},[o,l,h]),C.useEffect(()=>{const T=M=>{f.current&&!f.current.contains(M.target)&&n&&!n.contains(M.target)&&t()};return e&&document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},[e,t,n]);const p=(T,M)=>{const y=parseFloat(T);!isNaN(y)&&y>0&&s(y/h[M])},m=T=>{const M=T.target.value;u(M),p(M,l)},g=T=>{i(T)};if(!e||!n)return null;const E=n.getBoundingClientRect();return a.jsxs("div",{ref:f,className:"absolute z-20 bg-[--bg-primary] border border-[--bg-tertiary] rounded-lg shadow-lg p-3 space-y-3",style:{top:E.bottom+8,left:E.left},children:[a.jsx("p",{className:"text-xs font-bold text-[--text-secondary]",children:"Ajustes de Escala"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm",children:"1"}),a.jsxs("select",{value:l,onChange:T=>g(T.target.value),className:"bg-[--bg-tertiary] text-sm rounded-md p-1 border border-[--bg-hover]",children:[" ",a.jsx("option",{value:"mm",children:"mm"})," ",a.jsx("option",{value:"cm",children:"cm"})," ",a.jsx("option",{value:"m",children:"m"})," "]}),a.jsx("span",{className:"text-sm",children:"="}),a.jsx("input",{type:"number",value:r,onChange:m,className:"w-24 bg-[--bg-secondary] text-sm rounded-md p-1 border border-[--bg-tertiary]"}),a.jsx("span",{className:"text-sm",children:"px"})]})]})};try{L0(()=>import("./virtual_pwa-register-e2e7d4d8.js"),[]).then(({registerSW:e})=>{typeof e=="function"&&e()}).catch(()=>{})}catch{}const y0=document.getElementById("root");if(!y0)throw new Error("Could not find root element to mount to");const lA=k1.createRoot(y0);lA.render(a.jsx(Um.StrictMode,{children:a.jsx(tA,{})}));export{L0 as _};
